LavaPack.loadBundle([[100,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getDelegationControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"DelegationControllerInit",parent:e});return e.delegate({messenger:t,events:["TransactionController:transactionStatusUpdated"]}),t},r.getDelegationControllerMessenger=function(e){const t=new n.Messenger({namespace:"DelegationController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getSelectedAccount","KeyringController:signTypedMessage"],events:["TransactionController:transactionStatusUpdated"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/delegation/delegation-controller-messenger.ts"}],[1e3,{"./loadConfig":999,"@ledgerhq/logs":1006,axios:4013},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.loadNftPlugin=r.getNFTInfo=void 0;const o=s(e("axios")),i=e("./loadConfig"),a=e("@ledgerhq/logs");r.getNFTInfo=(e,t,r)=>n(void 0,void 0,void 0,function*(){var n;const{nftExplorerBaseURL:s}=(0,i.getLoadConfig)(r);if(!s)return;const l=`${s}/${t}/contracts/${e}`,c=yield o.default.get(l).then(e=>e.data).catch(e=>((0,a.log)("error","could not fetch from "+l+": "+String(e)),null));if(!c)return;const u=c.payload,d=parseInt(u.slice(4,6),16),g=null===(n=u.substr(6,2*d).match(/.{2}/g))||void 0===n?void 0:n.reduce((e,t)=>e+String.fromCharCode(parseInt(t,16)),"");return{contractAddress:e,collectionName:g||"",data:u}});r.loadNftPlugin=(e,t,r,s)=>n(void 0,void 0,void 0,function*(){const{nftExplorerBaseURL:n}=(0,i.getLoadConfig)(s);if(!n)return;const l=`${n}/${r}/contracts/${e}/plugin-selector/${t}`,c=yield o.default.get(l).then(e=>e.data).catch(e=>((0,a.log)("error","could not fetch from "+l+": "+String(e)),null));if(!c)return;return c.payload})}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth",file:"node_modules/@ledgerhq/hw-app-eth/lib/services/ledger/nfts.js"}],[1001,{"@ethersproject/rlp":831,"@ledgerhq/evm-tools/lib/selectors/index":987,"bignumber.js":1002,buffer:4137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.safeChunkTransaction=r.getV=r.getChainIdAsUint32=r.getParity=r.mergeResolutions=r.nftSelectors=r.tokenSelectors=r.intAsHexBytes=r.maybeHexBuffer=r.hexBuffer=r.splitPath=r.padHexString=r.ERC1155_CLEAR_SIGNED_SELECTORS=r.ERC721_CLEAR_SIGNED_SELECTORS=r.ERC20_CLEAR_SIGNED_SELECTORS=void 0;const i=e("bignumber.js"),a=o(e("@ethersproject/rlp")),l=e("@ledgerhq/evm-tools/lib/selectors/index");Object.defineProperty(r,"ERC20_CLEAR_SIGNED_SELECTORS",{enumerable:!0,get:function(){return l.ERC20_CLEAR_SIGNED_SELECTORS}}),Object.defineProperty(r,"ERC721_CLEAR_SIGNED_SELECTORS",{enumerable:!0,get:function(){return l.ERC721_CLEAR_SIGNED_SELECTORS}}),Object.defineProperty(r,"ERC1155_CLEAR_SIGNED_SELECTORS",{enumerable:!0,get:function(){return l.ERC1155_CLEAR_SIGNED_SELECTORS}});function c(e){if(!e)return t.alloc(0);const n=e.startsWith("0x")?e.slice(2):e;return t.from((0,r.padHexString)(n),"hex")}r.padHexString=e=>e.length%2?"0"+e:e,r.splitPath=function(e){const t=[];return e.split("/").forEach(e=>{let r=parseInt(e,10);isNaN(r)||(e.length>1&&"'"===e[e.length-1]&&(r+=2147483648),t.push(r))}),t},r.hexBuffer=c,r.maybeHexBuffer=function(e){return e?c(e):null};r.intAsHexBytes=(e,t)=>e.toString(16).padStart(2*t,"0"),r.tokenSelectors=Object.values(l.ERC20_CLEAR_SIGNED_SELECTORS),r.nftSelectors=[...Object.values(l.ERC721_CLEAR_SIGNED_SELECTORS),...Object.values(l.ERC1155_CLEAR_SIGNED_SELECTORS)];r.mergeResolutions=e=>{const t={nfts:[],erc20Tokens:[],externalPlugin:[],plugin:[],domains:[]};for(const r of e)for(const e in r)t[e].push(...r[e]);return t};r.getParity=(e,t,n)=>{if(n)return e;const s=2*(0,r.getChainIdAsUint32)(t)+35;if(s%256===e)return 0;if((s+1)%256===e)return 1;throw new Error("Invalid v value")};r.getChainIdAsUint32=e=>{const n=t.from((0,r.padHexString)(new i.BigNumber(e).toString(16)),"hex").subarray(0,4);return parseInt(n.toString("hex"),16)};r.getV=(e,t,n)=>{if(t.isZero())return e.toString(16);const s=(0,r.getParity)(e,t,n);return n?(0,r.padHexString)(s.toString(16)):(0,r.padHexString)(t.times(2).plus(35).plus(s).toString(16))};r.safeChunkTransaction=(e,r,n)=>{const s=255,o=t.concat([r,e]);if(o.length<=s)return[o];if(n){const e=Math.ceil(o.length/s);return new Array(e).fill(null).map((e,t)=>o.subarray(t*s,(t+1)*s))}const i=a.decode(e).slice(-3),l=c(a.encode(i)).subarray(1);let u=0;const d=o.length%s;if(0===d||d>l.length)u=s;else for(let e=1;e<=s;e++){const t=o.length%(s-e);if(0===t||t>l.length){u=s-e;break}}const g=Math.ceil(o.length/u);return new Array(g).fill(null).map((e,t)=>o.subarray(t*u,(t+1)*u))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth",file:"node_modules/@ledgerhq/hw-app-eth/lib/utils.js"}],[1002,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){!function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,o=Math.floor,i="[BigNumber Error] ",a=i+"Number primitive has more than 15 significant digits: ",l=1e14,c=14,u=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],g=1e7,p=1e9;function h(e){var t=0|e;return e>0||e===t?t:t-1}function m(e){for(var t,r,n=1,s=e.length,o=e[0]+"";n<s;){for(t=e[n++]+"",r=c-t.length;r--;t="0"+t);o+=t}for(s=o.length;48===o.charCodeAt(--s););return o.slice(0,s+1||1)}function f(e,t){var r,n,s=e.c,o=t.c,i=e.s,a=t.s,l=e.e,c=t.e;if(!i||!a)return null;if(r=s&&!s[0],n=o&&!o[0],r||n)return r?n?0:-a:i;if(i!=a)return i;if(r=i<0,n=l==c,!s||!o)return n?0:!s^r?1:-1;if(!n)return l>c^r?1:-1;for(a=(l=s.length)<(c=o.length)?l:c,i=0;i<a;i++)if(s[i]!=o[i])return s[i]>o[i]^r?1:-1;return l==c?0:l>c^r?1:-1}function C(e,t,r,n){if(e<t||e>r||e!==o(e))throw Error(i+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function b(e){var t=e.c.length-1;return h(e.e/c)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function v(e,t,r){var n,s;if(t<0){for(s=r+".";++t;s+=r);e=s+e}else if(++t>(n=e.length)){for(s=r,t-=n;--t;s+=r);e+=s}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var r,y,S,M,k,I,T,E,A,P,_=H.prototype={constructor:H,toString:null,valueOf:null},O=new H(1),N=20,R=4,D=-7,j=21,L=-1e7,B=1e7,x=!1,F=1,U=0,$={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},G="0123456789abcdefghijklmnopqrstuvwxyz",K=!0;function H(e,t){var r,s,i,l,d,g,p,h,m=this;if(!(m instanceof H))return new H(e,t);if(null==t){if(e&&!0===e._isBigNumber)return m.s=e.s,void(!e.c||e.e>B?m.c=m.e=null:e.e<L?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice()));if((g="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(l=0,d=e;d>=10;d/=10,l++);return void(l>B?m.c=m.e=null:(m.e=l,m.c=[e]))}h=String(e)}else{if(!n.test(h=String(e)))return S(m,h,g);m.s=45==h.charCodeAt(0)?(h=h.slice(1),-1):1}(l=h.indexOf("."))>-1&&(h=h.replace(".","")),(d=h.search(/e/i))>0?(l<0&&(l=d),l+=+h.slice(d+1),h=h.substring(0,d)):l<0&&(l=h.length)}else{if(C(t,2,G.length,"Base"),10==t&&K)return z(m=new H(e),N+m.e+1,R);if(h=String(e),g="number"==typeof e){if(0*e!=0)return S(m,h,g,t);if(m.s=1/e<0?(h=h.slice(1),-1):1,H.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(a+e)}else m.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;for(r=G.slice(0,t),l=d=0,p=h.length;d<p;d++)if(r.indexOf(s=h.charAt(d))<0){if("."==s){if(d>l){l=p;continue}}else if(!i&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){i=!0,d=-1,l=0;continue}return S(m,String(e),g,t)}g=!1,(l=(h=y(h,t,10,m.s)).indexOf("."))>-1?h=h.replace(".",""):l=h.length}for(d=0;48===h.charCodeAt(d);d++);for(p=h.length;48===h.charCodeAt(--p););if(h=h.slice(d,++p)){if(p-=d,g&&H.DEBUG&&p>15&&(e>u||e!==o(e)))throw Error(a+m.s*e);if((l=l-d-1)>B)m.c=m.e=null;else if(l<L)m.c=[m.e=0];else{if(m.e=l,m.c=[],d=(l+1)%c,l<0&&(d+=c),d<p){for(d&&m.c.push(+h.slice(0,d)),p-=c;d<p;)m.c.push(+h.slice(d,d+=c));d=c-(h=h.slice(d)).length}else d-=p;for(;d--;h+="0");m.c.push(+h)}}else m.c=[m.e=0]}function W(e,t,r,n){var s,o,i,a,l;if(null==r?r=R:C(r,0,8),!e.c)return e.toString();if(s=e.c[0],i=e.e,null==t)l=m(e.c),l=1==n||2==n&&(i<=D||i>=j)?w(l,i):v(l,i,"0");else if(o=(e=z(new H(e),t,r)).e,a=(l=m(e.c)).length,1==n||2==n&&(t<=o||o<=D)){for(;a<t;l+="0",a++);l=w(l,o)}else if(t-=i,l=v(l,o,"0"),o+1>a){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=o-a)>0)for(o+1==a&&(l+=".");t--;l+="0");return e.s<0&&s?"-"+l:l}function q(e,t){for(var r,n,s=1,o=new H(e[0]);s<e.length;s++)(!(n=new H(e[s])).s||(r=f(o,n))===t||0===r&&o.s===t)&&(o=n);return o}function V(e,t,r){for(var n=1,s=t.length;!t[--s];t.pop());for(s=t[0];s>=10;s/=10,n++);return(r=n+r*c-1)>B?e.c=e.e=null:r<L?e.c=[e.e=0]:(e.e=r,e.c=t),e}function z(e,t,r,n){var i,a,u,g,p,h,m,f=e.c,C=d;if(f){e:{for(i=1,g=f[0];g>=10;g/=10,i++);if((a=t-i)<0)a+=c,u=t,p=f[h=0],m=o(p/C[i-u-1]%10);else if((h=s((a+1)/c))>=f.length){if(!n)break e;for(;f.length<=h;f.push(0));p=m=0,i=1,u=(a%=c)-c+1}else{for(p=g=f[h],i=1;g>=10;g/=10,i++);m=(u=(a%=c)-c+i)<0?0:o(p/C[i-u-1]%10)}if(n=n||t<0||null!=f[h+1]||(u<0?p:p%C[i-u-1]),n=r<4?(m||n)&&(0==r||r==(e.s<0?3:2)):m>5||5==m&&(4==r||n||6==r&&(a>0?u>0?p/C[i-u]:0:f[h-1])%10&1||r==(e.s<0?8:7)),t<1||!f[0])return f.length=0,n?(t-=e.e+1,f[0]=C[(c-t%c)%c],e.e=-t||0):f[0]=e.e=0,e;if(0==a?(f.length=h,g=1,h--):(f.length=h+1,g=C[c-a],f[h]=u>0?o(p/C[i-u]%C[u])*g:0),n)for(;;){if(0==h){for(a=1,u=f[0];u>=10;u/=10,a++);for(u=f[0]+=g,g=1;u>=10;u/=10,g++);a!=g&&(e.e++,f[0]==l&&(f[0]=1));break}if(f[h]+=g,f[h]!=l)break;f[h--]=0,g=1}for(a=f.length;0===f[--a];f.pop());}e.e>B?e.c=e.e=null:e.e<L&&(e.c=[e.e=0])}return e}function Y(e){var t,r=e.e;return null===r?e.toString():(t=m(e.c),t=r<=D||r>=j?w(t,r):v(t,r,"0"),e.s<0?"-"+t:t)}return H.clone=e,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(i+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(C(r=e[t],0,p,t),N=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(C(r=e[t],0,8,t),R=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(C(r[0],-p,0,t),C(r[1],0,p,t),D=r[0],j=r[1]):(C(r,-p,p,t),D=-(j=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)C(r[0],-p,-1,t),C(r[1],1,p,t),L=r[0],B=r[1];else{if(C(r,-p,p,t),!r)throw Error(i+t+" cannot be zero: "+r);L=-(B=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(i+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw x=!r,Error(i+"crypto unavailable");x=r}else x=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(C(r=e[t],0,9,t),F=r),e.hasOwnProperty(t="POW_PRECISION")&&(C(r=e[t],0,p,t),U=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(i+t+" not an object: "+r);$=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(i+t+" invalid: "+r);K="0123456789"==r.slice(0,10),G=r}}return{DECIMAL_PLACES:N,ROUNDING_MODE:R,EXPONENTIAL_AT:[D,j],RANGE:[L,B],CRYPTO:x,MODULO_MODE:F,POW_PRECISION:U,FORMAT:$,ALPHABET:G}},H.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!H.DEBUG)return!0;var t,r,n=e.c,s=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===a||-1===a)&&s>=-p&&s<=p&&s===o(s)){if(0===n[0]){if(0===s&&1===n.length)return!0;break e}if((t=(s+1)%c)<1&&(t+=c),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=l||r!==o(r))break e;if(0!==r)return!0}}}else if(null===n&&null===s&&(null===a||1===a||-1===a))return!0;throw Error(i+"Invalid BigNumber: "+e)},H.maximum=H.max=function(){return q(arguments,-1)},H.minimum=H.min=function(){return q(arguments,1)},H.random=(M=9007199254740992,k=Math.random()*M&2097151?function(){return o(Math.random()*M)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,a,l,u=0,g=[],h=new H(O);if(null==e?e=N:C(e,0,p),a=s(e/c),x)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));u<a;)(l=131072*t[u]+(t[u+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[u]=r[0],t[u+1]=r[1]):(g.push(l%1e14),u+=2);u=a/2}else{if(!crypto.randomBytes)throw x=!1,Error(i+"crypto unavailable");for(t=crypto.randomBytes(a*=7);u<a;)(l=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(g.push(l%1e14),u+=7);u=a/7}if(!x)for(;u<a;)(l=k())<9e15&&(g[u++]=l%1e14);for(a=g[--u],e%=c,a&&e&&(l=d[c-e],g[u]=o(a/l)*l);0===g[u];g.pop(),u--);if(u<0)g=[n=0];else{for(n=-1;0===g[0];g.splice(0,1),n-=c);for(u=1,l=g[0];l>=10;l/=10,u++);u<c&&(n-=c-u)}return h.e=n,h.c=g,h}),H.sum=function(){for(var e=1,t=arguments,r=new H(t[0]);e<t.length;)r=r.plus(t[e++]);return r},y=function(){var e="0123456789";function t(e,t,r,n){for(var s,o,i=[0],a=0,l=e.length;a<l;){for(o=i.length;o--;i[o]*=t);for(i[0]+=n.indexOf(e.charAt(a++)),s=0;s<i.length;s++)i[s]>r-1&&(null==i[s+1]&&(i[s+1]=0),i[s+1]+=i[s]/r|0,i[s]%=r)}return i.reverse()}return function(n,s,o,i,a){var l,c,u,d,g,p,h,f,C=n.indexOf("."),b=N,w=R;for(C>=0&&(d=U,U=0,n=n.replace(".",""),p=(f=new H(s)).pow(n.length-C),U=d,f.c=t(v(m(p.c),p.e,"0"),10,o,e),f.e=f.c.length),u=d=(h=t(n,s,o,a?(l=G,e):(l=e,G))).length;0==h[--d];h.pop());if(!h[0])return l.charAt(0);if(C<0?--u:(p.c=h,p.e=u,p.s=i,h=(p=r(p,f,b,w,o)).c,g=p.r,u=p.e),C=h[c=u+b+1],d=o/2,g=g||c<0||null!=h[c+1],g=w<4?(null!=C||g)&&(0==w||w==(p.s<0?3:2)):C>d||C==d&&(4==w||g||6==w&&1&h[c-1]||w==(p.s<0?8:7)),c<1||!h[0])n=g?v(l.charAt(1),-b,l.charAt(0)):l.charAt(0);else{if(h.length=c,g)for(--o;++h[--c]>o;)h[c]=0,c||(++u,h=[1].concat(h));for(d=h.length;!h[--d];);for(C=0,n="";C<=d;n+=l.charAt(h[C++]));n=v(n,u,l.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,s,o,i,a=0,l=e.length,c=t%g,u=t/g|0;for(e=e.slice();l--;)a=((s=c*(o=e[l]%g)+(n=u*o+(i=e[l]/g|0)*c)%g*g+a)/r|0)+(n/g|0)+u*i,e[l]=s%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var s,o;if(r!=n)o=r>n?1:-1;else for(s=o=0;s<r;s++)if(e[s]!=t[s]){o=e[s]>t[s]?1:-1;break}return o}function r(e,t,r,n){for(var s=0;r--;)e[r]-=s,s=e[r]<t[r]?1:0,e[r]=s*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,s,i,a,u){var d,g,p,m,f,C,b,w,v,y,S,M,k,I,T,E,A,P=n.s==s.s?1:-1,_=n.c,O=s.c;if(!(_&&_[0]&&O&&O[0]))return new H(n.s&&s.s&&(_?!O||_[0]!=O[0]:O)?_&&0==_[0]||!O?0*P:P/0:NaN);for(v=(w=new H(P)).c=[],P=i+(g=n.e-s.e)+1,u||(u=l,g=h(n.e/c)-h(s.e/c),P=P/c|0),p=0;O[p]==(_[p]||0);p++);if(O[p]>(_[p]||0)&&g--,P<0)v.push(1),m=!0;else{for(I=_.length,E=O.length,p=0,P+=2,(f=o(u/(O[0]+1)))>1&&(O=e(O,f,u),_=e(_,f,u),E=O.length,I=_.length),k=E,S=(y=_.slice(0,E)).length;S<E;y[S++]=0);A=O.slice(),A=[0].concat(A),T=O[0],O[1]>=u/2&&T++;do{if(f=0,(d=t(O,y,E,S))<0){if(M=y[0],E!=S&&(M=M*u+(y[1]||0)),(f=o(M/T))>1)for(f>=u&&(f=u-1),b=(C=e(O,f,u)).length,S=y.length;1==t(C,y,b,S);)f--,r(C,E<b?A:O,b,u),b=C.length,d=1;else 0==f&&(d=f=1),b=(C=O.slice()).length;if(b<S&&(C=[0].concat(C)),r(y,C,S,u),S=y.length,-1==d)for(;t(O,y,E,S)<1;)f++,r(y,E<S?A:O,S,u),S=y.length}else 0===d&&(f++,y=[0]);v[p++]=f,y[0]?y[S++]=_[k]||0:(y=[_[k]],S=1)}while((k++<I||null!=y[0])&&P--);m=null!=y[0],v[0]||v.splice(0,1)}if(u==l){for(p=1,P=v[0];P>=10;P/=10,p++);z(w,i+(w.e=p+g*c-1)+1,a,m)}else w.e=g,w.r=+m;return w}}(),I=/^(-?)0([xbo])(?=\w[\w.]*$)/i,T=/^([^.]+)\.$/,E=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,P=/^\s*\+(?=[\w.])|^\s+|\s+$/g,S=function(e,t,r,n){var s,o=r?t:t.replace(P,"");if(A.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!r&&(o=o.replace(I,function(e,t,r){return s="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=s?e:t}),n&&(s=n,o=o.replace(T,"$1").replace(E,"0.$1")),t!=o))return new H(o,s);if(H.DEBUG)throw Error(i+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},_.absoluteValue=_.abs=function(){var e=new H(this);return e.s<0&&(e.s=1),e},_.comparedTo=function(e,t){return f(this,new H(e,t))},_.decimalPlaces=_.dp=function(e,t){var r,n,s,o=this;if(null!=e)return C(e,0,p),null==t?t=R:C(t,0,8),z(new H(o),e+o.e+1,t);if(!(r=o.c))return null;if(n=((s=r.length-1)-h(this.e/c))*c,s=r[s])for(;s%10==0;s/=10,n--);return n<0&&(n=0),n},_.dividedBy=_.div=function(e,t){return r(this,new H(e,t),N,R)},_.dividedToIntegerBy=_.idiv=function(e,t){return r(this,new H(e,t),0,1)},_.exponentiatedBy=_.pow=function(e,t){var r,n,a,l,u,d,g,p,h=this;if((e=new H(e)).c&&!e.isInteger())throw Error(i+"Exponent not an integer: "+Y(e));if(null!=t&&(t=new H(t)),u=e.e>14,!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!e.c||!e.c[0])return p=new H(Math.pow(+Y(h),u?e.s*(2-b(e)):+Y(e))),t?p.mod(t):p;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new H(NaN);(n=!d&&h.isInteger()&&t.isInteger())&&(h=h.mod(t))}else{if(e.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||u&&h.c[1]>=24e7:h.c[0]<8e13||u&&h.c[0]<=9999975e7)))return l=h.s<0&&b(e)?-0:0,h.e>-1&&(l=1/l),new H(d?1/l:l);U&&(l=s(U/c+2))}for(u?(r=new H(.5),d&&(e.s=1),g=b(e)):g=(a=Math.abs(+Y(e)))%2,p=new H(O);;){if(g){if(!(p=p.times(h)).c)break;l?p.c.length>l&&(p.c.length=l):n&&(p=p.mod(t))}if(a){if(0===(a=o(a/2)))break;g=a%2}else if(z(e=e.times(r),e.e+1,1),e.e>14)g=b(e);else{if(0===(a=+Y(e)))break;g=a%2}h=h.times(h),l?h.c&&h.c.length>l&&(h.c.length=l):n&&(h=h.mod(t))}return n?p:(d&&(p=O.div(p)),t?p.mod(t):l?z(p,U,R,undefined):p)},_.integerValue=function(e){var t=new H(this);return null==e?e=R:C(e,0,8),z(t,t.e+1,e)},_.isEqualTo=_.eq=function(e,t){return 0===f(this,new H(e,t))},_.isFinite=function(){return!!this.c},_.isGreaterThan=_.gt=function(e,t){return f(this,new H(e,t))>0},_.isGreaterThanOrEqualTo=_.gte=function(e,t){return 1===(t=f(this,new H(e,t)))||0===t},_.isInteger=function(){return!!this.c&&h(this.e/c)>this.c.length-2},_.isLessThan=_.lt=function(e,t){return f(this,new H(e,t))<0},_.isLessThanOrEqualTo=_.lte=function(e,t){return-1===(t=f(this,new H(e,t)))||0===t},_.isNaN=function(){return!this.s},_.isNegative=function(){return this.s<0},_.isPositive=function(){return this.s>0},_.isZero=function(){return!!this.c&&0==this.c[0]},_.minus=function(e,t){var r,n,s,o,i=this,a=i.s;if(t=(e=new H(e,t)).s,!a||!t)return new H(NaN);if(a!=t)return e.s=-t,i.plus(e);var u=i.e/c,d=e.e/c,g=i.c,p=e.c;if(!u||!d){if(!g||!p)return g?(e.s=-t,e):new H(p?i:NaN);if(!g[0]||!p[0])return p[0]?(e.s=-t,e):new H(g[0]?i:3==R?-0:0)}if(u=h(u),d=h(d),g=g.slice(),a=u-d){for((o=a<0)?(a=-a,s=g):(d=u,s=p),s.reverse(),t=a;t--;s.push(0));s.reverse()}else for(n=(o=(a=g.length)<(t=p.length))?a:t,a=t=0;t<n;t++)if(g[t]!=p[t]){o=g[t]<p[t];break}if(o&&(s=g,g=p,p=s,e.s=-e.s),(t=(n=p.length)-(r=g.length))>0)for(;t--;g[r++]=0);for(t=l-1;n>a;){if(g[--n]<p[n]){for(r=n;r&&!g[--r];g[r]=t);--g[r],g[n]+=l}g[n]-=p[n]}for(;0==g[0];g.splice(0,1),--d);return g[0]?V(e,g,d):(e.s=3==R?-1:1,e.c=[e.e=0],e)},_.modulo=_.mod=function(e,t){var n,s,o=this;return e=new H(e,t),!o.c||!e.s||e.c&&!e.c[0]?new H(NaN):!e.c||o.c&&!o.c[0]?new H(o):(9==F?(s=e.s,e.s=1,n=r(o,e,0,3),e.s=s,n.s*=s):n=r(o,e,0,F),(e=o.minus(n.times(e))).c[0]||1!=F||(e.s=o.s),e)},_.multipliedBy=_.times=function(e,t){var r,n,s,o,i,a,u,d,p,m,f,C,b,w,v,y=this,S=y.c,M=(e=new H(e,t)).c;if(!(S&&M&&S[0]&&M[0]))return!y.s||!e.s||S&&!S[0]&&!M||M&&!M[0]&&!S?e.c=e.e=e.s=null:(e.s*=y.s,S&&M?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=h(y.e/c)+h(e.e/c),e.s*=y.s,(u=S.length)<(m=M.length)&&(b=S,S=M,M=b,s=u,u=m,m=s),s=u+m,b=[];s--;b.push(0));for(w=l,v=g,s=m;--s>=0;){for(r=0,f=M[s]%v,C=M[s]/v|0,o=s+(i=u);o>s;)r=((d=f*(d=S[--i]%v)+(a=C*d+(p=S[i]/v|0)*f)%v*v+b[o]+r)/w|0)+(a/v|0)+C*p,b[o--]=d%w;b[o]=r}return r?++n:b.splice(0,1),V(e,b,n)},_.negated=function(){var e=new H(this);return e.s=-e.s||null,e},_.plus=function(e,t){var r,n=this,s=n.s;if(t=(e=new H(e,t)).s,!s||!t)return new H(NaN);if(s!=t)return e.s=-t,n.minus(e);var o=n.e/c,i=e.e/c,a=n.c,u=e.c;if(!o||!i){if(!a||!u)return new H(s/0);if(!a[0]||!u[0])return u[0]?e:new H(a[0]?n:0*s)}if(o=h(o),i=h(i),a=a.slice(),s=o-i){for(s>0?(i=o,r=u):(s=-s,r=a),r.reverse();s--;r.push(0));r.reverse()}for((s=a.length)-(t=u.length)<0&&(r=u,u=a,a=r,t=s),s=0;t;)s=(a[--t]=a[t]+u[t]+s)/l|0,a[t]=l===a[t]?0:a[t]%l;return s&&(a=[s].concat(a),++i),V(e,a,i)},_.precision=_.sd=function(e,t){var r,n,s,o=this;if(null!=e&&e!==!!e)return C(e,1,p),null==t?t=R:C(t,0,8),z(new H(o),e,t);if(!(r=o.c))return null;if(n=(s=r.length-1)*c+1,s=r[s]){for(;s%10==0;s/=10,n--);for(s=r[0];s>=10;s/=10,n++);}return e&&o.e+1>n&&(n=o.e+1),n},_.shiftedBy=function(e){return C(e,-9007199254740991,u),this.times("1e"+e)},_.squareRoot=_.sqrt=function(){var e,t,n,s,o,i=this,a=i.c,l=i.s,c=i.e,u=N+4,d=new H("0.5");if(1!==l||!a||!a[0])return new H(!l||l<0&&(!a||a[0])?NaN:a?i:1/0);if(0==(l=Math.sqrt(+Y(i)))||l==1/0?(((t=m(a)).length+c)%2==0&&(t+="0"),l=Math.sqrt(+t),c=h((c+1)/2)-(c<0||c%2),n=new H(t=l==1/0?"5e"+c:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+c)):n=new H(l+""),n.c[0])for((l=(c=n.e)+u)<3&&(l=0);;)if(o=n,n=d.times(o.plus(r(i,o,u,1))),m(o.c).slice(0,l)===(t=m(n.c)).slice(0,l)){if(n.e<c&&--l,"9999"!=(t=t.slice(l-3,l+1))&&(s||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(z(n,n.e+N+2,1),e=!n.times(n).eq(i));break}if(!s&&(z(o,o.e+N+2,0),o.times(o).eq(i))){n=o;break}u+=4,l+=4,s=1}return z(n,n.e+N+1,R,e)},_.toExponential=function(e,t){return null!=e&&(C(e,0,p),e++),W(this,e,t,1)},_.toFixed=function(e,t){return null!=e&&(C(e,0,p),e=e+this.e+1),W(this,e,t)},_.toFormat=function(e,t,r){var n,s=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=$;else if("object"!=typeof r)throw Error(i+"Argument not an object: "+r);if(n=s.toFixed(e,t),s.c){var o,a=n.split("."),l=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",d=a[0],g=a[1],p=s.s<0,h=p?d.slice(1):d,m=h.length;if(c&&(o=l,l=c,c=o,m-=o),l>0&&m>0){for(o=m%l||l,d=h.substr(0,o);o<m;o+=l)d+=u+h.substr(o,l);c>0&&(d+=u+h.slice(o)),p&&(d="-"+d)}n=g?d+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?g.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):g):d}return(r.prefix||"")+n+(r.suffix||"")},_.toFraction=function(e){var t,n,s,o,a,l,u,g,p,h,f,C,b=this,w=b.c;if(null!=e&&(!(u=new H(e)).isInteger()&&(u.c||1!==u.s)||u.lt(O)))throw Error(i+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+Y(u));if(!w)return new H(b);for(t=new H(O),p=n=new H(O),s=g=new H(O),C=m(w),a=t.e=C.length-b.e-1,t.c[0]=d[(l=a%c)<0?c+l:l],e=!e||u.comparedTo(t)>0?a>0?t:p:u,l=B,B=1/0,u=new H(C),g.c[0]=0;h=r(u,t,0,1),1!=(o=n.plus(h.times(s))).comparedTo(e);)n=s,s=o,p=g.plus(h.times(o=p)),g=o,t=u.minus(h.times(o=t)),u=o;return o=r(e.minus(n),s,0,1),g=g.plus(o.times(p)),n=n.plus(o.times(s)),g.s=p.s=b.s,f=r(p,s,a*=2,R).minus(b).abs().comparedTo(r(g,n,a,R).minus(b).abs())<1?[p,s]:[g,n],B=l,f},_.toNumber=function(){return+Y(this)},_.toPrecision=function(e,t){return null!=e&&C(e,1,p),W(this,e,t,2)},_.toString=function(e){var t,r=this,n=r.s,s=r.e;return null===s?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=s<=D||s>=j?w(m(r.c),s):v(m(r.c),s,"0"):10===e&&K?t=v(m((r=z(new H(r),N+s+1,R)).c),r.e,"0"):(C(e,2,G.length,"Base"),t=y(v(m(r.c),s,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},_.valueOf=_.toJSON=function(){return Y(this)},_._isBigNumber=!0,null!=t&&H.set(t),H}(),r.default=r.BigNumber=r,"function"==typeof define&&define.amd?define(function(){return r}):void 0!==t&&t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(this)}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>bignumber.js",file:"node_modules/@ledgerhq/hw-app-eth/node_modules/bignumber.js/bignumber.js"}],[1003,{"@ledgerhq/errors":984,"@ledgerhq/logs":1006,buffer:4137,events:4433},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.getAltStatusMessage=r.StatusCodes=r.TransportStatusError=r.TransportError=void 0;const o=s(e("events")),i=e("@ledgerhq/errors");Object.defineProperty(r,"TransportError",{enumerable:!0,get:function(){return i.TransportError}}),Object.defineProperty(r,"StatusCodes",{enumerable:!0,get:function(){return i.StatusCodes}}),Object.defineProperty(r,"getAltStatusMessage",{enumerable:!0,get:function(){return i.getAltStatusMessage}}),Object.defineProperty(r,"TransportStatusError",{enumerable:!0,get:function(){return i.TransportStatusError}});const a=e("@ledgerhq/logs");class l{constructor({context:e,logType:r}={}){this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new o.default,this.send=(e,r,s,o,...a)=>n(this,[e,r,s,o,...a],void 0,function*(e,r,n,s,o=t.alloc(0),a=[i.StatusCodes.OK],{abortTimeoutMs:l}={}){const c=this.tracer.withUpdatedContext({function:"send"});if(o.length>=256)throw c.trace("data.length exceeded 256 bytes limit",{dataLength:o.length}),new i.TransportError("data.length exceed 256 bytes limit. Got: "+o.length,"DataLengthTooBig");c.trace("Starting an exchange",{abortTimeoutMs:l});const u=yield this.exchange(t.concat([t.from([e,r,n,s]),t.from([o.length]),o]),{abortTimeoutMs:l});c.trace("Received response from exchange");const d=u.readUInt16BE(u.length-2);if(!a.some(e=>e===d))throw new i.TransportStatusError(d);return u}),this._appAPIlock=null,this.tracer=new a.LocalTracer(null!=r?r:"transport",e)}exchange(e,{abortTimeoutMs:t}={}){throw new Error("exchange not implemented")}exchangeBulk(e,t){let r=!1;return(()=>n(this,void 0,void 0,function*(){if(!r)for(const n of e){const e=yield this.exchange(n);if(r)return;const s=e.readUInt16BE(e.length-2);if(s!==i.StatusCodes.OK)throw new i.TransportStatusError(s);t.next(e)}}))().then(()=>!r&&t.complete(),e=>!r&&t.error(e)),{unsubscribe:()=>{r=!0}}}setScrambleKey(e){}close(){return Promise.resolve()}on(e,t){this._events.on(e,t)}off(e,t){this._events.removeListener(e,t)}emit(e,...t){this._events.emit(e,...t)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(e){this.exchangeTimeout=e}setExchangeUnresponsiveTimeout(e){this.unresponsiveTimeout=e}static create(e=3e3,t){return new Promise((r,n)=>{let s=!1;const o=this.listen({next:t=>{s=!0,o&&o.unsubscribe(),a&&clearTimeout(a),this.open(t.descriptor,e).then(r,n)},error:e=>{a&&clearTimeout(a),n(e)},complete:()=>{a&&clearTimeout(a),s||n(new i.TransportError(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),a=t?setTimeout(()=>{o.unsubscribe(),n(new i.TransportError(this.ErrorMessage_ListenTimeout,"ListenTimeout"))},t):null})}exchangeAtomicImpl(e){return n(this,void 0,void 0,function*(){const t=this.tracer.withUpdatedContext({function:"exchangeAtomicImpl",unresponsiveTimeout:this.unresponsiveTimeout});if(this.exchangeBusyPromise)throw t.trace("Atomic exchange is already busy"),new i.TransportRaceCondition("An action was already pending on the Ledger device. Please deny or reconnect.");let r;const n=new Promise(e=>{r=e});this.exchangeBusyPromise=n;let s=!1;const o=setTimeout(()=>{t.trace('Timeout reached, emitting Transport event "unresponsive"',{unresponsiveTimeout:this.unresponsiveTimeout}),s=!0,this.emit("unresponsive")},this.unresponsiveTimeout);try{const r=yield e();return s&&(t.trace("Device was unresponsive, emitting responsive"),this.emit("responsive")),r}finally{t.trace("Finalize, clearing busy guard"),clearTimeout(o),r&&r(),this.exchangeBusyPromise=null}})}decorateAppAPIMethods(e,t,r){for(const n of t)e[n]=this.decorateAppAPIMethod(n,e[n],e,r)}decorateAppAPIMethod(e,t,r,s){return(...o)=>n(this,void 0,void 0,function*(){const{_appAPIlock:n}=this;if(n)return Promise.reject(new i.TransportError("Ledger Device is busy (lock "+n+")","TransportLocked"));try{return this._appAPIlock=e,this.setScrambleKey(s),yield t.apply(r,o)}finally{this._appAPIlock=null}})}setTraceContext(e){this.tracer=this.tracer.withContext(e)}updateTraceContext(e){this.tracer.updateContext(e)}getTraceContext(){return this.tracer.getContext()}}l.ErrorMessage_ListenTimeout="No Ledger device found (timeout)",l.ErrorMessage_NoDeviceFound="No Ledger device found",r.default=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/hw-transport",file:"node_modules/@ledgerhq/hw-transport/lib/Transport.js"}],[1004,{rxjs:5392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.setEnvUnsafe=r.setEnv=r.changes=r.getEnvDesc=r.isEnvDefault=r.getEnvDefault=r.getEnv=r.getAllEnvs=r.getAllEnvNames=r.getDefinition=void 0;const n=e("rxjs"),s=e=>{if(!Number.isNaN(e))return parseInt(e,10)},o=e=>{if(!Number.isNaN(e))return parseFloat(e)},i=e=>"boolean"==typeof e?e:!("0"===e||"false"===e),a=e=>"string"==typeof e?e:undefined,l=e=>{const t="string"==typeof e?e.split(","):null;if(Array.isArray(t)&&t.length>0)return t},c={ADDRESS_POISONING_FAMILIES:{def:"evm,tron",parser:a,desc:"List of families impacted by the address poisoning attack"},ANALYTICS_CONSOLE:{def:!1,parser:i,desc:"Show tracking overlays on the app UI"},DEBUG_THEME:{def:!1,parser:i,desc:"Show theme debug overlay UI"},API_ICP_ENDPOINT:{def:"https://icp.coin.ledger.com/",parser:a,desc:"Rosetta API for ICP"},API_CASPER_INDEXER_ENDPOINT:{parser:a,def:"https://casper.coin.ledger.com/indexer",desc:"Casper API url indexer"},API_CASPER_NODE_ENDPOINT:{parser:a,def:"https://casper.coin.ledger.com/node/",desc:"Casper API url node"},API_ALGORAND_BLOCKCHAIN_EXPLORER_API_ENDPOINT:{def:"https://algorand.coin.ledger.com",parser:a,desc:"Node API endpoint for algorand"},API_CELO_INDEXER:{def:"https://celo.coin.ledger.com/indexer/",parser:a,desc:"Explorer API for celo"},API_CELO_NODE:{def:"https://celo.coin.ledger.com/archive/",parser:a,desc:"Node endpoint for celo"},COSMOS_GAS_AMPLIFIER:{def:1.3,parser:s,desc:"Cosmos gas estimate multiplier"},API_FILECOIN_ENDPOINT:{parser:a,def:"https://filecoin.coin.ledger.com",desc:"Filecoin API url"},API_STACKS_ENDPOINT:{parser:a,def:"https://stacks.coin.ledger.com",desc:"Stacks API url"},API_POLKADOT_INDEXER:{parser:a,def:"https://polkadot.coin.ledger.com",desc:"Explorer API for polkadot"},API_POLKADOT_SIDECAR:{parser:a,def:"https://polkadot-sidecar.coin.ledger.com",desc:"Polkadot Sidecar API url"},API_POLKADOT_SIDECAR_CREDENTIALS:{parser:a,def:"",desc:"Polkadot Sidecar API credentials"},API_POLKADOT_NODE:{parser:a,def:"https://polkadot-fullnodes.api.live.ledger.com",desc:"Polkadot Node"},ELROND_API_ENDPOINT:{parser:a,def:"https://elrond.coin.ledger.com",desc:"Elrond API url"},ELROND_DELEGATION_API_ENDPOINT:{parser:a,def:"https://delegations-elrond.coin.ledger.com",desc:"Elrond DELEGATION API url"},API_STELLAR_HORIZON:{parser:a,def:"https://stellar.coin.ledger.com",desc:"Stellar Horizon API url"},API_STELLAR_HORIZON_FETCH_LIMIT:{parser:s,def:100,desc:"Limit of operation that Horizon will fetch per page"},API_STELLAR_HORIZON_STATIC_FEE:{def:!1,parser:i,desc:"Static fee for Stellar account"},API_TEZOS_BAKER:{parser:a,def:"https://tezos-bakers.api.live.ledger.com",desc:"bakers API for tezos"},API_TEZOS_BLOCKCHAIN_EXPLORER_API_ENDPOINT:{def:"https://xtz-explorer.api.live.ledger.com/explorer",parser:a,desc:"Ledger explorer API for tezos"},API_TEZOS_TZKT_API:{def:"https://xtz-tzkt-explorer.api.live.ledger.com",parser:a,desc:"tzkt.io explorer"},API_TEZOS_NODE:{def:"https://xtz-node.api.live.ledger.com",parser:a,desc:"node API for tezos (for broadcast only)"},API_TRONGRID_PROXY:{parser:a,def:"https://tron.coin.ledger.com",desc:"proxy url for trongrid API"},API_SOLANA_PROXY:{parser:a,def:"https://solana.coin.ledger.com",desc:"proxy url for solana API"},SOLANA_VALIDATORS_APP_BASE_URL:{parser:a,def:"https://earn.api.live.ledger.com/v0/network/solana/validator-details",desc:"base url for validators.app validator list"},SOLANA_TESTNET_VALIDATORS_APP_BASE_URL:{parser:a,def:"https://validators-solana.coin.ledger.com/api/v1/validators",desc:"base url for testnet validators.app validator list"},SOLANA_TX_CONFIRMATION_TIMEOUT:{def:1e5,parser:s,desc:"solana transaction broadcast confirmation timeout"},API_HEDERA_MIRROR:{def:"https://hedera.coin.ledger.com",parser:a,desc:"mirror node API for Hedera"},API_VECHAIN_THOREST:{def:"https://vechain.coin.ledger.com",parser:a,desc:"Thorest API for VeChain"},BASE_SOCKET_URL:{def:"wss://scriptrunner.api.live.ledger.com/update",parser:a,desc:"Ledger script runner API"},BOT_TIMEOUT_SCAN_ACCOUNTS:{def:6e5,parser:s,desc:"bot's default timeout for scanAccounts"},BOT_SPEC_DEFAULT_TIMEOUT:{def:18e5,parser:s,desc:"define the default value of spec.skipMutationsTimeout (if not overriden by spec)"},BUY_API_BASE:{def:"https://buy.api.live.ledger.com/buy/v1",parser:a,desc:"Buy crypto API base url - version 1"},CARDANO_API_ENDPOINT:{def:"https://cardano.coin.ledger.com/api",parser:a,desc:"Cardano API url"},CARDANO_TESTNET_API_ENDPOINT:{def:"https://testnet-ledger.cardanoscan.io/api",parser:a,desc:"Cardano API url"},ICON_NODE_ENDPOINT:{parser:a,def:"https://icon.coin.ledger.com/api/v3",desc:"ICON RPC url"},ICON_DEBUG_ENDPOINT:{parser:a,def:"https://icon.coin.ledger.com/api/v3d",desc:"ICON debug RPC url"},ICON_INDEXER_ENDPOINT:{parser:a,def:"https://icon.coin.ledger.com/api/v1",desc:"ICON API url"},ICON_TESTNET_NODE_ENDPOINT:{parser:a,def:"https://berlin.net.solidwallet.io/api/v3",desc:"ICON Berlin Testnet API url"},ICON_TESTNET_DEBUG_ENDPOINT:{parser:a,def:"https://berlin.net.solidwallet.io/api/v3d",desc:"ICON Berlin Testnet debug"},ICON_TESTNET_INDEXER_ENDPOINT:{parser:a,def:"https://tracker.berlin.icon.community/api/v1",desc:"ICON Berlin Testnet API url"},COINAPPS:{def:"",parser:a,desc:"(dev feature) defines the folder for speculos mode that contains Nano apps binaries (.elf) in a specific structure: <device>/<firmware>/<appName>/app_<appVersion>.elf"},CRYPTO_ORG_INDEXER:{def:"https://cryptoorg-rpc-indexer.coin.ledger.com",parser:a,desc:"location of the Cronos POS Chain (formerly Crypto.org) indexer API"},CRYPTO_ORG_TESTNET_INDEXER:{def:"https://cronos-pos.org/explorer/croeseid4",parser:a,desc:"location of the Cronos POS Chain (formerly Crypto.org) indexer testnet API"},CRYPTO_ORG_RPC_URL:{def:"https://cryptoorg-rpc-node.coin.ledger.com",parser:a,desc:"location of the Cronos POS Chain (formerly Crypto.org) chain node"},CRYPTO_ORG_TESTNET_RPC_URL:{def:"https://rpc-testnet-croeseid-4.crypto.org",parser:a,desc:"location of the Cronos POS Chain (formerly Crypto.org) chain testnet node"},DEBUG_UTXO_DISPLAY:{def:4,parser:s,desc:"define maximum number of utxos to display in CLI"},DEBUG_HTTP_RESPONSE:{def:!1,parser:i,desc:"includes HTTP response body in logs"},DEVICE_CANCEL_APDU_FLUSH_MECHANISM:{def:!0,parser:i,desc:"enable a mechanism that send a 0x00 apdu to force device to awake from its 'Processing' UI state"},DEVICE_PROXY_URL:{def:"",parser:a,desc:"enable a proxy to use instead of a physical device"},DEVICE_PROXY_MODEL:{def:"nanoS",parser:a,desc:"allow to override the default model of a proxied device"},DISABLE_TRANSACTION_BROADCAST:{def:!1,parser:i,desc:"disable broadcast of transactions"},DISABLE_SYNC_TOKEN:{def:!0,parser:i,desc:"disable a problematic mechanism of our API"},DISABLE_FW_UPDATE_VERSION_CHECK:{def:!1,parser:i,desc:"disable the version check for firmware update eligibility"},EIP1559_MINIMUM_FEES_GATE:{def:!0,parser:i,desc:"prevents the user from doing an EIP1559 transaction with fees too low"},EIP1559_PRIORITY_FEE_LOWER_GATE:{def:.85,parser:o,desc:"minimum priority fee percents allowed compared to network conditions allowed when EIP1559_MINIMUM_FEES_GATE is activated"},EIP1559_BASE_FEE_MULTIPLIER:{def:1.27,parser:o,desc:"mutiplier for the base fee that is composing the maxFeePerGas property"},EXPERIMENTAL_BLE:{def:!1,parser:i,desc:"enable experimental support of Bluetooth"},EXPERIMENTAL_CURRENCIES:{def:"",parser:a,desc:"enable experimental support of currencies (comma separated)"},EXPERIMENTAL_EXPLORERS:{def:!1,parser:i,desc:"enable experimental explorer APIs"},EXPERIMENTAL_LANGUAGES:{def:!1,parser:i,desc:"enable experimental languages"},EXPERIMENTAL_MANAGER:{def:!1,parser:i,desc:"enable an experimental version of Manager"},EXPERIMENTAL_ROI_CALCULATION:{def:!1,parser:i,desc:"enable an experimental version of the portfolio percentage calculation"},EXPERIMENTAL_SEND_MAX:{def:!1,parser:i,desc:"force enabling SEND MAX even if not yet stable"},EXPERIMENTAL_USB:{def:!1,parser:i,desc:"enable an experimental implementation of USB support"},EXPERIMENTAL_SWAP:{def:!1,parser:i,desc:"enable an experimental swap interface"},EXPLORER:{def:"https://explorers.api.live.ledger.com",parser:a,desc:"Ledger generic explorer API"},EXPLORER_STAGING:{def:"https://explorers.api-01.live.ledger-stg.com",parser:a,desc:"Ledger staging explorer API"},EXPLORER_BETA:{def:"https://explorers.api.live.ledger.com",parser:a,desc:"Ledger generic explorer beta API"},EXPLORER_SATSTACK:{def:"http://localhost:20000",parser:a,desc:"Ledger satstack Bitcoin explorer API"},EXPORT_EXCLUDED_LOG_TYPES:{def:"ble-frame",parser:a,desc:"comma-separated list of excluded log types for exported logs"},EXPORT_MAX_LOGS:{def:5e3,parser:s,desc:"maximum logs to keep for export"},DISABLE_APP_VERSION_REQUIREMENTS:{def:!1,parser:i,desc:"force an old application version to be accepted regardless of its version"},FORCE_PROVIDER:{def:1,parser:s,desc:"use a different provider for app store (for developers only)"},FILTER_ZERO_AMOUNT_ERC20_EVENTS:{def:!0,parser:i,desc:"Remove filter of address poisoning"},GET_CALLS_RETRY:{def:2,parser:s,desc:"how many times to retry a GET http call"},GET_CALLS_TIMEOUT:{def:6e4,parser:s,desc:"how much time to timeout a GET http call"},HIDE_EMPTY_TOKEN_ACCOUNTS:{def:!1,parser:i,desc:"hide the sub accounts when they are empty"},KEYCHAIN_OBSERVABLE_RANGE:{def:0,parser:s,desc:"overrides the gap limit specified by BIP44 (default to 20)"},LEDGER_CLIENT_VERSION:{def:"",parser:a,desc:"the 'X-Ledger-Client-Version' HTTP header to use for queries to Ledger APIs"},LEDGER_COUNTERVALUES_API:{def:"https://countervalues.live.ledger.com",parser:a,desc:"Ledger countervalues API"},LEDGER_REST_API_BASE:{def:"https://explorers.api.live.ledger.com",parser:a,desc:"DEPRECATED"},LEGACY_KT_SUPPORT_TO_YOUR_OWN_RISK:{def:!1,parser:i,desc:"enable sending to KT accounts. Not tested."},MANAGER_API_BASE:{def:"https://manager.api.live.ledger.com/api",parser:a,desc:"Ledger Manager API"},MANAGER_DEV_MODE:{def:!1,parser:i,desc:"enable visibility of utility apps in Manager"},MANAGER_INSTALL_DELAY:{def:1e3,parser:s,desc:"defines the time to wait before installing apps to prevent known glitch (<=1.5.5) when chaining installs"},MAPPING_SERVICE:{def:"https://mapping-service.api.ledger.com",parser:a,desc:""},MAX_ACCOUNT_NAME_SIZE:{def:50,parser:s,desc:"maximum size of account names"},MOCK:{def:"",parser:a,desc:"switch the app into a MOCK mode for test purpose, the value will be used as a seed for the rng. Avoid falsy values."},MOCK_COUNTERVALUES:{def:"",parser:a,desc:"switch the countervalues resolution into a MOCK mode for test purpose"},MOCK_APP_UPDATE:{def:!1,parser:i,desc:"Always shows app update in the manager"},MOCK_EXCHANGE_TEST_CONFIG:{def:!1,parser:i,desc:"mock the cryptoassets config and test partner (in the context of app-exchange)"},MOCK_REMOTE_LIVE_MANIFEST:{def:"",parser:a,desc:"mock remote live app manifest"},MOCK_OS_VERSION:{def:"",parser:a,desc:"if defined, overrides the os and version. format: os@version. Example: Windows_NT@6.1.7601"},MOCK_NO_BYPASS:{def:!1,parser:i,desc:"if defined, avoids bypass of the currentDevice in the store."},NFT_CURRENCIES:{def:["avalanche_c_chain","bsc","ethereum","polygon"],parser:l,desc:"set the currencies where NFT is active"},NFT_ETH_METADATA_SERVICE:{def:"https://nft.api.live.ledger.com",parser:a,desc:"service uri used to get the metadata of an nft"},OPERATION_ADDRESSES_LIMIT:{def:100,parser:s,desc:"limit the number of addresses in from/to of operations"},OPERATION_OPTIMISTIC_RETENTION:{def:18e5,parser:s,desc:"timeout to keep an optimistic operation that was broadcasted but not yet visible from the coin implementation or the API"},OPERATION_PAGE_SIZE_INITIAL:{def:100,parser:s,desc:"defines the initial default operation length page to use"},POLKADOT_ELECTION_STATUS_THRESHOLD:{def:25,parser:s,desc:"in blocks - number of blocks before Polkadot election effectively opens to consider it as open and disable all staking features"},SATSTACK:{def:!1,parser:i,desc:"Switch to satstack mode"},SCAN_FOR_INVALID_PATHS:{def:!1,parser:i,desc:"enable searching accounts in exotic derivation paths"},SEED:{def:"",parser:a,desc:"(dev feature) seed to be used by speculos (device simulator)"},SHOW_LEGACY_NEW_ACCOUNT:{def:!1,parser:i,desc:"allow the creation of legacy accounts"},SIMPLE_HASH_API_BASE:{def:"https://simplehash.api.live.ledger.com/api/v0",parser:a,desc:"SimpleHash API base url"},SKIP_ONBOARDING:{def:!1,parser:i,desc:"dev flag to skip onboarding flow"},SPECULOS_API_PORT:{def:0,parser:s,desc:"API port for speculos"},SPECULOS_PID_OFFSET:{def:0,parser:s,desc:"offset to be added to the speculos pid and avoid collision with other instances"},SPECULOS_USE_WEBSOCKET:{def:!1,parser:i,desc:"Use speculos websocket interface instead of Rest API"},SWAP_API_BASE:{def:"https://swap.ledger.com/v5",parser:a,desc:"Swap API base"},SWAP_USER_IP:{def:"",parser:a,desc:"Swap IP"},SWAP_DISABLE_APPS_INSTALL:{def:!1,parser:i,desc:"bypass app checks on Nano for speculos swap tests"},SYNC_ALL_INTERVAL:{def:48e4,parser:s,desc:"delay between successive sync"},SYNC_BOOT_DELAY:{def:2e3,parser:s,desc:"delay before the sync starts"},SYNC_PENDING_INTERVAL:{def:1e4,parser:s,desc:"delay between sync when an operation is still pending"},SYNC_OUTDATED_CONSIDERED_DELAY:{def:6e5,parser:s,desc:"delay until Live consider a sync outdated"},SYNC_MAX_CONCURRENT:{def:4,parser:s,desc:"maximum limit to synchronize accounts concurrently to limit overload"},BOT_MAX_CONCURRENT:{def:10,parser:s,desc:"maximum limit to run bot spec in parallel"},USER_ID:{def:"",parser:a,desc:"unique identifier of app instance. used to derivate dissociated ids for difference purposes (e.g. the firmware update incremental deployment)."},WALLETCONNECT:{def:!1,parser:i,desc:"is walletconnect enabled"},CLOUD_SYNC_API_STAGING:{def:"https://cloud-sync-backend.api.aws.stg.ldg-tech.com",parser:a,desc:"wallet sync api staging base url"},CLOUD_SYNC_API_PROD:{def:"https://cloud-sync.api.live.ledger.com",parser:a,desc:"wallet sync api production base url"},WITH_DEVICE_POLLING_DELAY:{def:500,parser:o,desc:"delay when polling device"},ANNOUNCEMENTS_API_URL:{def:"https://cdn.live.ledger.com/announcements",parser:a,desc:"url used to fetch new announcements"},ANNOUNCEMENTS_API_VERSION:{def:1,parser:s,desc:"version used for the announcements api"},STATUS_API_URL:{def:"https://ledger.statuspage.io/api",parser:a,desc:"url used to fetch ledger status"},STATUS_API_VERSION:{def:2,parser:s,desc:"version used for ledger status api"},TEZOS_MAX_TX_QUERIES:{def:100,parser:s,desc:"safe max on maximum number of queries to synchronize a tezos account"},TRUSTCHAIN_API_STAGING:{def:"https://trustchain-backend.api.aws.stg.ldg-tech.com",parser:a,desc:"Trustchain API Staging"},TRUSTCHAIN_API_PROD:{def:"https://trustchain.api.live.ledger.com",parser:a,desc:"Trustchain API Prod"},PLATFORM_DEBUG:{def:!1,parser:i,desc:"enable visibility of debug apps and tools in Platform Catalog"},PLATFORM_EXPERIMENTAL_APPS:{def:!1,parser:i,desc:"enable visibility of experimental apps and tools in Platform Catalog"},PLATFORM_MANIFEST_API_URL:{def:"https://live-app-catalog.ledger.com/api/v1/apps",parser:a,desc:"url used to fetch platform app manifests"},PLATFORM_LOCAL_MANIFEST_JSON:{def:"",parser:a,desc:'json manifest for a local (test) platform app manifests. How to use: PLATFORM_LOCAL_MANIFEST_JSON="$(cat /path/to/file.json)"'},PLATFORM_GLOBAL_CATALOG_API_URL:{def:"https://cdn.live.ledger.com/platform/catalog/v1/data.json",parser:a,desc:"url used to fetch platform app manifests"},PLATFORM_GLOBAL_CATALOG_STAGING_API_URL:{def:"https://cdn.live.ledger-stg.com/platform/catalog/v1/data.json",parser:a,desc:"url used to fetch platform app manifests (staging)"},PLATFORM_RAMP_CATALOG_API_URL:{def:"https://cdn.live.ledger.com/platform/trade/v1/data.json",parser:a,desc:"url used to fetch platform app manifests"},PLATFORM_RAMP_CATALOG_STAGING_API_URL:{def:"https://cdn.live.ledger-stg.com/platform/trade/v1/data.json",parser:a,desc:"url used to fetch platform app manifests (staging)"},PLATFORM_API_URL:{def:"",parser:a,desc:"url used to fetch platform catalog"},PLATFORM_API_VERSION:{def:1,parser:s,desc:"version used for the platform api"},PLAYWRIGHT_RUN:{def:!1,parser:i,desc:"true when launched for E2E testing"},MARKET_API_URL:{def:"https://proxycg.api.live.ledger.com/api/v3",parser:a,desc:"Market data api"},USE_LEARN_STAGING_URL:{def:!1,parser:i,desc:"use the staging URL for the learn page"},DYNAMIC_CAL_BASE_URL:{def:"https://cdn.live.ledger.com/cryptoassets",parser:a,desc:"bucket S3 of the dynamic cryptoassets list"},CAL_SERVICE_URL:{def:"https://crypto-assets-service.api.ledger.com",parser:a,desc:"Cryptoassets list service url"},FEATURE_FLAGS:{def:"{}",parser:e=>{try{if("string"!=typeof e)throw new Error;return JSON.parse(e)}catch(e){return undefined}},desc:"key value map for feature flags: {[key in FeatureId]?: Feature]}"},PERFORMANCE_CONSOLE:{def:!1,parser:i,desc:"Show a performance overlay on the app UI"},ETHEREUM_STUCK_TRANSACTION_TIMEOUT:{def:3e5,parser:s,desc:"Time after which an optimisc operation is considered stuck"},EVM_REPLACE_TX_LEGACY_GASPRICE_FACTOR:{def:1.3,parser:o,desc:"Replace transaction gasprice factor for legacy evm transaction. This value should be 1.1 minimum since this is the minimum increase required by most nodes"},EVM_REPLACE_TX_EIP1559_MAXFEE_FACTOR:{def:1.3,parser:o,desc:"Replace transaction max fee factor for EIP1559 evm transaction. This value should be 1.1 minimum since this is the minimum increase required by most nodes"},EVM_REPLACE_TX_EIP1559_MAXPRIORITYFEE_FACTOR:{def:1.1,parser:o,desc:"Replace transaction max priority fee factor for EIP1559 evm transaction. This value should be 1.1 minimum since this is the minimum increase required by most nodes"},EVM_FORCE_LEGACY_TRANSACTIONS:{def:!1,parser:i,desc:"Force transaction type 0 on EVM networks"},ENABLE_NETWORK_LOGS:{def:!1,parser:i,desc:"Enable network request and responses logs. Errors are always logged"},CRYPTO_ASSET_SEARCH_KEYS:{def:["ticker","name","keywords"],parser:l,desc:"Fuse search attributes to find a currency according to user input"},VERBOSE:{def:[],parser:l,desc:'Sets up debug console printing of logs. `VERBOSE=1` or `VERBOSE=true`: to print all logs | `VERBOSE="apdu,hw,transport,hid-verbose"` : filtering on a list of log `type` separated by a `,`'},DEFAULT_TRANSACTION_POLLING_INTERVAL:{def:3e4,parser:s,desc:"Default interval to poll for transaction confirmation in speedup/cancel evm flow (in ms)"},LOW_BATTERY_PERCENTAGE:{def:20,parser:s,desc:"Configure the low battery percentage threshold"},LOG_DRAWERS:{def:!1,parser:i,desc:"Enable logs for drawers"}};r.getDefinition=e=>e in c?c[e]:undefined;const u=Object.keys(c).reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:c[t].def}),{}),d=Object.assign({},u);r.getAllEnvNames=()=>Object.keys(c);r.getAllEnvs=()=>Object.assign({},d);r.getEnv=e=>d[e];r.getEnvDefault=e=>u[e];r.isEnvDefault=e=>d[e]===u[e];r.getEnvDesc=e=>c[e].desc,r.changes=new n.Subject;r.setEnv=(e,t)=>{const n=d[e];n!==t&&(d[e]=t,r.changes.next({name:e,value:t,oldValue:n}))};r.setEnvUnsafe=(e,t)=>{const n=(0,r.getDefinition)(e);if(!n)return!1;const{parser:s}=n,o=s(t);return o===undefined||null===o?(console.warn(`Invalid ENV value for ${e}`),!1):((0,r.setEnv)(e,o),!0)}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/evm-tools>@ledgerhq/live-env",file:"node_modules/@ledgerhq/live-env/lib/env.js"}],[1005,{"./env":1004},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./env"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/evm-tools>@ledgerhq/live-env",file:"node_modules/@ledgerhq/live-env/lib/index.js"}],[1006,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.listen=r.LocalTracer=r.trace=r.log=void 0;let n=0;const s=[];r.log=(e,t,r)=>{const s={type:e,id:String(++n),date:new Date};t&&(s.message=t),r&&(s.data=r),i(s)};r.trace=({type:e,message:t,data:r,context:s})=>{const o={type:e,id:String(++n),date:new Date};t&&(o.message=t),r&&(o.data=r),s&&(o.context=s),i(o)};class o{constructor(e,t){this.type=e,this.context=t}trace(e,t){(0,r.trace)({type:this.type,message:e,data:t,context:this.context})}getContext(){return this.context}setContext(e){this.context=e}updateContext(e){this.context=Object.assign(Object.assign({},this.context),e)}getType(){return this.type}setType(e){this.type=e}withType(e){return new o(e,this.context)}withContext(e){return new o(this.type,e)}withUpdatedContext(e){return new o(this.type,Object.assign(Object.assign({},this.context),e))}}r.LocalTracer=o;function i(e){for(let t=0;t<s.length;t++)try{s[t](e)}catch(e){console.error(e)}}r.listen=e=>(s.push(e),()=>{const t=s.indexOf(e);-1!==t&&(s[t]=s[s.length-1],s.pop())}),"undefined"!=typeof window&&(window.__ledgerLogsListen=r.listen)}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/logs",file:"node_modules/@ledgerhq/logs/lib/index.js"}],[101,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getEncryptionPublicKeyControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"EncryptionPublicKeyControllerInit",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getEncryptionPublicKey","MetaMetricsController:trackEvent"]}),t},r.getEncryptionPublicKeyControllerMessenger=function(e){const t=new n.Messenger({namespace:"EncryptionPublicKeyController",parent:e});return e.delegate({messenger:t,actions:["ApprovalController:addRequest","ApprovalController:acceptRequest","ApprovalController:rejectRequest"],events:["EncryptionPublicKeyManager:stateChange","EncryptionPublicKeyManager:unapprovedMessage"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/encryption-public-key-controller-messenger.ts"}],[102,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getEncryptionPublicKeyManagerMessenger=function(e){return new n.Messenger({namespace:"EncryptionPublicKeyManager",parent:e})};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/encryption-public-key-manager-messenger.ts"}],[103,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getEnsControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"EnsControllerInit",parent:e});return e.delegate({messenger:t,events:["NetworkController:networkDidChange"]}),t},r.getEnsControllerMessenger=function(e){const t=new n.Messenger({namespace:"EnsController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/ens-controller-messenger.ts"}],[104,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getErrorReportingServiceMessenger=function(e){return new n.Messenger({namespace:"ErrorReportingService",parent:e})};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/error-reporting-service-messenger.ts"}],[105,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getGasFeeControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"GasFeeControllerInit",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getEIP1559Compatibility","NetworkController:getNetworkClientById","NetworkController:getSelectedNetworkClient","NetworkController:getState"],events:["NetworkController:networkDidChange"]}),t},r.getGasFeeControllerMessenger=function(e){const t=new n.Messenger({namespace:"GasFeeController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getEIP1559Compatibility","NetworkController:getNetworkClientById","NetworkController:getState"],events:["NetworkController:stateChange"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/gas-fee-controller-messenger.ts"}],[106,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getGatorPermissionsControllerMessenger=function(e){const t=new n.Messenger({namespace:"GatorPermissionsController",parent:e});return e.delegate({messenger:t,actions:["SnapController:handleRequest","SnapController:has"],events:["TransactionController:transactionApproved","TransactionController:transactionRejected","TransactionController:transactionConfirmed","TransactionController:transactionFailed","TransactionController:transactionDropped"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/gator-permissions/gator-permissions-controller-messenger.ts"}],[107,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getAuthenticationControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"AuthenticationController",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:getMetaMetricsId"]}),t},r.getAuthenticationControllerMessenger=function(e){const t=new n.Messenger({namespace:"AuthenticationController",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getState","SnapController:handleRequest"],events:["KeyringController:lock","KeyringController:unlock"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/identity/authentication-controller-messenger.ts"}],[108,{"./authentication-controller-messenger":107,"./user-storage-controller-messenger":109},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getAuthenticationControllerInitMessenger",{enumerable:!0,get:function(){return n.getAuthenticationControllerInitMessenger}}),Object.defineProperty(r,"getAuthenticationControllerMessenger",{enumerable:!0,get:function(){return n.getAuthenticationControllerMessenger}}),Object.defineProperty(r,"getUserStorageControllerMessenger",{enumerable:!0,get:function(){return s.getUserStorageControllerMessenger}});var n=e("./authentication-controller-messenger"),s=e("./user-storage-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/identity/index.ts"}],[109,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getUserStorageControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"UserStorageControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent"]}),t},r.getUserStorageControllerMessenger=function(e){const t=new n.Messenger({namespace:"UserStorageController",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getState","SnapController:handleRequest","AuthenticationController:getBearerToken","AuthenticationController:getSessionProfile","AuthenticationController:isSignedIn","AuthenticationController:performSignIn","AddressBookController:list","AddressBookController:set","AddressBookController:delete"],events:["KeyringController:lock","KeyringController:unlock","AddressBookController:contactUpdated","AddressBookController:contactDeleted"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/identity/user-storage-controller-messenger.ts"}],[11,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.COOKIE_ID_MARKETING_WHITELIST_ORIGINS=r.COOKIE_ID_MARKETING_WHITELIST=void 0;const n=r.COOKIE_ID_MARKETING_WHITELIST=["https://metamask.io","https://learn.metamask.io","https://mmi-support.zendesk.com","https://community.metamask.io","https://support.metamask.io"];r.COOKIE_ID_MARKETING_WHITELIST_ORIGINS=n.map(e=>new URL(e).origin)}}},{package:"$root$",file:"app/scripts/constants/marketing-site-whitelist.ts"}],[110,{"./account-order-controller-messenger":65,"./account-tracker-controller-messenger":66,"./accounts":69,"./accounts-controller-messenger":67,"./accounts/institutional-snap-controller-messenger":70,"./address-book-controller-messenger":73,"./alert-controller-messenger":74,"./announcement-controller-messenger":75,"./app-metadata-controller-messenger":76,"./app-state-controller-messenger":77,"./approval-controller-messenger":78,"./assets":80,"./bridge-controller-messenger":86,"./bridge-status-controller-messenger":87,"./claims/claims-controller-messenger":88,"./claims/claims-service-messenger":89,"./connectivity":91,"./core-backend":94,"./currency-rate-controller-messenger":95,"./decrypt-message-controller-messenger":96,"./decrypt-message-manager-messenger":97,"./defi-positions":99,"./defi-positions/defi-positions-controller-messenger":98,"./delegation/delegation-controller-messenger":100,"./encryption-public-key-controller-messenger":101,"./encryption-public-key-manager-messenger":102,"./ens-controller-messenger":103,"./error-reporting-service-messenger":104,"./gas-fee-controller-messenger":105,"./gator-permissions/gator-permissions-controller-messenger":106,"./identity":108,"./identity/user-storage-controller-messenger":109,"./keyring-controller-messenger":111,"./logging-controller-messenger":112,"./metametrics-controller-messenger":113,"./metametrics-data-deletion-controller-messenger":114,"./multichain":115,"./name-controller-messenger":121,"./network-controller-messenger":122,"./notifications":123,"./onboarding-controller-messenger":126,"./permission-controller-messenger":127,"./permission-log-controller-messenger":128,"./phishing-controller-messenger":129,"./ppom-controller-messenger":130,"./preferences-controller-messenger":131,"./profile-metrics-controller-messenger":132,"./profile-metrics-service-messenger":133,"./rates-controller-messenger":134,"./remote-feature-flag-controller-messenger":135,"./reward-data-service-messenger":136,"./rewards-controller-messenger":137,"./seedless-onboarding":138,"./selected-network-controller-messenger":141,"./shield/shield-controller-messenger":142,"./signature-controller-messenger":143,"./smart-transactions-controller-messenger":144,"./snaps":147,"./storage-service-messenger":156,"./subject-metadata-controller-messenger":157,"./subscription":158,"./subscription/subscription-service-messenger":160,"./swaps-controller-messenger":161,"./token-balances-controller-messenger":162,"./token-detection-controller-messenger":163,"./token-list-controller-messenger":164,"./tokens-controller-messenger":165,"./transaction-controller-messenger":166,"./transaction-pay-controller-messenger":167,"./user-operation-controller-messenger":168,lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CONTROLLER_MESSENGERS=void 0,Object.defineProperty(r,"getAccountOrderControllerMessenger",{enumerable:!0,get:function(){return Q.getAccountOrderControllerMessenger}}),Object.defineProperty(r,"getAccountTrackerControllerInitMessenger",{enumerable:!0,get:function(){return L.getAccountTrackerControllerInitMessenger}}),Object.defineProperty(r,"getAccountTrackerControllerMessenger",{enumerable:!0,get:function(){return L.getAccountTrackerControllerMessenger}}),Object.defineProperty(r,"getAccountsControllerMessenger",{enumerable:!0,get:function(){return Z.getAccountsControllerMessenger}}),Object.defineProperty(r,"getAddressBookControllerMessenger",{enumerable:!0,get:function(){return ae.getAddressBookControllerMessenger}}),Object.defineProperty(r,"getAlertControllerMessenger",{enumerable:!0,get:function(){return te.getAlertControllerMessenger}}),Object.defineProperty(r,"getAnnouncementControllerMessenger",{enumerable:!0,get:function(){return J.getAnnouncementControllerMessenger}}),Object.defineProperty(r,"getAppMetadataControllerMessenger",{enumerable:!0,get:function(){return se.getAppMetadataControllerMessenger}}),Object.defineProperty(r,"getAppStateControllerMessenger",{enumerable:!0,get:function(){return H.getAppStateControllerMessenger}}),Object.defineProperty(r,"getApprovalControllerMessenger",{enumerable:!0,get:function(){return ie.getApprovalControllerMessenger}}),Object.defineProperty(r,"getBridgeControllerInitMessenger",{enumerable:!0,get:function(){return $.getBridgeControllerInitMessenger}}),Object.defineProperty(r,"getBridgeControllerMessenger",{enumerable:!0,get:function(){return $.getBridgeControllerMessenger}}),Object.defineProperty(r,"getBridgeStatusControllerMessenger",{enumerable:!0,get:function(){return G.getBridgeStatusControllerMessenger}}),Object.defineProperty(r,"getCurrencyRateControllerInitMessenger",{enumerable:!0,get:function(){return O.getCurrencyRateControllerInitMessenger}}),Object.defineProperty(r,"getCurrencyRateControllerMessenger",{enumerable:!0,get:function(){return O.getCurrencyRateControllerMessenger}}),Object.defineProperty(r,"getDecryptMessageControllerInitMessenger",{enumerable:!0,get:function(){return ce.getDecryptMessageControllerInitMessenger}}),Object.defineProperty(r,"getDecryptMessageControllerMessenger",{enumerable:!0,get:function(){return ce.getDecryptMessageControllerMessenger}}),Object.defineProperty(r,"getDecryptMessageManagerMessenger",{enumerable:!0,get:function(){return le.getDecryptMessageManagerMessenger}}),Object.defineProperty(r,"getEncryptionPublicKeyControllerInitMessenger",{enumerable:!0,get:function(){return ue.getEncryptionPublicKeyControllerInitMessenger}}),Object.defineProperty(r,"getEncryptionPublicKeyControllerMessenger",{enumerable:!0,get:function(){return ue.getEncryptionPublicKeyControllerMessenger}}),Object.defineProperty(r,"getEncryptionPublicKeyManagerMessenger",{enumerable:!0,get:function(){return de.getEncryptionPublicKeyManagerMessenger}}),Object.defineProperty(r,"getEnsControllerInitMessenger",{enumerable:!0,get:function(){return N.getEnsControllerInitMessenger}}),Object.defineProperty(r,"getEnsControllerMessenger",{enumerable:!0,get:function(){return N.getEnsControllerMessenger}}),Object.defineProperty(r,"getErrorReportingServiceMessenger",{enumerable:!0,get:function(){return oe.getErrorReportingServiceMessenger}}),Object.defineProperty(r,"getGasFeeControllerInitMessenger",{enumerable:!0,get:function(){return D.getGasFeeControllerInitMessenger}}),Object.defineProperty(r,"getGasFeeControllerMessenger",{enumerable:!0,get:function(){return D.getGasFeeControllerMessenger}}),Object.defineProperty(r,"getKeyringControllerInitMessenger",{enumerable:!0,get:function(){return V.getKeyringControllerInitMessenger}}),Object.defineProperty(r,"getKeyringControllerMessenger",{enumerable:!0,get:function(){return V.getKeyringControllerMessenger}}),Object.defineProperty(r,"getLoggingControllerMessenger",{enumerable:!0,get:function(){return ne.getLoggingControllerMessenger}}),Object.defineProperty(r,"getMetaMetricsControllerMessenger",{enumerable:!0,get:function(){return k.getMetaMetricsControllerMessenger}}),Object.defineProperty(r,"getMetaMetricsDataDeletionControllerMessenger",{enumerable:!0,get:function(){return re.getMetaMetricsDataDeletionControllerMessenger}}),Object.defineProperty(r,"getNameControllerInitMessenger",{enumerable:!0,get:function(){return R.getNameControllerInitMessenger}}),Object.defineProperty(r,"getNameControllerMessenger",{enumerable:!0,get:function(){return R.getNameControllerMessenger}}),Object.defineProperty(r,"getNetworkControllerInitMessenger",{enumerable:!0,get:function(){return Y.getNetworkControllerInitMessenger}}),Object.defineProperty(r,"getNetworkControllerMessenger",{enumerable:!0,get:function(){return Y.getNetworkControllerMessenger}}),Object.defineProperty(r,"getOnboardingControllerMessenger",{enumerable:!0,get:function(){return B.getOnboardingControllerMessenger}}),Object.defineProperty(r,"getPermissionControllerInitMessenger",{enumerable:!0,get:function(){return W.getPermissionControllerInitMessenger}}),Object.defineProperty(r,"getPermissionControllerMessenger",{enumerable:!0,get:function(){return W.getPermissionControllerMessenger}}),Object.defineProperty(r,"getPermissionLogControllerMessenger",{enumerable:!0,get:function(){return z.getPermissionLogControllerMessenger}}),Object.defineProperty(r,"getPhishingControllerMessenger",{enumerable:!0,get:function(){return ee.getPhishingControllerMessenger}}),Object.defineProperty(r,"getPreferencesControllerMessenger",{enumerable:!0,get:function(){return K.getPreferencesControllerMessenger}}),Object.defineProperty(r,"getProfileMetricsControllerMessenger",{enumerable:!0,get:function(){return Ce.getProfileMetricsControllerMessenger}}),Object.defineProperty(r,"getProfileMetricsServiceMessenger",{enumerable:!0,get:function(){return be.getProfileMetricsServiceMessenger}}),Object.defineProperty(r,"getRatesControllerMessenger",{enumerable:!0,get:function(){return _.getRatesControllerMessenger}}),Object.defineProperty(r,"getRemoteFeatureFlagControllerInitMessenger",{enumerable:!0,get:function(){return x.getRemoteFeatureFlagControllerInitMessenger}}),Object.defineProperty(r,"getRemoteFeatureFlagControllerMessenger",{enumerable:!0,get:function(){return x.getRemoteFeatureFlagControllerMessenger}}),Object.defineProperty(r,"getRewardsControllerMessenger",{enumerable:!0,get:function(){return F.getRewardsControllerMessenger}}),Object.defineProperty(r,"getSelectedNetworkControllerMessenger",{enumerable:!0,get:function(){return j.getSelectedNetworkControllerMessenger}}),Object.defineProperty(r,"getSignatureControllerInitMessenger",{enumerable:!0,get:function(){return ge.getSignatureControllerInitMessenger}}),Object.defineProperty(r,"getSignatureControllerMessenger",{enumerable:!0,get:function(){return ge.getSignatureControllerMessenger}}),Object.defineProperty(r,"getStorageServiceMessenger",{enumerable:!0,get:function(){return we.getStorageServiceMessenger}}),Object.defineProperty(r,"getSubjectMetadataControllerMessenger",{enumerable:!0,get:function(){return q.getSubjectMetadataControllerMessenger}}),Object.defineProperty(r,"getSwapsControllerInitMessenger",{enumerable:!0,get:function(){return U.getSwapsControllerInitMessenger}}),Object.defineProperty(r,"getSwapsControllerMessenger",{enumerable:!0,get:function(){return U.getSwapsControllerMessenger}}),Object.defineProperty(r,"getTokenBalancesControllerInitMessenger",{enumerable:!0,get:function(){return P.getTokenBalancesControllerInitMessenger}}),Object.defineProperty(r,"getTokenBalancesControllerMessenger",{enumerable:!0,get:function(){return P.getTokenBalancesControllerMessenger}}),Object.defineProperty(r,"getTokenDetectionControllerInitMessenger",{enumerable:!0,get:function(){return E.getTokenDetectionControllerInitMessenger}}),Object.defineProperty(r,"getTokenDetectionControllerMessenger",{enumerable:!0,get:function(){return E.getTokenDetectionControllerMessenger}}),Object.defineProperty(r,"getTokenListControllerInitMessenger",{enumerable:!0,get:function(){return T.getTokenListControllerInitMessenger}}),Object.defineProperty(r,"getTokenListControllerMessenger",{enumerable:!0,get:function(){return T.getTokenListControllerMessenger}}),Object.defineProperty(r,"getTokensControllerInitMessenger",{enumerable:!0,get:function(){return A.getTokensControllerInitMessenger}}),Object.defineProperty(r,"getTokensControllerMessenger",{enumerable:!0,get:function(){return A.getTokensControllerMessenger}}),Object.defineProperty(r,"getTransactionPayControllerInitMessenger",{enumerable:!0,get:function(){return a.getTransactionPayControllerInitMessenger}}),Object.defineProperty(r,"getTransactionPayControllerMessenger",{enumerable:!0,get:function(){return a.getTransactionPayControllerMessenger}}),Object.defineProperty(r,"getUserOperationControllerInitMessenger",{enumerable:!0,get:function(){return pe.getUserOperationControllerInitMessenger}}),Object.defineProperty(r,"getUserOperationControllerMessenger",{enumerable:!0,get:function(){return pe.getUserOperationControllerMessenger}});var n=e("lodash"),s=e("./ppom-controller-messenger"),o=e("./snaps"),i=e("./transaction-controller-messenger"),a=e("./transaction-pay-controller-messenger"),l=e("./core-backend"),c=e("./multichain"),u=e("./accounts/institutional-snap-controller-messenger"),d=e("./identity"),g=e("./assets"),p=e("./notifications"),h=e("./defi-positions"),m=e("./defi-positions/defi-positions-controller-messenger"),f=e("./delegation/delegation-controller-messenger"),C=e("./accounts"),b=e("./seedless-onboarding"),w=e("./smart-transactions-controller-messenger"),v=e("./shield/shield-controller-messenger"),y=e("./subscription"),S=e("./connectivity"),M=e("./gator-permissions/gator-permissions-controller-messenger"),k=e("./metametrics-controller-messenger"),I=e("./identity/user-storage-controller-messenger"),T=e("./token-list-controller-messenger"),E=e("./token-detection-controller-messenger"),A=e("./tokens-controller-messenger"),P=e("./token-balances-controller-messenger"),_=e("./rates-controller-messenger"),O=e("./currency-rate-controller-messenger"),N=e("./ens-controller-messenger"),R=e("./name-controller-messenger"),D=e("./gas-fee-controller-messenger"),j=e("./selected-network-controller-messenger"),L=e("./account-tracker-controller-messenger"),B=e("./onboarding-controller-messenger"),x=e("./remote-feature-flag-controller-messenger"),F=e("./rewards-controller-messenger"),U=e("./swaps-controller-messenger"),$=e("./bridge-controller-messenger"),G=e("./bridge-status-controller-messenger"),K=e("./preferences-controller-messenger"),H=e("./app-state-controller-messenger"),W=e("./permission-controller-messenger"),q=e("./subject-metadata-controller-messenger"),V=e("./keyring-controller-messenger"),z=e("./permission-log-controller-messenger"),Y=e("./network-controller-messenger"),X=e("./subscription/subscription-service-messenger"),J=e("./announcement-controller-messenger"),Q=e("./account-order-controller-messenger"),Z=e("./accounts-controller-messenger"),ee=e("./phishing-controller-messenger"),te=e("./alert-controller-messenger"),re=e("./metametrics-data-deletion-controller-messenger"),ne=e("./logging-controller-messenger"),se=e("./app-metadata-controller-messenger"),oe=e("./error-reporting-service-messenger"),ie=e("./approval-controller-messenger"),ae=e("./address-book-controller-messenger"),le=e("./decrypt-message-manager-messenger"),ce=e("./decrypt-message-controller-messenger"),ue=e("./encryption-public-key-controller-messenger"),de=e("./encryption-public-key-manager-messenger"),ge=e("./signature-controller-messenger"),pe=e("./user-operation-controller-messenger"),he=e("./reward-data-service-messenger"),me=e("./claims/claims-controller-messenger"),fe=e("./claims/claims-service-messenger"),Ce=e("./profile-metrics-controller-messenger"),be=e("./profile-metrics-service-messenger"),we=e("./storage-service-messenger");r.CONTROLLER_MESSENGERS={AccountOrderController:{getMessenger:Q.getAccountOrderControllerMessenger,getInitMessenger:n.noop},AccountTrackerController:{getMessenger:L.getAccountTrackerControllerMessenger,getInitMessenger:L.getAccountTrackerControllerInitMessenger},AccountsController:{getMessenger:Z.getAccountsControllerMessenger,getInitMessenger:n.noop},AddressBookController:{getMessenger:ae.getAddressBookControllerMessenger,getInitMessenger:n.noop},AlertController:{getMessenger:te.getAlertControllerMessenger,getInitMessenger:n.noop},AnnouncementController:{getMessenger:J.getAnnouncementControllerMessenger,getInitMessenger:n.noop},AppMetadataController:{getMessenger:se.getAppMetadataControllerMessenger,getInitMessenger:n.noop},ApprovalController:{getMessenger:ie.getApprovalControllerMessenger,getInitMessenger:n.noop},AppStateController:{getMessenger:H.getAppStateControllerMessenger,getInitMessenger:n.noop},AuthenticationController:{getMessenger:d.getAuthenticationControllerMessenger,getInitMessenger:d.getAuthenticationControllerInitMessenger},BridgeController:{getMessenger:$.getBridgeControllerMessenger,getInitMessenger:$.getBridgeControllerInitMessenger},BridgeStatusController:{getMessenger:G.getBridgeStatusControllerMessenger,getInitMessenger:n.noop},ConnectivityController:{getMessenger:S.getConnectivityControllerMessenger,getInitMessenger:n.noop},ClaimsController:{getMessenger:me.getClaimsControllerMessenger,getInitMessenger:me.getClaimsControllerInitMessenger},ClaimsService:{getMessenger:fe.getClaimsServiceMessenger,getInitMessenger:n.noop},CronjobController:{getMessenger:o.getCronjobControllerMessenger,getInitMessenger:n.noop},CurrencyRateController:{getMessenger:O.getCurrencyRateControllerMessenger,getInitMessenger:O.getCurrencyRateControllerInitMessenger},DecryptMessageController:{getMessenger:ce.getDecryptMessageControllerMessenger,getInitMessenger:ce.getDecryptMessageControllerInitMessenger},DecryptMessageManager:{getMessenger:le.getDecryptMessageManagerMessenger,getInitMessenger:n.noop},DeFiPositionsController:{getMessenger:h.getDeFiPositionsControllerMessenger,getInitMessenger:m.getDeFiPositionsControllerInitMessenger},DelegationController:{getMessenger:f.getDelegationControllerMessenger,getInitMessenger:f.getDelegationControllerInitMessenger},EncryptionPublicKeyController:{getMessenger:ue.getEncryptionPublicKeyControllerMessenger,getInitMessenger:ue.getEncryptionPublicKeyControllerInitMessenger},EncryptionPublicKeyManager:{getMessenger:de.getEncryptionPublicKeyManagerMessenger,getInitMessenger:n.noop},EnsController:{getMessenger:N.getEnsControllerMessenger,getInitMessenger:N.getEnsControllerInitMessenger},ErrorReportingService:{getMessenger:oe.getErrorReportingServiceMessenger,getInitMessenger:n.noop},StorageService:{getMessenger:we.getStorageServiceMessenger,getInitMessenger:n.noop},ExecutionService:{getMessenger:o.getExecutionServiceMessenger,getInitMessenger:n.noop},GasFeeController:{getMessenger:D.getGasFeeControllerMessenger,getInitMessenger:D.getGasFeeControllerInitMessenger},GatorPermissionsController:{getMessenger:M.getGatorPermissionsControllerMessenger,getInitMessenger:n.noop},InstitutionalSnapController:{getMessenger:u.getInstitutionalSnapControllerMessenger,getInitMessenger:n.noop},KeyringController:{getMessenger:V.getKeyringControllerMessenger,getInitMessenger:V.getKeyringControllerInitMessenger},LoggingController:{getMessenger:ne.getLoggingControllerMessenger,getInitMessenger:n.noop},MetaMetricsController:{getMessenger:k.getMetaMetricsControllerMessenger,getInitMessenger:n.noop},MetaMetricsDataDeletionController:{getMessenger:re.getMetaMetricsDataDeletionControllerMessenger,getInitMessenger:n.noop},MultichainAssetsController:{getMessenger:c.getMultichainAssetsControllerMessenger,getInitMessenger:n.noop},MultichainAssetsRatesController:{getMessenger:c.getMultichainAssetsRatesControllerMessenger,getInitMessenger:n.noop},MultichainBalancesController:{getMessenger:c.getMultichainBalancesControllerMessenger,getInitMessenger:n.noop},MultichainTransactionsController:{getMessenger:c.getMultichainTransactionsControllerMessenger,getInitMessenger:n.noop},MultichainNetworkController:{getMessenger:c.getMultichainNetworkControllerMessenger,getInitMessenger:n.noop},MultichainRouter:{getMessenger:o.getMultichainRouterMessenger,getInitMessenger:n.noop},NameController:{getMessenger:R.getNameControllerMessenger,getInitMessenger:R.getNameControllerInitMessenger},NetworkController:{getMessenger:Y.getNetworkControllerMessenger,getInitMessenger:Y.getNetworkControllerInitMessenger},NotificationServicesController:{getMessenger:p.getNotificationServicesControllerMessenger,getInitMessenger:n.noop},NotificationServicesPushController:{getMessenger:p.getNotificationServicesPushControllerMessenger,getInitMessenger:p.getNotificationServicesPushControllerInitMessenger},OAuthService:{getMessenger:b.getOAuthServiceMessenger,getInitMessenger:n.noop},OnboardingController:{getMessenger:B.getOnboardingControllerMessenger,getInitMessenger:n.noop},PermissionController:{getMessenger:W.getPermissionControllerMessenger,getInitMessenger:W.getPermissionControllerInitMessenger},PermissionLogController:{getMessenger:z.getPermissionLogControllerMessenger,getInitMessenger:n.noop},PhishingController:{getMessenger:ee.getPhishingControllerMessenger,getInitMessenger:n.noop},RateLimitController:{getMessenger:o.getRateLimitControllerMessenger,getInitMessenger:o.getRateLimitControllerInitMessenger},RatesController:{getMessenger:_.getRatesControllerMessenger,getInitMessenger:n.noop},RemoteFeatureFlagController:{getMessenger:x.getRemoteFeatureFlagControllerMessenger,getInitMessenger:x.getRemoteFeatureFlagControllerInitMessenger},SeedlessOnboardingController:{getMessenger:b.getSeedlessOnboardingControllerMessenger,getInitMessenger:b.getSeedlessOnboardingControllerInitMessenger},SelectedNetworkController:{getMessenger:j.getSelectedNetworkControllerMessenger,getInitMessenger:n.noop},ShieldController:{getMessenger:v.getShieldControllerMessenger,getInitMessenger:v.getShieldControllerInitMessenger},SignatureController:{getMessenger:ge.getSignatureControllerMessenger,getInitMessenger:ge.getSignatureControllerInitMessenger},SnapsNameProvider:{getMessenger:o.getSnapsNameProviderMessenger,getInitMessenger:n.noop},SnapsRegistry:{getMessenger:o.getSnapsRegistryMessenger,getInitMessenger:n.noop},SnapController:{getMessenger:o.getSnapControllerMessenger,getInitMessenger:o.getSnapControllerInitMessenger},SnapInsightsController:{getMessenger:o.getSnapInsightsControllerMessenger,getInitMessenger:n.noop},SnapInterfaceController:{getMessenger:o.getSnapInterfaceControllerMessenger,getInitMessenger:n.noop},SnapKeyringBuilder:{getMessenger:C.getSnapKeyringBuilderMessenger,getInitMessenger:C.getSnapKeyringBuilderInitMessenger},SubjectMetadataController:{getMessenger:q.getSubjectMetadataControllerMessenger,getInitMessenger:n.noop},SubscriptionController:{getMessenger:y.getSubscriptionControllerMessenger,getInitMessenger:y.getSubscriptionControllerInitMessenger},SubscriptionService:{getMessenger:X.getSubscriptionServiceMessenger,getInitMessenger:n.noop},RewardsDataService:{getMessenger:he.getRewardsDataServiceMessenger,getInitMessenger:n.noop},RewardsController:{getMessenger:F.getRewardsControllerMessenger,getInitMessenger:F.getRewardsControllerInitMessenger},SwapsController:{getMessenger:U.getSwapsControllerMessenger,getInitMessenger:U.getSwapsControllerInitMessenger},PPOMController:{getMessenger:s.getPPOMControllerMessenger,getInitMessenger:s.getPPOMControllerInitMessenger},PreferencesController:{getMessenger:K.getPreferencesControllerMessenger,getInitMessenger:n.noop},TokenBalancesController:{getMessenger:P.getTokenBalancesControllerMessenger,getInitMessenger:P.getTokenBalancesControllerInitMessenger},TokenDetectionController:{getMessenger:E.getTokenDetectionControllerMessenger,getInitMessenger:E.getTokenDetectionControllerInitMessenger},TokenListController:{getMessenger:T.getTokenListControllerMessenger,getInitMessenger:T.getTokenListControllerInitMessenger},TokensController:{getMessenger:A.getTokensControllerMessenger,getInitMessenger:A.getTokensControllerInitMessenger},TransactionController:{getMessenger:i.getTransactionControllerMessenger,getInitMessenger:i.getTransactionControllerInitMessenger},TransactionPayController:{getMessenger:a.getTransactionPayControllerMessenger,getInitMessenger:a.getTransactionPayControllerInitMessenger},UserOperationController:{getMessenger:pe.getUserOperationControllerMessenger,getInitMessenger:pe.getUserOperationControllerInitMessenger},UserStorageController:{getMessenger:d.getUserStorageControllerMessenger,getInitMessenger:I.getUserStorageControllerInitMessenger},TokenRatesController:{getMessenger:g.getTokenRatesControllerMessenger,getInitMessenger:g.getTokenRatesControllerInitMessenger},NftController:{getMessenger:g.getNftControllerMessenger,getInitMessenger:g.getNftControllerInitMessenger},NftDetectionController:{getMessenger:g.getNftDetectionControllerMessenger,getInitMessenger:n.noop},AssetsContractController:{getMessenger:g.getAssetsContractControllerMessenger,getInitMessenger:g.getAssetsContractControllerInitMessenger},AccountTreeController:{getMessenger:C.getAccountTreeControllerMessenger,getInitMessenger:C.getAccountTreeControllerInitMessenger},WebSocketService:{getMessenger:o.getWebSocketServiceMessenger,getInitMessenger:n.noop},BackendWebSocketService:{getMessenger:l.getBackendWebSocketServiceMessenger,getInitMessenger:l.getBackendWebSocketServiceInitMessenger},AccountActivityService:{getMessenger:l.getAccountActivityServiceMessenger,getInitMessenger:n.noop},SmartTransactionsController:{getMessenger:w.getSmartTransactionsControllerMessenger,getInitMessenger:w.getSmartTransactionsControllerInitMessenger},MultichainAccountService:{getMessenger:C.getMultichainAccountServiceMessenger,getInitMessenger:C.getMultichainAccountServiceInitMessenger},NetworkOrderController:{getMessenger:g.getNetworkOrderControllerMessenger,getInitMessenger:n.noop},NetworkEnablementController:{getMessenger:g.getNetworkEnablementControllerMessenger,getInitMessenger:g.getNetworkEnablementControllerInitMessenger},ProfileMetricsController:{getMessenger:Ce.getProfileMetricsControllerMessenger,getInitMessenger:n.noop},ProfileMetricsService:{getMessenger:be.getProfileMetricsServiceMessenger,getInitMessenger:n.noop}}}}},{package:"$root$",file:"app/scripts/controller-init/messengers/index.ts"}],[111,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getKeyringControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"KeyringControllerInit",parent:e});return e.delegate({messenger:t,actions:["AppStateController:requestQrCodeScan"],events:[]}),t},r.getKeyringControllerMessenger=function(e){return new n.Messenger({namespace:"KeyringController",parent:e})};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/keyring-controller-messenger.ts"}],[112,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getLoggingControllerMessenger=function(e){return new n.Messenger({namespace:"LoggingController",parent:e})};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/logging-controller-messenger.ts"}],[113,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getMetaMetricsControllerMessenger=function(e){const t=new n.Messenger({namespace:"MetaMetricsController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","PreferencesController:getState"],events:["PreferencesController:stateChange","NetworkController:networkDidChange"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/metametrics-controller-messenger.ts"}],[114,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getMetaMetricsDataDeletionControllerMessenger=function(e){const t=new n.Messenger({namespace:"MetaMetricsDataDeletionController",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:getState"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/metametrics-data-deletion-controller-messenger.ts"}],[115,{"./multichain-assets-controller-messenger":116,"./multichain-assets-rates-controller-messenger":117,"./multichain-balances-controller-messenger":118,"./multichain-network-controller-messenger":119,"./multichain-transactions-controller-messenger":120},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getMultichainAssetsControllerMessenger",{enumerable:!0,get:function(){return n.getMultichainAssetsControllerMessenger}}),Object.defineProperty(r,"getMultichainAssetsRatesControllerMessenger",{enumerable:!0,get:function(){return s.getMultichainAssetsRatesControllerMessenger}}),Object.defineProperty(r,"getMultichainBalancesControllerMessenger",{enumerable:!0,get:function(){return o.getMultichainBalancesControllerMessenger}}),Object.defineProperty(r,"getMultichainNetworkControllerMessenger",{enumerable:!0,get:function(){return a.getMultichainNetworkControllerMessenger}}),Object.defineProperty(r,"getMultichainTransactionsControllerMessenger",{enumerable:!0,get:function(){return i.getMultichainTransactionsControllerMessenger}});var n=e("./multichain-assets-controller-messenger"),s=e("./multichain-assets-rates-controller-messenger"),o=e("./multichain-balances-controller-messenger"),i=e("./multichain-transactions-controller-messenger"),a=e("./multichain-network-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/index.ts"}],[116,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getMultichainAssetsControllerMessenger=function(e){const t=new n.Messenger({namespace:"MultichainAssetsController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","AccountsController:accountRemoved","AccountsController:accountAssetListUpdated"],actions:["PermissionController:getPermissions","SnapController:handleRequest","SnapController:getAll","AccountsController:listMultichainAccounts"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-assets-controller-messenger.ts"}],[117,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getMultichainAssetsRatesControllerMessenger=function(e){const t=new n.Messenger({namespace:"MultichainAssetsRatesController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","KeyringController:lock","KeyringController:unlock","CurrencyRateController:stateChange","MultichainAssetsController:accountAssetListUpdated"],actions:["AccountsController:listMultichainAccounts","SnapController:handleRequest","CurrencyRateController:getState","MultichainAssetsController:getState","AccountsController:getSelectedMultichainAccount"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-assets-rates-controller-messenger.ts"}],[118,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getMultichainBalancesControllerMessenger=function(e){const t=new n.Messenger({namespace:"MultichainBalancesController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","AccountsController:accountRemoved","AccountsController:accountBalancesUpdated","MultichainAssetsController:accountAssetListUpdated"],actions:["AccountsController:listMultichainAccounts","SnapController:handleRequest","MultichainAssetsController:getState","KeyringController:getState"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-balances-controller-messenger.ts"}],[119,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getMultichainNetworkControllerMessenger=function(e){const t=new n.Messenger({namespace:"MultichainNetworkController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:setActiveNetwork","NetworkController:getState","NetworkController:removeNetwork","NetworkController:findNetworkClientIdByChainId","NetworkController:getSelectedChainId","AccountsController:listMultichainAccounts"],events:["AccountsController:selectedAccountChange"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-network-controller-messenger.ts"}],[120,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getMultichainTransactionsControllerMessenger=function(e){const t=new n.Messenger({namespace:"MultichainTransactionsController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","AccountsController:accountRemoved","AccountsController:accountTransactionsUpdated"],actions:["AccountsController:listMultichainAccounts","SnapController:handleRequest","KeyringController:getState"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-transactions-controller-messenger.ts"}],[121,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getNameControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"NameControllerInit",parent:e});return e.delegate({messenger:t,actions:["PreferencesController:getState"]}),t},r.getNameControllerMessenger=function(e){return new n.Messenger({namespace:"NameController",parent:e})};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/name-controller-messenger.ts"}],[122,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getNetworkControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"NetworkControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:getMetaMetricsId","MetaMetricsController:trackEvent","RemoteFeatureFlagController:getState"],events:["NetworkController:rpcEndpointUnavailable","NetworkController:rpcEndpointDegraded","RemoteFeatureFlagController:stateChange"]}),t},r.getNetworkControllerMessenger=function(e){const t=new n.Messenger({namespace:"NetworkController",parent:e});return e.delegate({messenger:t,actions:["ConnectivityController:getState"],events:[]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/network-controller-messenger.ts"}],[123,{"./notification-services-controller-messenger":124,"./notification-services-push-controller-messenger":125},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getNotificationServicesControllerMessenger",{enumerable:!0,get:function(){return n.getNotificationServicesControllerMessenger}}),Object.defineProperty(r,"getNotificationServicesPushControllerInitMessenger",{enumerable:!0,get:function(){return s.getNotificationServicesPushControllerInitMessenger}}),Object.defineProperty(r,"getNotificationServicesPushControllerMessenger",{enumerable:!0,get:function(){return s.getNotificationServicesPushControllerMessenger}});var n=e("./notification-services-controller-messenger"),s=e("./notification-services-push-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/notifications/index.ts"}],[124,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getNotificationServicesControllerMessenger=function(e){const t=new n.Messenger({namespace:"NotificationServicesController",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getState","AuthenticationController:getBearerToken","AuthenticationController:isSignedIn","AuthenticationController:performSignIn","NotificationServicesPushController:enablePushNotifications","NotificationServicesPushController:disablePushNotifications","NotificationServicesPushController:subscribeToPushNotifications"],events:["KeyringController:stateChange","KeyringController:lock","KeyringController:unlock","NotificationServicesPushController:onNewNotifications","NotificationServicesPushController:stateChange"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/notifications/notification-services-controller-messenger.ts"}],[125,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getNotificationServicesPushControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"NotificationServicesPushControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent"],events:["NotificationServicesPushController:onNewNotifications","NotificationServicesPushController:pushNotificationClicked"]}),t},r.getNotificationServicesPushControllerMessenger=function(e){const t=new n.Messenger({namespace:"NotificationServicesPushController",parent:e});return e.delegate({messenger:t,actions:["AuthenticationController:getBearerToken"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/notifications/notification-services-push-controller-messenger.ts"}],[126,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getOnboardingControllerMessenger=function(e){return new n.Messenger({namespace:"OnboardingController",parent:e})};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/onboarding-controller-messenger.ts"}],[127,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPermissionControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"PermissionControllerInit",parent:e});return e.delegate({messenger:t,actions:["AppStateController:getUnlockPromise","AccountsController:listAccounts","CurrencyRateController:getState","KeyringController:getKeyringsByType","KeyringController:withKeyring","MultichainRouter:isSupportedScope","MultichainRouter:getSupportedAccounts","NetworkController:findNetworkClientIdByChainId","PhishingController:maybeUpdateState","PhishingController:testOrigin","PreferencesController:getState","RateLimitController:call","SnapController:clearSnapState","SnapController:get","SnapController:getSnapState","SnapController:handleRequest","SnapController:updateSnapState","SnapInterfaceController:createInterface","SnapInterfaceController:getInterface"]}),t},r.getPermissionControllerMessenger=function(e){const t=new n.Messenger({namespace:"PermissionController",parent:e});return e.delegate({messenger:t,actions:["ApprovalController:addRequest","ApprovalController:hasRequest","ApprovalController:acceptRequest","ApprovalController:rejectRequest","SnapController:getPermitted","SnapController:install","SubjectMetadataController:getSubjectMetadata"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/permission-controller-messenger.ts"}],[128,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPermissionLogControllerMessenger=function(e){return new n.Messenger({namespace:"PermissionLogController",parent:e})};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/permission-log-controller-messenger.ts"}],[1289,{"@metamask/base-controller":1407,"@metamask/controller-utils":1494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.AddressBookController=r.getDefaultAddressBookControllerState=r.controllerName=r.AddressType=void 0;const i=e("@metamask/base-controller"),a=e("@metamask/controller-utils");var l;!function(e){e.externallyOwnedAccounts="EXTERNALLY_OWNED_ACCOUNTS",e.contractAccounts="CONTRACT_ACCOUNTS",e.nonAccounts="NON_ACCOUNTS"}(l||(r.AddressType=l={})),r.controllerName="AddressBookController";const c={addressBook:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}};r.getDefaultAddressBookControllerState=()=>({addressBook:{}});class u extends i.BaseController{constructor({messenger:e,state:t}){const i={...(0,r.getDefaultAddressBookControllerState)(),...t};super({messenger:e,metadata:c,name:r.controllerName,state:i}),n.add(this),o(this,n,"m",s).call(this)}list(){const{addressBook:e}=this.state;return Object.keys(e).reduce((t,r)=>{const n=r;return[...t,...Object.values(e[n])]},[])}clear(){this.update(e=>{e.addressBook={}})}delete(e,t){if(t=(0,a.toChecksumHexAddress)(t),!([e,t].every(e=>(0,a.isSafeDynamicKey)(e))&&(0,a.isValidHexAddress)(t)&&this.state.addressBook[e]&&this.state.addressBook[e][t]))return!1;const r={...this.state.addressBook[e][t]};return this.update(r=>{const n=r.addressBook[e];n?.[t]&&(delete n[t],0===Object.keys(n).length&&delete r.addressBook[e])}),"*"!==String(e)&&this.messenger.publish("AddressBookController:contactDeleted",r),!0}set(e,t,r=(0,a.toHex)(1),n="",s){if(e=(0,a.toChecksumHexAddress)(e),!(0,a.isValidHexAddress)(e))return!1;const o={address:e,chainId:r,isEns:!1,memo:n,name:t,addressType:s,lastUpdatedAt:Date.now()},i=(0,a.normalizeEnsName)(t);return i&&(o.name=i,o.isEns=!0),this.update(t=>{t.addressBook={...this.state.addressBook,[r]:{...this.state.addressBook[r],[e]:o}}}),"*"!==String(r)&&this.messenger.publish("AddressBookController:contactUpdated",o),!0}}r.AddressBookController=u,n=new WeakSet,s=function(){this.messenger.registerActionHandler(`${r.controllerName}:list`,this.list.bind(this)),this.messenger.registerActionHandler(`${r.controllerName}:set`,this.set.bind(this)),this.messenger.registerActionHandler(`${r.controllerName}:delete`,this.delete.bind(this))},r.default=u}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/AddressBookController.cjs"}],[129,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPhishingControllerMessenger=function(e){const t=new n.Messenger({namespace:"PhishingController",parent:e});return e.delegate({messenger:t,events:["TransactionController:stateChange"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/phishing-controller-messenger.ts"}],[1290,{"./AddressBookController.cjs":1289},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AddressBookController=r.getDefaultAddressBookControllerState=void 0;var n=e("./AddressBookController.cjs");Object.defineProperty(r,"getDefaultAddressBookControllerState",{enumerable:!0,get:function(){return n.getDefaultAddressBookControllerState}}),Object.defineProperty(r,"AddressBookController",{enumerable:!0,get:function(){return n.AddressBookController}})}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/index.cjs"}],[1291,{"@metamask/base-controller":1407},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.AnnouncementController=void 0;const i=e("@metamask/base-controller"),a={announcements:{}},l={announcements:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0}};class c extends i.BaseController{constructor({messenger:e,state:t,allAnnouncements:r}){const i={...a,...t};super({messenger:e,metadata:l,name:"AnnouncementController",state:i}),n.add(this),o(this,n,"m",s).call(this,r)}resetViewed(){this.update(({announcements:e})=>{for(const t of Object.values(e))t.isShown=!1})}updateViewed(e){this.update(({announcements:t})=>{for(const r of Object.keys(e).map(Number))t[r].isShown=e[r]})}}r.AnnouncementController=c,n=new WeakSet,s=function(e){this.update(t=>{Object.values(e).forEach(e=>{t.announcements[e.id]=t.announcements[e.id]??{...e,isShown:!1}})})}}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/AnnouncementController.cjs"}],[1292,{"./AnnouncementController.cjs":1291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AnnouncementController=void 0;var n=e("./AnnouncementController.cjs");Object.defineProperty(r,"AnnouncementController",{enumerable:!0,get:function(){return n.AnnouncementController}})}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/index.cjs"}],[13,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,o,i,a,l,c,u;Object.defineProperty(r,"__esModule",{value:!0}),r.PREINSTALLED_SNAPS_URLS=void 0;r.PREINSTALLED_SNAPS_URLS=[new URL("/snaps/permissions-kernel-snap.json",(null===(n=self.document)||void 0===n?void 0:n.baseURI)||self.location.href),new URL("/snaps/gator-permissions-snap.json",(null===(s=self.document)||void 0===s?void 0:s.baseURI)||self.location.href),new URL("/snaps/message-signing-snap.json",(null===(o=self.document)||void 0===o?void 0:o.baseURI)||self.location.href),new URL("/snaps/ens-resolver-snap.json",(null===(i=self.document)||void 0===i?void 0:i.baseURI)||self.location.href),new URL("/snaps/institutional-wallet-snap.json",(null===(a=self.document)||void 0===a?void 0:a.baseURI)||self.location.href),new URL("/snaps/bitcoin-wallet-snap.json",(null===(l=self.document)||void 0===l?void 0:l.baseURI)||self.location.href),new URL("/snaps/solana-wallet-snap.json",(null===(c=self.document)||void 0===c?void 0:c.baseURI)||self.location.href),new URL("/snaps/tron-wallet-snap.json",(null===(u=self.document)||void 0===u?void 0:u.baseURI)||self.location.href)]}}},{package:"$root$",file:"app/scripts/constants/snaps.ts"}],[130,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPPOMControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"PPOMControllerInit",parent:e});return e.delegate({messenger:t,events:["PreferencesController:stateChange"],actions:["NetworkController:getNetworkClientById","NetworkController:getSelectedNetworkClient","NetworkController:getState"]}),t},r.getPPOMControllerMessenger=function(e){const t=new n.Messenger({namespace:"PPOMController",parent:e});return e.delegate({messenger:t,events:["NetworkController:stateChange","NetworkController:networkDidChange"],actions:["NetworkController:getNetworkClientById"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/ppom-controller-messenger.ts"}],[131,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPreferencesControllerMessenger=function(e){const t=new n.Messenger({namespace:"PreferencesController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:setSelectedAccount","AccountsController:getSelectedAccount","AccountsController:getAccountByAddress","AccountsController:setAccountName","NetworkController:getState"],events:["AccountsController:stateChange"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/preferences-controller-messenger.ts"}],[132,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProfileMetricsControllerMessenger=function(e){const t=new n.Messenger({namespace:"ProfileMetricsController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getState","ProfileMetricsService:submitMetrics"],events:["AccountsController:accountAdded","AccountsController:accountRemoved","KeyringController:lock","KeyringController:unlock","TransactionController:transactionSubmitted"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/profile-metrics-controller-messenger.ts"}],[133,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProfileMetricsServiceMessenger=function(e){const t=new n.Messenger({namespace:"ProfileMetricsService",parent:e});return e.delegate({messenger:t,actions:["AuthenticationController:getBearerToken"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/profile-metrics-service-messenger.ts"}],[134,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getRatesControllerMessenger=function(e){return new n.Messenger({namespace:"RatesController",parent:e})};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/rates-controller-messenger.ts"}],[135,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getRemoteFeatureFlagControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"RemoteFeatureFlagControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:getMetaMetricsId","PreferencesController:getState","OnboardingController:getState"],events:["PreferencesController:stateChange","OnboardingController:stateChange"]}),t},r.getRemoteFeatureFlagControllerMessenger=function(e){return new n.Messenger({namespace:"RemoteFeatureFlagController",parent:e})};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/remote-feature-flag-controller-messenger.ts"}],[136,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getRewardsDataServiceMessenger=function(e){const t=new n.Messenger({namespace:"RewardsDataService",parent:e});return e.delegate({messenger:t,actions:["PreferencesController:getState"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/reward-data-service-messenger.ts"}],[137,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getRewardsControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"RewardsControllerInit",parent:e});return e.delegate({messenger:t,actions:["RemoteFeatureFlagController:getState","PreferencesController:getState"]}),t},r.getRewardsControllerMessenger=function(e){const t=new n.Messenger({namespace:s,parent:e});return e.delegate({messenger:t,actions:["AccountsController:getSelectedMultichainAccount","AccountTreeController:getAccountsFromSelectedAccountGroup","AccountsController:listMultichainAccounts","KeyringController:signPersonalMessage","RewardsDataService:login","RewardsDataService:estimatePoints","RewardsDataService:getSeasonStatus","RewardsDataService:fetchGeoLocation","RewardsDataService:mobileOptin","RewardsDataService:validateReferralCode","RewardsDataService:mobileJoin","RewardsDataService:getOptInStatus","RewardsDataService:getSeasonMetadata","RewardsDataService:getDiscoverSeasons","SnapController:handleRequest"],events:["AccountTreeController:selectedAccountGroupChange","KeyringController:unlock"]}),t};var n=e("@metamask/messenger");const s="RewardsController"}}},{package:"$root$",file:"app/scripts/controller-init/messengers/rewards-controller-messenger.ts"}],[138,{"./oauth-service-messenger":139,"./seedless-onboarding-controller-messenger":140},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getOAuthServiceMessenger",{enumerable:!0,get:function(){return n.getOAuthServiceMessenger}}),Object.defineProperty(r,"getSeedlessOnboardingControllerInitMessenger",{enumerable:!0,get:function(){return s.getSeedlessOnboardingControllerInitMessenger}}),Object.defineProperty(r,"getSeedlessOnboardingControllerMessenger",{enumerable:!0,get:function(){return s.getSeedlessOnboardingControllerMessenger}});var n=e("./oauth-service-messenger"),s=e("./seedless-onboarding-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/seedless-onboarding/index.ts"}],[139,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getOAuthServiceMessenger=function(e){const t=new n.Messenger({namespace:"OAuthService",parent:e});return e.delegate({messenger:t,actions:["SeedlessOnboardingController:getState","OnboardingController:getState"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/seedless-onboarding/oauth-service-messenger.ts"}],[14,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PHISHING_WARNING_PAGE=r.PHISHING_STREAM=r.PHISHING_SAFELIST=r.METAMASK_INPAGE=r.METAMASK_EIP_1193_PROVIDER=r.METAMASK_COOKIE_HANDLER=r.METAMASK_CAIP_MULTICHAIN_PROVIDER=r.LEGACY_PUBLIC_CONFIG=r.LEGACY_PROVIDER=r.LEGACY_INPAGE=r.LEGACY_CONTENT_SCRIPT=r.CONTENT_SCRIPT=void 0;r.CONTENT_SCRIPT="metamask-contentscript",r.METAMASK_INPAGE="metamask-inpage",r.PHISHING_WARNING_PAGE="metamask-phishing-warning-page",r.METAMASK_COOKIE_HANDLER="metamask-cookie-handler",r.METAMASK_EIP_1193_PROVIDER="metamask-provider",r.METAMASK_CAIP_MULTICHAIN_PROVIDER="metamask-multichain-provider",r.PHISHING_SAFELIST="metamask-phishing-safelist",r.PHISHING_STREAM="phishing",r.LEGACY_CONTENT_SCRIPT="contentscript",r.LEGACY_INPAGE="inpage",r.LEGACY_PROVIDER="provider",r.LEGACY_PUBLIC_CONFIG="publicConfig"}}},{package:"$root$",file:"app/scripts/constants/stream.ts"}],[140,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSeedlessOnboardingControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"SeedlessOnboardingControllerInit",parent:e});return e.delegate({messenger:t,actions:["OAuthService:getNewRefreshToken","OAuthService:revokeRefreshToken","OAuthService:renewRefreshToken"]}),t},r.getSeedlessOnboardingControllerMessenger=function(e){return new n.Messenger({namespace:"SeedlessOnboardingController",parent:e})};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/seedless-onboarding/seedless-onboarding-controller-messenger.ts"}],[141,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSelectedNetworkControllerMessenger=function(e){const t=new n.Messenger({namespace:"SelectedNetworkController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","NetworkController:getSelectedNetworkClient","PermissionController:hasPermissions","PermissionController:getSubjectNames"],events:["NetworkController:stateChange","PermissionController:stateChange"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/selected-network-controller-messenger.ts"}],[142,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getShieldControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"ShieldControllerInit",parent:e});return e.delegate({messenger:t,actions:["AuthenticationController:getBearerToken"]}),t},r.getShieldControllerMessenger=function(e){const t=new n.Messenger({namespace:"ShieldController",parent:e});return e.delegate({messenger:t,events:["SignatureController:stateChange","TransactionController:stateChange"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/shield/shield-controller-messenger.ts"}],[143,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSignatureControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"SignatureControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent","PreferencesController:getState"]}),t},r.getSignatureControllerMessenger=function(e){const t=new n.Messenger({namespace:"SignatureController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getState","ApprovalController:addRequest","KeyringController:signMessage","KeyringController:signPersonalMessage","KeyringController:signTypedMessage","LoggingController:add","NetworkController:getNetworkClientById","GatorPermissionsController:decodePermissionFromPermissionContextForOrigin"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/signature-controller-messenger.ts"}],[144,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSmartTransactionsControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"SmartTransactionsControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent"]}),t},r.getSmartTransactionsControllerMessenger=function(e){const t=new n.Messenger({namespace:"SmartTransactionsController",parent:e});return e.delegate({messenger:t,actions:["ErrorReportingService:captureException","NetworkController:getNetworkClientById","NetworkController:getState","RemoteFeatureFlagController:getState","TransactionController:getNonceLock","TransactionController:getTransactions","TransactionController:updateTransaction"],events:["NetworkController:stateChange","RemoteFeatureFlagController:stateChange"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/smart-transactions-controller-messenger.ts"}],[145,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getCronjobControllerMessenger=function(e){const t=new n.Messenger({namespace:"CronjobController",parent:e});return e.delegate({messenger:t,events:["SnapController:snapInstalled","SnapController:snapUpdated","SnapController:snapUninstalled","SnapController:snapEnabled","SnapController:snapDisabled"],actions:["PermissionController:getPermissions","SnapController:handleRequest"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/cronjob-controller-messenger.ts"}],[146,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getExecutionServiceMessenger=function(e){return new n.Messenger({namespace:"ExecutionService",parent:e})};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/execution-service-messenger.ts"}],[1462,{"@metamask/utils":3217,buffer:4137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.isVaultUpdated=r.updateVaultWithDetail=r.updateVault=r.generateSalt=r.serializeBufferForStorage=r.serializeBufferFromStorage=r.keyFromPassword=r.exportKey=r.importKey=r.decryptWithKey=r.decryptWithDetail=r.decrypt=r.encryptWithKey=r.encryptWithDetail=r.encrypt=void 0;const n=e("@metamask/utils"),s="jwk",o="AES-GCM",i="utf-8",a={algorithm:"PBKDF2",params:{iterations:1e4}},l={algorithm:"PBKDF2",params:{iterations:9e5}};async function c(e,t,r,n=f(),s=l){const o=r||await m(e,n,!1,s),i=await d(o,t);return i.salt=n,JSON.stringify(i)}async function u(e,t,r=f(),n=l){const s=await m(e,r,!0,n),o=await h(s);return{vault:await c(e,t,s,r),exportedKeyString:o}}async function d(e,r){const n=JSON.stringify(r),s=t.from(n,i),a=globalThis.crypto.getRandomValues(new Uint8Array(16)),l=w(e),c=await globalThis.crypto.subtle.encrypt({name:o,iv:a},l,s),u=new Uint8Array(c),d=t.from(a).toString("base64"),g={data:t.from(u).toString("base64"),iv:d};return C(e)&&(g.keyMetadata=e.derivationOptions),g}async function g(e,t,r){const n=JSON.parse(t),{salt:s,keyMetadata:o}=n,i=w(r||await m(e,s,!1,o));return await p(i,n)}async function p(e,r){const n=t.from(r.data,"base64"),s=t.from(r.iv,"base64"),a=w(e);let l;try{const e=await crypto.subtle.decrypt({name:o,iv:s},a,n),r=new Uint8Array(e),c=t.from(r).toString(i);l=JSON.parse(c)}catch(e){throw new Error("Incorrect password")}return l}async function h(e){return C(e)?JSON.stringify({key:await globalThis.crypto.subtle.exportKey(s,e.key),derivationOptions:e.derivationOptions}):JSON.stringify(await globalThis.crypto.subtle.exportKey(s,e))}async function m(e,r,n=!1,s=a){const l=t.from(e,i),c=t.from(r,"base64"),u=await globalThis.crypto.subtle.importKey("raw",l,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),d=await globalThis.crypto.subtle.deriveKey({name:"PBKDF2",salt:c,iterations:s.params.iterations,hash:"SHA-256"},u,{name:o,length:256},n,["encrypt","decrypt"]);return s?{key:d,derivationOptions:s}:d}function f(e=32){const t=new Uint8Array(e);globalThis.crypto.getRandomValues(t);return btoa(String.fromCharCode.apply(null,t))}function C(e){return(0,n.isPlainObject)(e)&&(0,n.hasProperty)(e,"key")&&(0,n.hasProperty)(e,"derivationOptions")&&e.key instanceof CryptoKey&&b(e.derivationOptions)}function b(e){return(0,n.isPlainObject)(e)&&(0,n.hasProperty)(e,"algorithm")&&(0,n.hasProperty)(e,"params")}function w(e){return C(e)?e.key:e}function v(e,t=l){const{keyMetadata:r}=JSON.parse(e);return b(r)&&r.algorithm===t.algorithm&&r.params.iterations===t.params.iterations}r.encrypt=c,r.encryptWithDetail=u,r.encryptWithKey=d,r.decrypt=g,r.decryptWithDetail=async function(e,t){const r=JSON.parse(t),{salt:n,keyMetadata:s}=r,o=await m(e,n,!0,s);return{exportedKeyString:await h(o),vault:await g(e,t,o),salt:n}},r.decryptWithKey=p,r.importKey=async function(e){const t=JSON.parse(e);return r=t,(0,n.isPlainObject)(r)&&(0,n.hasProperty)(r,"key")&&(0,n.hasProperty)(r,"derivationOptions")&&b(r.derivationOptions)?{key:await globalThis.crypto.subtle.importKey(s,t.key,o,!0,["encrypt","decrypt"]),derivationOptions:t.derivationOptions}:await globalThis.crypto.subtle.importKey(s,t,o,!0,["encrypt","decrypt"]);var r},r.exportKey=h,r.keyFromPassword=m,r.serializeBufferFromStorage=function(e){const t="0x"===e.slice(0,2)?e.slice(2):e,r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2){const n=t.substr(e,2);r[e/2]=parseInt(n,16)}return r},r.serializeBufferForStorage=function(e){let t="0x";return e.forEach(e=>{t+=function(e){let t=e.toString(16);for(;t.length<2;)t=`0${t}`;return t}(e)}),t},r.generateSalt=f,r.updateVault=async function(e,t,r=l){return v(e,r)?e:c(t,await g(t,e),undefined,undefined,r)},r.updateVaultWithDetail=async function(e,t,r=l){return v(e.vault,r)?e:u(t,await g(t,e.vault),undefined,r)},r.isVaultUpdated=v}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/browser-passworder",file:"node_modules/@metamask/browser-passworder/dist/index.js"}],[147,{"./cronjob-controller-messenger":145,"./execution-service-messenger":146,"./multichain-router-messenger":148,"./rate-limit-controller-messenger":149,"./snap-controller-messenger":150,"./snap-insights-controller-messenger":151,"./snap-interface-controller-messenger":152,"./snaps-name-provider-messenger":153,"./snaps-registry-messenger":154,"./websocket-service-messenger":155},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getCronjobControllerMessenger",{enumerable:!0,get:function(){return n.getCronjobControllerMessenger}}),Object.defineProperty(r,"getExecutionServiceMessenger",{enumerable:!0,get:function(){return s.getExecutionServiceMessenger}}),Object.defineProperty(r,"getMultichainRouterMessenger",{enumerable:!0,get:function(){return o.getMultichainRouterMessenger}}),Object.defineProperty(r,"getRateLimitControllerInitMessenger",{enumerable:!0,get:function(){return i.getRateLimitControllerInitMessenger}}),Object.defineProperty(r,"getRateLimitControllerMessenger",{enumerable:!0,get:function(){return i.getRateLimitControllerMessenger}}),Object.defineProperty(r,"getSnapControllerInitMessenger",{enumerable:!0,get:function(){return a.getSnapControllerInitMessenger}}),Object.defineProperty(r,"getSnapControllerMessenger",{enumerable:!0,get:function(){return a.getSnapControllerMessenger}}),Object.defineProperty(r,"getSnapInsightsControllerMessenger",{enumerable:!0,get:function(){return l.getSnapInsightsControllerMessenger}}),Object.defineProperty(r,"getSnapInterfaceControllerMessenger",{enumerable:!0,get:function(){return c.getSnapInterfaceControllerMessenger}}),Object.defineProperty(r,"getSnapsNameProviderMessenger",{enumerable:!0,get:function(){return u.getSnapsNameProviderMessenger}}),Object.defineProperty(r,"getSnapsRegistryMessenger",{enumerable:!0,get:function(){return d.getSnapsRegistryMessenger}}),Object.defineProperty(r,"getWebSocketServiceMessenger",{enumerable:!0,get:function(){return g.getWebSocketServiceMessenger}});var n=e("./cronjob-controller-messenger"),s=e("./execution-service-messenger"),o=e("./multichain-router-messenger"),i=e("./rate-limit-controller-messenger"),a=e("./snap-controller-messenger"),l=e("./snap-insights-controller-messenger"),c=e("./snap-interface-controller-messenger"),u=e("./snaps-name-provider-messenger"),d=e("./snaps-registry-messenger"),g=e("./websocket-service-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/index.ts"}],[148,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getMultichainRouterMessenger=function(e){const t=new n.Messenger({namespace:"MultichainRouter",parent:e});return e.delegate({messenger:t,actions:["SnapController:getAll","SnapController:handleRequest","PermissionController:getPermissions","AccountsController:listMultichainAccounts"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/multichain-router-messenger.ts"}],[149,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getRateLimitControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"RateLimitController",parent:e});return e.delegate({messenger:t,actions:["SubjectMetadataController:getState","NotificationServicesController:updateMetamaskNotificationsList"]}),t},r.getRateLimitControllerMessenger=function(e){return new n.Messenger({namespace:"RateLimitController",parent:e})};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/rate-limit-controller-messenger.ts"}],[1499,{"./BackendWebSocketService.cjs":1500,"./logger.cjs":1502},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,o,i,a,l,c,u,d,g,p,h,m,f=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},C=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.AccountActivityService=r.ACCOUNT_ACTIVITY_SERVICE_ALLOWED_EVENTS=r.ACCOUNT_ACTIVITY_SERVICE_ALLOWED_ACTIONS=void 0;const b=e("./BackendWebSocketService.cjs"),w=e("./logger.cjs"),v="AccountActivityService",y=(0,w.createModuleLogger)(w.projectLogger,v),S=["subscribe","unsubscribe"];r.ACCOUNT_ACTIVITY_SERVICE_ALLOWED_ACTIONS=["AccountsController:getSelectedAccount","BackendWebSocketService:connect","BackendWebSocketService:forceReconnection","BackendWebSocketService:subscribe","BackendWebSocketService:getConnectionInfo","BackendWebSocketService:channelHasSubscription","BackendWebSocketService:getSubscriptionsByChannel","BackendWebSocketService:findSubscriptionsByChannelPrefix","BackendWebSocketService:addChannelCallback","BackendWebSocketService:removeChannelCallback"],r.ACCOUNT_ACTIVITY_SERVICE_ALLOWED_EVENTS=["AccountsController:selectedAccountChange","BackendWebSocketService:connectionStateChanged"];r.AccountActivityService=class{constructor(e){n.add(this),this.name=v,s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),a.set(this,new Set),f(this,s,e.messenger,"f"),f(this,o,{subscriptionNamespace:e.subscriptionNamespace??"account-activity.v1"},"f"),f(this,i,e.traceFn??((e,t)=>t?.()),"f"),C(this,s,"f").registerMethodActionHandlers(this,S),C(this,s,"f").subscribe("AccountsController:selectedAccountChange",async e=>await C(this,n,"m",c).call(this,e)),C(this,s,"f").subscribe("BackendWebSocketService:connectionStateChanged",e=>C(this,n,"m",d).call(this,e)),C(this,s,"f").call("BackendWebSocketService:addChannelCallback",{channelName:`system-notifications.v1.${C(this,o,"f").subscriptionNamespace}`,callback:e=>C(this,n,"m",u).call(this,e)})}async subscribe(e){try{await C(this,s,"f").call("BackendWebSocketService:connect");const t=`${C(this,o,"f").subscriptionNamespace}.${e.address}`;if(C(this,s,"f").call("BackendWebSocketService:channelHasSubscription",t))return;await C(this,s,"f").call("BackendWebSocketService:subscribe",{channels:[t],channelType:C(this,o,"f").subscriptionNamespace,callback:e=>{C(this,n,"m",l).call(this,e.data)}})}catch(e){y("Subscription failed, forcing reconnection",{error:e}),await C(this,n,"m",m).call(this)}}async unsubscribe(e){const{address:t}=e;try{const e=`${C(this,o,"f").subscriptionNamespace}.${t}`,r=C(this,s,"f").call("BackendWebSocketService:getSubscriptionsByChannel",e);if(0===r.length)return;for(const e of r)await e.unsubscribe()}catch(e){y("Unsubscription failed, forcing reconnection",{error:e}),await C(this,n,"m",m).call(this)}}destroy(){C(this,s,"f").call("BackendWebSocketService:removeChannelCallback",`system-notifications.v1.${C(this,o,"f").subscriptionNamespace}`)}},s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,n=new WeakSet,l=function(e){const{address:t,tx:r,updates:n}=e,a=1e3*r.timestamp,l=Date.now()-a;y("Handling account activity update",{address:t,updateCount:n.length,elapsedMs:l}),C(this,i,"f").call(this,{name:`${v} Transaction Message`,data:{chain:r.chain,status:r.status,elapsed_ms:l},tags:{service:v,notification_type:C(this,o,"f").subscriptionNamespace}},()=>{C(this,s,"f").publish("AccountActivityService:transactionUpdated",r),C(this,s,"f").publish("AccountActivityService:balanceUpdated",{address:t,chain:r.chain,updates:n})})},c=async function(e){if(e?.address)try{const t=C(this,n,"m",h).call(this,e);await C(this,n,"m",p).call(this),await this.subscribe({address:t})}catch(e){y("Account change failed",{error:e})}},u=function(e){const t=e.data,{timestamp:r}=e;if(!t.chainIds||!Array.isArray(t.chainIds)||!t.status)throw new Error("Invalid system notification data: missing chainIds or status");if("up"===t.status)for(const e of t.chainIds)C(this,a,"f").add(e);else for(const e of t.chainIds)C(this,a,"f").delete(e);C(this,s,"f").publish("AccountActivityService:statusChanged",{chainIds:t.chainIds,status:t.status,timestamp:r}),y(`WebSocket status change - Published tracked chains as ${t.status}`,{count:t.chainIds.length,chains:t.chainIds,status:t.status})},d=async function(e){const{state:t}=e;if(t===b.WebSocketState.CONNECTED)await C(this,n,"m",g).call(this);else if(t===b.WebSocketState.DISCONNECTED){const e=Array.from(C(this,a,"f"));e.length>0&&(C(this,s,"f").publish("AccountActivityService:statusChanged",{chainIds:e,status:"down",timestamp:Date.now()}),y("WebSocket disconnection - Published tracked chains as down",{count:e.length,chains:e}),C(this,a,"f").clear())}},g=async function(){const e=C(this,s,"f").call("AccountsController:getSelectedAccount");if(!e||!e.address)return;const t=C(this,n,"m",h).call(this,e);await this.subscribe({address:t})},p=async function(){const e=C(this,s,"f").call("BackendWebSocketService:findSubscriptionsByChannelPrefix",C(this,o,"f").subscriptionNamespace);for(const t of e)await t.unsubscribe()},h=function(e){return e.scopes.some(e=>e.startsWith("eip155:"))?`eip155:0:${e.address}`:e.scopes.some(e=>e.startsWith("solana:"))?`solana:0:${e.address}`:e.address},m=async function(){y("Forcing WebSocket reconnection to clean up subscription state"),await C(this,s,"f").call("BackendWebSocketService:forceReconnection")}}}},{package:"@metamask/core-backend",file:"node_modules/@metamask/core-backend/dist/AccountActivityService.cjs"}],[15,{"../controllers/account-order":223},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AccountOrderControllerInit=void 0;var n=e("../controllers/account-order");r.AccountOrderControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new n.AccountOrderController({messenger:e,state:t.AccountOrderController})})}}},{package:"$root$",file:"app/scripts/controller-init/account-order-controller-init.ts"}],[150,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSnapControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"SnapControllerInit",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getKeyringsByType","PreferencesController:getState","MetaMetricsController:trackEvent","SnapController:setClientActive","OnboardingController:getState"],events:["KeyringController:lock","KeyringController:unlock","OnboardingController:stateChange"]}),t},r.getSnapControllerMessenger=function(e){const t=new n.Messenger({namespace:"SnapController",parent:e});return e.delegate({messenger:t,events:["ExecutionService:unhandledError","ExecutionService:outboundRequest","ExecutionService:outboundResponse","KeyringController:lock"],actions:["PermissionController:getEndowments","PermissionController:getPermissions","PermissionController:hasPermission","PermissionController:hasPermissions","PermissionController:requestPermissions","PermissionController:revokeAllPermissions","PermissionController:revokePermissions","PermissionController:revokePermissionForAllSubjects","PermissionController:getSubjectNames","PermissionController:updateCaveat","ApprovalController:addRequest","ApprovalController:updateRequestState","PermissionController:grantPermissions","SubjectMetadataController:getSubjectMetadata","SubjectMetadataController:addSubjectMetadata","ExecutionService:executeSnap","ExecutionService:terminateSnap","ExecutionService:terminateAllSnaps","ExecutionService:handleRpcRequest","NetworkController:getNetworkClientById","SelectedNetworkController:getNetworkClientIdForDomain","SnapsRegistry:get","SnapsRegistry:getMetadata","SnapsRegistry:update","SnapsRegistry:resolveVersion","SnapInterfaceController:createInterface","SnapInterfaceController:getInterface"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snap-controller-messenger.ts"}],[1500,{"./logger.cjs":1502,"@metamask/controller-utils":1494,"@metamask/utils":3217,uuid:5796},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,o,i,a,l,c,u,d,g,p,h,m,f,C,b,w,v,y,S,M,k,I,T,E,A,P,_,O,N,R,D,j,L,B,x=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},F=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.BackendWebSocketService=r.WebSocketEventType=r.WebSocketState=r.getCloseReason=void 0;const U=e("@metamask/controller-utils"),$=e("@metamask/utils"),G=e("uuid"),K=e("./logger.cjs"),H="BackendWebSocketService",W=(0,K.createModuleLogger)(K.projectLogger,H),q="Internal: Manual disconnect",V=["connect","disconnect","forceReconnection","sendMessage","sendRequest","subscribe","getConnectionInfo","getSubscriptionsByChannel","channelHasSubscription","findSubscriptionsByChannelPrefix","addChannelCallback","removeChannelCallback","getChannelCallbacks"];function z(e){switch(e){case 1e3:return"Normal Closure";case 1001:return"Going Away";case 1002:return"Protocol Error";case 1003:return"Unsupported Data";case 1004:return"Reserved";case 1005:return"No Status Received";case 1006:return"Abnormal Closure";case 1007:return"Invalid frame payload data";case 1008:return"Policy Violation";case 1009:return"Message Too Big";case 1010:return"Mandatory Extension";case 1011:return"Internal Server Error";case 1012:return"Service Restart";case 1013:return"Try Again Later";case 1014:return"Bad Gateway";case 1015:return"TLS Handshake";default:return e>=3e3&&e<=3999?"Library/Framework Error":e>=4e3&&e<=4999?"Application Error":"Unknown"}}var Y,X;r.getCloseReason=z,function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.DISCONNECTING="disconnecting",e.DISCONNECTED="disconnected",e.ERROR="error"}(Y||(r.WebSocketState=Y={})),function(e){e.CONNECTED="connected",e.DISCONNECTED="disconnected",e.MESSAGE="message",e.ERROR="error",e.RECONNECTING="reconnecting",e.RECONNECTED="reconnected"}(X||(r.WebSocketEventType=X={}));r.BackendWebSocketService=class{constructor(e){n.add(this),this.name=H,s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),a.set(this,void 0),l.set(this,void 0),c.set(this,Y.DISCONNECTED),u.set(this,0),d.set(this,null),g.set(this,null),p.set(this,null),h.set(this,null),m.set(this,new Map),f.set(this,0),C.set(this,new Map),b.set(this,new Map),w.set(this,void 0),x(this,s,e.messenger,"f"),x(this,i,e.isEnabled,"f"),x(this,a,e.traceFn??((e,t)=>t?.()),"f"),x(this,o,{url:e.url,timeout:e.timeout??1e4,reconnectDelay:e.reconnectDelay??1e4,maxReconnectDelay:e.maxReconnectDelay??6e4,requestTimeout:e.requestTimeout??3e4},"f"),F(this,n,"m",R).call(this),F(this,n,"m",v).call(this),F(this,s,"f").registerMethodActionHandlers(this,V)}async connect(){if(F(this,i,"f")&&!F(this,i,"f").call(this))return F(this,n,"m",D).call(this),void x(this,u,0,"f");if(F(this,c,"f")!==Y.CONNECTED)if(F(this,h,"f"))await F(this,h,"f");else if(!F(this,d,"f")){x(this,h,(async()=>{let e;try{const t=await F(this,s,"f").call("AuthenticationController:getBearerToken");if(!t)throw new Error("Authentication required: user not signed in");e=t}catch(e){throw W("Failed to check authentication requirements",{error:e}),e}await F(this,n,"m",S).call(this,e)})(),"f");try{await F(this,h,"f")}catch{F(this,n,"m",N).call(this)}finally{x(this,h,null,"f")}}}disconnect(){F(this,c,"f")!==Y.DISCONNECTED&&F(this,l,"f")&&(F(this,l,"f").close(4999,q),W("WebSocket manually disconnected"))}async forceReconnection(){if(F(this,c,"f")===Y.DISCONNECTED||!F(this,l,"f"))return W("WebSocket already disconnected, scheduling reconnect"),void F(this,n,"m",N).call(this);W("Forcing WebSocket reconnection to clean up subscription state"),F(this,l,"f").close(4998,"Internal: Force reconnect")}sendMessage(e){if(F(this,c,"f")!==Y.CONNECTED||!F(this,l,"f"))throw new Error(`Cannot send message: WebSocket is ${F(this,c,"f")}`);try{F(this,l,"f").send(JSON.stringify(e))}catch(e){const t=(0,$.getErrorMessage)(e);throw F(this,n,"m",O).call(this,new Error(t)),new Error(t)}}async sendRequest(e){if(F(this,c,"f")!==Y.CONNECTED)throw new Error(`Cannot send request: WebSocket is ${F(this,c,"f")}`);const t=e.data?.requestId??(0,G.v4)(),r={event:e.event,data:{...e.data,requestId:t}};return new Promise((e,n)=>{const s=setTimeout(()=>{F(this,m,"f").delete(t),W("Request timeout - triggering reconnection",{timeout:F(this,o,"f").requestTimeout}),F(this,c,"f")===Y.CONNECTED&&F(this,l,"f")&&F(this,l,"f").close(3e3,"Request timeout - forcing reconnect"),n(new Error(`Request timeout after ${F(this,o,"f").requestTimeout}ms`))},F(this,o,"f").requestTimeout);F(this,m,"f").set(t,{resolve:e,reject:n,timeout:s});try{this.sendMessage(r)}catch(e){F(this,m,"f").delete(t),clearTimeout(s),n(e instanceof Error?e:new Error(String(e)))}})}getConnectionInfo(){return{state:F(this,c,"f"),url:F(this,o,"f").url,timeout:F(this,o,"f").timeout,reconnectDelay:F(this,o,"f").reconnectDelay,maxReconnectDelay:F(this,o,"f").maxReconnectDelay,requestTimeout:F(this,o,"f").requestTimeout,reconnectAttempts:F(this,u,"f"),connectedAt:F(this,f,"f")}}getSubscriptionsByChannel(e){const t=[];for(const[r,n]of F(this,C,"f"))n.channels.includes(e)&&t.push({subscriptionId:r,channels:n.channels,channelType:n.channelType,unsubscribe:n.unsubscribe});return t}channelHasSubscription(e){for(const t of F(this,C,"f").values())if(t.channels.includes(e))return!0;return!1}findSubscriptionsByChannelPrefix(e){const t=[];for(const[r,n]of F(this,C,"f")){n.channels.some(t=>t.startsWith(e))&&t.push({subscriptionId:r,channels:n.channels,channelType:n.channelType,unsubscribe:n.unsubscribe})}return t}addChannelCallback(e){const t={channelName:e.channelName,callback:e.callback};F(this,b,"f").has(e.channelName)||F(this,b,"f").set(e.channelName,t)}removeChannelCallback(e){return F(this,b,"f").delete(e)}getChannelCallbacks(){return Array.from(F(this,b,"f").values())}destroy(){F(this,n,"m",D).call(this),x(this,u,0,"f"),this.disconnect()}async subscribe(e){const{channels:t,channelType:r,callback:n,requestId:s}=e;if(F(this,c,"f")!==Y.CONNECTED)throw new Error(`Cannot create subscription(s) ${t.join(", ")}: WebSocket is ${F(this,c,"f")}`);const o=await this.sendRequest({event:"subscribe",data:{channels:t,requestId:s}});if(!o?.subscriptionId)throw new Error("Invalid subscription response: missing subscription ID");const{subscriptionId:i}=o,a=async e=>{await this.sendRequest({event:"unsubscribe",data:{subscription:i,channels:t,requestId:e}}),F(this,C,"f").delete(i)},l={subscriptionId:i,channels:[...t],channelType:r,unsubscribe:a};return F(this,C,"f").set(i,{subscriptionId:i,channels:[...t],channelType:r,callback:n,unsubscribe:a}),l}},s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,g=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,f=new WeakMap,C=new WeakMap,b=new WeakMap,w=new WeakMap,n=new WeakSet,v=function(){F(this,s,"f").subscribe("AuthenticationController:stateChange",e=>{e.isSignedIn?this.connect():this.disconnect()},e=>({isSignedIn:e.isSignedIn})),F(this,s,"f").subscribe("KeyringController:unlock",()=>{this.connect()}),F(this,s,"f").subscribe("KeyringController:lock",()=>{this.disconnect()})},y=function(e){const t=F(this,o,"f").url,r=new URL(t);return r.searchParams.set("token",e),r.toString()},S=async function(e){const t=F(this,n,"m",y).call(this,e);return F(this,n,"m",B).call(this,Y.CONNECTING),F(this,a,"f").call(this,{name:`${H} Connection`,data:{reconnectAttempt:F(this,u,"f")},tags:{service:H}},()=>new Promise((e,r)=>{const s=new WebSocket(t);x(this,g,setTimeout(()=>{W("WebSocket connection timeout - forcing close",{timeout:F(this,o,"f").timeout}),s.close()},F(this,o,"f").timeout),"f"),s.onopen=()=>{F(this,g,"f")&&(clearTimeout(F(this,g,"f")),x(this,g,null,"f")),x(this,l,s,"f"),F(this,n,"m",B).call(this,Y.CONNECTED),x(this,f,Date.now(),"f"),x(this,p,setTimeout(()=>{x(this,p,null,"f"),x(this,u,0,"f"),F(this,n,"m",R).call(this),W("Connection stable - reset reconnect attempts and backoff")},1e4),"f"),e()},s.onclose=t=>{if(W("WebSocket onclose event triggered",{code:t.code,reason:t.reason||z(t.code),wasClean:t.wasClean}),F(this,c,"f")===Y.DISCONNECTED)return;const s=4999===t.code&&t.reason===q;F(this,c,"f")===Y.CONNECTING&&(s?e():r(new Error(`WebSocket connection closed during connection: ${t.code} ${t.reason}`)));const o=F(this,f,"f")>0?Date.now()-F(this,f,"f"):0;F(this,n,"m",D).call(this),x(this,l,undefined,"f"),x(this,h,null,"f"),x(this,f,0,"f"),F(this,n,"m",j).call(this,new Error(`WebSocket connection closed: ${t.code} ${t.reason||z(t.code)}`)),F(this,n,"m",L).call(this),F(this,n,"m",B).call(this,Y.DISCONNECTED),s?x(this,u,0,"f"):F(this,n,"m",N).call(this),F(this,a,"f").call(this,{name:`${H} Disconnection`,data:{code:t.code,reason:t.reason||z(t.code),wasClean:t.wasClean,reconnectAttempts:F(this,u,"f"),...o>0&&{connectionDuration_ms:o}},tags:{service:H}})},s.onmessage=e=>{try{const t=F(this,n,"m",_).call(this,e.data);F(this,n,"m",M).call(this,t)}catch{}}}))},M=function(e){if(F(this,n,"m",k).call(this,e))F(this,n,"m",E).call(this,e);else{if(F(this,n,"m",I).call(this,e)){const t=e;if(F(this,n,"m",P).call(this,t))return}if(F(this,n,"m",T).call(this,e)){const t=e;F(this,n,"m",A).call(this,t)}}},k=function(e){return"data"in e&&e.data&&"object"==typeof e.data&&"requestId"in e.data},I=function(e){return"subscriptionId"in e&&!F(this,n,"m",k).call(this,e)},T=function(e){return"channel"in e},E=function(e){const{requestId:t}=e.data,r=F(this,m,"f").get(t);r&&(F(this,m,"f").delete(t),clearTimeout(r.timeout),e.data.failed&&e.data.failed.length>0?r.reject(new Error(`Request failed: ${e.data.failed.join(", ")}`)):r.resolve(e.data))},A=function(e){0!==F(this,b,"f").size&&F(this,b,"f").get(e.channel)?.callback(e)},P=function(e){const{subscriptionId:t,timestamp:r,channel:n}=e;if(null!==t&&t!==undefined){const s=F(this,C,"f").get(t);if(!s)return!1;const o=Date.now()-r;return F(this,a,"f").call(this,{name:`${H} Notification`,data:{channel:n,latency_ms:o,subscriptionId:t},tags:{service:H,notification_type:s.channelType}},()=>{s.callback?.(e)}),!0}return!1},_=function(e){return JSON.parse(e)},O=function(e){},N=function(){if(F(this,d,"f"))return;x(this,u,F(this,u,"f")+1,"f");const e=F(this,w,"f").duration;x(this,w,F(this,w,"f").next({attempt:F(this,u,"f")}),"f"),W("Scheduling reconnect",{attempt:F(this,u,"f"),delay_ms:e}),x(this,d,setTimeout(()=>{if(x(this,d,null,"f"),F(this,i,"f")&&!F(this,i,"f").call(this))return x(this,u,0,"f"),void F(this,n,"m",R).call(this);this.connect()},e),"f")},R=function(){x(this,w,new U.ExponentialBackoff({initialDelay:F(this,o,"f").reconnectDelay,maxDelay:F(this,o,"f").maxReconnectDelay}).next(),"f")},D=function(){F(this,d,"f")&&(clearTimeout(F(this,d,"f")),x(this,d,null,"f")),F(this,g,"f")&&(clearTimeout(F(this,g,"f")),x(this,g,null,"f")),F(this,p,"f")&&(clearTimeout(F(this,p,"f")),x(this,p,null,"f"))},j=function(e){for(const[,t]of F(this,m,"f"))clearTimeout(t.timeout),t.reject(e);F(this,m,"f").clear()},L=function(){F(this,C,"f").clear()},B=function(e){const t=F(this,c,"f");x(this,c,e,"f"),t!==e&&F(this,s,"f").publish("BackendWebSocketService:connectionStateChanged",this.getConnectionInfo())}}}},{package:"@metamask/core-backend",file:"node_modules/@metamask/core-backend/dist/BackendWebSocketService.cjs"}],[1501,{"./AccountActivityService.cjs":1499,"./BackendWebSocketService.cjs":1500},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AccountActivityService=r.BackendWebSocketService=void 0;var n=e("./BackendWebSocketService.cjs");Object.defineProperty(r,"BackendWebSocketService",{enumerable:!0,get:function(){return n.BackendWebSocketService}});var s=e("./AccountActivityService.cjs");Object.defineProperty(r,"AccountActivityService",{enumerable:!0,get:function(){return s.AccountActivityService}})}}},{package:"@metamask/core-backend",file:"node_modules/@metamask/core-backend/dist/index.cjs"}],[1502,{"@metamask/utils":3217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("core-backend")}}},{package:"@metamask/core-backend",file:"node_modules/@metamask/core-backend/dist/logger.cjs"}],[1503,{"./constants.cjs":1504,"./utils.cjs":1506,"@metamask/base-controller":1407,"@metamask/keyring-controller":2316,"@metamask/utils":3217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,o=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.DelegationController=r.controllerName=void 0;const a=e("@metamask/base-controller"),l=e("@metamask/keyring-controller"),c=e("@metamask/utils"),u=e("./constants.cjs"),d=e("./utils.cjs");r.controllerName="DelegationController";const g={delegations:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1}};class p extends a.BaseController{constructor({messenger:e,state:t,hashDelegation:i,getDelegationEnvironment:a}){super({messenger:e,metadata:g,name:r.controllerName,state:{delegations:{},...t}}),n.set(this,void 0),s.set(this,void 0),o(this,n,i,"f"),o(this,s,a,"f")}async signDelegation(e){const{delegation:t,chainId:r}=e,{DelegationManager:n}=i(this,s,"f").call(this,r),o=(0,d.createTypedMessageParams)({chainId:(0,c.hexToNumber)(r),from:t.delegator,delegation:{...t,signature:"0x"},verifyingContract:n});return await this.messenger.call("KeyringController:signTypedMessage",o,l.SignTypedDataVersion.V4)}store(e){const{entry:t}=e,r=i(this,n,"f").call(this,t.delegation);if(!(0,d.isHexEqual)(t.delegation.authority,u.ROOT_AUTHORITY)&&!this.state.delegations[t.delegation.authority])throw new Error("Invalid authority");this.update(e=>{e.delegations[r]=t})}list(e){const t=this.messenger.call("AccountsController:getSelectedAccount").address;let r=Object.values(this.state.delegations);e?.from&&(r=r.filter(t=>(0,d.isHexEqual)(t.delegation.delegator,e.from))),(!e?.from||e?.from&&!(0,d.isHexEqual)(e.from,t))&&(r=r.filter(e=>(0,d.isHexEqual)(e.delegation.delegate,t)));const n=e?.chainId;n&&(r=r.filter(e=>(0,d.isHexEqual)(e.chainId,n)));const s=e?.tags;return s&&s.length>0&&(r=r.filter(e=>s.every(t=>e.tags.includes(t)))),r}retrieve(e){return this.state.delegations[e]??null}chain(e){const t=[],r=this.retrieve(e);if(!r)return null;t.push(r);for(let e=r.delegation.authority;e!==u.ROOT_AUTHORITY;){const r=this.retrieve(e);if(!r)throw new Error("Invalid delegation chain");t.push(r),e=r.delegation.authority}return t}delete(e){if(!this.retrieve(e))return 0;const t=Object.entries(this.state.delegations),r=[e],n=[];for(;r.length>0;){const e=r.pop();t.filter(([t,r])=>r.delegation.authority===e).forEach(([e])=>{r.push(e)}),n.push(e)}return this.update(e=>{n.forEach(t=>{delete e.delegations[t]})}),n.length}}r.DelegationController=p,n=new WeakMap,s=new WeakMap}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/DelegationController.cjs"}],[1504,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SIGNABLE_DELEGATION_TYPED_DATA=r.ROOT_AUTHORITY=void 0,r.ROOT_AUTHORITY="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff";r.SIGNABLE_DELEGATION_TYPED_DATA={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Caveat:[{name:"enforcer",type:"address"},{name:"terms",type:"bytes"}],Delegation:[{name:"delegate",type:"address"},{name:"delegator",type:"address"},{name:"authority",type:"bytes32"},{name:"caveats",type:"Caveat[]"},{name:"salt",type:"uint256"}]}}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/constants.cjs"}],[1505,{"./DelegationController.cjs":1503},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DelegationController=void 0;var n=e("./DelegationController.cjs");Object.defineProperty(r,"DelegationController",{enumerable:!0,get:function(){return n.DelegationController}})}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/index.cjs"}],[1506,{"./constants.cjs":1504,"@metamask/utils":3217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createTypedMessageParams=r.toDelegationStruct=r.isHexEqual=void 0;const n=e("@metamask/utils"),s=e("./constants.cjs");r.isHexEqual=function(e,t){return e.toLowerCase()===t.toLowerCase()};r.toDelegationStruct=e=>{const t=e.caveats.map(e=>({enforcer:(0,n.getChecksumAddress)(e.enforcer),terms:e.terms,args:e.args})),r="0x"===e.salt?0n:BigInt(e.salt);return{delegate:(0,n.getChecksumAddress)(e.delegate),delegator:(0,n.getChecksumAddress)(e.delegator),authority:e.authority,caveats:t,salt:r,signature:e.signature}},r.createTypedMessageParams=function(e){const{chainId:t,from:n,delegation:o,verifyingContract:i}=e;return{data:{types:s.SIGNABLE_DELEGATION_TYPED_DATA,primaryType:"Delegation",domain:{chainId:t,name:"DelegationManager",version:"1",verifyingContract:i},message:(0,r.toDelegationStruct)(o)},from:n}}}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/utils.cjs"}],[1508,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n={DelegationManager:"0xdb9B1e94B5b69Df7e401DDbedE43491141047dB3",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x69Aa2f9fe1572F1B640E1bbc512f5c3a734fc77c",MultiSigDeleGatorImpl:"0x56a9EdB16a0105eb5a4C54f4C062e2868844f3A7",HybridDeleGatorImpl:"0x48dBe696A4D990079e039489bA2053B36E8FFEC4",EIP7702StatelessDeleGatorImpl:"0x63c0c19a282a1B52b07dD5a65b58948A07DAE32B",AllowedCalldataEnforcer:"0xc2b0d624c1c4319760C96503BA27C347F3260f55",AllowedMethodsEnforcer:"0x2c21fD0Cb9DC8445CB3fb0DC5E7Bb0Aca01842B5",AllowedTargetsEnforcer:"0x7F20f61b1f09b08D970938F6fa563634d65c4EeB",BlockNumberEnforcer:"0x5d9818dF0AE3f66e9c3D0c5029DAF99d1823ca6c",DeployedEnforcer:"0x24ff2AA430D53a8CD6788018E902E098083dcCd2",ERC20BalanceChangeEnforcer:"0xcdF6aB796408598Cea671d79506d7D48E97a5437",ERC20TransferAmountEnforcer:"0xf100b0819427117EcF76Ed94B358B1A5b5C6D2Fc",ERC20PeriodTransferEnforcer:"0x474e3Ae7E169e940607cC624Da8A15Eb120139aB",ERC20StreamingEnforcer:"0x56c97aE02f233B29fa03502Ecc0457266d9be00e",ERC721BalanceChangeEnforcer:"0x8aFdf96eDBbe7e1eD3f5Cd89C7E084841e12A09e",ERC721TransferEnforcer:"0x3790e6B7233f779b09DA74C72b6e94813925b9aF",ERC1155BalanceChangeEnforcer:"0x63c322732695cAFbbD488Fc6937A0A7B66fC001A",ExactCalldataBatchEnforcer:"0x982FD5C86BBF425d7d1451f974192d4525113DfD",ExactCalldataEnforcer:"0x99F2e9bF15ce5eC84685604836F71aB835DBBdED",ExactExecutionBatchEnforcer:"0x1e141e455d08721Dd5BCDA1BaA6Ea5633Afd5017",ExactExecutionEnforcer:"0x146713078D39eCC1F5338309c28405ccf85Abfbb",IdEnforcer:"0xC8B5D93463c893401094cc70e66A206fb5987997",LimitedCallsEnforcer:"0x04658B29F6b82ed55274221a06Fc97D318E25416",NativeBalanceChangeEnforcer:"0xbD7B277507723490Cd50b12EaaFe87C616be6880",ArgsEqualityCheckEnforcer:"0x44B8C6ae3C304213c3e298495e12497Ed3E56E41",NativeTokenPaymentEnforcer:"0x4803a326ddED6dDBc60e659e5ed12d85c7582811",NativeTokenTransferAmountEnforcer:"0xF71af580b9c3078fbc2BBF16FbB8EEd82b330320",NativeTokenStreamingEnforcer:"0xD10b97905a320b13a0608f7E9cC506b56747df19",NativeTokenPeriodTransferEnforcer:"0x9BC0FAf4Aca5AE429F4c06aEEaC517520CB16BD9",NonceEnforcer:"0xDE4f2FAC4B3D87A1d9953Ca5FC09FCa7F366254f",OwnershipTransferEnforcer:"0x7EEf9734E7092032B5C56310Eb9BbD1f4A524681",RedeemerEnforcer:"0xE144b0b2618071B4E56f746313528a669c7E65c5",SpecificActionERC20TransferBatchEnforcer:"0x6649b61c873F6F9686A1E1ae9ee98aC380c7bA13",TimestampEnforcer:"0x1046bb45C8d673d4ea75321280DB34899413c069",ValueLteEnforcer:"0x92Bf12322527cAA612fd31a0e810472BBB106A8F",MultiTokenPeriodEnforcer:"0xFB2f1a9BD76d3701B730E5d69C3219D42D80eBb7"},s={DelegationManager:"0x56D56e07e3d6Ee5a24e30203A37a0a460f42D7A3",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x6ff518884f21168c30c58CB21184D6AdBC18Ad90",MultiSigDeleGatorImpl:"0xd1f421EDbA5e3FA9efe3874827114b20C5BEC40C",HybridDeleGatorImpl:"0x941f3a016F8726d5643Ce62452d0D78492D42b42",AllowedCalldataEnforcer:"0xff71d60f3208469cBCE0859717B5198042DCB3F3",AllowedMethodsEnforcer:"0xe32C2561792e8446Abe73B9f557B881C13906186",AllowedTargetsEnforcer:"0x06aaE4c67EEA95277c46Bf79b1583d4a01772D22",BlockNumberEnforcer:"0x8E470D2Ae278457b42d2405E0B8Cd4BE21Ed9045",DeployedEnforcer:"0xf9088f013dBD9ebb7Cebd66fEB48253c6Ac5a820",ERC20BalanceGteEnforcer:"0xB7B6f32ec6343261D814e55Ed8C5925d91Cab861",ERC20TransferAmountEnforcer:"0x9A069b18032B31429A363AeCFb1B6A0564b44471",IdEnforcer:"0x91015c3b9D9523966eD2399885e5Df7A567f916c",LimitedCallsEnforcer:"0xe694bFfffEA3E85923b1210b37e6a0175e910863",NonceEnforcer:"0xE83BCFD8bBE672A96747e831050a91cf44F4F87A",TimestampEnforcer:"0x550FdD13eEBC1f22ea2a2480024BacBF0Ad7e5CE",ValueLteEnforcer:"0xBE32a6DB7471F63BB168C088c57Db01AfAe87967",NativeTokenTransferAmountEnforcer:"0x5eD3833d7B957A8DB8A461c3AF2d668Ec25382E0",NativeBalanceGteEnforcer:"0x376a98860E210DdEda3689fb39565592c563cB0A",ArgsEqualityCheckEnforcer:"0x7378dE585998d3E18Ce147867C335C25B3dB8Ee5",NativeTokenPaymentEnforcer:"0x87Fe18EbF99e42fcE8A03a25F1d20E119407f8e7",RedeemerEnforcer:"0x926672b130D1EF60A9d6b11D2048d121b30f40C1"},o={DelegationManager:"0xbe4138886cb096bdc1b930f2f0ca7892aa234d78",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x6ff518884f21168c30c58CB21184D6AdBC18Ad90",MultiSigDeleGatorImpl:"0x11f555af5844d85bfcf5d61d2a22866527eb585a",HybridDeleGatorImpl:"0xd6edd1256deccb2b06bdecef92dc16bcf26e531b",AllowedCalldataEnforcer:"0x48db3835a873d64a4af2c09f014052407c003bd7",AllowedMethodsEnforcer:"0xfd731951bf1c52afccee3e6f14ab656475b76dd4",AllowedTargetsEnforcer:"0xbc8673c0afa52d86d991c06881e55b2966920564",BlockNumberEnforcer:"0xc15faffa0d879b9263c15a46ce31eacfa2e0e8ae",DeployedEnforcer:"0x5accb9559b56a6c1e3f90e342c85c42d93720d43",ERC20BalanceGteEnforcer:"0xb5d6b1ec6d868a3bae5b7f48178eaa2686a7a087",ERC20TransferAmountEnforcer:"0x92ac423b9c111962179a6242e1adb58d02c103be",IdEnforcer:"0x34152d9f3f8f74338d50703e780389e829b4abac",LimitedCallsEnforcer:"0x4b3adad4a328bee8ba17b86074d92fe7372180cd",NonceEnforcer:"0x2f32ff3fc3086d7f63f16fe8d0065390d460b40d",TimestampEnforcer:"0x78e05f779490c24bf3bfa135b4112e7003b321cd",ValueLteEnforcer:"0xfc20ede0a1132e839fbda9d7ed3904ff3c89540f"},i={arbitrum:42161,arbitrumNova:42170,base:8453,berachain:80094,bsc:56,gnosis:100,ink:57073,linea:59144,mainnet:1,monad:143,optimism:10,polygon:137,sei:1329,sonic:146,unichain:130,bscTestnet:97,arbitrumSepolia:421614,baseSepolia:84532,berachainBepolia:80069,chiado:10200,citreaTestnet:5115,hoodiTestnet:560048,inkSepolia:763373,lineaSepolia:59141,megaEthTestnet:6342,monadTestnet:10143,optimismSepolia:11155420,polygonAmoy:80002,seiTestnet:1328,sepolia:11155111,sonicTestnet:14601,unichainSepolia:1301,lineaGoerli:59140},a={"1.0.0":{[i.optimism]:o,[i.polygon]:o,[i.base]:o,[i.arbitrum]:o,[i.linea]:o,[i.sepolia]:{...o,HybridDeleGatorImpl:"0x5989F5D13DF8fc818EdA65e417AED90459fD67F7"},[i.lineaSepolia]:{...o,HybridDeleGatorImpl:"0x5989F5D13DF8fc818EdA65e417AED90459fD67F7"}},"1.1.0":{[i.arbitrum]:s,[i.base]:s,[i.linea]:s,[i.optimism]:s,[i.polygon]:s,[i.sepolia]:s,[i.lineaSepolia]:s,[i.baseSepolia]:{...s,SimpleFactory:"0xE8eA1DE8D6AfE400B7C8C1A81B7C29B7876b4d02"}},"1.3.0":{[i.mainnet]:n,[i.polygon]:n,[i.bsc]:n,[i.optimism]:n,[i.arbitrum]:n,[i.ink]:n,[i.linea]:n,[i.base]:n,[i.gnosis]:n,[i.berachain]:n,[i.unichain]:n,[i.arbitrumNova]:n,[i.sei]:n,[i.sonic]:n,[i.monad]:n,[i.bscTestnet]:n,[i.citreaTestnet]:n,[i.megaEthTestnet]:n,[i.chiado]:n,[i.lineaSepolia]:n,[i.berachainBepolia]:n,[i.baseSepolia]:n,[i.arbitrumSepolia]:n,[i.sepolia]:n,[i.optimismSepolia]:n,[i.unichainSepolia]:n,[i.polygonAmoy]:n,[i.inkSepolia]:n,[i.monadTestnet]:n,[i.seiTestnet]:n,[i.sonicTestnet]:n,[i.hoodiTestnet]:n}};r.CHAIN_ID=i,r.DELEGATOR_CONTRACTS=a}}},{package:"@metamask/delegation-deployments",file:"node_modules/@metamask/delegation-deployments/dist/index.cjs"}],[151,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSnapInsightsControllerMessenger=function(e){const t=new n.Messenger({namespace:"SnapInsightsController",parent:e});return e.delegate({messenger:t,actions:["SnapController:handleRequest","SnapController:getAll","PermissionController:getPermissions","SnapInterfaceController:deleteInterface"],events:["TransactionController:unapprovedTransactionAdded","TransactionController:transactionStatusUpdated","SignatureController:stateChange"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snap-insights-controller-messenger.ts"}],[152,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSnapInterfaceControllerMessenger=function(e){const t=new n.Messenger({namespace:"SnapInterfaceController",parent:e});return e.delegate({messenger:t,actions:["PhishingController:maybeUpdateState","PhishingController:testOrigin","ApprovalController:hasRequest","ApprovalController:acceptRequest","SnapController:get","MultichainAssetsController:getState","AccountsController:getSelectedMultichainAccount","AccountsController:getAccountByAddress","AccountsController:listMultichainAccounts","PermissionController:hasPermission"],events:["NotificationServicesController:notificationsListUpdated"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snap-interface-controller-messenger.ts"}],[153,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSnapsNameProviderMessenger=function(e){const t=new n.Messenger({namespace:"SnapsNameProvider",parent:e});return e.delegate({messenger:t,actions:["SnapController:getAll","SnapController:get","SnapController:handleRequest","PermissionController:getState"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snaps-name-provider-messenger.ts"}],[154,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSnapsRegistryMessenger=function(e){return new n.Messenger({namespace:"SnapsRegistry",parent:e})};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snaps-registry-messenger.ts"}],[155,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getWebSocketServiceMessenger=function(e){const t=new n.Messenger({namespace:"WebSocketService",parent:e});return e.delegate({messenger:t,actions:["SnapController:handleRequest"],events:["SnapController:snapUpdated","SnapController:snapUninstalled","SnapController:snapInstalled"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/websocket-service-messenger.ts"}],[156,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getStorageServiceMessenger=function(e){return new n.Messenger({namespace:"StorageService",parent:e})};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/storage-service-messenger.ts"}],[157,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSubjectMetadataControllerMessenger=function(e){const t=new n.Messenger({namespace:"SubjectMetadataController",parent:e});return e.delegate({messenger:t,actions:["PermissionController:hasPermissions"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/subject-metadata-controller-messenger.ts"}],[158,{"./subscription-controller-messenger":159,"./subscription-service-messenger":160},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getSubscriptionControllerInitMessenger",{enumerable:!0,get:function(){return n.getSubscriptionControllerInitMessenger}}),Object.defineProperty(r,"getSubscriptionControllerMessenger",{enumerable:!0,get:function(){return n.getSubscriptionControllerMessenger}}),Object.defineProperty(r,"getSubscriptionServiceMessenger",{enumerable:!0,get:function(){return s.getSubscriptionServiceMessenger}});var n=e("./subscription-controller-messenger"),s=e("./subscription-service-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/subscription/index.ts"}],[159,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSubscriptionControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"SubscriptionControllerInit",parent:e});return e.delegate({messenger:t,actions:["AuthenticationController:getBearerToken"]}),t},r.getSubscriptionControllerMessenger=function(e){const t=new n.Messenger({namespace:"SubscriptionController",parent:e});return e.delegate({messenger:t,events:["AuthenticationController:stateChange"],actions:["AuthenticationController:getBearerToken","AuthenticationController:performSignOut"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/subscription/subscription-controller-messenger.ts"}],[16,{"@metamask/assets-controllers":1330},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AccountTrackerControllerInit=void 0;var n=e("@metamask/assets-controllers");r.AccountTrackerControllerInit=({controllerMessenger:e,initMessenger:t,getController:r})=>{const s=()=>r("OnboardingController");return{persistedStateKey:null,memStateKey:null,controller:new n.AccountTrackerController({messenger:e,getStakedBalanceForChain:(e,t)=>r("AssetsContractController").getStakedBalanceForChain(e,t),includeStakedAssets:!1,allowExternalServices:()=>{const{useExternalServices:e}=t.call("PreferencesController:getState");return e},accountsApiChainIds:()=>{var e;const r=t.call("RemoteFeatureFlagController:getState"),n=null==r||null===(e=r.remoteFeatureFlags)||void 0===e?void 0:e.assetsAccountApiBalances;return Array.isArray(n)?n:[]},fetchingEnabled:()=>s().state.completedOnboarding,isOnboarded:()=>{const{completedOnboarding:e}=s().state;return e}})}}}}},{package:"$root$",file:"app/scripts/controller-init/account-tracker-controller-init.ts"}],[160,{"../../../services/subscription/types":611,"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSubscriptionServiceMessenger=function(e){const t=new n.Messenger({namespace:s.SERVICE_NAME,parent:e});return e.delegate({messenger:t,actions:["SubscriptionController:getPricing","SubscriptionController:getSubscriptions","SubscriptionController:startShieldSubscriptionWithCard","SubscriptionController:updatePaymentMethod","SubscriptionController:getCryptoApproveTransactionParams","SubscriptionController:getBillingPortalUrl","SubscriptionController:submitSponsorshipIntents","SubscriptionController:getState","SubscriptionController:submitShieldSubscriptionCryptoApproval","SubscriptionController:linkRewards","AppStateController:getState","AppStateController:setPendingShieldCohort","AuthenticationController:getBearerToken","TransactionController:getTransactions","AccountsController:getState","PreferencesController:getState","SmartTransactionsController:getState","NetworkController:getState","SwapsController:getState","RemoteFeatureFlagController:getState","MetaMetricsController:trackEvent","KeyringController:getState","RewardsController:getSeasonStatus","RewardsController:getSeasonMetadata","RewardsController:getHasAccountOptedIn"]}),t};var n=e("@metamask/messenger"),s=e("../../../services/subscription/types")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/subscription/subscription-service-messenger.ts"}],[161,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSwapsControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"SwapsControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent","NetworkController:getState"]}),t},r.getSwapsControllerMessenger=function(e){const t=new n.Messenger({namespace:"SwapsController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","TokenRatesController:getState"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/swaps-controller-messenger.ts"}],[162,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getTokenBalancesControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"TokenBalancesControllerInit",parent:e});return e.delegate({messenger:t,actions:["PreferencesController:getState","RemoteFeatureFlagController:getState","OnboardingController:getState"]}),t},r.getTokenBalancesControllerMessenger=function(e){const t=new n.Messenger({namespace:"TokenBalancesController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getState","NetworkController:getNetworkClientById","PreferencesController:getState","TokensController:getState","TokenDetectionController:addDetectedTokensViaPolling","TokenDetectionController:addDetectedTokensViaWs","TokenDetectionController:detectTokens","AccountsController:getSelectedAccount","AccountsController:listAccounts","AccountTrackerController:getState","AccountTrackerController:updateNativeBalances","AccountTrackerController:updateStakedBalances","KeyringController:getState","AuthenticationController:getBearerToken"],events:["NetworkController:stateChange","PreferencesController:stateChange","TokensController:stateChange","KeyringController:accountRemoved","KeyringController:lock","KeyringController:unlock","AccountActivityService:balanceUpdated","AccountActivityService:statusChanged","AccountsController:selectedEvmAccountChange","TransactionController:transactionConfirmed","TransactionController:incomingTransactionsReceived"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/token-balances-controller-messenger.ts"}],[163,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getTokenDetectionControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"TokenDetectionControllerInit",parent:e});return e.delegate({messenger:t,actions:["AssetsContractController:getBalancesInSingleCall","MetaMetricsController:trackEvent","PreferencesController:getState"]}),t},r.getTokenDetectionControllerMessenger=function(e){const t=new n.Messenger({namespace:"TokenDetectionController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getAccount","AccountsController:getSelectedAccount","KeyringController:getState","NetworkController:getNetworkClientById","NetworkController:getNetworkConfigurationByNetworkClientId","NetworkController:getState","TokensController:getState","TokensController:addDetectedTokens","TokenListController:getState","PreferencesController:getState","TokensController:addTokens","NetworkController:findNetworkClientIdByChainId","AuthenticationController:getBearerToken"],events:["AccountsController:selectedEvmAccountChange","KeyringController:lock","KeyringController:unlock","NetworkController:networkDidChange","TokenListController:stateChange","PreferencesController:stateChange","TransactionController:transactionConfirmed"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/token-detection-controller-messenger.ts"}],[164,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getTokenListControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"TokenListControllerInit",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","PreferencesController:getState"],events:["PreferencesController:stateChange"]}),t},r.getTokenListControllerMessenger=function(e){const t=new n.Messenger({namespace:"TokenListController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById"],events:["NetworkController:stateChange"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/token-list-controller-messenger.ts"}],[165,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getTokensControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"TokensControllerInit",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getSelectedNetworkClient","NetworkController:getState"]}),t},r.getTokensControllerMessenger=function(e){const t=new n.Messenger({namespace:"TokensController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getAccount","AccountsController:getSelectedAccount","AccountsController:listAccounts","ApprovalController:addRequest","NetworkController:getNetworkClientById"],events:["AccountsController:selectedEvmAccountChange","KeyringController:accountRemoved","NetworkController:networkDidChange","NetworkController:stateChange","PreferencesController:stateChange","TokenListController:stateChange"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/tokens-controller-messenger.ts"}],[166,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getTransactionControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"TransactionControllerInit",parent:e});return e.delegate({messenger:t,events:["BridgeStatusController:stateChange","SmartTransactionsController:smartTransaction","TransactionController:postTransactionBalanceUpdated","TransactionController:stateChange","TransactionController:transactionApproved","TransactionController:transactionConfirmed","TransactionController:transactionDropped","TransactionController:transactionFailed","TransactionController:transactionNewSwapApproval","TransactionController:transactionNewSwap","TransactionController:transactionRejected","TransactionController:transactionSubmitted","TransactionController:unapprovedTransactionAdded"],actions:["AccountTrackerController:getState","ApprovalController:acceptRequest","ApprovalController:addRequest","ApprovalController:endFlow","ApprovalController:startFlow","ApprovalController:updateRequestState","AppStateController:getState","AuthenticationController:getBearerToken","BridgeStatusController:getState","BridgeStatusController:submitTx","CurrencyRateController:getState","DelegationController:signDelegation","InstitutionalSnapController:beforeCheckPendingTransactionHook","InstitutionalSnapController:publishHook","KeyringController:signEip7702Authorization","KeyringController:signTypedMessage","NetworkController:findNetworkClientIdByChainId","NetworkController:getEIP1559Compatibility","NetworkController:getNetworkClientById","RemoteFeatureFlagController:getState","SubscriptionController:getSubscriptionByProduct","SubscriptionService:submitSubscriptionSponsorshipIntent","SwapsController:setApproveTxId","SwapsController:setTradeTxId","TransactionController:addTransaction","TransactionController:addTransactionBatch","TransactionController:estimateGas","TransactionController:getState","TransactionController:updateTransaction","TransactionPayController:getState","TransactionPayController:getStrategy"]}),t},r.getTransactionControllerMessenger=function(e){const t=new n.Messenger({namespace:"TransactionController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getSelectedAccount","AccountsController:getState","ApprovalController:addRequest","KeyringController:signEip7702Authorization","NetworkController:findNetworkClientIdByChainId","NetworkController:getNetworkClientById","RemoteFeatureFlagController:getState"],events:["NetworkController:stateChange"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/transaction-controller-messenger.ts"}],[167,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getTransactionPayControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"TransactionPayControllerInit",parent:e});return e.delegate({messenger:t,actions:["DelegationController:signDelegation","KeyringController:signEip7702Authorization"],events:[]}),t},r.getTransactionPayControllerMessenger=function(e){const t=new n.Messenger({namespace:"TransactionPayController",parent:e});return e.delegate({messenger:t,actions:["AccountTrackerController:getState","BridgeController:fetchQuotes","BridgeStatusController:submitTx","CurrencyRateController:getState","GasFeeController:getState","NetworkController:findNetworkClientIdByChainId","NetworkController:getNetworkClientById","RemoteFeatureFlagController:getState","TokenBalancesController:getState","TokenListController:getState","TokenRatesController:getState","TokensController:getState","TransactionController:getGasFeeTokens","TransactionController:getState","TransactionController:updateTransaction"],events:["BridgeStatusController:stateChange","TransactionController:stateChange","TransactionController:unapprovedTransactionAdded"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/transaction-pay-controller-messenger.ts"}],[168,{"@metamask/messenger":2371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getUserOperationControllerInitMessenger=function(e){const t=new n.Messenger({namespace:"UserOperationControllerInit",parent:e});return e.delegate({messenger:t,actions:["TransactionController:emulateNewTransaction","TransactionController:emulateTransactionUpdate"]}),t},r.getUserOperationControllerMessenger=function(e){const t=new n.Messenger({namespace:"UserOperationController",parent:e});return e.delegate({messenger:t,actions:["ApprovalController:addRequest","NetworkController:getNetworkClientById","KeyringController:prepareUserOperation","KeyringController:patchUserOperation","KeyringController:signUserOperation"]}),t};var n=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/user-operation-controller-messenger.ts"}],[169,{"../../../shared/lib/sentry":5953,"../controllers/metametrics-controller":232,"../lib/segment":332},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MetaMetricsControllerInit=void 0;var n,s=(n=e("../controllers/metametrics-controller"))&&n.__esModule?n:{default:n},o=e("../lib/segment"),i=e("../../../shared/lib/sentry");r.MetaMetricsControllerInit=({controllerMessenger:e,extension:t,persistedState:r})=>({controller:new s.default({state:r.MetaMetricsController,messenger:e,version:"13.16.4",environment:"production",segment:o.segment,extension:t,captureException:i.captureException})})}}},{package:"$root$",file:"app/scripts/controller-init/metametrics-controller-init.ts"}],[17,{"@metamask/accounts-controller":1280},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AccountsControllerInit=void 0;var n=e("@metamask/accounts-controller");r.AccountsControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new n.AccountsController({messenger:e,state:t.AccountsController})})}}},{package:"$root$",file:"app/scripts/controller-init/accounts-controller-init.ts"}],[170,{"../controllers/metametrics-data-deletion/metametrics-data-deletion":233,"../services/data-deletion-service":600},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MetaMetricsDataDeletionControllerInit=void 0;var n=e("../controllers/metametrics-data-deletion/metametrics-data-deletion"),s=e("../services/data-deletion-service");r.MetaMetricsDataDeletionControllerInit=({controllerMessenger:e,persistedState:t})=>{const r=new s.DataDeletionService;return{controller:new n.MetaMetricsDataDeletionController({messenger:e,state:t.MetaMetricsDataDeletionController,dataDeletionService:r})}}}}},{package:"$root$",file:"app/scripts/controller-init/metametrics-data-deletion-controller-init.ts"}],[171,{"./multichain-account-service-init":172,"./multichain-assets-controller-init":173,"./multichain-balances-controller-init":174,"./multichain-network-controller-init":175,"./multichain-rates-assets-controller-init":177,"./multichain-transactions-controller-init":178},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"MultichainAccountServiceInit",{enumerable:!0,get:function(){return n.MultichainAccountServiceInit}}),Object.defineProperty(r,"MultichainAssetsControllerInit",{enumerable:!0,get:function(){return s.MultichainAssetsControllerInit}}),Object.defineProperty(r,"MultichainAssetsRatesControllerInit",{enumerable:!0,get:function(){return l.MultichainAssetsRatesControllerInit}}),Object.defineProperty(r,"MultichainBalancesControllerInit",{enumerable:!0,get:function(){return o.MultichainBalancesControllerInit}}),Object.defineProperty(r,"MultichainNetworkControllerInit",{enumerable:!0,get:function(){return a.MultichainNetworkControllerInit}}),Object.defineProperty(r,"MultichainTransactionsControllerInit",{enumerable:!0,get:function(){return i.MultichainTransactionsControllerInit}});var n=e("./multichain-account-service-init"),s=e("./multichain-assets-controller-init"),o=e("./multichain-balances-controller-init"),i=e("./multichain-transactions-controller-init"),a=e("./multichain-network-controller-init"),l=e("./multichain-rates-assets-controller-init")}}},{package:"$root$",file:"app/scripts/controller-init/multichain/index.ts"}],[172,{"../../../../shared/lib/multichain-accounts/remote-feature-flag":5943,"../../../../shared/lib/multichain-feature-flags":5944,"../../../../shared/lib/trace":5960,"../../lib/util":374,"@metamask/multichain-account-service":2383},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MultichainAccountServiceInit=void 0;var n=e("@metamask/multichain-account-service"),s=e("../../lib/util"),o=e("../../../../shared/lib/multichain-accounts/remote-feature-flag"),i=e("../../../../shared/lib/multichain-feature-flags"),a=e("../../../../shared/lib/trace");r.MultichainAccountServiceInit=({controllerMessenger:e,initMessenger:t})=>{var r,l;const c={maxConcurrency:1,discovery:{timeoutMs:2e3,maxAttempts:3,backOffMs:1e3},createAccounts:{timeoutMs:3e3}},u=new n.AccountProviderWrapper(e,new n.BtcAccountProvider(e,c)),d=new n.AccountProviderWrapper(e,new n.TrxAccountProvider(e,c)),g=new n.MultichainAccountService({messenger:e,providers:[u,d],providerConfigs:{[n.SOL_ACCOUNT_PROVIDER_NAME]:c},config:{trace:a.trace}}),p=t.call("PreferencesController:getState");t.subscribe("PreferencesController:stateChange",(0,s.previousValueComparator)((e,r)=>{const{useExternalServices:n}=e,{useExternalServices:s}=r;if(n!==s){const{remoteFeatureFlags:e}=t.call("RemoteFeatureFlagController:getState"),r=null==e?void 0:e.enableMultichainAccountsState2;(0,o.isMultichainAccountsFeatureEnabled)(r,o.FEATURE_VERSION_2)&&g.setBasicFunctionality(s).catch(e=>{console.error("Failed to set basic functionality on MultichainAccountService:",e)})}return!0},p));const h=t.call("RemoteFeatureFlagController:getState"),m=(0,i.isMultichainFeatureEnabled)(null==h||null===(r=h.remoteFeatureFlags)||void 0===r?void 0:r.bitcoinAccounts);u.setEnabled(m);const f=(0,i.isMultichainFeatureEnabled)(null==h||null===(l=h.remoteFeatureFlags)||void 0===l?void 0:l.tronAccounts);return d.setEnabled(f),e.subscribe("RemoteFeatureFlagController:stateChange",(0,s.previousValueComparator)((e,t)=>{var r,n,s,o;const a=(0,i.isMultichainFeatureEnabled)(null==e||null===(r=e.remoteFeatureFlags)||void 0===r?void 0:r.bitcoinAccounts),l=(0,i.isMultichainFeatureEnabled)(null==t||null===(n=t.remoteFeatureFlags)||void 0===n?void 0:n.bitcoinAccounts);a!==l&&(u.setEnabled(l),l&&g.alignWallets().catch(e=>{console.error("Failed to align wallets after enabling Bitcoin provider:",e)}));const c=(0,i.isMultichainFeatureEnabled)(null==e||null===(s=e.remoteFeatureFlags)||void 0===s?void 0:s.tronAccounts),p=(0,i.isMultichainFeatureEnabled)(null==t||null===(o=t.remoteFeatureFlags)||void 0===o?void 0:o.tronAccounts);return c!==p&&(d.setEnabled(p),p&&g.alignWallets().catch(e=>{console.error("Failed to align wallets after enabling Tron provider:",e)})),!0},h)),{memStateKey:null,persistedStateKey:null,controller:g}}}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-account-service-init.ts"}],[173,{"@metamask/assets-controllers":1330},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MultichainAssetsControllerInit=void 0;var n=e("@metamask/assets-controllers");r.MultichainAssetsControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new n.MultichainAssetsController({messenger:e,state:t.MultichainAssetsController})})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-assets-controller-init.ts"}],[174,{"@metamask/assets-controllers":1330},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MultichainBalancesControllerInit=void 0;var n=e("@metamask/assets-controllers");r.MultichainBalancesControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new n.MultichainBalancesController({messenger:e,state:t.MultichainBalancesController})})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-balances-controller-init.ts"}],[175,{"./multichain-network-service-init":176,"@metamask/multichain-network-controller":2412},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MultichainNetworkControllerInit=void 0;var n=e("@metamask/multichain-network-controller"),s=e("./multichain-network-service-init");r.MultichainNetworkControllerInit=({controllerMessenger:e,persistedState:t})=>{const r=(0,s.MultichainNetworkServiceInit)();return{controller:new n.MultichainNetworkController({messenger:e,state:t.MultichainNetworkController,networkService:r})}}}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-network-controller-init.ts"}],[176,{"@metamask/multichain-network-controller":2412},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MultichainNetworkServiceInit=void 0;var n=e("@metamask/multichain-network-controller");r.MultichainNetworkServiceInit=()=>new n.MultichainNetworkService({fetch:window.fetch.bind(window)})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-network-service-init.ts"}],[177,{"@metamask/assets-controllers":1330},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MultichainAssetsRatesControllerInit=void 0;var n=e("@metamask/assets-controllers");r.MultichainAssetsRatesControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new n.MultichainAssetsRatesController({messenger:e,state:t.MultichainAssetsRatesController,interval:18e4})})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-rates-assets-controller-init.ts"}],[178,{"@metamask/multichain-transactions-controller":2417},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MultichainTransactionsControllerInit=void 0;var n=e("@metamask/multichain-transactions-controller");r.MultichainTransactionsControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new n.MultichainTransactionsController({messenger:e,state:t.MultichainTransactionsController})})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-transactions-controller-init.ts"}],[179,{"../../../shared/constants/network":5857,"../../../shared/constants/time":5874,"../../../shared/lib/network-utils":5949,"../../../shared/lib/sentry":5953,"../lib/network-controller/messenger-action-handlers":298,"@metamask/connectivity-controller":1488,"@metamask/controller-utils":1494,"@metamask/network-controller":2432,"@metamask/utils":3217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkControllerInit=r.ADDITIONAL_DEFAULT_NETWORKS=void 0;var n=e("@metamask/network-controller"),s=e("@metamask/controller-utils"),o=e("@metamask/connectivity-controller"),i=e("@metamask/utils"),a=e("../../../shared/constants/time"),l=e("../../../shared/lib/network-utils"),c=e("../lib/network-controller/messenger-action-handlers"),u=e("../../../shared/constants/network"),d=e("../../../shared/lib/sentry");const g=r.ADDITIONAL_DEFAULT_NETWORKS=[s.ChainId["monad-testnet"],s.ChainId["megaeth-testnet-v2"]];r.NetworkControllerInit=({controllerMessenger:e,infuraProjectId:t,initMessenger:r,persistedState:p})=>{const h=r.call("RemoteFeatureFlagController:getState"),m=function(e){let t=e;if(!t){var r,o,a,l;t=(0,n.getDefaultNetworkControllerState)(g);const e=t.networkConfigurationsByChainId??{};let c;Object.values(e).forEach(e=>{const t=e.rpcEndpoints[0].networkClientId;(0,i.hasProperty)(s.BlockExplorerUrl,t)&&(e.blockExplorerUrls=[s.BlockExplorerUrl[t]]),e.defaultBlockExplorerUrlIndex=0}),e[u.CHAIN_IDS.MAINNET].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("ethereum-mainnet"),e[u.CHAIN_IDS.LINEA_MAINNET].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("linea-mainnet"),e[u.CHAIN_IDS.BASE].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("base-mainnet"),null!==(r=e[u.CHAIN_IDS.ARBITRUM])&&void 0!==r&&null!==(r=r.rpcEndpoints)&&void 0!==r&&r[0]&&(e[u.CHAIN_IDS.ARBITRUM].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("arbitrum-mainnet")),null!==(o=e[u.CHAIN_IDS.BSC])&&void 0!==o&&null!==(o=o.rpcEndpoints)&&void 0!==o&&o[0]&&(e[u.CHAIN_IDS.BSC].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("bsc-mainnet")),null!==(a=e[u.CHAIN_IDS.OPTIMISM])&&void 0!==a&&null!==(a=a.rpcEndpoints)&&void 0!==a&&a[0]&&(e[u.CHAIN_IDS.OPTIMISM].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("optimism-mainnet")),null!==(l=e[u.CHAIN_IDS.POLYGON])&&void 0!==l&&null!==(l=l.rpcEndpoints)&&void 0!==l&&l[0]&&(e[u.CHAIN_IDS.POLYGON].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("polygon-mainnet")),e[u.CHAIN_IDS.MAINNET].name="Ethereum",e[u.CHAIN_IDS.LINEA_MAINNET].name="Linea",e[u.CHAIN_IDS.BASE].name="Base",e[u.CHAIN_IDS.ARBITRUM].name="Arbitrum",e[u.CHAIN_IDS.BSC].name="BNB Chain",e[u.CHAIN_IDS.OPTIMISM].name="OP",e[u.CHAIN_IDS.POLYGON].name="Polygon",delete e[u.CHAIN_IDS.SEI],c=e[u.CHAIN_IDS.MAINNET],t.selectedNetworkClientId=c.rpcEndpoints[c.defaultRpcEndpointIndex].networkClientId}return t.networkConfigurationsByChainId&&!Object.values(t.networkConfigurationsByChainId).flatMap(e=>e.rpcEndpoints.map(e=>e.networkClientId)).includes(t.selectedNetworkClientId)&&((0,d.captureException)(new Error(`NetworkController state is invalid: \`selectedNetworkClientId\` '${t.selectedNetworkClientId}' does not refer to an RPC endpoint within a network configuration`)),t.selectedNetworkClientId=t.networkConfigurationsByChainId[u.CHAIN_IDS.MAINNET].rpcEndpoints[0].networkClientId),t}(p.NetworkController),f=e=>e.remoteFeatureFlags.walletFrameworkRpcFailoverEnabled??!1,C=new n.NetworkController({messenger:e,state:m,infuraProjectId:t,getBlockTrackerOptions:()=>({pollingInterval:20*a.SECOND,retryTimeout:20*a.SECOND}),getRpcServiceOptions:t=>{const r=s.DEFAULT_MAX_RETRIES,n={fetch:globalThis.fetch.bind(globalThis),btoa:globalThis.btoa.bind(globalThis),isOffline:()=>e.call("ConnectivityController:getState").connectivityStatus===o.CONNECTIVITY_STATUSES.Offline},i={circuitBreakDuration:30*a.SECOND,maxRetries:r};return(0,l.getIsQuicknodeEndpointUrl)(t)?{...n,policyOptions:{...i,maxConsecutiveFailures:10*(r+1)}}:{...n,policyOptions:{...i,maxConsecutiveFailures:3*(r+1)}}},additionalDefaultNetworks:g,isRpcFailoverEnabled:f(h)});return r.subscribe("NetworkController:rpcEndpointUnavailable",async({chainId:e,endpointUrl:n,error:s})=>{(0,c.onRpcEndpointUnavailable)({chainId:e,endpointUrl:n,error:s,infuraProjectId:t,trackEvent:r.call.bind(r,"MetaMetricsController:trackEvent"),metaMetricsId:r.call("MetaMetricsController:getMetaMetricsId")})}),r.subscribe("NetworkController:rpcEndpointDegraded",async({chainId:e,endpointUrl:n,error:s})=>{(0,c.onRpcEndpointDegraded)({chainId:e,endpointUrl:n,error:s,infuraProjectId:t,trackEvent:r.call.bind(r,"MetaMetricsController:trackEvent"),metaMetricsId:r.call("MetaMetricsController:getMetaMetricsId")})}),r.subscribe("RemoteFeatureFlagController:stateChange",e=>{e?(console.log("Enabling RPC failover."),C.enableRpcFailover()):(console.log("Disabling RPC failover."),C.disableRpcFailover())},f),C.initializeProvider({lookupNetwork:!1}),{controller:C}}}}},{package:"$root$",file:"app/scripts/controller-init/network-controller-init.ts"}],[18,{"../../../../shared/constants/metametrics":5853,"../../../../shared/lib/trace":5960,"@metamask/account-tree-controller":1273},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AccountTreeControllerInit=void 0;var n=e("@metamask/account-tree-controller"),s=e("../../../../shared/lib/trace"),o=e("../../../../shared/constants/metametrics");r.AccountTreeControllerInit=({controllerMessenger:e,persistedState:t,initMessenger:r})=>({controller:new n.AccountTreeController({messenger:e,state:t.AccountTreeController,config:{trace:s.trace,backupAndSync:{onBackupAndSyncEvent:e=>{r.call("MetaMetricsController:trackEvent",{category:o.MetaMetricsEventCategory.BackupAndSync,event:o.MetaMetricsEventName.ProfileActivityUpdated,properties:{...e}})}},accountOrderCallbacks:{isHiddenAccount:e=>{const t=r.call("AccountsController:getAccount",e);if(!t)return!1;return r.call("AccountOrderController:getState").hiddenAccountList.includes(t.address)},isPinnedAccount:e=>{const t=r.call("AccountsController:getAccount",e);if(!t)return!1;return r.call("AccountOrderController:getState").pinnedAccountList.includes(t.address)}}}})})}}},{package:"$root$",file:"app/scripts/controller-init/accounts/account-tree-controller-init.ts"}],[180,{"../../../../package.json":5832,"@metamask/notification-services-controller/notification-services":2453},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NotificationServicesControllerInit=void 0;var n,s=e("@metamask/notification-services-controller/notification-services");const o=((n=e("../../../../package.json"))&&n.__esModule?n:{default:n}).default.version;r.NotificationServicesControllerInit=({controllerMessenger:e,persistedState:t,getController:r})=>({controller:new s.Controller({messenger:e,state:t.NotificationServicesController,env:{featureAnnouncements:{platform:"extension",spaceId:"jdkgyfmyd9sw",accessToken:"mAYNB_k65snv4AXW4o8ksZN8BwWDQF9702HKV7yBDZI",platformVersion:o},locale:()=>r("PreferencesController").state.currentLocale.replace("_","-")}})})}}},{package:"$root$",file:"app/scripts/controller-init/notifications/notification-services-controller-init.ts"}],[181,{"../../../../shared/constants/metametrics":5853,"../../../../shared/modules/mv3.utils":5987,"../../controllers/push-notifications":246,"@metamask/notification-services-controller/push-services":2474,"@metamask/notification-services-controller/push-services/web":2482,"@metamask/utils":3217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getNormalisedLocale=r.NotificationServicesPushControllerInit=void 0;var n=e("@metamask/notification-services-controller/push-services"),s=e("@metamask/notification-services-controller/push-services/web"),o=e("@metamask/utils"),i=e("../../../../shared/modules/mv3.utils"),a=e("../../controllers/push-notifications"),l=e("../../../../shared/constants/metametrics");const c=e=>e.replace("_","-");r.getNormalisedLocale=c;r.NotificationServicesPushControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:r,getController:u})=>{const d=new n.Controller({messenger:e,state:{...n.defaultState,...r.NotificationServicesPushController},env:{apiKey:"AIzaSyAA6MJdRkQ00zNh_moTLwxCSxcg3vznbBM",authDomain:"notifications-faf39.firebaseapp.com",storageBucket:"notifications-faf39.appspot.com",projectId:"notifications-faf39",messagingSenderId:"824598429541",appId:"1:824598429541:web:3016d3c90f1f19a6beab8c",measurementId:"G-1FGDTTCWX5",vapidKey:"BBbjhCfHvwIqRsUrBvpfx0viLJIzWHp-beyw8-I124jeZlhNGDOegS_0_I029fFb2stzRuaNkCdTAf9F3I2m3wc"},config:{isPushFeatureEnabled:i.isManifestV3&&!0,platform:"extension",pushService:{createRegToken:s.createRegToken,deleteRegToken:s.deleteRegToken,subscribeToPushNotifications:(0,s.createSubscribeToPushNotifications)({messenger:e,onReceivedHandler:a.onPushNotificationReceived,onClickHandler:a.onPushNotificationClicked})},getLocale:()=>c(u("PreferencesController").state.currentLocale)}});return t.subscribe("NotificationServicesPushController:onNewNotifications",e=>{const r=(0,o.hasProperty)(e,"chain_id")?e.chain_id:null;t.call("MetaMetricsController:trackEvent",{category:l.MetaMetricsEventCategory.PushNotifications,event:l.MetaMetricsEventName.PushNotificationReceived,properties:{notification_id:e.id,notification_type:e.type,chain_id:r}})}),t.subscribe("NotificationServicesPushController:pushNotificationClicked",e=>{var r;t.call("MetaMetricsController:trackEvent",{category:l.MetaMetricsEventCategory.PushNotifications,event:l.MetaMetricsEventName.PushNotificationClicked,properties:{notification_id:e.id,notification_type:e.type,..."notification_type"in e&&"on-chain"===e.notification_type&&null!==(r=e.payload)&&void 0!==r&&r.chain_id?{chain_id:e.payload.chain_id}:undefined,data:e}})}),{controller:d}}}}},{package:"$root$",file:"app/scripts/controller-init/notifications/notification-services-push-controller-init.ts"}],[182,{"../controllers/onboarding":235},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.OnboardingControllerInit=void 0;var n,s=(n=e("../controllers/onboarding"))&&n.__esModule?n:{default:n};r.OnboardingControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new s.default({state:t.OnboardingController,messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/onboarding-controller-init.ts"}],[183,{"../controllers/permissions":239,"../controllers/permissions/snaps/specifications":241,"@metamask/permission-controller":2534},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PermissionControllerInit=void 0;var n=e("@metamask/permission-controller"),s=e("../controllers/permissions"),o=e("../controllers/permissions/snaps/specifications");r.PermissionControllerInit=({controllerMessenger:e,persistedState:t,initMessenger:r,getController:i})=>{const a=i("ApprovalController"),l=i("KeyringController");return{controller:new n.PermissionController({state:t.PermissionController,messenger:e,caveatSpecifications:(0,s.getCaveatSpecifications)({listAccounts:r.call.bind(r,"AccountsController:listAccounts"),findNetworkClientIdByChainId:r.call.bind(r,"NetworkController:findNetworkClientIdByChainId"),isNonEvmScopeSupported:r.call.bind(r,"MultichainRouter:isSupportedScope"),getNonEvmAccountAddresses:r.call.bind(r,"MultichainRouter:getSupportedAccounts")}),permissionSpecifications:{...(0,s.getPermissionSpecifications)(),...(0,o.getSnapPermissionSpecifications)(r,{addAndShowApprovalRequest:a.addAndShowApprovalRequest.bind(a),addNewKeyring:l.addNewKeyring.bind(l)})},unrestrictedMethods:s.unrestrictedMethods})}}}}},{package:"$root$",file:"app/scripts/controller-init/permission-controller-init.ts"}],[184,{"../../../shared/constants/permissions":5861,"@metamask/permission-log-controller":2543},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PermissionLogControllerInit=void 0;var n=e("@metamask/permission-log-controller"),s=e("../../../shared/constants/permissions");r.PermissionLogControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new n.PermissionLogController({messenger:e,state:t.PermissionLogController,restrictedMethods:new Set(Object.keys(s.RestrictedMethods))})})}}},{package:"$root$",file:"app/scripts/controller-init/permission-log-controller-init.ts"}],[185,{"@metamask/phishing-controller":2548,"@metamask/utils":3217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingControllerInit=void 0;var n=e("@metamask/phishing-controller");e("@metamask/utils");r.PhishingControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new n.PhishingController({messenger:e,state:t.PhishingController,hotlistRefreshInterval:undefined,stalelistRefreshInterval:undefined})})}}},{package:"$root$",file:"app/scripts/controller-init/phishing-controller-init.ts"}],[186,{"../controllers/preferences-controller":243},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PreferencesControllerInit=void 0;var n=e("../controllers/preferences-controller");r.PreferencesControllerInit=({controllerMessenger:e,persistedState:t,initLangCode:r})=>({controller:new n.PreferencesController({state:{currentLocale:r??"",...t.PreferencesController},messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/preferences-controller-init.ts"}],[187,{"@metamask/profile-metrics-controller":2590},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ProfileMetricsControllerInit=void 0;var n=e("@metamask/profile-metrics-controller");const s=Boolean(!1),o=s?1e3:6e5;r.ProfileMetricsControllerInit=({controllerMessenger:e,persistedState:t,getController:r})=>{const i=r("RemoteFeatureFlagController"),a=r("MetaMetricsController"),l=r("AppStateController");return{controller:new n.ProfileMetricsController({messenger:e,state:t.ProfileMetricsController,interval:s?1e3:1e4,initialDelayDuration:o,assertUserOptedIn:()=>!0===i.state.remoteFeatureFlags.extensionUxPna25&&!0===l.state.pna25Acknowledged&&!0===a.state.participateInMetaMetrics,getMetaMetricsId:()=>a.getMetaMetricsId()})}}}}},{package:"$root$",file:"app/scripts/controller-init/profile-metrics-controller-init.ts"}],[188,{"../../../shared/modules/authentication":5971,"@metamask/profile-metrics-controller":2590},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ProfileMetricsServiceInit=void 0;var n=e("@metamask/profile-metrics-controller"),s=e("../../../shared/modules/authentication");r.ProfileMetricsServiceInit=({controllerMessenger:e})=>{const t=(0,s.loadAuthenticationConfig)();return{persistedStateKey:null,memStateKey:null,controller:new n.ProfileMetricsService({messenger:e,fetch:fetch.bind(globalThis),env:t})}}}}},{package:"$root$",file:"app/scripts/controller-init/profile-metrics-service-init.ts"}],[1882,{"@metamask/keyring-controller":2316},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.GetCallsStatusCode=r.EIP7682ErrorCode=r.EIP5792ErrorCode=r.SupportedCapabilities=r.MessageType=r.KEYRING_TYPES_SUPPORTING_7702=r.VERSION=void 0;const n=e("@metamask/keyring-controller");var s,o,i,a,l;r.VERSION="2.0.0",r.KEYRING_TYPES_SUPPORTING_7702=[n.KeyringTypes.hd,n.KeyringTypes.simple],function(e){e.SendTransaction="eth_sendTransaction"}(s||(r.MessageType=s={})),function(e){e.AuxiliaryFunds="auxiliaryFunds"}(o||(r.SupportedCapabilities=o={})),function(e){e[e.UnsupportedNonOptionalCapability=5700]="UnsupportedNonOptionalCapability",e[e.UnsupportedChainId=5710]="UnsupportedChainId",e[e.UnknownBundleId=5730]="UnknownBundleId",e[e.RejectedUpgrade=5750]="RejectedUpgrade"}(i||(r.EIP5792ErrorCode=i={})),function(e){e[e.UnsupportedAsset=5771]="UnsupportedAsset",e[e.UnsupportedChain=5772]="UnsupportedChain",e[e.MalformedRequiredAssets=5773]="MalformedRequiredAssets"}(a||(r.EIP7682ErrorCode=a={})),function(e){e[e.PENDING=100]="PENDING",e[e.CONFIRMED=200]="CONFIRMED",e[e.FAILED_OFFCHAIN=400]="FAILED_OFFCHAIN",e[e.REVERTED=500]="REVERTED",e[e.REVERTED_PARTIAL=600]="REVERTED_PARTIAL"}(l||(r.GetCallsStatusCode=l={}))}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/constants.cjs"}],[1883,{"../constants.cjs":1882,"@metamask/rpc-errors":2698,"@metamask/transaction-controller":3095},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getCallsStatus=void 0;const n=e("@metamask/rpc-errors"),s=e("@metamask/transaction-controller"),o=e("../constants.cjs");r.getCallsStatus=function(e,t){const r=e.call("TransactionController:getState").transactions.filter(e=>e.batchId===t);if(!r?.length)throw new n.JsonRpcError(o.EIP5792ErrorCode.UnknownBundleId,"No matching bundle found");const i=r[0],{chainId:a,txReceipt:l}=i,c=function(e){const{hash:t,status:r}=e;if(r===s.TransactionStatus.confirmed)return o.GetCallsStatusCode.CONFIRMED;if(r===s.TransactionStatus.failed)return t?o.GetCallsStatusCode.REVERTED:o.GetCallsStatusCode.FAILED_OFFCHAIN;if(r===s.TransactionStatus.dropped)return o.GetCallsStatusCode.REVERTED;return o.GetCallsStatusCode.PENDING}(i),u=l,d=u?.logs??[],g=u&&[{blockHash:u.blockHash,blockNumber:u.blockNumber,gasUsed:u.gasUsed,logs:d.map(e=>({address:e.address,data:e.data,topics:e.topics})),status:u.status,transactionHash:u.transactionHash}];return{version:o.VERSION,id:t,chainId:a,atomic:!0,status:c,receipts:g}}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/hooks/getCallsStatus.cjs"}],[1884,{"../constants.cjs":1882,"../utils.cjs":1891},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getCapabilities=void 0;const n=e("../constants.cjs"),s=e("../utils.cjs");r.getCapabilities=async function(e,t,r,o){const{getDismissSmartAccountSuggestionEnabled:i,getIsSmartTransaction:a,isAtomicBatchSupported:l,isRelaySupported:c,getSendBundleSupportedChains:u,isAuxiliaryFundsSupported:d}=e;let g=o?.map(e=>e.toLowerCase());if(!g?.length){const e=t.call("NetworkController:getState").networkConfigurationsByChainId;g=Object.keys(e)}const p=await l({address:r,chainIds:g}),h=await async function(e,t,r,n,s,o){const i=o.call("PreferencesController:getState").useTransactionSimulations,a=await Promise.all(t.map(({chainId:e})=>e).map(e=>n(e))),l=await s(e),c=t.map((e,t)=>({...e,relaySupportedForChain:a[t]}));return e.reduce((e,t)=>{const n=c.find(({chainId:e})=>e===t)??{},{isSupported:s=!1,relaySupportedForChain:o}=n,a=r(t),u=l[t]??!1;return i&&(a&&u||s&&o)&&(e[t]={alternateGasFees:{supported:!0}}),e},{})}(g,p,a,c,u,t);return g.reduce((e,o)=>{const a=p.find(({chainId:e})=>e===o)??{},{delegationAddress:l,isSupported:c,upgradeContractAddress:u}=a,g=i();let h=!1;try{const e=(0,s.getAccountKeyringType)(r,t);h=n.KEYRING_TYPES_SUPPORTING_7702.includes(e)}catch{}if(!c&&!(!g&&u&&!l&&h))return e;const m=c?"supported":"ready",f=o;return e[f]===undefined&&(e[f]={}),e[f].atomic={status:m},h&&d(o)&&(e[f].auxiliaryFunds={supported:!0}),e},h)}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/hooks/getCapabilities.cjs"}],[1885,{"../constants.cjs":1882,"../utils.cjs":1891,"@metamask/rpc-errors":2698,"@metamask/transaction-controller":3095,"@metamask/utils":3217,lodash:4901,uuid:5796},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.processSendCalls=void 0;const n=e("@metamask/rpc-errors"),s=e("@metamask/transaction-controller"),o=e("@metamask/utils"),i=e("lodash"),a=e("uuid"),l=e("../constants.cjs"),c=e("../utils.cjs");function u(e){const{version:t}=e;if(t!==l.VERSION)throw n.rpcErrors.invalidInput(`Version not supported: Got ${t}, expected ${l.VERSION}`)}function d(e,t){const{chainId:r}=e;if(r&&r.toLowerCase()!==t.toLowerCase())throw n.rpcErrors.invalidParams(`Chain ID must match the dApp selected network: Got ${r}, expected ${t}`)}function g(e,t,r){const{calls:s,capabilities:o,chainId:i}=e,a=[...Object.keys(o??{}).filter(e=>e!==l.SupportedCapabilities.AuxiliaryFunds.toString()&&!0!==o?.[e].optional),...s.flatMap(e=>Object.keys(e.capabilities??{}).filter(t=>t!==l.SupportedCapabilities.AuxiliaryFunds.toString()&&!0!==e.capabilities?.[t].optional))];if(a?.length)throw new n.JsonRpcError(l.EIP5792ErrorCode.UnsupportedNonOptionalCapability,`Unsupported non-optional capabilities: ${a.join(", ")}`);o?.auxiliaryFunds&&function({auxiliaryFunds:e,chainId:t,keyringType:r,isAuxiliaryFundsSupported:s}){if(e.optional)return;const o=l.KEYRING_TYPES_SUPPORTING_7702.includes(r);if(!o)throw new n.JsonRpcError(l.EIP5792ErrorCode.UnsupportedNonOptionalCapability,`Unsupported non-optional capability: ${l.SupportedCapabilities.AuxiliaryFunds}`);if(!s(t))throw new n.JsonRpcError(l.EIP7682ErrorCode.UnsupportedChain,`The wallet no longer supports auxiliary funds on the requested chain: ${t}`);if(!e?.requiredAssets)return;for(const t of e.requiredAssets)if("erc20"!==t.standard)throw new n.JsonRpcError(l.EIP7682ErrorCode.UnsupportedAsset,`The requested asset ${t.address} is not available through the walletâs auxiliary fund system: unsupported token standard ${t.standard}`)}({auxiliaryFunds:o.auxiliaryFunds,chainId:i,keyringType:t,isAuxiliaryFundsSupported:r})}function p(e){if(e.capabilities?.auxiliaryFunds?.requiredAssets){const{requiredAssets:t}=e.capabilities.auxiliaryFunds,r=(0,i.groupBy)(t,e=>`${e.address.toLowerCase()}-${e.standard}`),n=Object.values(r).map(e=>{if(1===e.length)return e[0];const t=e.reduce((e,t)=>e+BigInt(t.amount),0n);return{...e[0],amount:(0,o.add0x)(t.toString(16))}});e.capabilities.auxiliaryFunds.requiredAssets=n}}r.processSendCalls=async function(e,t,r,i){const{addTransactionBatch:h,addTransaction:m,getDismissSmartAccountSuggestionEnabled:f,isAtomicBatchSupported:C,validateSecurity:b,isAuxiliaryFundsSupported:w}=e,{calls:v,from:y}=r,{networkClientId:S,origin:M}=i,k=v.map(e=>({params:e})),{chainId:I}=t.call("NetworkController:getNetworkClientById",S).configuration,T=y??t.call("AccountsController:getSelectedAccount").address,E=(0,a.v4)(),A=b.bind(null,E),P=i.id?String(i.id):"";let _;return _=1===Object.keys(k).length?await async function({addTransaction:e,chainId:t,from:r,messenger:n,networkClientId:i,origin:h,requestId:m,securityAlertId:f,sendCalls:C,transactions:b,validateSecurity:w,isAuxiliaryFundsSupported:v}){const y=(0,c.getAccountKeyringType)(r,n);!function(e,t,r,n){u(e),g(e,r,n),d(e,t)}(C,t,y,v);const S={from:r,...b[0].params,type:s.TransactionEnvelopeType.feeMarket},M={method:l.MessageType.SendTransaction,params:[S],origin:h};w(M,t),p(C);const k=function(){const e=(0,a.v4)(),t=new Uint8Array((0,a.parse)(e));return(0,o.bytesToHex)(t)}();return await e(S,{requestId:m,networkClientId:i,origin:h,securityAlertResponse:{securityAlertId:f},batchId:k}),k}({addTransaction:m,chainId:I,from:T,messenger:t,networkClientId:S,origin:M,requestId:P,securityAlertId:E,sendCalls:r,transactions:k,validateSecurity:A,isAuxiliaryFundsSupported:w}):await async function({addTransactionBatch:e,isAtomicBatchSupported:t,chainId:r,from:s,getDismissSmartAccountSuggestionEnabled:o,networkClientId:i,messenger:a,origin:h,requestId:m,sendCalls:f,securityAlertId:C,transactions:b,validateSecurity:w,isAuxiliaryFundsSupported:v}){const y=await t({address:s,chainIds:[r]}),S=y?.[0],M=(0,c.getAccountKeyringType)(s,a),k=o();(function(e,t,r,s,o,i){u(e),function(e,t,r){if(d(e,t),!r)throw new n.JsonRpcError(l.EIP5792ErrorCode.UnsupportedChainId,`EIP-7702 not supported on chain: ${t}`)}(e,t,s),g(e,o,i),function(e,t,r){if(t?.delegationAddress)return;if(e)throw new n.JsonRpcError(l.EIP5792ErrorCode.RejectedUpgrade,"EIP-7702 upgrade disabled by the user");if(!l.KEYRING_TYPES_SUPPORTING_7702.includes(r))throw new n.JsonRpcError(l.EIP5792ErrorCode.RejectedUpgrade,"EIP-7702 upgrade not supported on account")}(r,s,o)})(f,r,k,S,M,v),p(f);const I=await e({from:s,networkClientId:i,origin:h,requestId:m,securityAlertId:C,transactions:b,validateSecurity:w});return I.batchId}({addTransactionBatch:h,isAtomicBatchSupported:C,chainId:I,from:T,getDismissSmartAccountSuggestionEnabled:f,messenger:t,networkClientId:S,origin:M,requestId:P,sendCalls:r,securityAlertId:E,transactions:k,validateSecurity:A,isAuxiliaryFundsSupported:w}),{id:_}}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/hooks/processSendCalls.cjs"}],[1886,{"./hooks/getCallsStatus.cjs":1883,"./hooks/getCapabilities.cjs":1884,"./hooks/processSendCalls.cjs":1885,"./methods/wallet_getCallsStatus.cjs":1887,"./methods/wallet_getCapabilities.cjs":1888,"./methods/wallet_sendCalls.cjs":1889},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.walletGetCapabilities=r.walletGetCallsStatus=r.walletSendCalls=r.getCapabilities=r.getCallsStatus=r.processSendCalls=void 0;var n=e("./hooks/processSendCalls.cjs");Object.defineProperty(r,"processSendCalls",{enumerable:!0,get:function(){return n.processSendCalls}});var s=e("./hooks/getCallsStatus.cjs");Object.defineProperty(r,"getCallsStatus",{enumerable:!0,get:function(){return s.getCallsStatus}});var o=e("./hooks/getCapabilities.cjs");Object.defineProperty(r,"getCapabilities",{enumerable:!0,get:function(){return o.getCapabilities}});var i=e("./methods/wallet_sendCalls.cjs");Object.defineProperty(r,"walletSendCalls",{enumerable:!0,get:function(){return i.walletSendCalls}});var a=e("./methods/wallet_getCallsStatus.cjs");Object.defineProperty(r,"walletGetCallsStatus",{enumerable:!0,get:function(){return a.walletGetCallsStatus}});var l=e("./methods/wallet_getCapabilities.cjs");Object.defineProperty(r,"walletGetCapabilities",{enumerable:!0,get:function(){return l.walletGetCapabilities}})}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/index.cjs"}],[1887,{"../types.cjs":1890,"../utils.cjs":1891,"@metamask/rpc-errors":2698},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.walletGetCallsStatus=void 0;const n=e("@metamask/rpc-errors"),s=e("../types.cjs"),o=e("../utils.cjs");r.walletGetCallsStatus=async function(e,t,{getCallsStatus:r}){if(!r)throw n.rpcErrors.methodNotSupported();(0,o.validateParams)(e.params,s.GetCallsStatusStruct);const i=e.params[0];t.result=await r(i,e)}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/methods/wallet_getCallsStatus.cjs"}],[1888,{"../types.cjs":1890,"../utils.cjs":1891,"@metamask/rpc-errors":2698},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.walletGetCapabilities=void 0;const n=e("@metamask/rpc-errors"),s=e("../types.cjs"),o=e("../utils.cjs");r.walletGetCapabilities=async function(e,t,{getAccounts:r,getCapabilities:i}){if(!i)throw n.rpcErrors.methodNotSupported();(0,o.validateParams)(e.params,s.GetCapabilitiesStruct);const a=e.params[0],l=e.params[1];await(0,o.validateAndNormalizeKeyholder)(a,e,{getAccounts:r});const c=await i(a,l,e);t.result=c}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/methods/wallet_getCapabilities.cjs"}],[1889,{"../types.cjs":1890,"../utils.cjs":1891,"@metamask/rpc-errors":2698},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.walletSendCalls=void 0;const n=e("@metamask/rpc-errors"),s=e("../types.cjs"),o=e("../utils.cjs");r.walletSendCalls=async function(e,t,{getAccounts:r,processSendCalls:i}){if(!i)throw n.rpcErrors.methodNotSupported();(0,o.validateParams)(e.params,s.SendCallsStruct);const a=e.params[0],l=a.from?await(0,o.validateAndNormalizeKeyholder)(a.from,e,{getAccounts:r}):undefined,c={...a,from:l};t.result=await i(c,e)}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/methods/wallet_sendCalls.cjs"}],[189,{"@metamask/assets-controllers":1330},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RatesControllerInit=void 0;var n=e("@metamask/assets-controllers");r.RatesControllerInit=({controllerMessenger:e,persistedState:t})=>({memStateKey:"MultichainRatesController",persistedStateKey:"MultichainRatesController",controller:new n.RatesController({state:t.MultichainRatesController,messenger:e,includeUsdRate:!0})})}}},{package:"$root$",file:"app/scripts/controller-init/rates-controller-init.ts"}],[1890,{"@metamask/superstruct":3037,"@metamask/utils":3217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SendCallsStruct=r.CapabilitiesStruct=r.GetCapabilitiesStruct=r.GetCallsStatusStruct=void 0;const n=e("@metamask/superstruct"),s=e("@metamask/utils");r.GetCallsStatusStruct=(0,n.tuple)([s.StrictHexStruct]),r.GetCapabilitiesStruct=(0,n.tuple)([s.HexChecksumAddressStruct,(0,n.optional)((0,n.array)(s.StrictHexStruct))]);const o=(0,n.type)({address:(0,n.nonempty)(s.HexChecksumAddressStruct),amount:(0,n.nonempty)(s.StrictHexStruct),standard:(0,n.nonempty)((0,n.string)())});r.CapabilitiesStruct=(0,n.record)((0,n.string)(),(0,n.type)({optional:(0,n.optional)((0,n.boolean)()),requiredAssets:(0,n.optional)((0,n.array)(o))})),r.SendCallsStruct=(0,n.tuple)([(0,n.object)({version:(0,n.nonempty)((0,n.string)()),id:(0,n.optional)(s.StrictHexStruct),from:(0,n.optional)(s.HexChecksumAddressStruct),chainId:s.StrictHexStruct,atomicRequired:(0,n.boolean)(),calls:(0,n.array)((0,n.object)({to:(0,n.optional)(s.HexChecksumAddressStruct),data:(0,n.optional)(s.StrictHexStruct),value:(0,n.optional)(s.StrictHexStruct),capabilities:(0,n.optional)(r.CapabilitiesStruct)})),capabilities:(0,n.optional)(r.CapabilitiesStruct)})])}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/types.cjs"}],[1891,{"./constants.cjs":1882,"@metamask/rpc-errors":2698,"@metamask/superstruct":3037},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.resemblesAddress=r.validateParams=r.validateAndNormalizeKeyholder=r.getAccountKeyringType=void 0;const n=e("@metamask/rpc-errors"),s=e("@metamask/superstruct"),o=e("./constants.cjs");function i(e){return 42===e.length}r.getAccountKeyringType=function(e,t){const{accounts:r}=t.call("AccountsController:getState").internalAccounts,s=Object.values(r).find(t=>t.address.toLowerCase()===e.toLowerCase()),i=s?.metadata?.keyring?.type;if(!i)throw new n.JsonRpcError(o.EIP5792ErrorCode.RejectedUpgrade,"EIP-7702 upgrade not supported as account type is unknown");return i},r.validateAndNormalizeKeyholder=async function(e,t,{getAccounts:r}){if("string"==typeof e&&e.length>0&&i(e)){const s=(await r(t)).map(e=>e.toLowerCase()),o=e.toLowerCase();if(s.includes(o))return o;throw n.providerErrors.unauthorized()}throw n.rpcErrors.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})},r.validateParams=function(e,t){const[r]=(0,s.validate)(e,t);if(r)throw n.rpcErrors.invalidParams(function(e,t){return`${t}\n\n${e.failures().map(e=>`${e.path.join(" > ")}${e.path.length?" - ":""}${e.message}`).join("\n")}`}(r,"Invalid params"))},r.resemblesAddress=i}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/utils.cjs"}],[1892,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DELEGATION_INDICATOR_PREFIX=r.METHOD_NAMES=void 0,r.METHOD_NAMES={UPGRADE_ACCOUNT:"wallet_upgradeAccount",GET_ACCOUNT_UPGRADE_STATUS:"wallet_getAccountUpgradeStatus"},r.DELEGATION_INDICATOR_PREFIX="0xef0100"}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/constants.cjs"}],[1893,{"./constants.cjs":1892,"./utils.cjs":1895,"./wallet_getAccountUpgradeStatus.cjs":1896,"./wallet_upgradeAccount.cjs":1897},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.METHOD_NAMES=r.validateAndNormalizeAddress=r.validateParams=r.walletGetAccountUpgradeStatus=r.walletUpgradeAccount=void 0;var n=e("./wallet_upgradeAccount.cjs");Object.defineProperty(r,"walletUpgradeAccount",{enumerable:!0,get:function(){return n.walletUpgradeAccount}});var s=e("./wallet_getAccountUpgradeStatus.cjs");Object.defineProperty(r,"walletGetAccountUpgradeStatus",{enumerable:!0,get:function(){return s.walletGetAccountUpgradeStatus}});var o=e("./utils.cjs");Object.defineProperty(r,"validateParams",{enumerable:!0,get:function(){return o.validateParams}}),Object.defineProperty(r,"validateAndNormalizeAddress",{enumerable:!0,get:function(){return o.validateAndNormalizeAddress}});var i=e("./constants.cjs");Object.defineProperty(r,"METHOD_NAMES",{enumerable:!0,get:function(){return i.METHOD_NAMES}})}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/index.cjs"}],[1894,{"@metamask/superstruct":3037,"@metamask/utils":3217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.GetAccountUpgradeStatusParamsStruct=r.UpgradeAccountParamsStruct=void 0;const n=e("@metamask/superstruct"),s=e("@metamask/utils");r.UpgradeAccountParamsStruct=(0,n.object)({account:s.HexChecksumAddressStruct,chainId:(0,n.optional)(s.StrictHexStruct)}),r.GetAccountUpgradeStatusParamsStruct=(0,n.object)({account:s.HexChecksumAddressStruct,chainId:(0,n.optional)(s.StrictHexStruct)})}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/types.cjs"}],[1895,{"@metamask/rpc-errors":2698,"@metamask/superstruct":3037,"@metamask/utils":3217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.validateParams=r.validateAndNormalizeAddress=void 0;const n=e("@metamask/rpc-errors"),s=e("@metamask/superstruct"),o=e("@metamask/utils");r.validateAndNormalizeAddress=async function(e,t,r){if("string"!=typeof e||0===e.length||!(0,o.isHexAddress)(e))throw n.rpcErrors.invalidParams({message:"Invalid parameters: must provide an EVM address."});if(!(await r(t)).map(e=>e.toLowerCase()).includes(e.toLowerCase()))throw n.providerErrors.unauthorized();return e},r.validateParams=function(e,t){const[r]=(0,s.validate)(e,t);if(r)throw n.rpcErrors.invalidParams(function(e,t){return`${t}\n\n${e.failures().map(e=>`${e.path.join(" > ")}${e.path.length?" - ":""}${e.message}`).join("\n")}`}(r,"Invalid parameters"))}}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/utils.cjs"}],[1896,{"./constants.cjs":1892,"./types.cjs":1894,"./utils.cjs":1895,"@metamask/rpc-errors":2698,"@metamask/utils":3217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.walletGetAccountUpgradeStatus=void 0;const n=e("@metamask/rpc-errors"),s=e("@metamask/utils"),o=e("./constants.cjs"),i=e("./types.cjs"),a=e("./utils.cjs");r.walletGetAccountUpgradeStatus=async function(e,t,r){const{params:l,origin:c}=e;(0,a.validateParams)(l,i.GetAccountUpgradeStatusParamsStruct);const{account:u,chainId:d}=l,g=await(0,a.validateAndNormalizeAddress)(u,c,r.getPermittedAccountsForOrigin);let p;if(d!==undefined)p=d;else{const e=r.getCurrentChainIdForDomain(c);if(!e)throw n.rpcErrors.invalidParams({message:`Could not determine current chain ID for origin: ${c}`});p=e}const{isSupported:h}=await r.isEip7702Supported({address:g,chainId:p});if(h)try{const e=p,s=r.getSelectedNetworkClientIdForChain(e);if(!s)throw n.rpcErrors.invalidParams({message:`Network client ID not found for chain ID ${p}`});const{isUpgraded:i,upgradedAddress:a}=await(async(e,t,r)=>{const n=await r(e,t);if(!n||"0x"===n||n.length<=2)return{isUpgraded:!1,upgradedAddress:null};if(!n.startsWith(o.DELEGATION_INDICATOR_PREFIX))return{isUpgraded:!1,upgradedAddress:null};const s=o.DELEGATION_INDICATOR_PREFIX.length+40;return n.length!==s?{isUpgraded:!1,upgradedAddress:null}:{isUpgraded:!0,upgradedAddress:`0x${n.slice(8,48)}`}})(g,s,r.getCode);t.result={isSupported:h,account:g,isUpgraded:i,upgradedAddress:a,chainId:p}}catch(e){if(e instanceof n.JsonRpcError)throw e;throw n.rpcErrors.internal({message:`Failed to get account upgrade status: ${(0,s.getErrorMessage)(e)}`})}else t.result={isSupported:h,account:g,isUpgraded:!1,upgradedAddress:null,chainId:p}}}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/wallet_getAccountUpgradeStatus.cjs"}],[1897,{"./types.cjs":1894,"./utils.cjs":1895,"@metamask/rpc-errors":2698},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.walletUpgradeAccount=void 0;const n=e("@metamask/rpc-errors"),s=e("./types.cjs"),o=e("./utils.cjs");r.walletUpgradeAccount=async function(e,t,r){const{params:i,origin:a}=e;(0,o.validateParams)(i,s.UpgradeAccountParamsStruct);const{account:l,chainId:c}=i,u=await(0,o.validateAndNormalizeAddress)(l,a,r.getPermittedAccountsForOrigin);let d;if(c!==undefined)d=c;else{const e=r.getCurrentChainIdForDomain(a);if(!e)throw n.rpcErrors.invalidParams({message:`No network configuration found for origin: ${a}`});d=e}try{const e=d,{isSupported:s,upgradeContractAddress:o}=await r.isEip7702Supported({address:u,chainId:e});if(!s)throw n.rpcErrors.invalidParams({message:`Account upgrade not supported on chain ID ${d}`});if(!o)throw n.rpcErrors.invalidParams({message:`No upgrade contract address available for chain ID ${d}`});const i=await r.upgradeAccount(u,o,d);t.result={transactionHash:i.transactionHash,upgradedAccount:u,delegatedTo:i.delegatedTo}}catch(e){if(e instanceof n.JsonRpcError)throw e;throw n.rpcErrors.internal({message:`Failed to upgrade account: ${e instanceof Error?e.message:String(e)}`})}}}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/wallet_upgradeAccount.cjs"}],[1898,{"@ethersproject/providers":815,"@metamask/base-controller":1407,"@metamask/controller-utils":1494,"@metamask/utils":3217,"punycode/punycode.js":5218},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,o,i,a,l=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},c=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.EnsController=r.DEFAULT_ENS_NETWORK_MAP=void 0;const u=e("@ethersproject/providers"),d=e("@metamask/base-controller"),g=e("@metamask/controller-utils"),p=e("@metamask/utils"),h=e("punycode/punycode.js"),m=(0,p.createProjectLogger)("ens-controller");r.DEFAULT_ENS_NETWORK_MAP={1:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",3:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",4:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",5:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",17e3:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",11155111:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"};const f={ensEntries:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},ensResolutionsByAddress:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}},C={ensEntries:{},ensResolutionsByAddress:{}};class b extends d.BaseController{constructor({registriesByChainId:e=r.DEFAULT_ENS_NETWORK_MAP,messenger:t,state:a={},onNetworkDidChange:c}){super({name:"EnsController",metadata:f,messenger:t,state:{...C,ensEntries:Object.fromEntries(Object.entries(e).map(([e,t])=>[(0,g.toHex)(e),{".":{address:t,chainId:(0,g.toHex)(e),ensName:"."}}])),...a}}),n.add(this),s.set(this,null),l(this,n,"m",o).call(this,e),c&&c(({selectedNetworkClientId:t})=>{this.resetState(),l(this,n,"m",i).call(this,t,e)})}resetState(){this.update(e=>{e.ensResolutionsByAddress={}})}clear(){this.update(e=>{e.ensEntries={}})}delete(e,t){const r=(0,g.normalizeEnsName)(t);return!!((0,g.isSafeDynamicKey)(e)&&r&&this.state.ensEntries[e]&&this.state.ensEntries[e][r])&&(this.update(t=>{delete t.ensEntries[e][r],0===Object.keys(t.ensEntries[e]).length&&delete t.ensEntries[e]}),!0)}get(e,t){const r=(0,g.normalizeEnsName)(t);return r&&this.state.ensEntries[e]&&this.state.ensEntries[e][r]||null}set(e,t,r){if(!Number.isInteger(Number.parseInt(e,10))||!t||"string"!=typeof t||r&&!(0,g.isValidHexAddress)(r))throw new Error(`Invalid ENS entry: { chainId:${e}, ensName:${t}, address:${r}}`);const n=(0,g.normalizeEnsName)(t);if(!n)throw new Error(`Invalid ENS name: ${t}`);const s=r?(0,g.toChecksumHexAddress)(r):null,o=this.state.ensEntries[e];return(!o?.[n]||o[n].address!==s)&&(this.update(t=>{t.ensEntries={...this.state.ensEntries,[e]:{...this.state.ensEntries[e],[n]:{address:s,chainId:e,ensName:n}}}}),!0)}async reverseResolveAddress(e){if(!l(this,s,"f"))return undefined;const t=(0,g.toChecksumHexAddress)(e);if(this.state.ensResolutionsByAddress[t])return this.state.ensResolutionsByAddress[t];let r,n;try{r=await l(this,s,"f").lookupAddress(t)}catch(e){return m(e),undefined}if(!r)return undefined;try{n=await l(this,s,"f").resolveName(r)}catch(e){return m(e),undefined}return n?"0x0000000000000000000000000000000000000000"===n||"0x"===n||(0,g.toChecksumHexAddress)(n)!==t?undefined:(this.update(e=>{e.ensResolutionsByAddress[t]=(0,h.toASCII)(r)}),r):undefined}}r.EnsController=b,s=new WeakMap,n=new WeakSet,o=function(e){const{selectedNetworkClientId:t}=this.messenger.call("NetworkController:getState");l(this,n,"m",i).call(this,t,e)},i=function(e,t){const{configuration:{chainId:r},provider:o}=this.messenger.call("NetworkController:getNetworkClientById",e);t&&t[parseInt(r,16)]&&l(this,n,"m",a).call(this,r)?c(this,s,new u.Web3Provider(o,{chainId:(0,g.convertHexToDecimal)(r),name:g.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP[r],ensAddress:t[parseInt(r,16)]}),"f"):c(this,s,null,"f")},a=function(e){return Boolean(this.state.ensEntries[e])},r.default=b}}},{package:"@metamask/ens-controller",file:"node_modules/@metamask/ens-controller/dist/EnsController.cjs"}],[1899,{"./EnsController.cjs":1898},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./EnsController.cjs"),r)}}},{package:"@metamask/ens-controller",file:"node_modules/@metamask/ens-controller/dist/index.cjs"}],[19,{"../../lib/snap-keyring/snap-keyring":339},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapKeyringBuilderInit=void 0;var n=e("../../lib/snap-keyring/snap-keyring");r.SnapKeyringBuilderInit=({controllerMessenger:e,initMessenger:t,removeAccount:r})=>({persistedStateKey:null,memStateKey:null,controller:(0,n.snapKeyringBuilder)(e,{persistKeyringHelper:async()=>{await t.call("KeyringController:persistAllKeyrings"),await t.call("AccountsController:updateAccounts")},removeAccountHelper:async e=>{await r(e)},trackEvent:t.call.bind(t,"MetaMetricsController:trackEvent")})})}}},{package:"$root$",file:"app/scripts/controller-init/accounts/snap-keyring-builder-init.ts"}],[190,{"../../../development/build/constants":614,"../../../shared/lib/feature-flags/version-gating":5932,"../lib/util":374,"@metamask/remote-feature-flag-controller":2690,"@metamask/utils":3217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RemoteFeatureFlagControllerInit=void 0,r.getConfigForRemoteFeatureFlagRequest=u;var n=e("@metamask/utils"),s=e("@metamask/remote-feature-flag-controller"),o=e("../../../development/build/constants"),i=e("../lib/util"),a=e("../../../shared/lib/feature-flags/version-gating");const l={flask:s.DistributionType.Flask,main:s.DistributionType.Main,beta:s.DistributionType.Beta,experimental:s.DistributionType.Main},c={[o.ENVIRONMENT.DEVELOPMENT]:s.EnvironmentType.Development,[o.ENVIRONMENT.RELEASE_CANDIDATE]:s.EnvironmentType.ReleaseCandidate,[o.ENVIRONMENT.PRODUCTION]:s.EnvironmentType.Production};function u(){(0,n.assert)("main","METAMASK_BUILD_TYPE is not defined"),(0,n.assert)("production","METAMASK_ENVIRONMENT is not defined");const e="main",t=l[e]||s.DistributionType.Main;let r=c.production||s.EnvironmentType.Development;return{distribution:t,environment:r}}r.RemoteFeatureFlagControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:r})=>{const n=t.call("OnboardingController:getState"),o=t.call("PreferencesController:getState"),{distribution:l,environment:c}=u();let d=!0===o.useExternalServices,g=!0===n.completedOnboarding;const p=()=>!g||!d,h=new s.RemoteFeatureFlagController({state:r.RemoteFeatureFlagController,messenger:e,fetchInterval:9e5,disabled:p(),getMetaMetricsId:()=>t.call("MetaMetricsController:getMetaMetricsId"),clientVersion:(0,a.getBaseSemVerVersion)(),clientConfigApiService:new s.ClientConfigApiService({fetch:globalThis.fetch.bind(globalThis),config:{client:s.ClientType.Extension,distribution:l,environment:c}})});function m(){p()?h.disable():(h.enable(),h.updateRemoteFeatureFlags().catch(e=>{console.error("Failed to update remote feature flags:",e)}))}return t.subscribe("PreferencesController:stateChange",(0,i.previousValueComparator)((e,t)=>{const{useExternalServices:r}=e,{useExternalServices:n}=t;return n!==r&&(d=!0===n,m()),!0},o)),t.subscribe("OnboardingController:stateChange",(0,i.previousValueComparator)((e,t)=>{const{completedOnboarding:r}=e,{completedOnboarding:n}=t;return n!==r&&(g=!0===n,m()),!0},n)),{controller:h}}}}},{package:"$root$",file:"app/scripts/controller-init/remote-feature-flag-controller-init.ts"}],[1900,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,o=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorReportingService=void 0;r.ErrorReportingService=class{constructor({messenger:e,captureException:t}){this.name="ErrorReportingService",this.state=null,n.set(this,void 0),s.set(this,void 0),o(this,s,e,"f"),o(this,n,t,"f"),i(this,s,"f").registerActionHandler("ErrorReportingService:captureException",i(this,n,"f").bind(this))}captureException(e){i(this,n,"f").call(this,e)}},n=new WeakMap,s=new WeakMap}}},{package:"@metamask/error-reporting-service",file:"node_modules/@metamask/error-reporting-service/dist/error-reporting-service.cjs"}],[1901,{"./error-reporting-service.cjs":1900},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorReportingService=void 0;var n=e("./error-reporting-service.cjs");Object.defineProperty(r,"ErrorReportingService",{enumerable:!0,get:function(){return n.ErrorReportingService}})}}},{package:"@metamask/error-reporting-service",file:"node_modules/@metamask/error-reporting-service/dist/index.cjs"}],[191,{"../../../shared/lib/feature-flags/version-gating":5932,"../../../shared/lib/manifestFlags":5941,"../controllers/rewards/rewards-controller":247},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RewardsControllerInit=void 0;var n=e("../controllers/rewards/rewards-controller"),s=e("../../../shared/lib/manifestFlags"),o=e("../../../shared/lib/feature-flags/version-gating");r.RewardsControllerInit=e=>{const{controllerMessenger:t,persistedState:r,initMessenger:i}=e,a=r.RewardsController??n.defaultRewardsControllerState;return{controller:new n.RewardsController({messenger:t,state:a,isDisabled:()=>{var e;const{remoteFeatureFlags:t}=i.call("RemoteFeatureFlagController:getState"),r=null==t?void 0:t.rewardsEnabled,n=null===(e=(0,s.getManifestFlags)().remoteFeatureFlags)||void 0===e?void 0:e.rewardsEnabled,a=e=>"boolean"==typeof e?e:Boolean((0,o.validatedVersionGatedFeatureFlag)(e)),l=n===undefined?a(r):a(n),{useExternalServices:c}=i.call("PreferencesController:getState");return!l||!c}})}}}}},{package:"$root$",file:"app/scripts/controller-init/rewards-controller-init.ts"}],[192,{"../controllers/rewards/rewards-data-service":248},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RewardsDataServiceInit=void 0;var n=e("../controllers/rewards/rewards-data-service");r.RewardsDataServiceInit=({controllerMessenger:e})=>({controller:new n.RewardsDataService({messenger:e,fetch:fetch.bind(globalThis)}),persistedStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/rewards-data-service-init.ts"}],[1929,{"./base-filter":1930},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./base-filter");t.exports=class extends n{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/base-filter-history.js"}],[193,{"./oauth-service-init":194,"./seedless-onboarding-controller-init":195},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"OAuthServiceInit",{enumerable:!0,get:function(){return n.OAuthServiceInit}}),Object.defineProperty(r,"SeedlessOnboardingControllerInit",{enumerable:!0,get:function(){return s.SeedlessOnboardingControllerInit}});var n=e("./oauth-service-init"),s=e("./seedless-onboarding-controller-init")}}},{package:"$root$",file:"app/scripts/controller-init/seedless-onboarding/index.ts"}],[1930,{"@metamask/safe-event-emitter":2700},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("@metamask/safe-event-emitter").default;t.exports=class extends n{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach(e=>this.emit("update",e))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/base-filter.js"}],[1931,{"./base-filter":1930,"./getBlocksForRange":1932,"./hexUtils":1933},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./base-filter"),s=e("./getBlocksForRange"),{incrementHexInt:o}=e("./hexUtils");t.exports=class extends n{constructor({provider:e,params:t}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:t}){const r=t,n=o(e),i=(await s({provider:this.provider,fromBlock:n,toBlock:r})).map(e=>e.hash);this.addResults(i)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/block-filter.js"}],[1932,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e===undefined||null===e?e:Number.parseInt(e,16)}function s(e){if(e===undefined||null===e)return e;return"0x"+e.toString(16)}t.exports=async function({provider:e,fromBlock:t,toBlock:r}){t||(t=r);const o=n(t),i=n(r),a=Array(i-o+1).fill().map((e,t)=>o+t).map(s);let l=await Promise.all(a.map(t=>async function(e,t,r){for(let n=0;n<3;n++)try{return e.request({id:1,jsonrpc:"2.0",method:t,params:r})}catch(e){console.error(`provider.request failed: ${e.stack||e.message||e}`)}return null}(e,"eth_getBlockByNumber",[t,!1])));return l=l.filter(e=>null!==e),l}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/getBlocksForRange.js"}],[1933,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e.sort((e,t)=>"latest"===e||"earliest"===t?1:"latest"===t||"earliest"===e?-1:s(e)-s(t))}function s(e){return e===undefined||null===e?e:Number.parseInt(e,16)}function o(e){if(e===undefined||null===e)return e;let t=e.toString(16);return t.length%2&&(t="0"+t),"0x"+t}function i(){return Math.floor(16*Math.random()).toString(16)}t.exports={minBlockRef:function(...e){return n(e)[0]},maxBlockRef:function(...e){const t=n(e);return t[t.length-1]},sortBlockRefs:n,bnToHex:function(e){return"0x"+e.toString(16)},blockRefIsNumber:function(e){return e&&!["earliest","latest","pending"].includes(e)},hexToInt:s,incrementHexInt:function(e){if(e===undefined||null===e)return e;return o(s(e)+1)},intToHex:o,unsafeRandomBytes:function(e){let t="0x";for(let r=0;r<e;r++)t+=i(),t+=i();return t}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/hexUtils.js"}],[1934,{"./block-filter.js":1931,"./hexUtils":1933,"./log-filter.js":1935,"./tx-filter.js":1937,"@metamask/json-rpc-engine":2222,"async-mutex":4008},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("async-mutex").Mutex,{createAsyncMiddleware:s,createScaffoldMiddleware:o}=e("@metamask/json-rpc-engine"),i=e("./log-filter.js"),a=e("./block-filter.js"),l=e("./tx-filter.js"),{intToHex:c,hexToInt:u}=e("./hexUtils");function d(e){return g(async(...t)=>{const r=await e(...t);return c(r.id)})}function g(e){return s(async(t,r)=>{const n=await e.apply(null,t.params);r.result=n})}function p(e,t){const r=[];for(let t in e)r.push(e[t]);return r}t.exports=function({blockTracker:e,provider:t}){let r=0,s={};const h=new n,m=function({mutex:e}){return t=>async(r,n,s,o)=>{(await e.acquire())(),t(r,n,s,o)}}({mutex:h}),f=o({eth_newFilter:m(d(b)),eth_newBlockFilter:m(d(w)),eth_newPendingTransactionFilter:m(d(v)),eth_uninstallFilter:m(g(M)),eth_getFilterChanges:m(g(y)),eth_getFilterLogs:m(g(S))}),C=async({oldBlock:e,newBlock:t})=>{if(0===s.length)return;const r=await h.acquire();try{await Promise.all(p(s).map(async r=>{try{await r.update({oldBlock:e,newBlock:t})}catch(e){console.error(e)}}))}catch(e){console.error(e)}r()};return f.newLogFilter=b,f.newBlockFilter=w,f.newPendingTransactionFilter=v,f.uninstallFilter=M,f.getFilterChanges=y,f.getFilterLogs=S,f.destroy=()=>{!async function(){const e=p(s).length;s={},I({prevFilterCount:e,newFilterCount:0})}()},f;async function b(e){const r=new i({provider:t,params:e});await k(r);return r}async function w(){const e=new a({provider:t});await k(e);return e}async function v(){const e=new l({provider:t});await k(e);return e}async function y(e){const t=u(e),r=s[t];if(!r)throw new Error(`No filter for index "${t}"`);return r.getChangesAndClear()}async function S(e){const t=u(e),r=s[t];if(!r)throw new Error(`No filter for index "${t}"`);let n=[];return"log"===r.type&&(n=r.getAllResults()),n}async function M(e){const t=u(e),r=s[t],n=Boolean(r);return n&&await async function(e){const t=p(s).length;delete s[e];const r=p(s).length;I({prevFilterCount:t,newFilterCount:r})}(t),n}async function k(t){const n=p(s).length,o=await e.getLatestBlock();await t.initialize({currentBlock:o}),r++,s[r]=t,t.id=r,t.idHex=c(r);return I({prevFilterCount:n,newFilterCount:p(s).length}),r}function I({prevFilterCount:t,newFilterCount:r}){0===t&&r>0?e.on("sync",C):t>0&&0===r&&e.removeListener("sync",C)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/index.js"}],[1935,{"./base-filter-history":1929,"./hexUtils":1933,"@metamask/eth-query":2079,pify:5145},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("@metamask/eth-query"),s=e("pify"),o=e("./base-filter-history"),{bnToHex:i,hexToInt:a,incrementHexInt:l,minBlockRef:c,blockRefIsNumber:u}=e("./hexUtils");t.exports=class extends o{constructor({provider:e,params:t}){super(),this.type="log",this.ethQuery=new n(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:undefined,topics:[]},t),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map(e=>e.toLowerCase()))}async initialize({currentBlock:e}){let t=this.params.fromBlock;["latest","pending"].includes(t)&&(t=e),"earliest"===t&&(t="0x0"),this.params.fromBlock=t;const r=c(this.params.toBlock,e),n=Object.assign({},this.params,{toBlock:r}),s=await this._fetchLogs(n);this.addInitialResults(s)}async update({oldBlock:e,newBlock:t}){const r=t;let n;n=e?l(e):t;const s=Object.assign({},this.params,{fromBlock:n,toBlock:r}),o=(await this._fetchLogs(s)).filter(e=>this.matchLog(e));this.addResults(o)}async _fetchLogs(e){return await s(t=>this.ethQuery.getLogs(e,t))()}matchLog(e){if(a(this.params.fromBlock)>=a(e.blockNumber))return!1;if(u(this.params.toBlock)&&a(this.params.toBlock)<=a(e.blockNumber))return!1;const t=e.address&&e.address.toLowerCase();if(this.params.address&&t&&!this.params.address.includes(t))return!1;return this.params.topics.every((t,r)=>{let n=e.topics[r];if(!n)return!1;n=n.toLowerCase();let s=Array.isArray(t)?t:[t];if(s.includes(null))return!0;s=s.map(e=>e.toLowerCase());return s.includes(n)})}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/log-filter.js"}],[1936,{"./getBlocksForRange.js":1932,"./hexUtils.js":1933,"./index.js":1934,"@metamask/json-rpc-engine":2222,"@metamask/safe-event-emitter":2700},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("@metamask/safe-event-emitter").default,{createAsyncMiddleware:s,createScaffoldMiddleware:o}=e("@metamask/json-rpc-engine"),i=e("./index.js"),{unsafeRandomBytes:a,incrementHexInt:l}=e("./hexUtils.js"),c=e("./getBlocksForRange.js");function u(e){return null===e||e===undefined?null:{hash:e.hash,parentHash:e.parentHash,sha3Uncles:e.sha3Uncles,miner:e.miner,stateRoot:e.stateRoot,transactionsRoot:e.transactionsRoot,receiptsRoot:e.receiptsRoot,logsBloom:e.logsBloom,difficulty:e.difficulty,number:e.number,gasLimit:e.gasLimit,gasUsed:e.gasUsed,nonce:e.nonce,mixHash:e.mixHash,timestamp:e.timestamp,extraData:e.extraData}}t.exports=function({blockTracker:e,provider:t}){const r={},d=i({blockTracker:e,provider:t});let g=!1;const p=new n,h=o({eth_subscribe:s(async function(n,s){if(g)throw new Error("SubscriptionManager - attempting to use after destroying");const o=n.params[0],i=a(16);let p;switch(o){case"newHeads":p=h({subId:i});break;case"logs":const e=n.params[1];p=f({subId:i,filter:await d.newLogFilter(e)});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${o}"`)}return r[i]=p,void(s.result=i);function h({subId:r}){const n={type:o,destroy:async()=>{e.removeListener("sync",n.update)},update:async({oldBlock:e,newBlock:n})=>{const s=n,o=l(e);(await c({provider:t,fromBlock:o,toBlock:s})).map(u).filter(e=>null!==e).forEach(e=>{m(r,e)})}};return e.on("sync",n.update),n}function f({subId:e,filter:t}){t.on("update",t=>m(e,t));return{type:o,destroy:async()=>await d.uninstallFilter(t.idHex)}}}),eth_unsubscribe:s(async function(e,t){if(g)throw new Error("SubscriptionManager - attempting to use after destroying");const n=e.params[0],s=r[n];if(!s)return void(t.result=!1);delete r[n],await s.destroy(),t.result=!0})});return h.destroy=function(){p.removeAllListeners();for(const e in r)r[e].destroy(),delete r[e];g=!0},{events:p,middleware:h};function m(e,t){p.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:e,result:t}})}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/subscriptionManager.js"}],[1937,{"./base-filter":1930,"./getBlocksForRange":1932,"./hexUtils":1933},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./base-filter"),s=e("./getBlocksForRange"),{incrementHexInt:o}=e("./hexUtils");t.exports=class extends n{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){const t=e,r=o(e),n=await s({provider:this.provider,fromBlock:r,toBlock:t}),i=[];for(const e of n)i.push(...e.transactions);this.addResults(i)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/tx-filter.js"}],[194,{"../../services/oauth/oauth-service":606,"../../services/oauth/web-authenticator-factory":609},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.OAuthServiceInit=void 0;var n,s=(n=e("../../services/oauth/oauth-service"))&&n.__esModule?n:{default:n},o=e("../../services/oauth/web-authenticator-factory");r.OAuthServiceInit=e=>{const{controllerMessenger:t,getController:r}=e,n=r("MetaMetricsController");return{controller:new s.default({messenger:t,env:{googleClientId:"795351133007-6d0s31utj13knv440fgjo2ur93241gb6.apps.googleusercontent.com",appleClientId:"io.metamask.appleloginclient.prod"},webAuthenticator:(0,o.webAuthenticatorFactory)(),bufferedTrace:n.bufferedTrace.bind(n),bufferedEndTrace:n.bufferedEndTrace.bind(n),trackEvent:n.trackEvent.bind(n),addEventBeforeMetricsOptIn:n.addEventBeforeMetricsOptIn.bind(n),getParticipateInMetaMetrics:()=>n.state.participateInMetaMetrics}),memStateKey:null,persistedStateKey:null}}}}},{package:"$root$",file:"app/scripts/controller-init/seedless-onboarding/oauth-service-init.ts"}],[195,{"../../lib/encryptor-factory":284,"../../services/oauth/config":603,"@metamask/seedless-onboarding-controller":2718},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SeedlessOnboardingControllerInit=void 0;var n=e("@metamask/seedless-onboarding-controller"),s=e("../../lib/encryptor-factory"),o=e("../../services/oauth/config");r.SeedlessOnboardingControllerInit=e=>{const{initMessenger:t,controllerMessenger:r,persistedState:i}=e,a=(0,s.encryptorFactory)(6e5),l=(0,o.isDevOrTestBuild)()?n.Web3AuthNetwork.Devnet:n.Web3AuthNetwork.Mainnet;return{controller:new n.SeedlessOnboardingController({messenger:r,state:i.SeedlessOnboardingController,network:l,passwordOutdatedCacheTTL:15e3,refreshJWTToken:(...e)=>t.call("OAuthService:getNewRefreshToken",...e),revokeRefreshToken:(...e)=>t.call("OAuthService:revokeRefreshToken",...e),renewRefreshToken:(...e)=>t.call("OAuthService:renewRefreshToken",...e),encryptor:a})}}}}},{package:"$root$",file:"app/scripts/controller-init/seedless-onboarding/seedless-onboarding-controller-init.ts"}],[196,{"../lib/WeakRefObjectMap":264,"@metamask/selected-network-controller":2723},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SelectedNetworkControllerInit=void 0;var n=e("@metamask/selected-network-controller"),s=e("../lib/WeakRefObjectMap");r.SelectedNetworkControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new n.SelectedNetworkController({state:t.SelectedNetworkController,messenger:e,domainProxyMap:new s.WeakRefObjectMap})})}}},{package:"$root$",file:"app/scripts/controller-init/selected-network-controller-init.ts"}],[197,{"../../../../shared/lib/sentry":5953,"../../../../shared/modules/shield":6002,"../../lib/ppom/ppom-util":308,"@metamask/keyring-controller":2316,"@metamask/shield-controller":2727},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ShieldControllerInit=void 0;var n=e("@metamask/shield-controller"),s=e("@metamask/keyring-controller"),o=e("../../lib/ppom/ppom-util"),i=e("../../../../shared/modules/shield"),a=e("../../../../shared/lib/sentry");const l=e=>{const t=(0,n.parseSignatureRequestMethod)(e),r=e.version===s.SignTypedDataVersion.V3||e.version===s.SignTypedDataVersion.V4,i=r?[e.messageParams.from,e.messageParams.data]:[e.messageParams.data,e.messageParams.from],a={id:e.id,jsonrpc:"2.0",method:t,params:i},l=(0,o.normalizeSignatureRequest)(a);if(null!=l&&l.params&&r){const t=l.params;e.messageParams.data=t[1]}return e},c=(0,i.loadShieldConfig)();r.ShieldControllerInit=e=>{const{controllerMessenger:t,initMessenger:r,persistedState:s}=e,o=c.ruleEngineUrl;return{controller:new n.ShieldController({messenger:t,state:s.ShieldController,normalizeSignatureRequest:l,backend:new n.ShieldRemoteBackend({getAccessToken:()=>r.call("AuthenticationController:getBearerToken"),fetch:(e,t)=>fetch(e,t),baseUrl:o,captureException:a.captureException})})}}}}},{package:"$root$",file:"app/scripts/controller-init/shield/shield-controller-init.ts"}],[1972,{"./ledger-hw-app.cjs":1974,"./ledger-iframe-bridge.cjs":1975,"./ledger-keyring.cjs":1976,"./ledger-mobile-bridge.cjs":1977,"./ledger-transport-middleware.cjs":1978},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./ledger-keyring.cjs"),r),s(e("./ledger-iframe-bridge.cjs"),r),s(e("./ledger-mobile-bridge.cjs"),r),s(e("./ledger-transport-middleware.cjs"),r),s(e("./ledger-hw-app.cjs"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/index.cjs"}],[1973,{"./type.cjs":1979,"@ledgerhq/hw-transport":1003},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.handleLedgerTransportError=function(e,t){if(e instanceof n.TransportStatusError){const t=e;throw new s.LedgerStatusError(t.statusCode,function(e){switch(e.statusCode){case 27013:return"Ledger: User rejected the transaction";case 27264:return"Ledger: Blind signing must be enabled";case 21781:return"Ledger: Device is locked. Unlock it to continue";case 25871:return"Ledger: Ethereum app closed. Open it to unlock";default:return e.message}}(t))}throw e instanceof Error?e:new Error(t)};const n=e("@ledgerhq/hw-transport"),s=e("./type.cjs")}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-error-handler.cjs"}],[1974,{"@ledgerhq/hw-app-eth":988,buffer:4137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.MetaMaskLedgerHwAppEth=void 0;const s=n(e("@ledgerhq/hw-app-eth")),o=e("buffer");class i extends s.default{constructor(){super(...arguments),this.mainAppName="BOLOS",this.ethAppName="Ethereum",this.transportEncoding="ascii"}async openEthApp(){await this.transport.send(224,216,0,0,o.Buffer.from(this.ethAppName,this.transportEncoding))}async closeApps(){await this.transport.send(176,167,0,0)}async getAppNameAndVersion(){const e=await this.transport.send(176,1,0,0);if(1!==e[0])throw new Error("Incorrect format return from getAppNameAndVersion.");let t=1;const r=e[t]??0;t+=1;const n=e.slice(t,t+=r).toString(this.transportEncoding),s=e[t]??0;t+=1;return{appName:n,version:e.slice(t,t+=s).toString(this.transportEncoding)}}}r.MetaMaskLedgerHwAppEth=i}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-hw-app.cjs"}],[1975,{"@metamask/utils":3217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,o,i,a,l,c,u,d,g=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},p=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerIframeBridge=r.IFrameMessageAction=void 0;const h=e("@metamask/utils");var m;!function(e){e.LedgerIsIframeReady="ledger-is-iframe-ready",e.LedgerConnectionChange="ledger-connection-change",e.LedgerUnlock="ledger-unlock",e.LedgerMakeApp="ledger-make-app",e.LedgerUpdateTransport="ledger-update-transport",e.LedgerSignTransaction="ledger-sign-transaction",e.LedgerSignPersonalMessage="ledger-sign-personal-message",e.LedgerSignTypedData="ledger-sign-typed-data"}(m||(r.IFrameMessageAction=m={}));r.LedgerIframeBridge=class{constructor(e={bridgeUrl:"https://metamask.github.io/eth-ledger-bridge-keyring"}){n.add(this),this.iframeLoaded=!1,s.set(this,void 0),this.isDeviceConnected=!1,this.currentMessageId=0,o.set(this,new Map),g(this,n,"m",d).call(this,e),p(this,s,{bridgeUrl:e?.bridgeUrl},"f")}async init(){await g(this,n,"m",a).call(this,g(this,s,"f").bridgeUrl),this.eventListener=g(this,n,"m",c).bind(this,g(this,s,"f").bridgeUrl),window.addEventListener("message",this.eventListener)}async destroy(){this.eventListener&&window.removeEventListener("message",this.eventListener)}async getOptions(){return g(this,s,"f")}async setOptions(e){g(this,n,"m",d).call(this,e),g(this,s,"f")?.bridgeUrl!==e.bridgeUrl&&(g(this,s,"f").bridgeUrl=e.bridgeUrl,await this.destroy(),await this.init())}async attemptMakeApp(){const e=await g(this,n,"m",u).call(this,{action:m.LedgerMakeApp},{timeout:8e3});if("success"in e&&e.success)return!0;throw"error"in e?e.error:new Error("Unknown error occurred")}async updateTransportMethod(e){if(!this.iframeLoaded)throw new Error("The iframe is not loaded yet");const t=await g(this,n,"m",u).call(this,{action:m.LedgerUpdateTransport,params:{transportType:e}},{timeout:8e3});if("success"in t&&t.success)return!0;throw new Error("Ledger transport could not be updated")}async getPublicKey(e){return g(this,n,"m",i).call(this,m.LedgerUnlock,e)}async deviceSignTransaction(e){return g(this,n,"m",i).call(this,m.LedgerSignTransaction,e)}async deviceSignMessage(e){return g(this,n,"m",i).call(this,m.LedgerSignPersonalMessage,e)}async deviceSignTypedData(e){return g(this,n,"m",i).call(this,m.LedgerSignTypedData,e)}},s=new WeakMap,o=new WeakMap,n=new WeakSet,i=async function(...[e,t]){const r=await g(this,n,"m",u).call(this,{action:e,params:t});if("payload"in r&&r.payload){if("success"in r&&r.success)return r.payload;if("error"in r.payload)throw r.payload.error}throw new Error("Unknown error occurred")},a=async function(e){return new Promise(t=>{this.iframe=document.createElement("iframe"),this.iframe.src=e,this.iframe.allow="hid 'src'",this.iframe.onload=async()=>{this.iframeLoaded=!0,t()},document.head.appendChild(this.iframe)})},l=function(e){const t=e.split("/");return t.splice(-1,1),t.join("/")},c=function(e,t){const{origin:r,data:s}=t;if(r===g(this,n,"m",l).call(this,e)&&s){const e=g(this,o,"f").get(s.messageId);e?(e.resolve(s),g(this,o,"f").delete(s.messageId)):s.action===m.LedgerConnectionChange&&(this.isDeviceConnected=s.payload.connected)}},u=async function(e,{timeout:t}={}){this.currentMessageId+=1;const r={...e,messageId:this.currentMessageId,target:"LEDGER-IFRAME"},n=(0,h.createDeferredPromise)();if(g(this,o,"f").set(this.currentMessageId,n),!this.iframeLoaded||!this.iframe?.contentWindow)throw new Error("The iframe is not loaded yet");return t&&setTimeout(()=>{g(this,o,"f").has(r.messageId)&&(g(this,o,"f").delete(r.messageId),n.reject(new Error("Ledger iframe message timeout")))},t),this.iframe.contentWindow.postMessage(r,"*"),n.promise},d=function(e){if("string"!=typeof e.bridgeUrl||0===e.bridgeUrl.length)throw new Error("bridgeURL is not a valid URL")}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-iframe-bridge.cjs"}],[1976,{"./ledger-error-handler.cjs":1973,"@ethereumjs/rlp":674,"@ethereumjs/tx":687,"@ethereumjs/util":708,"@metamask/eth-sig-util":2081,"@metamask/utils":3217,buffer:4137,hdkey:4660},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,o,i,a,l,c,u,d,g,p,h,m,f,C=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},b=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerKeyring=void 0;const w=e("@ethereumjs/rlp"),v=e("@ethereumjs/tx"),y=e("@ethereumjs/util"),S=e("@metamask/eth-sig-util"),M=e("@metamask/utils"),k=e("buffer"),I=b(e("hdkey")),T=e("./ledger-error-handler.cjs"),E="m",A=`${E}/44'/60'/0'`,P="Ledger Hardware";var _;!function(e){e.Ropsten="https://api-ropsten.etherscan.io",e.Kovan="https://api-kovan.etherscan.io",e.Rinkeby="https://api-rinkeby.etherscan.io",e.Mainnet="https://api.etherscan.io"}(_||(_={}));class O{constructor({bridge:e}){if(n.add(this),this.deviceId="",this.type=P,this.page=0,this.perPage=5,this.unlockedAccount=0,this.accounts=[],this.accountDetails={},this.hdk=new I.default,this.hdPath=A,this.paths={},this.network=_.Mainnet,this.implementFullBIP44=!1,!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}async init(){return this.bridge.init()}async destroy(){return this.bridge.destroy()}async serialize(){return{hdPath:this.hdPath,accounts:this.accounts.slice(),deviceId:this.deviceId,accountDetails:this.accountDetails,implementFullBIP44:!1}}async deserialize(e){this.hdPath=e.hdPath??A,this.accounts=e.accounts??[],this.deviceId=e.deviceId??"",this.accountDetails=e.accountDetails??{},e.accountDetails||C(this,n,"m",s).call(this,e),this.implementFullBIP44=e.implementFullBIP44??!1;const t=new Set(Object.keys(this.accountDetails));return this.accounts=this.accounts.filter(e=>t.has(C(this,n,"m",f).call(this,e))),Promise.resolve()}setDeviceId(e){this.deviceId=e}getDeviceId(){return this.deviceId}isUnlocked(){return Boolean(this.hdk.publicKey)}isConnected(){return this.bridge.isDeviceConnected}setAccountToUnlock(e){this.unlockedAccount=e}setHdPath(e){this.hdPath!==e&&(this.hdk=new I.default),this.hdPath=e}async unlock(e,t=!0){if(this.isUnlocked()&&!e)return C(this,n,"m",f).call(this,(0,M.bytesToHex)((0,y.publicToAddress)(this.hdk.publicKey,!0)));const r=e?C(this,n,"m",p).call(this,e):this.hdPath;let s;try{s=await this.bridge.getPublicKey({hdPath:r})}catch(e){(0,T.handleLedgerTransportError)(e,"Ledger: Unknown error while unlocking account")}return t&&s.chainCode&&(this.hdk.publicKey=k.Buffer.from(s.publicKey,"hex"),this.hdk.chainCode=k.Buffer.from(s.chainCode,"hex")),(0,M.add0x)(s.address)}async addAccounts(e){return new Promise((t,r)=>{this.unlock().then(async r=>{const s=this.unlockedAccount,o=s+e,i=[];for(let e=s;e<o;e++){const t=C(this,n,"m",d).call(this,e);let r;r=C(this,n,"m",g).call(this)?await this.unlock(t):C(this,n,"m",c).call(this,E,e),this.accountDetails[C(this,n,"m",f).call(this,r)]={bip44:C(this,n,"m",g).call(this),hdPath:t},this.accounts.includes(r)||(this.accounts=[...this.accounts,r],i.push(r)),this.page=0}t(i)}).catch(r)})}getName(){return P}async getFirstPage(){return this.page=0,C(this,n,"m",i).call(this,1)}async getNextPage(){return C(this,n,"m",i).call(this,1)}async getPreviousPage(){return C(this,n,"m",i).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){const t=this.accounts.filter(t=>t.toLowerCase()!==e.toLowerCase());if(t.length===this.accounts.length)throw new Error(`Address ${e} not found in this keyring`);this.accounts=t,delete this.accountDetails[C(this,n,"m",f).call(this,e)]}async attemptMakeApp(){return this.bridge.attemptMakeApp()}async updateTransportMethod(e){return this.bridge.updateTransportMethod(e)}async signTransaction(e,t){let r;if(function(e){return"getChainId"in e&&"function"==typeof e.getChainId}(t))return t.v=t.getChainId(),t.r="0x00",t.s="0x00",r=t.serialize().toString("hex"),C(this,n,"m",o).call(this,e,r,e=>(t.v=k.Buffer.from(e.v,"hex"),t.r=k.Buffer.from(e.r,"hex"),t.s=k.Buffer.from(e.s,"hex"),t));const s=t.getMessageToSign();return r=Array.isArray(s)?k.Buffer.from(w.RLP.encode(s)).toString("hex"):(0,M.bytesToHex)(s),C(this,n,"m",o).call(this,e,r,e=>{const r=t.toJSON();return r.type=t.type,r.v=(0,M.add0x)(e.v),r.r=(0,M.add0x)(e.r),r.s=(0,M.add0x)(e.s),v.TransactionFactory.fromTxData(r,{common:t.common,freeze:Object.isFrozen(t)})})}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){const r=await this.unlockAccountByAddress(e);if(!r)throw new Error("Ledger: Unknown error while signing message");let s;try{s=await this.bridge.deviceSignMessage({hdPath:r,message:(0,M.remove0x)(t)})}catch(e){(0,T.handleLedgerTransportError)(e,"Ledger: Unknown error while signing message")}let o=parseInt(String(s.v),10).toString(16);o.length<2&&(o=`0${o}`);const i=`0x${s.r}${s.s}${o}`,a=(0,S.recoverPersonalSignature)({data:t,signature:i});if(C(this,n,"m",f).call(this,a)!==C(this,n,"m",f).call(this,e))throw new Error("Ledger: The signature doesnt match the right address");return i}async unlockAccountByAddress(e){const t=C(this,n,"m",f).call(this,e),r=this.accountDetails[t];if(!r)throw new Error(`Ledger: Account for address '${t}' not found`);const{hdPath:s}=r;if((await this.unlock(s,!1)).toLowerCase()!==e.toLowerCase())throw new Error(`Ledger: Account ${e} does not belong to the connected device`);return s}async signTypedData(e,t,r){const{version:s}=r??{};if(!("V4"===s))throw new Error("Ledger: Only version 4 of typed data signing is supported");const{domain:o,types:i,primaryType:a,message:l}=S.TypedDataUtils.sanitizeData(t),c=await this.unlockAccountByAddress(e);if(!c)throw new Error("Ledger: Unknown error while signing message");let u;try{u=await this.bridge.deviceSignTypedData({hdPath:c,message:{domain:{name:o.name,chainId:o.chainId,version:o.version,verifyingContract:o.verifyingContract,salt:o.salt instanceof ArrayBuffer?k.Buffer.from(o.salt).toString("hex"):o.salt},types:i,primaryType:a.toString(),message:l}})}catch(e){(0,T.handleLedgerTransportError)(e,"Ledger: Unknown error while signing message")}let d=parseInt(String(u.v),10).toString(16);d.length<2&&(d=`0${d}`);const g=`0x${u.r}${u.s}${d}`,p=(0,S.recoverTypedSignature)({data:t,signature:g,version:S.SignTypedDataVersion.V4});if(C(this,n,"m",f).call(this,p)!==C(this,n,"m",f).call(this,e))throw new Error("Ledger: The signature doesnt match the right address");return g}forgetDevice(){this.deviceId="",this.accounts=[],this.page=0,this.unlockedAccount=0,this.paths={},this.accountDetails={},this.hdk=new I.default}}r.LedgerKeyring=O,n=new WeakSet,s=function(e){if(C(this,n,"m",g).call(this)&&e.accountIndexes)for(const[t,r]of Object.entries(e.accountIndexes))this.accountDetails[t]={bip44:!0,hdPath:C(this,n,"m",d).call(this,r)};const t=new Set(Object.keys(this.accountDetails));C(this,n,"m",g).call(this)||this.accounts.forEach(e=>{const r=C(this,n,"m",f).call(this,e);t.has(r)||(this.accountDetails[r]={bip44:!1,hdPath:C(this,n,"m",u).call(this,e)})})},o=async function(e,t,r){const n=await this.unlockAccountByAddress(e);if(!n)throw new Error("Ledger: hdPath is empty while signing transaction");let s;try{s=await this.bridge.deviceSignTransaction({tx:(0,M.remove0x)(t),hdPath:n})}catch(e){(0,T.handleLedgerTransportError)(e,"Ledger: Unknown error while signing transaction")}const o=r(s);if(o.verifySignature())return o;throw new Error("Ledger: The transaction signature is not valid")},i=async function(e){this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage;let s;return await this.unlock(),s=C(this,n,"m",g).call(this)?await C(this,n,"m",a).call(this,t,r):C(this,n,"m",l).call(this,t,r),s},a=async function(e,t){const r=[];for(let s=e;s<t;s++){const e=C(this,n,"m",d).call(this,s),t=await this.unlock(e),o=!this.implementFullBIP44||await C(this,n,"m",h).call(this,t);if(r.push({address:t,balance:null,index:s}),!o)break}return r},l=function(e,t){const r=[];for(let s=e;s<t;s++){const e=C(this,n,"m",c).call(this,E,s);r.push({address:e,balance:null,index:s}),this.paths[C(this,n,"m",f).call(this,e)]=s}return r},c=function(e,t){const r=this.hdk.derive(`${e}/${t}`),s=(0,M.bytesToHex)((0,y.publicToAddress)(r.publicKey,!0));return C(this,n,"m",f).call(this,s)},u=function(e){const t=C(this,n,"m",f).call(this,e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===C(this,n,"m",c).call(this,E,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return C(this,n,"m",d).call(this,r)},d=function(e){return C(this,n,"m",g).call(this)?`m/44'/60'/${e}'/0/0`:`${this.hdPath}/${e}`},g=function(){return"m/44'/60'/0'/0/0"===this.hdPath},p=function(e){return e.toString().replace("m/","")},h=async function(e){const t=C(this,n,"m",m).call(this),r=await window.fetch(`${t}/api?module=account&action=txlist&address=${e}&tag=latest&page=1&offset=1`),s=await r.json();return"0"!==s.status&&s.result.length>0},m=function(){return this.network},f=function(e){return(0,M.getChecksumAddress)((0,M.add0x)(e))},O.type=P}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-keyring.cjs"}],[1977,{"./ledger-hw-app.cjs":1974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,o,i,a,l=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},c=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerMobileBridge=void 0;e("./ledger-hw-app.cjs");r.LedgerMobileBridge=class{constructor(e,t={}){n.add(this),s.set(this,void 0),o.set(this,void 0),this.isDeviceConnected=!1,l(this,o,t,"f"),l(this,s,e,"f")}async init(){return Promise.resolve()}async destroy(){try{await c(this,n,"m",i).call(this).dispose()}catch(e){console.error(e)}this.isDeviceConnected=!1}async deviceSignMessage({hdPath:e,message:t}){return c(this,n,"m",a).call(this).signPersonalMessage(e,t)}async deviceSignTypedData({hdPath:e,message:t}){return c(this,n,"m",a).call(this).signEIP712Message(e,t)}async deviceSignTransaction({tx:e,hdPath:t}){return c(this,n,"m",a).call(this).clearSignTransaction(t,e,{externalPlugins:!0,erc20:!0,nft:!0})}async getPublicKey({hdPath:e}){return await c(this,n,"m",a).call(this).getAddress(e,!1,!0)}async getOptions(){return c(this,o,"f")}async setOptions(e){l(this,o,e,"f")}async updateTransportMethod(e){if(!e.deviceModel)throw new Error("Property `deviceModel` is not defined in `transport`.");if(!e.deviceModel.id)throw new Error("Property `deviceModel.id` is not defined in `transport`.");return c(this,n,"m",i).call(this).setTransport(e),this.isDeviceConnected=!0,Promise.resolve(!0)}async attemptMakeApp(){throw new Error("Method not supported.")}async openEthApp(){await c(this,n,"m",a).call(this).openEthApp()}async closeApps(){await c(this,n,"m",a).call(this).closeApps()}async getAppNameAndVersion(){return c(this,n,"m",a).call(this).getAppNameAndVersion()}},s=new WeakMap,o=new WeakMap,n=new WeakSet,i=function(){if(c(this,s,"f"))return c(this,s,"f");throw new Error("Instance `transportMiddleware` is not initialized.")},a=function(){return c(this,n,"m",i).call(this).getEthApp()}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-mobile-bridge.cjs"}],[1978,{"./ledger-hw-app.cjs":1974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerTransportMiddleware=void 0;const i=e("./ledger-hw-app.cjs");r.LedgerTransportMiddleware=class{constructor(){this.mainAppName="BOLOS",this.ethAppName="Ethereum",this.transportEncoding="ascii",n.set(this,void 0)}async dispose(){const e=this.getTransport();await e.close()}setTransport(e){s(this,n,e,"f")}getTransport(){if(!o(this,n,"f"))throw new Error("Instance `transport` is not initialized.");return o(this,n,"f")}getEthApp(){return new i.MetaMaskLedgerHwAppEth(this.getTransport())}},n=new WeakMap}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-transport-middleware.cjs"}],[1979,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerStatusError=void 0;class n extends Error{constructor(e,t){super(t),this.statusCode=e}}r.LedgerStatusError=n}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/type.cjs"}],[198,{"../../../../shared/constants/smartTransactions":5867,"@metamask/smart-transactions-controller":2743},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SmartTransactionsControllerInit=void 0;var n=e("@metamask/smart-transactions-controller"),s=e("../../../../shared/constants/smartTransactions");r.SmartTransactionsControllerInit=e=>{const{controllerMessenger:t,initMessenger:r,persistedState:o,getUIState:i,getAccountType:a,getDeviceModel:l,getHardwareTypeForMetric:c,trace:u}=e;return{controller:new n.SmartTransactionsController({supportedChainIds:(0,s.getAllowedSmartTransactionsChainIds)(),clientId:n.ClientId.Extension,trackMetaMetricsEvent:r.call.bind(r,"MetaMetricsController:trackEvent"),state:o.SmartTransactionsController,messenger:t,getMetaMetricsProps:async()=>{var e;const t=i(),{internalAccounts:r}=t,n=null==r?void 0:r.selectedAccount,s=n?null==r||null===(e=r.accounts)||void 0===e?void 0:e[n]:null,o=(null==s?void 0:s.address)??"";if(!o)return{accountHardwareType:undefined,accountType:undefined,deviceModel:undefined};return{accountHardwareType:await c(o),accountType:await a(o),deviceModel:await l(o)}},trace:u})}}}}},{package:"$root$",file:"app/scripts/controller-init/smart-transactions/smart-transactions-controller-init.ts"}],[199,{"@metamask/snaps-controllers":2757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CronjobControllerInit=void 0;var n=e("@metamask/snaps-controllers");r.CronjobControllerInit=({controllerMessenger:e,persistedState:t,getCronjobControllerStorageManager:r})=>({controller:new n.CronjobController({state:t.CronjobController,messenger:e,stateManager:r()}),persistedStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/cronjob-controller-init.ts"}],[20,{"../controllers/alert-controller":224},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AlertControllerInit=void 0;var n=e("../controllers/alert-controller");r.AlertControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new n.AlertController({state:t.AlertController,messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/alert-controller-init.ts"}],[200,{"../../../../shared/modules/mv3.utils":5987,"@metamask/permission-controller":2534,"@metamask/snaps-controllers":2757,"@metamask/utils":3217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ExecutionServiceInit=void 0;var n=e("@metamask/snaps-controllers"),s=e("@metamask/utils"),o=e("@metamask/permission-controller"),i=e("../../../../shared/modules/mv3.utils");r.ExecutionServiceInit=({controllerMessenger:e,offscreenPromise:t,setupUntrustedCommunicationEip1193:r})=>{function a(e,t){r({connectionStream:t,sender:{snapId:e},subjectType:o.SubjectType.Snap})}if(i.isManifestV3&&"undefined"!=typeof chrome&&void 0!==chrome.offscreen)return{memStateKey:null,persistedStateKey:null,controller:new n.OffscreenExecutionService({messenger:e,setupSnapProvider:a,offscreenPromise:t})};const l="https://execution.metamask.io/iframe/10.3.0/index.html";return(0,s.assert)(l,"Missing iframe URL."),{memStateKey:null,persistedStateKey:null,controller:new n.IframeExecutionService({messenger:e,iframeUrl:new URL(l),setupSnapProvider:a})}}}}},{package:"$root$",file:"app/scripts/controller-init/snaps/execution-service-init.ts"}],[201,{"./cronjob-controller-init":199,"./execution-service-init":200,"./multichain-router-init":202,"./rate-limit-controller-init":203,"./snap-controller-init":204,"./snap-insights-controller-init":205,"./snap-interface-controller-init":206,"./snaps-name-provider-init":207,"./snaps-registry-init":208,"./websocket-service-init":209},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"CronjobControllerInit",{enumerable:!0,get:function(){return n.CronjobControllerInit}}),Object.defineProperty(r,"ExecutionServiceInit",{enumerable:!0,get:function(){return s.ExecutionServiceInit}}),Object.defineProperty(r,"MultichainRouterInit",{enumerable:!0,get:function(){return o.MultichainRouterInit}}),Object.defineProperty(r,"RateLimitControllerInit",{enumerable:!0,get:function(){return i.RateLimitControllerInit}}),Object.defineProperty(r,"SnapControllerInit",{enumerable:!0,get:function(){return a.SnapControllerInit}}),Object.defineProperty(r,"SnapInsightsControllerInit",{enumerable:!0,get:function(){return l.SnapInsightsControllerInit}}),Object.defineProperty(r,"SnapInterfaceControllerInit",{enumerable:!0,get:function(){return c.SnapInterfaceControllerInit}}),Object.defineProperty(r,"SnapsNameProviderInit",{enumerable:!0,get:function(){return u.SnapsNameProviderInit}}),Object.defineProperty(r,"SnapsRegistryInit",{enumerable:!0,get:function(){return d.SnapsRegistryInit}}),Object.defineProperty(r,"WebSocketServiceInit",{enumerable:!0,get:function(){return g.WebSocketServiceInit}});var n=e("./cronjob-controller-init"),s=e("./execution-service-init"),o=e("./multichain-router-init"),i=e("./rate-limit-controller-init"),a=e("./snap-controller-init"),l=e("./snap-insights-controller-init"),c=e("./snap-interface-controller-init"),u=e("./snaps-name-provider-init"),d=e("./snaps-registry-init"),g=e("./websocket-service-init")}}},{package:"$root$",file:"app/scripts/controller-init/snaps/index.ts"}],[202,{"../../../../shared/constants/keyring":5849,"@metamask/snaps-controllers":2757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MultichainRouterInit=void 0;var n=e("@metamask/snaps-controllers"),s=e("../../../../shared/constants/keyring");r.MultichainRouterInit=({controllerMessenger:e,getController:t})=>{const r=t("KeyringController");return{memStateKey:null,persistedStateKey:null,controller:new n.MultichainRouter({messenger:e,withSnapKeyring:async e=>e({keyring:await(async()=>{let[e]=r.getKeyringsByType(s.KeyringType.snap);return e||(await r.addNewKeyring(s.KeyringType.snap),[e]=r.getKeyringsByType(s.KeyringType.snap)),e})()})})}}}}},{package:"$root$",file:"app/scripts/controller-init/snaps/multichain-router-init.ts"}],[203,{"@metamask/notification-services-controller/notification-services":2453,"@metamask/rate-limit-controller":2687,loglevel:4909},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RateLimitControllerInit=void 0;var n,s=e("@metamask/rate-limit-controller"),o=(n=e("loglevel"))&&n.__esModule?n:{default:n},i=e("@metamask/notification-services-controller/notification-services");r.RateLimitControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:r,showNotification:n})=>({controller:new s.RateLimitController({state:r.RateLimitController,messenger:e,implementations:{showNativeNotification:{method:(e,r)=>{const s=t.call("SubjectMetadataController:getState").subjectMetadata[e];return n((null==s?void 0:s.name)??e,r).catch(e=>{o.default.error("Failed to create notification",e)}),null},rateLimitCount:2,rateLimitTimeout:3e5},showInAppNotification:{method:(e,r)=>{const{message:n,title:s,footerLink:o,interfaceId:a}=r,l={title:s,...o?{footerLink:o}:{},interfaceId:a},c={data:{message:n,origin:e,...a?{detailedView:l}:{}},type:i.TRIGGER_TYPES.SNAP,readDate:null};return t.call("NotificationServicesController:updateMetamaskNotificationsList",c),null},rateLimitCount:5,rateLimitTimeout:6e4}}}),memStateKey:null,persistedStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/rate-limit-controller-init.ts"}],[204,{"../../../../shared/constants/keyring":5849,"../../../../shared/constants/snaps/permissions":5868,"../../lib/encryptor-factory":284,"../../lib/util":374,"@metamask/snaps-controllers":2757,"@metamask/utils":3217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapControllerInit=void 0;var n=e("@metamask/snaps-controllers"),s=e("@metamask/utils"),o=e("../../../../shared/constants/snaps/permissions"),i=e("../../lib/encryptor-factory"),a=e("../../../../shared/constants/keyring"),l=e("../../lib/util");r.SnapControllerInit=({initMessenger:e,controllerMessenger:t,persistedState:r,removeAllConnections:c,preinstalledSnaps:u})=>{const d=(0,l.getBooleanFlag)(!1),g=(0,l.getBooleanFlag)(!0),p=(0,l.getBooleanFlag)(!0),h=(0,l.getBooleanFlag)("true");const m=new n.SnapController({environmentEndowmentPermissions:Object.values(o.EndowmentPermissions),excludedPermissions:{...o.ExcludedSnapPermissions,...o.ExcludedSnapEndowments},closeAllConnections:c,state:r.SnapController,messenger:t,featureFlags:{allowLocalSnaps:d,requireAllowlist:g,rejectInvalidPlatformVersion:p,autoUpdatePreinstalledSnaps:h},encryptor:(0,i.encryptorFactory)(6e5),getMnemonicSeed:async function(){const t=e.call("KeyringController:getKeyringsByType",a.KeyringType.hdKeyTree);if(!(t[0]&&(0,s.hasProperty)(t[0],"seed")&&t[0].seed instanceof Uint8Array))throw new Error("Primary keyring mnemonic unavailable.");return t[0].seed},preinstalledSnaps:u,getFeatureFlags:function(){return{disableSnaps:!1===e.call("PreferencesController:getState").useExternalServices}},ensureOnboardingComplete:async function(){const{completedOnboarding:t}=e.call("OnboardingController:getState");if(t)return;const{promise:r,resolve:n}=(0,s.createDeferredPromise)(),o=t=>{t.completedOnboarding&&(n(),e.unsubscribe("OnboardingController:stateChange",o))};e.subscribe("OnboardingController:stateChange",o),await r},trackEvent:e.call.bind(e,"MetaMetricsController:trackEvent")});return e.subscribe("KeyringController:lock",()=>{e.call("SnapController:setClientActive",!1)}),e.subscribe("KeyringController:unlock",()=>{e.call("SnapController:setClientActive",!0)}),{controller:m}}}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snap-controller-init.ts"}],[205,{"@metamask/snaps-controllers":2757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapInsightsControllerInit=void 0;var n=e("@metamask/snaps-controllers");r.SnapInsightsControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new n.SnapInsightsController({state:t.SnapInsightsController,messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snap-insights-controller-init.ts"}],[206,{"@metamask/snaps-controllers":2757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapInterfaceControllerInit=void 0;var n=e("@metamask/snaps-controllers");r.SnapInterfaceControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new n.SnapInterfaceController({state:t.SnapInterfaceController,messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snap-interface-controller-init.ts"}],[207,{"../../lib/SnapsNameProvider":262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapsNameProviderInit=void 0;var n=e("../../lib/SnapsNameProvider");r.SnapsNameProviderInit=({controllerMessenger:e})=>({persistedStateKey:null,memStateKey:null,controller:new n.SnapsNameProvider({messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snaps-name-provider-init.ts"}],[208,{"../../lib/util":374,"@metamask/snaps-controllers":2757,semver:5649},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapsRegistryInit=void 0;var n=e("@metamask/snaps-controllers"),s=e("semver"),o=e("../../lib/util");r.SnapsRegistryInit=({controllerMessenger:e,persistedState:t})=>{const r=(0,o.getBooleanFlag)(!0),i="13.16.4",a=(0,s.parse)(i),l=a?`${a.major}.${a.minor}.${a.patch}`:i;return{controller:new n.JsonSnapsRegistry({state:t.SnapsRegistry,messenger:e,refetchOnAllowlistMiss:r,clientConfig:{type:"extension",version:l}})}}}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snaps-registry-init.ts"}],[209,{"@metamask/snaps-controllers":2757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.WebSocketServiceInit=void 0;var n=e("@metamask/snaps-controllers");r.WebSocketServiceInit=({controllerMessenger:e})=>({memStateKey:null,persistedStateKey:null,controller:new n.WebSocketService({messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/websocket-service-init.ts"}],[21,{"../../../shared/notifications":6010,"@metamask/announcement-controller":1292},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AnnouncementControllerInit=void 0;var n=e("@metamask/announcement-controller"),s=e("../../../shared/notifications");r.AnnouncementControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new n.AnnouncementController({messenger:e,allAnnouncements:s.UI_NOTIFICATIONS,state:t.AnnouncementController})})}}},{package:"$root$",file:"app/scripts/controller-init/announcement-controller-init.ts"}],[210,{"../lib/stores/browser-storage-adapter":347,"@metamask/storage-service":3027},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.StorageServiceInit=void 0;var n=e("@metamask/storage-service"),s=e("../lib/stores/browser-storage-adapter");r.StorageServiceInit=({controllerMessenger:e})=>({controller:new n.StorageService({messenger:e,storage:new s.BrowserStorageAdapter}),persistedStateKey:null,memStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/storage-service-init.ts"}],[211,{"@metamask/permission-controller":2534},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SubjectMetadataControllerInit=void 0;var n=e("@metamask/permission-controller");r.SubjectMetadataControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new n.SubjectMetadataController({state:t.SubjectMetadataController,messenger:e,subjectCacheLimit:100})})}}},{package:"$root$",file:"app/scripts/controller-init/subject-metadata-controller-init.ts"}],[212,{"./subscription-controller-init":213,"./subscription-service-init":214},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"SubscriptionControllerInit",{enumerable:!0,get:function(){return n.SubscriptionControllerInit}}),Object.defineProperty(r,"SubscriptionServiceInit",{enumerable:!0,get:function(){return s.SubscriptionServiceInit}});var n=e("./subscription-controller-init"),s=e("./subscription-service-init")}}},{package:"$root$",file:"app/scripts/controller-init/subscription/index.ts"}],[213,{"../../../../shared/modules/shield":6002,"@metamask/subscription-controller":3033},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SubscriptionControllerInit=void 0;var n=e("@metamask/subscription-controller");const s=(0,e("../../../../shared/modules/shield").loadShieldConfig)();r.SubscriptionControllerInit=e=>{const{initMessenger:t,controllerMessenger:r,persistedState:o}=e,i=new n.SubscriptionService({env:s.subscriptionEnv,auth:{getAccessToken:()=>t.call("AuthenticationController:getBearerToken")}});return{controller:new n.SubscriptionController({messenger:r,state:o.SubscriptionController,subscriptionService:i})}}}}},{package:"$root$",file:"app/scripts/controller-init/subscription/subscription-controller-init.ts"}],[214,{"../../../../shared/lib/sentry":5953,"../../services/oauth/web-authenticator-factory":609,"../../services/subscription/subscription-service":610},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SubscriptionServiceInit=void 0;var n=e("../../services/subscription/subscription-service"),s=e("../../services/oauth/web-authenticator-factory"),o=e("../../../../shared/lib/sentry");r.SubscriptionServiceInit=e=>{const{controllerMessenger:t,platform:r}=e;return{controller:new n.SubscriptionService({messenger:t,platform:r,webAuthenticator:(0,s.webAuthenticatorFactory)(),captureException:o.captureException}),memStateKey:null,persistedStateKey:null}}}}},{package:"$root$",file:"app/scripts/controller-init/subscription/subscription-service-init.ts"}],[215,{"../controllers/swaps":251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SwapsControllerInit=void 0;var n,s=(n=e("../controllers/swaps"))&&n.__esModule?n:{default:n};r.SwapsControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:r,getController:n})=>{const o=n("GasFeeController"),i=n("TransactionController");return{controller:new s.default({messenger:e,getBufferedGasLimit:async(e,r)=>{const n=t.call("NetworkController:getState"),{gas:s,simulationFails:o}=await i.estimateGasBuffered(e.txParams,r,n.selectedNetworkClientId);return{gasLimit:s,simulationFails:o}},getEIP1559GasFeeEstimates:(...e)=>o.fetchGasFeeEstimates(...e),getLayer1GasFee:(...e)=>i.getLayer1GasFee(...e),trackMetaMetricsEvent:t.call.bind(t,"MetaMetricsController:trackEvent")},r.SwapsController)}}}}},{package:"$root$",file:"app/scripts/controller-init/swaps-controller-init.ts"}],[216,{"@metamask/assets-controllers":1330},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TokenBalancesControllerInit=void 0;var n=e("@metamask/assets-controllers");r.TokenBalancesControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:r})=>{const{useMultiAccountBalanceChecker:s}=t.call("PreferencesController:getState");return{controller:new n.TokenBalancesController({messenger:e,state:r.TokenBalancesController,queryMultipleAccounts:s,interval:3e4,allowExternalServices:()=>t.call("PreferencesController:getState").useExternalServices,accountsApiChainIds:()=>{var e;const r=t.call("RemoteFeatureFlagController:getState"),n=null==r||null===(e=r.remoteFeatureFlags)||void 0===e?void 0:e.assetsAccountApiBalances;return Array.isArray(n)?n:[]},platform:"extension",isOnboarded:()=>{const{completedOnboarding:e}=t.call("OnboardingController:getState");return e}})}}}}},{package:"$root$",file:"app/scripts/controller-init/token-balances-controller-init.ts"}],[2169,{"./onekey-keyring.cjs":2170,"./trezor-connect-bridge.cjs":2171,"./trezor-keyring.cjs":2172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./trezor-keyring.cjs"),r),s(e("./onekey-keyring.cjs"),r),s(e("./trezor-connect-bridge.cjs"),r)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/index.cjs"}],[217,{"@metamask/assets-controllers":1330},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TokenDetectionControllerInit=void 0;var n=e("@metamask/assets-controllers");r.TokenDetectionControllerInit=({controllerMessenger:e,initMessenger:t})=>({memStateKey:null,persistedStateKey:null,controller:new n.TokenDetectionController({messenger:e,getBalancesInSingleCall:(...e)=>t.call("AssetsContractController:getBalancesInSingleCall",...e),trackMetaMetricsEvent:(...e)=>t.call("MetaMetricsController:trackEvent",...e),useAccountsAPI:!0,platform:"extension",useTokenDetection:()=>t.call("PreferencesController:getState").useTokenDetection,useExternalServices:()=>t.call("PreferencesController:getState").useExternalServices})})}}},{package:"$root$",file:"app/scripts/controller-init/token-detection-controller-init.ts"}],[2170,{"./trezor-keyring.cjs":2172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.OneKeyKeyring=void 0;const n=e("./trezor-keyring.cjs"),s="OneKey Hardware";class o extends n.TrezorKeyring{constructor(){super(...arguments),this.type=s}}r.OneKeyKeyring=o,o.type=s}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/onekey-keyring.cjs"}],[2171,{"@trezor/connect-web":3342},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorConnectBridge=void 0;const i=o(e("@trezor/connect-web"));r.TrezorConnectBridge=class{constructor(){this.trezorConnectInitiated=!1}async init(e){i.default.on(i.DEVICE_EVENT,e=>{var t;e.type===i.DEVICE.CONNECT&&(this.model=null===(t=e.payload.features)||void 0===t?void 0:t.model)}),this.trezorConnectInitiated||(await i.default.init(e),this.trezorConnectInitiated=!0)}async dispose(){return i.default.dispose(),Promise.resolve()}getPublicKey(e){return i.default.getPublicKey(e)}ethereumSignTransaction(e){return i.default.ethereumSignTransaction(e)}ethereumSignMessage(e){return i.default.ethereumSignMessage(e)}ethereumSignTypedData(e){return i.default.ethereumSignTypedData(e)}}}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-connect-bridge.cjs"}],[2172,{"@ethereumjs/tx":687,"@ethereumjs/util":708,"@metamask/eth-sig-util":2081,"@metamask/utils":3217,"@trezor/connect-plugin-ethereum":3333,buffer:4137,hdkey:4660},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n,s,o,i,a,l,c=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorKeyring=r.TREZOR_CONNECT_MANIFEST=void 0;const d=e("@ethereumjs/tx"),g=e("@ethereumjs/util"),p=e("@metamask/eth-sig-util"),h=e("@metamask/utils"),m=e("@trezor/connect-plugin-ethereum"),f=u(e("hdkey")),C="m/44'/60'/0'/0",b="m/44'/1'/0'/0",w="m/44'/60'/0'",v={[C]:!0,[w]:!0,[b]:!0},y="Trezor Hardware",S=1e3;async function M(e){return new Promise(t=>setTimeout(t,e))}function k(e){return"function"==typeof e.getChainId}r.TREZOR_CONNECT_MANIFEST={appName:"MetaMask",email:"support@metamask.io",appUrl:"https://metamask.io"};class I{constructor({bridge:e}){if(n.add(this),this.type=y,this.accounts=[],this.hdk=new f.default,this.hdPath=C,this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={},!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}getModel(){return this.bridge.model}async init(){return this.bridge.init({manifest:r.TREZOR_CONNECT_MANIFEST,lazyLoad:!0})}async destroy(){return this.bridge.dispose()}async serialize(){return Promise.resolve({hdPath:this.hdPath,accounts:this.accounts.slice(),page:this.page,paths:this.paths,perPage:this.perPage,unlockedAccount:this.unlockedAccount})}async deserialize(e){var t,r,n,s;return this.hdPath=null!==(t=e.hdPath)&&void 0!==t?t:C,this.accounts=null!==(r=e.accounts)&&void 0!==r?r:[],this.page=null!==(n=e.page)&&void 0!==n?n:0,this.perPage=null!==(s=e.perPage)&&void 0!==s?s:5,Promise.resolve()}isUnlocked(){var e;return Boolean(null===(e=this.hdk)||void 0===e?void 0:e.publicKey)}async unlock(){return this.isUnlocked()?Promise.resolve("already unlocked"):new Promise((e,r)=>{this.bridge.getPublicKey({path:this.hdPath,coin:"ETH"}).then(n=>{var s;n.success?(this.hdk.publicKey=t.from(n.payload.publicKey,"hex"),this.hdk.chainCode=t.from(n.payload.chainCode,"hex"),e("just unlocked")):r(new Error((null===(s=n.payload)||void 0===s?void 0:s.error)||"Unknown error"))}).catch(e=>{r(new Error((null==e?void 0:e.toString())||"Unknown error"))})})}setAccountToUnlock(e){this.unlockedAccount=parseInt(String(e),10)}async addAccounts(e){return new Promise((t,r)=>{this.unlock().then(r=>{const s=this.unlockedAccount,o=s+e,i=[];for(let e=s;e<o;e++){const t=c(this,n,"m",a).call(this,"m",e);this.accounts.includes(t)||(this.accounts=[...this.accounts,t],i.push(t)),this.page=0}t(i)}).catch(e=>{r(e)})})}async getFirstPage(){return this.page=0,c(this,n,"m",s).call(this,1)}async getNextPage(){return c(this,n,"m",s).call(this,1)}async getPreviousPage(){return c(this,n,"m",s).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map(e=>e.toLowerCase()).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter(t=>t.toLowerCase()!==e.toLowerCase())}async signTransaction(e,r){return k(r)?c(this,n,"m",o).call(this,e,r.getChainId(),r,e=>(r.v=t.from(e.v,"hex"),r.r=t.from(e.r,"hex"),r.s=t.from(e.s,"hex"),r)):c(this,n,"m",o).call(this,e,Number(r.common.chainId()),r,e=>{const t=r.toJSON();return t.type=r.type,t.v=(0,h.add0x)(e.v),t.r=(0,h.add0x)(e.r),t.s=(0,h.add0x)(e.s),d.TransactionFactory.fromTxData(t,{common:r.common,freeze:Object.isFrozen(r)})})}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){return new Promise((r,s)=>{this.unlock().then(o=>{setTimeout(()=>{this.bridge.ethereumSignMessage({path:c(this,n,"m",l).call(this,e),message:(0,h.remove0x)(t),hex:!0}).then(t=>{var n;if(t.success){t.payload.address!==(0,h.getChecksumAddress)(e)&&s(new Error("signature doesnt match the right address"));const n=`0x${t.payload.signature}`;r(n)}else s(new Error((null===(n=t.payload)||void 0===n?void 0:n.error)||"Unknown error"))}).catch(e=>{s(new Error((null==e?void 0:e.toString())||"Unknown error"))})},"just unlocked"===o?S:0)}).catch(e=>{s(new Error((null==e?void 0:e.toString())||"Unknown error"))})})}async signTypedData(e,t,r){var s,o;const{version:i}=null!=r?r:{version:p.SignTypedDataVersion.V4},a=(0,m.transformTypedData)(t,i===p.SignTypedDataVersion.V4),{types:u,message:d={},domain:g={},primaryType:f,domain_separator_hash:C,message_hash:b}=a,w=await this.unlock();await M("just unlocked"===w?S:0);const v=await this.bridge.ethereumSignTypedData({path:c(this,n,"m",l).call(this,e),data:{types:Object.assign(Object.assign({},u),{EIP712Domain:null!==(s=u.EIP712Domain)&&void 0!==s?s:[]}),message:d,domain:g,primaryType:f},metamask_v4_compat:!0,domain_separator_hash:C,message_hash:null!=b?b:""});if(v.success){if((0,h.getChecksumAddress)(e)!==v.payload.address)throw new Error("signature doesnt match the right address");return v.payload.signature}throw new Error((null===(o=v.payload)||void 0===o?void 0:o.error)||"Unknown error")}forgetDevice(){this.accounts=[],this.hdk=new f.default,this.page=0,this.unlockedAccount=0,this.paths={}}setHdPath(e){if(!v[e])throw new Error(`The setHdPath method does not support setting HD Path to ${e}`);this.hdPath!==e&&(this.hdk=new f.default,this.accounts=[],this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={}),this.hdPath=e}}r.TrezorKeyring=I,n=new WeakSet,s=async function(e){return this.page+=e,this.page<=0&&(this.page=1),new Promise((e,t)=>{this.unlock().then(t=>{const r=(this.page-1)*this.perPage,s=r+this.perPage,o=[];for(let e=r;e<s;e++){const t=c(this,n,"m",a).call(this,"m",e);o.push({address:t,balance:null,index:e}),this.paths[(0,h.getChecksumAddress)(t)]=e}e(o)}).catch(e=>{t(e)})})},o=async function(e,r,s,o){var a,u,d,g;let p;p=k(s)?{to:c(this,n,"m",i).call(this,s.to),value:c(this,n,"m",i).call(this,s.value),data:c(this,n,"m",i).call(this,s.data),chainId:r,nonce:c(this,n,"m",i).call(this,s.nonce),gasLimit:c(this,n,"m",i).call(this,s.gasLimit),gasPrice:c(this,n,"m",i).call(this,s.gasPrice)}:Object.assign(Object.assign({},s.toJSON()),{chainId:r,to:c(this,n,"m",i).call(this,t.from(null!==(u=null===(a=s.to)||void 0===a?void 0:a.bytes)&&void 0!==u?u:[]))});try{const t=await this.unlock();await M("just unlocked"===t?S:0);const r=await this.bridge.ethereumSignTransaction({path:c(this,n,"m",l).call(this,e),transaction:p});if(r.success){const t=o(r.payload),n=(0,h.getChecksumAddress)((0,h.add0x)(t.getSenderAddress().toString("hex")));if(n!==(0,h.getChecksumAddress)(e))throw new Error("signature doesn't match the right address");return t}throw new Error((null===(d=r.payload)||void 0===d?void 0:d.error)||"Unknown error")}catch(e){throw new Error(null!==(g=null==e?void 0:e.toString())&&void 0!==g?g:"Unknown error")}},i=function(e){return(0,h.bytesToHex)(e)},a=function(e,t){const r=this.hdk.derive(`${e}/${t}`),n=(0,h.bytesToHex)((0,g.publicToAddress)(r.publicKey,!0));return(0,g.toChecksumAddress)(n)},l=function(e){const t=(0,h.getChecksumAddress)(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===c(this,n,"m",a).call(this,"m",e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${r}`},I.type=y}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-keyring.cjs"}],[218,{"../lib/util":374,"./init-utils":61,"@metamask/assets-controllers":1330},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TokenListControllerInit=void 0;var n=e("@metamask/assets-controllers"),s=e("../lib/util"),o=e("./init-utils");r.TokenListControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:r})=>{const i=t.call("PreferencesController:getState"),a=e=>{const{useTokenDetection:t,useTransactionSimulations:r,preferences:n}=e??{},{petnamesEnabled:s}=n??{};return t||s||r},l=new n.TokenListController({messenger:e,state:r.TokenListController,preventPollingOnNetworkRestart:!a(i),chainId:(0,o.getGlobalChainId)(t)});return t.subscribe("PreferencesController:stateChange",(0,s.previousValueComparator)((e,t)=>(((e,t)=>{const r=a(t),n=a(e);r!==n&&l.updatePreventPollingOnNetworkRestart(!n)})(t,e),!0),i)),{controller:l}}}}},{package:"$root$",file:"app/scripts/controller-init/token-list-controller-init.ts"}],[2189,{"./determineGasFeeCalculations.cjs":2190,"./gas-util.cjs":2191,"@metamask/controller-utils":1494,"@metamask/eth-query":2079,"@metamask/polling-controller":2196,uuid:5796},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,o,i=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.GasFeeController=r.GAS_ESTIMATE_TYPES=r.LEGACY_GAS_PRICES_API_URL=void 0;const c=e("@metamask/controller-utils"),u=l(e("@metamask/eth-query")),d=e("@metamask/polling-controller"),g=e("uuid"),p=l(e("./determineGasFeeCalculations.cjs")),h=e("./gas-util.cjs");r.LEGACY_GAS_PRICES_API_URL="https://api.metaswap.codefi.network/gasPrices",r.GAS_ESTIMATE_TYPES={FEE_MARKET:"fee-market",LEGACY:"legacy",ETH_GASPRICE:"eth_gasPrice",NONE:"none"};const m={gasFeeEstimatesByChainId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},gasFeeEstimates:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},estimatedGasFeeTimeBounds:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},gasEstimateType:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},nonRPCGasFeeApisDisabled:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1}},f={gasFeeEstimatesByChainId:{},gasFeeEstimates:{},estimatedGasFeeTimeBounds:{},gasEstimateType:r.GAS_ESTIMATE_TYPES.NONE,nonRPCGasFeeApisDisabled:!1};class C extends((0,d.StaticIntervalPollingController)()){constructor({interval:e=15e3,messenger:t,state:l,getCurrentNetworkEIP1559Compatibility:c,getCurrentAccountEIP1559Compatibility:d,getChainId:g,getCurrentNetworkLegacyGasAPICompatibility:p,getProvider:h,onNetworkDidChange:C,legacyAPIEndpoint:b=r.LEGACY_GAS_PRICES_API_URL,EIP1559APIEndpoint:w,clientId:v}){if(super({name:"GasFeeController",metadata:m,messenger:t,state:{...f,...l}}),n.add(this),s.set(this,void 0),this.intervalDelay=e,this.setIntervalLength(e),this.pollTokens=new Set,this.getCurrentNetworkEIP1559Compatibility=c,this.getCurrentNetworkLegacyGasAPICompatibility=p,this.getCurrentAccountEIP1559Compatibility=d,i(this,s,h,"f"),this.EIP1559APIEndpoint=w,this.legacyAPIEndpoint=b,this.clientId=v,this.ethQuery=new u.default(a(this,s,"f").call(this)),C&&g)this.currentChainId=g(),C(async e=>{await a(this,n,"m",o).call(this,e)});else{const{selectedNetworkClientId:e}=this.messenger.call("NetworkController:getState");this.currentChainId=this.messenger.call("NetworkController:getNetworkClientById",e).configuration.chainId,this.messenger.subscribe("NetworkController:networkDidChange",async e=>{await a(this,n,"m",o).call(this,e)})}}async resetPolling(){if(0!==this.pollTokens.size){const e=Array.from(this.pollTokens);this.stopPolling(),await this.getGasFeeEstimatesAndStartPolling(e[0]),e.slice(1).forEach(e=>{this.pollTokens.add(e)})}}async fetchGasFeeEstimates(e){return await this._fetchGasFeeEstimateData(e)}async getGasFeeEstimatesAndStartPolling(e){const t=e||(0,g.v1)();return this.pollTokens.add(t),1===this.pollTokens.size&&(await this._fetchGasFeeEstimateData(),this._poll()),t}async _fetchGasFeeEstimateData(e={}){const{shouldUpdateState:t=!0,networkClientId:r}=e;let n,s,o,i;if(r!==undefined){const e=this.messenger.call("NetworkController:getNetworkClientById",r);o="0x38"===e.configuration.chainId,i=(0,c.convertHexToDecimal)(e.configuration.chainId);try{s=await this.messenger.call("NetworkController:getEIP1559Compatibility",r)||!1}catch{s=!1}n=new u.default(e.provider)}n??(n=this.ethQuery),o??(o=this.getCurrentNetworkLegacyGasAPICompatibility()),i??(i=(0,c.convertHexToDecimal)(this.currentChainId));try{s??(s=await this.getEIP1559Compatibility())}catch(e){console.error(e),s??(s=!1)}const a=await(0,p.default)({isEIP1559Compatible:s,isLegacyGasAPICompatible:o,fetchGasEstimates:h.fetchGasEstimates,fetchGasEstimatesUrl:this.EIP1559APIEndpoint.replace("<chain_id>",`${i}`),fetchLegacyGasPriceEstimates:h.fetchLegacyGasPriceEstimates,fetchLegacyGasPriceEstimatesUrl:this.legacyAPIEndpoint.replace("<chain_id>",`${i}`),fetchEthGasPriceEstimate:h.fetchEthGasPriceEstimate,calculateTimeEstimate:h.calculateTimeEstimate,clientId:this.clientId,ethQuery:n,nonRPCGasFeeApisDisabled:this.state.nonRPCGasFeeApisDisabled});if(t){const e=(0,c.toHex)(i);this.update(t=>{this.currentChainId===e&&(t.gasFeeEstimates=a.gasFeeEstimates,t.estimatedGasFeeTimeBounds=a.estimatedGasFeeTimeBounds,t.gasEstimateType=a.gasEstimateType),t.gasFeeEstimatesByChainId??(t.gasFeeEstimatesByChainId={}),t.gasFeeEstimatesByChainId[e]={gasFeeEstimates:a.gasFeeEstimates,estimatedGasFeeTimeBounds:a.estimatedGasFeeTimeBounds,gasEstimateType:a.gasEstimateType}})}return a}disconnectPoller(e){this.pollTokens.delete(e),0===this.pollTokens.size&&this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId),this.pollTokens.clear(),this.resetState()}destroy(){super.destroy(),this.stopPolling()}_poll(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval(async()=>{await(0,c.safelyExecute)(()=>this._fetchGasFeeEstimateData())},this.intervalDelay)}async _executePoll({networkClientId:e}){await this._fetchGasFeeEstimateData({networkClientId:e})}resetState(){this.update(()=>f)}async getEIP1559Compatibility(){const e=await this.getCurrentNetworkEIP1559Compatibility(),t=this.getCurrentAccountEIP1559Compatibility?.()??!0;return e&&t}getTimeEstimate(e,t){return this.state.gasFeeEstimates&&this.state.gasEstimateType===r.GAS_ESTIMATE_TYPES.FEE_MARKET?(0,h.calculateTimeEstimate)(e,t,this.state.gasFeeEstimates):{}}enableNonRPCGasFeeApis(){this.update(e=>{e.nonRPCGasFeeApisDisabled=!1})}disableNonRPCGasFeeApis(){this.update(e=>{e.nonRPCGasFeeApisDisabled=!0})}}r.GasFeeController=C,s=new WeakMap,n=new WeakSet,o=async function({selectedNetworkClientId:e}){const t=this.messenger.call("NetworkController:getNetworkClientById",e).configuration.chainId;t!==this.currentChainId&&(this.ethQuery=new u.default(a(this,s,"f").call(this)),await this.resetPolling(),this.currentChainId=t)},r.default=C}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/GasFeeController.cjs"}],[219,{"./init-utils":61,"@metamask/assets-controllers":1330,"@metamask/utils":3217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TokensControllerInit=void 0;var n=e("@metamask/assets-controllers"),s=e("@metamask/utils"),o=e("./init-utils");r.TokensControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:r})=>{const{provider:i}=t.call("NetworkController:getSelectedNetworkClient")??{};(0,s.assert)(i,"Provider is required to initialize TokensController.");return{controller:new n.TokensController({messenger:e,state:r.TokensController,provider:i,chainId:(0,o.getGlobalChainId)(t)})}}}}},{package:"$root$",file:"app/scripts/controller-init/tokens-controller-init.ts"}],[2190,{"./GasFeeController.cjs":2189},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});const n=e("./GasFeeController.cjs");r.default=async function(e){try{return await async function(e){const{isEIP1559Compatible:t,isLegacyGasAPICompatible:r,nonRPCGasFeeApisDisabled:s}=e;try{if(t&&!s)return await async function(e){const{fetchGasEstimates:t,fetchGasEstimatesUrl:r,clientId:s,calculateTimeEstimate:o}=e,i=await t(r,s),{suggestedMaxPriorityFeePerGas:a,suggestedMaxFeePerGas:l}=i.medium,c=o(a,l,i);return{gasFeeEstimates:i,estimatedGasFeeTimeBounds:c,gasEstimateType:n.GAS_ESTIMATE_TYPES.FEE_MARKET}}(e);if(r&&!s)return await async function(e){const{fetchLegacyGasPriceEstimates:t,fetchLegacyGasPriceEstimatesUrl:r,clientId:s}=e;return{gasFeeEstimates:await t(r,s),estimatedGasFeeTimeBounds:{},gasEstimateType:n.GAS_ESTIMATE_TYPES.LEGACY}}(e);throw new Error("Main gas fee/price estimation failed. Use fallback")}catch{return await async function(e){const{ethQuery:t,fetchEthGasPriceEstimate:r}=e;return{gasFeeEstimates:await r(t),estimatedGasFeeTimeBounds:{},gasEstimateType:n.GAS_ESTIMATE_TYPES.ETH_GASPRICE}}(e)}}(e)}catch(e){if(e instanceof Error)throw new Error(`Gas fee/price estimation failed. Message: ${e.message}`);throw e}}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/determineGasFeeCalculations.cjs"}],[2191,{"@metamask/controller-utils":1494,"bn.js":4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.calculateTimeEstimate=r.fetchEthGasPriceEstimate=r.fetchLegacyGasPriceEstimates=r.fetchGasEstimates=r.normalizeGWEIDecimalNumbers=void 0;const s=e("@metamask/controller-utils"),o=n(e("bn.js")),i=e=>({"X-Client-Id":e});function a(e){const t=(0,s.gweiDecToWEIBN)(e).toString(16);return(0,s.weiHexToGweiDec)(t)}r.normalizeGWEIDecimalNumbers=a,r.fetchGasEstimates=async function(e,t){const r=await(0,s.handleFetch)(e,t?{headers:i(t)}:undefined);return{low:{...r.low,suggestedMaxPriorityFeePerGas:a(r.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:a(r.low.suggestedMaxFeePerGas)},medium:{...r.medium,suggestedMaxPriorityFeePerGas:a(r.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:a(r.medium.suggestedMaxFeePerGas)},high:{...r.high,suggestedMaxPriorityFeePerGas:a(r.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:a(r.high.suggestedMaxFeePerGas)},estimatedBaseFee:a(r.estimatedBaseFee),historicalBaseFeeRange:r.historicalBaseFeeRange,baseFeeTrend:r.baseFeeTrend,latestPriorityFeeRange:r.latestPriorityFeeRange,historicalPriorityFeeRange:r.historicalPriorityFeeRange,priorityFeeTrend:r.priorityFeeTrend,networkCongestion:r.networkCongestion}},r.fetchLegacyGasPriceEstimates=async function(e,t){const r=await(0,s.handleFetch)(e,{referrer:e,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors",headers:{"Content-Type":"application/json",...t&&i(t)}});return{low:r.SafeGasPrice,medium:r.ProposeGasPrice,high:r.FastGasPrice}},r.fetchEthGasPriceEstimate=async function(e){const t=await(0,s.query)(e,"gasPrice");return{gasPrice:(0,s.weiHexToGweiDec)(t).toString()}},r.calculateTimeEstimate=function(e,t,r){const{low:n,medium:i,high:a,estimatedBaseFee:l}=r,c=(0,s.gweiDecToWEIBN)(e),u=(0,s.gweiDecToWEIBN)(t),d=(0,s.gweiDecToWEIBN)(l),g=o.default.min(c,u.sub(d)),p=(0,s.gweiDecToWEIBN)(n.suggestedMaxPriorityFeePerGas),h=(0,s.gweiDecToWEIBN)(i.suggestedMaxPriorityFeePerGas),m=(0,s.gweiDecToWEIBN)(a.suggestedMaxPriorityFeePerGas);let f,C;return g.lt(p)?(f=null,C="unknown"):g.gte(p)&&g.lt(h)?(f=n.minWaitTimeEstimate,C=n.maxWaitTimeEstimate):g.gte(h)&&g.lt(m)?(f=i.minWaitTimeEstimate,C=i.maxWaitTimeEstimate):g.eq(m)?(f=a.minWaitTimeEstimate,C=a.maxWaitTimeEstimate):(f=0,C=a.maxWaitTimeEstimate),{lowerTimeBound:f,upperTimeBound:C}}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/gas-util.cjs"}],[2192,{"./GasFeeController.cjs":2189},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./GasFeeController.cjs"),r)}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/index.cjs"}],[2193,{"fast-json-stable-stringify":4452,uuid:5796},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractPollingControllerBaseMixin=r.getKey=void 0;const o=s(e("fast-json-stable-stringify")),i=e("uuid");r.getKey=e=>(0,o.default)(e),r.AbstractPollingControllerBaseMixin=function(e){var t,s;return t=new WeakMap,s=new WeakMap,class extends e{constructor(){super(...arguments),t.set(this,new Map),s.set(this,new Map)}startPolling(e){const s=(0,i.v4)(),o=(0,r.getKey)(e),a=n(this,t,"f").get(o)??new Set;return a.add(s),n(this,t,"f").set(o,a),1===a.size&&this._startPolling(e),s}stopAllPolling(){n(this,t,"f").forEach((e,t)=>{e.forEach(e=>{this.stopPollingByPollingToken(e)})})}stopPollingByPollingToken(e){if(!e)throw new Error("pollingToken required");let r=null;for(const[s,o]of n(this,t,"f"))if(o.delete(e)){0===o.size&&(r=s);break}if(r){this._stopPollingByPollingTokenSetId(r),n(this,t,"f").delete(r);const e=n(this,s,"f").get(r);if(e){for(const t of e)t(JSON.parse(r));e.clear()}}}onPollingComplete(e,t){const o=(0,r.getKey)(e),i=n(this,s,"f").get(o)??new Set;i.add(t),n(this,s,"f").set(o,i)}}}}}},{package:"@metamask/gas-fee-controller>@metamask/polling-controller",file:"node_modules/@metamask/gas-fee-controller/node_modules/@metamask/polling-controller/dist/AbstractPollingController.cjs"}],[2194,{"./AbstractPollingController.cjs":2193,"@metamask/base-controller":1407},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.BlockTrackerPollingController=r.BlockTrackerPollingControllerOnly=void 0;const s=e("@metamask/base-controller"),o=e("./AbstractPollingController.cjs");function i(e){var t;class r extends((0,o.AbstractPollingControllerBaseMixin)(e)){constructor(){super(...arguments),t.set(this,{})}_startPolling(e){const r=(0,o.getKey)(e);if(n(this,t,"f")[r])return;const s=this._getNetworkClientById(e.networkClientId);if(!s)throw new Error(`Unable to retrieve blockTracker for networkClientId ${e.networkClientId}`);{const o=this._executePoll.bind(this,e);s.blockTracker.addListener("latest",o),n(this,t,"f")[r]=o}}_stopPollingByPollingTokenSetId(e){const{networkClientId:r}=JSON.parse(e),s=this._getNetworkClientById(r);if(s&&n(this,t,"f")[e]){const r=n(this,t,"f")[e];r&&(s.blockTracker.removeListener("latest",r),delete n(this,t,"f")[e])}}}return t=new WeakMap,r}class a{}r.BlockTrackerPollingControllerOnly=()=>i(a);r.BlockTrackerPollingController=()=>i(s.BaseController)}}},{package:"@metamask/gas-fee-controller>@metamask/polling-controller",file:"node_modules/@metamask/gas-fee-controller/node_modules/@metamask/polling-controller/dist/BlockTrackerPollingController.cjs"}],[2195,{"./AbstractPollingController.cjs":2193,"@metamask/base-controller":1407},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},s=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.StaticIntervalPollingController=r.StaticIntervalPollingControllerOnly=void 0;const o=e("@metamask/base-controller"),i=e("./AbstractPollingController.cjs");function a(e){var t,r;class o extends((0,i.AbstractPollingControllerBaseMixin)(e)){constructor(){super(...arguments),t.set(this,{}),r.set(this,1e3)}setIntervalLength(e){n(this,r,e,"f")}getIntervalLength(){return s(this,r,"f")}_startPolling(e){if(!s(this,r,"f"))throw new Error("intervalLength must be defined and greater than 0");const n=(0,i.getKey)(e),o=s(this,t,"f")[n];this._stopPollingByPollingTokenSetId(n);const a=s(this,t,"f")[n]=setTimeout(async()=>{try{await this._executePoll(e)}catch(e){console.error(e)}a===s(this,t,"f")[n]&&this._startPolling(e)},o?s(this,r,"f"):0)}_stopPollingByPollingTokenSetId(e){const r=s(this,t,"f")[e];r&&(clearTimeout(r),delete s(this,t,"f")[e])}}return t=new WeakMap,r=new WeakMap,o}class l{}r.StaticIntervalPollingControllerOnly=()=>a(l);r.StaticIntervalPollingController=()=>a(o.BaseController)}}},{package:"@metamask/gas-fee-controller>@metamask/polling-controller",file:"node_modules/@metamask/gas-fee-controller/node_modules/@metamask/polling-controller/dist/StaticIntervalPollingController.cjs"}],[2196,{"./BlockTrackerPollingController.cjs":2194,"./StaticIntervalPollingController.cjs":2195},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.StaticIntervalPollingController=r.StaticIntervalPollingControllerOnly=r.BlockTrackerPollingController=r.BlockTrackerPollingControllerOnly=void 0;var n=e("./BlockTrackerPollingController.cjs");Object.defineProperty(r,"BlockTrackerPollingControllerOnly",{enumerable:!0,get:function(){return n.BlockTrackerPollingControllerOnly}}),Object.defineProperty(r,"BlockTrackerPollingController",{enumerable:!0,get:function(){return n.BlockTrackerPollingController}});var s=e("./StaticIntervalPollingController.cjs");Object.defineProperty(r,"StaticIntervalPollingControllerOnly",{enumerable:!0,get:function(){return s.StaticIntervalPollingControllerOnly}}),Object.defineProperty(r,"StaticIntervalPollingController",{enumerable:!0,get:function(){return s.StaticIntervalPollingController}})}}},{package:"@metamask/gas-fee-controller>@metamask/polling-controller",file:"node_modules/@metamask/gas-fee-controller/node_modules/@metamask/polling-controller/dist/index.cjs"}],[22,{"../controllers/app-metadata":225},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AppMetadataControllerInit=void 0;var n,s=(n=e("../controllers/app-metadata"))&&n.__esModule?n:{default:n};r.AppMetadataControllerInit=({controllerMessenger:e,persistedState:t,currentMigrationVersion:r})=>({controller:new s.default({state:t.AppMetadataController,messenger:e,currentAppVersion:"13.16.4",currentMigrationVersion:r})})}}},{package:"$root$",file:"app/scripts/controller-init/app-metadata-controller-init.ts"}],[220,{"@metamask/transaction-pay-controller":3128},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionPayControllerInit=void 0;var n=e("@metamask/transaction-pay-controller");function s(e){return n.TransactionPayStrategy.Relay}r.TransactionPayControllerInit=e=>{const{controllerMessenger:t,persistedState:r}=e,o=new n.TransactionPayController({getDelegationTransaction:async()=>{throw new Error("Delegation transaction not supported")},getStrategy:s,messenger:t,state:r.TransactionPayController}),i=function(e){return{setTransactionPayIsMaxAmount:e.setIsMaxAmount.bind(e),updateTransactionPaymentToken:e.updatePaymentToken.bind(e)}}(o);return{controller:o,api:i}}}}},{package:"$root$",file:"app/scripts/controller-init/transaction-pay-controller-init.ts"}],[221,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"$root$",file:"app/scripts/controller-init/types.ts"}],[222,{"./messengers":110,"./types":221,"@metamask/utils":3217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.initControllers=function({baseControllerMessenger:e,existingControllers:t=[],initFunctions:r,initRequest:n}){o("Initializing controllers",Object.keys(r).length);const i=t.reduce((e,t)=>(e[t.name]=t,e),{}),a={},l={};let c={};const u=e=>function(e,t){const r=e[t];if(!r)throw new Error(`Controller requested before it was initialized: ${String(t)}`);return r}(i,e);for(const[t,d]of Object.entries(r)){const r=t,g=d,p=s.CONTROLLER_MESSENGERS[r],h=null==p?void 0:p.getMessenger,m=null==p?void 0:p.getInitMessenger,f={...n,controllerMessenger:null==h?void 0:h(e),getController:u,initMessenger:null==m?void 0:m(e)},C=g({...f,controllerMessenger:f.controllerMessenger}),{controller:b,persistedStateKey:w,memStateKey:v}=C,y=C.api??{},S=null===w?undefined:w??r,M=null===v?undefined:v??r;i[r]=b,c={...c,...y},S&&(a[S]=b),M&&(l[M]=b),o("Initialized controller",r,{api:Object.keys(y),persistedStateKey:S,memStateKey:M})}return{controllerApi:c,controllerMemState:l,controllerPersistedState:a,controllersByName:i}};var n=e("@metamask/utils"),s=(e("./types"),e("./messengers"));const o=(0,n.createProjectLogger)("controller-init")}}},{package:"$root$",file:"app/scripts/controller-init/utils.ts"}],[223,{"@metamask/base-controller":1407},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AccountOrderController=void 0;var n=e("@metamask/base-controller");const s={pinnedAccountList:[],hiddenAccountList:[]},o={pinnedAccountList:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},hiddenAccountList:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0}};class i extends n.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:o,name:"AccountOrderController",state:{...s,...t}})}updateAccountsList(e){this.update(t=>(t.pinnedAccountList=e,t))}updateHiddenAccountsList(e){this.update(t=>(t.hiddenAccountList=e,t))}}r.AccountOrderController=i}}},{package:"$root$",file:"app/scripts/controllers/account-order.ts"}],[224,{"../../../shared/constants/alerts":5835,"@metamask/base-controller":1407},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaultAlertControllerState=r.AlertController=void 0;var n=e("@metamask/base-controller"),s=e("../../../shared/constants/alerts");function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function i(e,t,r){return e.set(a(e,t),r),r}function a(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}const l=()=>({alertEnabledness:s.TOGGLEABLE_ALERT_TYPES.reduce((e,t)=>(e[t]=!0,e),{}),unconnectedAccountAlertShownOrigins:{},web3ShimUsageOrigins:{}});r.getDefaultAlertControllerState=l;const c={alertEnabledness:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},unconnectedAccountAlertShownOrigins:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},web3ShimUsageOrigins:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}};var u=new WeakMap,d=new WeakSet;class g extends n.BaseController{constructor(e){var t,r;super({messenger:e.messenger,metadata:c,name:"AlertController",state:{...l(),...e.state}}),o(t=this,r=d),r.add(t),function(e,t,r){o(e,t),t.set(e,r)}(this,u,void 0),i(u,this,this.messenger.call("AccountsController:getSelectedAccount").address),this.messenger.subscribe("AccountsController:selectedAccountChange",e=>{this.state.unconnectedAccountAlertShownOrigins&&function(e,t){return e.get(a(e,t))}(u,this)!==e.address&&(i(u,this,e.address),this.update(e=>{e.unconnectedAccountAlertShownOrigins={}}))})}setAlertEnabledness(e,t){this.update(r=>{r.alertEnabledness[e]=t})}setUnconnectedAccountAlertShown(e){this.update(t=>{t.unconnectedAccountAlertShownOrigins[e]=!0})}getWeb3ShimUsageState(e){var t;return null===(t=this.state.web3ShimUsageOrigins)||void 0===t?void 0:t[e]}setWeb3ShimUsageRecorded(e){a(d,this,p).call(this,e,s.Web3ShimUsageAlertStates.recorded)}setWeb3ShimUsageAlertDismissed(e){a(d,this,p).call(this,e,s.Web3ShimUsageAlertStates.dismissed)}}function p(e,t){this.update(r=>{r.web3ShimUsageOrigins&&(r.web3ShimUsageOrigins[e]=t)})}r.AlertController=g}}},{package:"$root$",file:"app/scripts/controllers/alert-controller.ts"}],[225,{"@metamask/base-controller":1407},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaultAppMetadataControllerState=r.default=void 0;var n=e("@metamask/base-controller");function s(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function o(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}const i=()=>({currentAppVersion:"",previousAppVersion:"",previousMigrationVersion:0,currentMigrationVersion:0});r.getDefaultAppMetadataControllerState=i;const a={currentAppVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},previousAppVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},previousMigrationVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},currentMigrationVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1}};var l=new WeakSet;class c extends n.BaseController{constructor({state:e={},messenger:t,currentAppVersion:r="",currentMigrationVersion:n=0}){super({name:"AppMetadataController",metadata:a,state:{currentAppVersion:"",previousAppVersion:"",previousMigrationVersion:0,currentMigrationVersion:0,...e},messenger:t}),s(this,l),o(l,this,u).call(this,r),o(l,this,d).call(this,n)}}function u(e){const t=this.state.currentAppVersion;e!==t&&this.update(r=>{r.currentAppVersion=e,r.previousAppVersion=t})}function d(e){const t=this.state.currentMigrationVersion;e!==t&&this.update(r=>{r.previousMigrationVersion=t,r.currentMigrationVersion=e})}r.default=c}}},{package:"$root$",file:"app/scripts/controllers/app-metadata.ts"}],[226,{"../../../shared/constants/alarms":5834,"../../../shared/constants/app":5837,"../../../shared/constants/preferences":5862,"../../../shared/constants/time":5874,"../../../shared/modules/mv3.utils":5987,"../../../ui/helpers/utils/build-types":7134,"@metamask/base-controller":1407,"@metamask/controller-utils":1494,"@metamask/utils":3217,loglevel:4909,uuid:5796},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AppStateController=void 0;var n,s=e("uuid"),o=(n=e("loglevel"))&&n.__esModule?n:{default:n},i=e("@metamask/controller-utils"),a=e("@metamask/base-controller"),l=e("@metamask/utils"),c=e("../../../shared/constants/time"),u=e("../../../shared/constants/alarms"),d=e("../../../shared/modules/mv3.utils"),g=e("../../../ui/helpers/utils/build-types"),p=e("../../../shared/constants/app"),h=e("../../../shared/constants/preferences");function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t,r){C(e,t),t.set(e,r)}function C(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function b(e,t){return e.get(v(e,t))}function w(e,t,r){return e.set(v(e,t),r),r}function v(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}const y={activeQrCodeScanRequest:{includeInStateLogs:!1,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},addressSecurityAlertResponses:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},appActiveTab:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},browserEnvironment:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},connectedStatusPopoverHasBeenShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},currentExtensionPopupId:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},currentPopupId:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},defaultHomeActiveTabName:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},enableEnforcedSimulations:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},enableEnforcedSimulationsForTransactions:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},enforcedSimulationsSlippage:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},enforcedSimulationsSlippageForTransactions:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},fullScreenGasPollTokens:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},hadAdvancedGasFeesSetPriorToMigration92_3:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},canTrackWalletFundsObtained:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},isRampCardClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},isUpdateAvailable:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},lastInteractedConfirmationInfo:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},lastUpdatedAt:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},lastUpdatedFromVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},lastViewedUserSurvey:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},networkConnectionBanner:{includeInStateLogs:!1,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},newPrivacyPolicyToastClickedOrClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},newPrivacyPolicyToastShownDate:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},pna25Acknowledged:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},nftsDetectionNoticeDismissed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},nftsDropdownState:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},notificationGasPollTokens:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},onboardingDate:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},outdatedBrowserWarningLastShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},popupGasPollTokens:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},sidePanelGasPollTokens:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},productTour:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},recoveryPhraseReminderHasBeenShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},recoveryPhraseReminderLastShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showAccountBanner:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showBetaHeader:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showDownloadMobileAppSlide:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showNetworkBanner:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showPermissionsTour:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showTestnetMessageInDropdown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},signatureSecurityAlertResponses:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},slides:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},snapsInstallPrivacyWarningShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},surveyLinkLastClickedOrClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},shieldEndingToastLastClickedOrClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},shieldPausedToastLastClickedOrClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},termsOfUseLastAgreed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},throttledOrigins:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},timeoutMinutes:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},trezorModel:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},updateModalLastDismissedAt:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},hasShownMultichainAccountsIntroModal:{persist:!0,includeInDebugSnapshot:!0,usedInUi:!0,includeInStateLogs:!0},showShieldEntryModalOnce:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},pendingShieldCohort:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},pendingShieldCohortTxType:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},isWalletResetInProgress:{persist:!0,includeInDebugSnapshot:!0,usedInUi:!0,includeInStateLogs:!0},defaultSubscriptionPaymentOptions:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},shieldSubscriptionMetricsProps:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},dappSwapComparisonData:{includeInStateLogs:!1,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},showStorageErrorToast:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0}};var S=new WeakMap,M=new WeakMap,k=new WeakMap,I=new WeakMap,T=new WeakMap,E=new WeakSet;class A extends a.BaseController{constructor({state:e={},messenger:t,onInactiveTimeout:r,extension:n}){super({name:"AppStateController",metadata:y,state:{activeQrCodeScanRequest:null,appActiveTab:undefined,browserEnvironment:{},connectedStatusPopoverHasBeenShown:!0,defaultHomeActiveTabName:null,enableEnforcedSimulations:!0,enableEnforcedSimulationsForTransactions:{},enforcedSimulationsSlippage:10,enforcedSimulationsSlippageForTransactions:{},fullScreenGasPollTokens:[],hadAdvancedGasFeesSetPriorToMigration92_3:!1,canTrackWalletFundsObtained:!0,isRampCardClosed:!1,isUpdateAvailable:!1,lastUpdatedAt:null,lastUpdatedFromVersion:null,lastViewedUserSurvey:null,newPrivacyPolicyToastClickedOrClosed:null,newPrivacyPolicyToastShownDate:null,pna25Acknowledged:!1,nftsDetectionNoticeDismissed:!1,notificationGasPollTokens:[],onboardingDate:null,outdatedBrowserWarningLastShown:null,popupGasPollTokens:[],sidePanelGasPollTokens:[],productTour:"accountIcon",recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:(new Date).getTime(),showAccountBanner:!0,showBetaHeader:(0,g.isBeta)(),showDownloadMobileAppSlide:!0,showNetworkBanner:!0,showPermissionsTour:!0,showTestnetMessageInDropdown:!0,slides:[],surveyLinkLastClickedOrClosed:null,shieldEndingToastLastClickedOrClosed:null,shieldPausedToastLastClickedOrClosed:null,throttledOrigins:{},timeoutMinutes:h.DEFAULT_AUTO_LOCK_TIME_LIMIT,trezorModel:null,updateModalLastDismissedAt:null,hasShownMultichainAccountsIntroModal:!1,showShieldEntryModalOnce:null,pendingShieldCohort:null,pendingShieldCohortTxType:null,isWalletResetInProgress:!1,dappSwapComparisonData:{},showStorageErrorToast:!1,addressSecurityAlertResponses:{},currentExtensionPopupId:0,nftsDropdownState:{},signatureSecurityAlertResponses:{},networkConnectionBanner:{status:"unknown"},...e,addressSecurityAlertResponses:{},currentExtensionPopupId:0,nftsDropdownState:{},signatureSecurityAlertResponses:{},networkConnectionBanner:{status:"unknown"}},messenger:t}),function(e,t){C(e,t),t.add(e)}(this,E),f(this,S,void 0),f(this,M,void 0),f(this,k,void 0),m(this,"waitingForUnlock",void 0),f(this,I,void 0),f(this,T,null),m(this,"getAddressSecurityAlertResponse",e=>{const t=this.state.addressSecurityAlertResponses[e];if(!t)return undefined;const r=Date.now(),n=15*c.MINUTE;if(r-t.timestamp>n)return this.update(t=>{delete t.addressSecurityAlertResponses[e]}),undefined;const{timestamp:s,...o}=t;return o}),m(this,"addAddressSecurityAlertResponse",(e,t)=>{this.update(r=>{r.addressSecurityAlertResponses[e]={...t,timestamp:Date.now()}})}),w(S,this,n),w(M,this,r||(()=>undefined)),w(k,this,null),this.waitingForUnlock=[],t.subscribe("KeyringController:unlock",v(E,this,_).bind(this)),t.subscribe("PreferencesController:stateChange",({preferences:e})=>{const t=this.state;"number"==typeof(null==e?void 0:e.autoLockTimeLimit)&&t.timeoutMinutes!==e.autoLockTimeLimit&&v(E,this,O).call(this,e.autoLockTimeLimit)});const{preferences:s}=t.call("PreferencesController:getState");"number"==typeof s.autoLockTimeLimit&&v(E,this,O).call(this,s.autoLockTimeLimit),this.messenger.registerActionHandler("AppStateController:getUnlockPromise",this.getUnlockPromise.bind(this)),this.messenger.registerActionHandler("AppStateController:requestQrCodeScan",v(E,this,B).bind(this)),this.messenger.registerActionHandler("AppStateController:setCanTrackWalletFundsObtained",this.setCanTrackWalletFundsObtained.bind(this)),this.messenger.registerActionHandler("AppStateController:setPendingShieldCohort",this.setPendingShieldCohort.bind(this)),w(I,this,null)}getUnlockPromise(e){return new Promise(t=>{const{isUnlocked:r}=this.messenger.call("KeyringController:getState");r?t():v(E,this,P).call(this,t,e)})}setDefaultHomeActiveTabName(e){this.update(t=>{t.defaultHomeActiveTabName=e})}setConnectedStatusPopoverHasBeenShown(){this.update(e=>{e.connectedStatusPopoverHasBeenShown=!0})}setRecoveryPhraseReminderHasBeenShown(){this.update(e=>{e.recoveryPhraseReminderHasBeenShown=!0})}setSurveyLinkLastClickedOrClosed(e){this.update(t=>{t.surveyLinkLastClickedOrClosed=e})}setOnboardingDate(){this.update(e=>{e.onboardingDate=Date.now()})}setLastViewedUserSurvey(e){this.update(t=>{t.lastViewedUserSurvey=e})}setRampCardClosed(){this.update(e=>{e.isRampCardClosed=!0})}setNewPrivacyPolicyToastClickedOrClosed(){this.update(e=>{e.newPrivacyPolicyToastClickedOrClosed=!0})}setNewPrivacyPolicyToastShownDate(e){this.update(t=>{t.newPrivacyPolicyToastShownDate=e})}setPna25Acknowledged(e,t=!1){this.update(t=>{t.pna25Acknowledged=e}),t&&e&&this.messenger.call("ProfileMetricsController:skipInitialDelay")}setShieldPausedToastLastClickedOrClosed(e){this.update(t=>{t.shieldPausedToastLastClickedOrClosed=e})}setShieldEndingToastLastClickedOrClosed(e){this.update(t=>{t.shieldEndingToastLastClickedOrClosed=e})}setShowStorageErrorToast(e){this.update(t=>{t.showStorageErrorToast=e})}updateSlides(e){this.update(t=>{const r=t.slides||[],n=e.map(e=>{const t=r.find(t=>t.id===e.id);return t?{...t,...e}:e});t.slides=[...n]})}removeSlide(e){this.update(t=>{const r=t.slides||[];t.slides=r.map(t=>t.id===e?{...t,dismissed:!0}:t),e===p.DOWNLOAD_MOBILE_APP_SLIDE_ID&&(t.showDownloadMobileAppSlide=!1)})}setRecoveryPhraseReminderLastShown(e){this.update(t=>{t.recoveryPhraseReminderLastShown=e})}setTermsOfUseLastAgreed(e){this.update(t=>{t.termsOfUseLastAgreed=e})}setSnapsInstallPrivacyWarningShownStatus(e){this.update(t=>{t.snapsInstallPrivacyWarningShown=e})}setOutdatedBrowserWarningLastShown(e){this.update(t=>{t.outdatedBrowserWarningLastShown=e})}setLastActiveTime(){v(E,this,N).call(this)}setIsUpdateAvailable(e){this.update(t=>{t.isUpdateAvailable=e})}setUpdateModalLastDismissedAt(e){this.update(t=>{t.updateModalLastDismissedAt=e})}setLastUpdatedAt(e){this.update(t=>{t.lastUpdatedAt=e})}setLastUpdatedFromVersion(e){this.update(t=>{t.lastUpdatedFromVersion=e})}setBrowserEnvironment(e,t){this.update(r=>{r.browserEnvironment={os:e,browser:t}})}addPollingToken(e,t){t.toString()!==p.POLLING_TOKEN_ENVIRONMENT_TYPES[p.ENVIRONMENT_TYPE_BACKGROUND]&&v(E,this,D).call(this,t)&&v(E,this,R).call(this,e,t)}removePollingToken(e,t){if(t.toString()!==p.POLLING_TOKEN_ENVIRONMENT_TYPES[p.ENVIRONMENT_TYPE_BACKGROUND]){const r=this.state[t];v(E,this,D).call(this,t)&&this.update(n=>{n[t]=r.filter(t=>t!==e)})}}clearPollingTokens(){this.update(e=>{e.popupGasPollTokens=[],e.notificationGasPollTokens=[],e.fullScreenGasPollTokens=[],e.sidePanelGasPollTokens=[]})}setShowTestnetMessageInDropdown(e){this.update(t=>{t.showTestnetMessageInDropdown=e})}setShowBetaHeader(e){this.update(t=>{t.showBetaHeader=e})}setShowPermissionsTour(e){this.update(t=>{t.showPermissionsTour=e})}setHasShownMultichainAccountsIntroModal(e){this.update(t=>{t.hasShownMultichainAccountsIntroModal=e})}setProductTour(e){this.update(t=>{t.productTour=e})}setShowNetworkBanner(e){this.update(t=>{t.showNetworkBanner=e})}updateNetworkConnectionBanner(e){this.update(t=>{t.networkConnectionBanner=e})}setShowAccountBanner(e){this.update(t=>{t.showAccountBanner=e})}setCurrentExtensionPopupId(e){this.update(t=>{t.currentExtensionPopupId=e})}setTrezorModel(e){this.update(t=>{t.trezorModel=e})}updateNftDropDownState(e){this.update(t=>{t.nftsDropdownState=e})}getSignatureSecurityAlertResponse(e){return this.state.signatureSecurityAlertResponses[e]}addSignatureSecurityAlertResponse(e){e.securityAlertId&&this.update(t=>{t.signatureSecurityAlertResponses[String(e.securityAlertId)]=e})}setCurrentPopupId(e){this.update(t=>{t.currentPopupId=e})}getLastInteractedConfirmationInfo(){return this.state.lastInteractedConfirmationInfo}setLastInteractedConfirmationInfo(e){this.update(t=>{t.lastInteractedConfirmationInfo=e})}getCurrentPopupId(){return this.state.currentPopupId}getThrottledOriginState(e){return this.state.throttledOrigins[e]}updateThrottledOriginState(e,t){this.update(r=>{r.throttledOrigins[e]=t})}completeQrCodeScan(e){if(!b(T,this))throw new Error("No QR code scan is in progress.");this.update(e=>{e.activeQrCodeScanRequest=null}),b(T,this).resolve(e),w(T,this,null)}cancelQrCodeScan(e){if(!b(T,this))throw new Error("No QR code scan is in progress.");this.update(e=>{e.activeQrCodeScanRequest=null}),b(T,this).reject(e||new Error("Scan cancelled")),w(T,this,null)}setEnableEnforcedSimulations(e){this.update(t=>{t.enableEnforcedSimulations=e})}setEnableEnforcedSimulationsForTransaction(e,t){this.update(r=>{r.enableEnforcedSimulationsForTransactions[e]=t})}setEnforcedSimulationsSlippage(e){this.update(t=>{t.enforcedSimulationsSlippage=e})}setEnforcedSimulationsSlippageForTransaction(e,t){this.update(r=>{r.enforcedSimulationsSlippageForTransactions[e]=t})}setAppActiveTab(e){this.update(t=>{t.appActiveTab=e})}clearAppActiveTab(){this.update(e=>{e.appActiveTab=undefined})}setShowShieldEntryModalOnce(e){this.update(t=>{t.showShieldEntryModalOnce=e})}setPendingShieldCohort(e,t){this.update(r=>{r.pendingShieldCohort=e,t!==undefined&&(r.pendingShieldCohortTxType=t)})}setCanTrackWalletFundsObtained(e){this.update(t=>{t.canTrackWalletFundsObtained=e})}setIsWalletResetInProgress(e){this.update(t=>{t.isWalletResetInProgress=e})}getIsWalletResetInProgress(){return this.state.isWalletResetInProgress}setDefaultSubscriptionPaymentOptions(e){this.update(t=>{t.defaultSubscriptionPaymentOptions=e})}setShieldSubscriptionMetricsProps(e){this.update(t=>{t.shieldSubscriptionMetricsProps=e})}deleteDappSwapComparisonData(e){this.update(t=>{var r;null===(r=t.dappSwapComparisonData)||void 0===r||delete r[e],t.dappSwapComparisonData={...t.dappSwapComparisonData}})}setDappSwapComparisonData(e,t){this.update(r=>{var n;r.dappSwapComparisonData={...r.dappSwapComparisonData,[e]:{...(null===(n=r.dappSwapComparisonData)||void 0===n?void 0:n[e])??{},...t}}})}getDappSwapComparisonData(e){var t;return(null===(t=this.state.dappSwapComparisonData)||void 0===t?void 0:t[e])??undefined}}function P(e,t){this.waitingForUnlock.push({resolve:e}),this.messenger.publish("AppStateController:unlockChange"),t&&v(E,this,j).call(this)}function _(){if(this.waitingForUnlock.length>0){for(;this.waitingForUnlock.length>0;){var e;null===(e=this.waitingForUnlock.shift())||void 0===e||e.resolve()}this.messenger.publish("AppStateController:unlockChange")}v(E,this,L).call(this)}function O(e){this.update(t=>{t.timeoutMinutes=e}),v(E,this,N).call(this)}function N(){const{timeoutMinutes:e}=this.state;if(b(k,this)?clearTimeout(b(k,this)):d.isManifestV3&&b(S,this).alarms.clear(u.AUTO_LOCK_TIMEOUT_ALARM),!e)return;const t=Number(e);d.isManifestV3?(b(S,this).alarms.create(u.AUTO_LOCK_TIMEOUT_ALARM,{delayInMinutes:t,periodInMinutes:t}),b(S,this).alarms.onAlarm.addListener(e=>{e.name===u.AUTO_LOCK_TIMEOUT_ALARM&&(b(M,this).call(this),b(S,this).alarms.clear(u.AUTO_LOCK_TIMEOUT_ALARM))})):w(k,this,setTimeout(()=>b(M,this).call(this),t*c.MINUTE))}function R(e,t){this.update(r=>{r[t].push(e)})}function D(e){return["popupGasPollTokens","notificationGasPollTokens","fullScreenGasPollTokens","sidePanelGasPollTokens"].includes(e)}function j(){b(I,this)||(w(I,this,(0,s.v4)()),this.messenger.call("ApprovalController:addRequest",{id:b(I,this),origin:p.ORIGIN_METAMASK,type:i.ApprovalType.Unlock},!0).catch(()=>{w(I,this,null)}))}function L(){if(b(I,this)){try{this.messenger.call("ApprovalController:acceptRequest",b(I,this))}catch(e){o.default.error("Failed to unlock approval request",e)}w(I,this,null)}}function B(e){if(b(T,this))return b(T,this).promise;const t=(0,l.createDeferredPromise)();return w(T,this,t),this.update(t=>{t.activeQrCodeScanRequest=e}),t.promise}r.AppStateController=A}}},{package:"$root$",file:"app/scripts/controllers/app-state-controller.ts"}],[227,{"@metamask/connectivity-controller":1488},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ExtensionConnectivityAdapter=void 0;var n=e("@metamask/connectivity-controller");function s(e,t,r){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}function o(e,t,r){return e.set(a(e,t),r),r}function i(e,t){return e.get(a(e,t))}function a(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var l=new WeakMap,c=new WeakMap;r.ExtensionConnectivityAdapter=class{constructor(){s(this,l,n.CONNECTIVITY_STATUSES.Online),s(this,c,[])}getStatus(){return i(l,this)}onConnectivityChange(e){i(c,this).push(e)}setStatus(e){o(l,this,e);for(const t of i(c,this))t(e)}destroy(){o(c,this,[])}}}}},{package:"$root$",file:"app/scripts/controllers/connectivity/extension-connectivity-adapter.ts"}],[228,{"./extension-connectivity-adapter":227},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ExtensionConnectivityAdapter",{enumerable:!0,get:function(){return n.ExtensionConnectivityAdapter}});var n=e("./extension-connectivity-adapter")}}},{package:"$root$",file:"app/scripts/controllers/connectivity/index.ts"}],[229,{"../../../shared/constants/metametrics":5853,"../../../shared/modules/hexstring-utils":5984,"@metamask/base-controller":1407,"@metamask/controller-utils":1494,"@metamask/utils":3217,buffer:4137,loglevel:4909},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.isEIP1024EncryptedMessage=r.getDefaultState=r.default=void 0;var n,s=(n=e("loglevel"))&&n.__esModule?n:{default:n},o=e("@metamask/base-controller"),i=e("@metamask/controller-utils"),a=e("@metamask/utils"),l=e("../../../shared/constants/metametrics"),c=e("../../../shared/modules/hexstring-utils");function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d={unapprovedDecryptMsgs:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},unapprovedDecryptMsgCount:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0}},g=e=>!!((0,a.isObject)(e.data)&&(0,a.hasProperty)(e.data,"version")&&(0,a.hasProperty)(e.data,"nonce")&&(0,a.hasProperty)(e.data,"ephemPublicKey")&&(0,a.hasProperty)(e.data,"ciphertext"));r.isEIP1024EncryptedMessage=g;const p=()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0});r.getDefaultState=p;class h extends o.BaseController{constructor({getState:e,metricsEvent:t,messenger:r,manager:n}){super({metadata:d,messenger:r,name:"DecryptMessageController",state:{unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0}}),u(this,"_getState",void 0),u(this,"_metricsEvent",void 0),u(this,"_decryptMessageManager",void 0),this._getState=e,this._metricsEvent=t,this._decryptMessageManager=n,r.subscribe("DecryptMessageManager:unapprovedMessage",this._requestApproval.bind(this)),this._subscribeToMessageState(r,(e,t,r)=>{e.unapprovedDecryptMsgs=t,e.unapprovedDecryptMsgCount=r})}get unapprovedDecryptMsgCount(){return this._decryptMessageManager.getUnapprovedMessagesCount()}resetState(){this.update(()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0}))}clearUnapproved(){this._decryptMessageManager.clearUnapprovedMessages()}async newRequestDecryptMessage(e,t){return this._decryptMessageManager.addUnapprovedMessageAsync(e,t)}async decryptMessage(e){const t=e.metamaskId;try{const r=await this._decryptMessageManager.approveMessage(e);if(r.data=this._parseMessageData(r.data),!g(r))throw new Error("Invalid encrypted data.");const n=await this.messenger.call("KeyringController:decryptMessage",r);this._decryptMessageManager.setMessageStatusAndResult(t,n,"decrypted"),this._acceptApproval(t)}catch(e){throw s.default.info("MetaMaskController - eth_decrypt failed.",e),this._cancelAbstractMessage(this._decryptMessageManager,t),e}return this._getState()}async decryptMessageInline(e){const t=e.metamaskId;if(e.data=this._parseMessageData(e.data),!g(e))throw new Error("Invalid encrypted data.");const r=await this.messenger.call("KeyringController:decryptMessage",e);return this._decryptMessageManager.setResult(t,r),this._getState()}cancelDecryptMessage(e){return this._decryptMessageManager.rejectMessage(e),this._rejectApproval(e),this._getState()}rejectUnapproved(e){Object.keys(this._decryptMessageManager.getUnapprovedMessages()).forEach(t=>{this._cancelAbstractMessage(this._decryptMessageManager,t,e)})}_acceptApproval(e){this.messenger.call("ApprovalController:acceptRequest",e)}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:l.MetaMetricsEventCategory.Messages,properties:{action:"Decrypt Message Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe("DecryptMessageManager:stateChange",e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update(n=>{t(n,r,e.unapprovedMessagesCount)})})}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],s=this._migrateMessage(n);t[r]=s}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t,origin:t.origin}}_requestApproval(e){const t=e.metamaskId,r=e.origin||i.ORIGIN_METAMASK;try{this.messenger.call("ApprovalController:addRequest",{id:t,origin:r,type:i.ApprovalType.EthDecrypt},!0)}catch(e){s.default.info("Error adding request to approval controller",e)}}_parseMessageData(e){const r=(0,c.stripHexPrefix)(e),n=t.from(r,"hex");return JSON.parse(n.toString("utf8"))}_rejectApproval(e){try{this.messenger.call("ApprovalController:rejectRequest",e,"Cancel")}catch(e){s.default.info("Error rejecting request to approval controller",e)}}}r.default=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/decrypt-message.ts"}],[23,{"../controllers/app-state-controller":226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AppStateControllerInit=void 0;var n=e("../controllers/app-state-controller");r.AppStateControllerInit=({controllerMessenger:e,persistedState:t,setLocked:r,extension:s})=>({controller:new n.AppStateController({messenger:e,state:t.AppStateController,onInactiveTimeout:()=>r(),extension:s})})}}},{package:"$root$",file:"app/scripts/controller-init/app-state-controller-init.ts"}],[230,{"../../../shared/constants/app":5837,"../../../shared/constants/keyring":5849,"../../../shared/constants/metametrics":5853,"@metamask/base-controller":1407,loglevel:4909},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("loglevel"))&&n.__esModule?n:{default:n},o=e("@metamask/base-controller"),i=e("../../../shared/constants/metametrics"),a=e("../../../shared/constants/keyring"),l=e("../../../shared/constants/app");function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u={unapprovedEncryptionPublicKeyMsgs:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},unapprovedEncryptionPublicKeyMsgCount:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0}};class d extends o.BaseController{constructor({messenger:e,manager:t,getEncryptionPublicKey:r,getAccountKeyringType:n,getState:s,metricsEvent:o}){super({name:"EncryptionPublicKeyController",metadata:u,messenger:e,state:{unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0}}),c(this,"_getEncryptionPublicKey",void 0),c(this,"_getAccountKeyringType",void 0),c(this,"_getState",void 0),c(this,"_encryptionPublicKeyManager",void 0),c(this,"_metricsEvent",void 0),this._getEncryptionPublicKey=r,this._getAccountKeyringType=n,this._getState=s,this._metricsEvent=o,this._encryptionPublicKeyManager=t,this.messenger.subscribe("EncryptionPublicKeyManager:unapprovedMessage",this._requestApproval.bind(this)),this._subscribeToMessageState(e,(e,t,r)=>{e.unapprovedEncryptionPublicKeyMsgs=t,e.unapprovedEncryptionPublicKeyMsgCount=r})}get unapprovedMsgCount(){return this._encryptionPublicKeyManager.getUnapprovedMessagesCount()}resetState(){this.update(()=>({unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0}))}async newRequestEncryptionPublicKey(e,t){switch(await this._getAccountKeyringType(e)){case a.KeyringType.ledger:return new Promise((e,t)=>{t(new Error("Ledger does not support eth_getEncryptionPublicKey."))});case a.KeyringType.trezor:return new Promise((e,t)=>{t(new Error("Trezor does not support eth_getEncryptionPublicKey."))});case a.KeyringType.lattice:return new Promise((e,t)=>{t(new Error("Lattice does not support eth_getEncryptionPublicKey."))});case a.KeyringType.qr:return Promise.reject(new Error("QR hardware does not support eth_getEncryptionPublicKey."));default:return this._encryptionPublicKeyManager.addUnapprovedMessageAsync({from:e},t)}}async encryptionPublicKey(e){s.default.info("MetaMaskController - encryptionPublicKey");const t=e.metamaskId;try{const r=await this._encryptionPublicKeyManager.approveMessage(e),n=await this._getEncryptionPublicKey(r.from);return this._encryptionPublicKeyManager.setMessageStatusAndResult(t,n,"received"),this._acceptApproval(t),this._getState()}catch(e){throw s.default.info("MetaMaskController - eth_getEncryptionPublicKey failed.",e),this._cancelAbstractMessage(this._encryptionPublicKeyManager,t),e}}cancelEncryptionPublicKey(e){return this._cancelAbstractMessage(this._encryptionPublicKeyManager,e)}rejectUnapproved(e){Object.keys(this._encryptionPublicKeyManager.getUnapprovedMessages()).forEach(t=>{this._cancelAbstractMessage(this._encryptionPublicKeyManager,t,e)})}clearUnapproved(){this._encryptionPublicKeyManager.clearUnapprovedMessages()}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:i.MetaMetricsEventCategory.Messages,properties:{action:"Encryption public key Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe("EncryptionPublicKeyManager:stateChange",e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update(n=>{t(n,r,e.unapprovedMessagesCount)})})}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],s=this._migrateMessage(n);t[r]=s}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t.from,origin:t.origin}}_requestApproval(e){const t=e.metamaskId,r=e.origin||l.ORIGIN_METAMASK;this.messenger.call("ApprovalController:addRequest",{id:t,origin:r,type:"eth_getEncryptionPublicKey"},!0).catch(()=>{})}_acceptApproval(e){this.messenger.call("ApprovalController:acceptRequest",e)}_rejectApproval(e){this.messenger.call("ApprovalController:rejectRequest",e,"Cancel")}}r.default=d}}},{package:"$root$",file:"app/scripts/controllers/encryption-public-key.ts"}],[231,{"../../../../shared/lib/accounts/institutional-wallet-snap":5882,"@metamask/base-controller":1407,"@metamask/controller-utils":1494,"@metamask/snaps-utils":3004,"@metamask/transaction-controller":3095},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.InstitutionalSnapController=void 0;var n=e("@metamask/transaction-controller"),s=e("@metamask/snaps-utils"),o=e("@metamask/base-controller"),i=e("@metamask/controller-utils");function a(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function l(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}const c=e("../../../../shared/lib/accounts/institutional-wallet-snap").INSTITUTIONAL_WALLET_SNAP_ID,u="InstitutionalSnapController",d={};var g=new WeakSet;class p extends o.BaseController{constructor({messenger:e}){super({messenger:e,name:u,state:{},metadata:d}),a(this,g),l(g,this,h).call(this)}async deferPublicationHook(e){if(await l(g,this,b).call(this,e)){const t=await l(g,this,f).call(this,e);return await l(g,this,C).call(this,e.id,t),!1}return!0}async beforeCheckPendingTransactionHook(e){return!await l(g,this,b).call(this,e)}}function h(){this.messenger.registerActionHandler(`${u}:publishHook`,this.deferPublicationHook.bind(this)),this.messenger.registerActionHandler(`${u}:beforeCheckPendingTransactionHook`,this.beforeCheckPendingTransactionHook.bind(this))}async function m(e){return await this.messenger.call("SnapController:handleRequest",e)}async function f(e){const t={from:e.txParams.from,to:e.txParams.to,value:e.txParams.value,data:e.txParams.data,chainId:e.chainId},r={snapId:c,origin:i.ORIGIN_METAMASK,handler:s.HandlerType.OnRpcRequest,request:{method:"transactions.getMutableTransactionParameters",params:t}},o=await l(g,this,m).call(this,r);return{hash:o.transaction.transactionHash,nonce:o.transaction.nonce,gasLimit:o.transaction.gasLimit,maxFeePerGas:o.transaction.maxFeePerGas,maxPriorityFeePerGas:o.transaction.maxPriorityFeePerGas,type:o.transaction.type,status:n.TransactionStatus.submitted}}async function C(e,{status:t,hash:r,nonce:n,gasLimit:s,maxFeePerGas:o,maxPriorityFeePerGas:i,type:a}){return await this.messenger.call("TransactionController:updateCustodialTransaction",{transactionId:e,status:t,hash:r,nonce:n,gasLimit:s,maxFeePerGas:o,maxPriorityFeePerGas:i,type:a})}async function b(e){var t;const r=await this.messenger.call("AccountsController:getAccountByAddress",e.txParams.from);return null==r||null===(t=r.options.custodian)||void 0===t?void 0:t.deferPublication}r.InstitutionalSnapController=p}}},{package:"$root$",file:"app/scripts/controllers/institutional-snap/InstitutionalSnapController.ts"}],[232,{"../../../development/build/constants":614,"../../../shared/constants/alarms":5834,"../../../shared/constants/app":5837,"../../../shared/constants/keyring":5849,"../../../shared/constants/metametrics":5853,"../../../shared/constants/time":5874,"../../../shared/constants/transaction":5876,"../../../shared/lib/trace":5960,"../../../shared/modules/mv3.utils":5987,"../lib/util":374,"@metamask/base-controller":1407,"@metamask/name-controller":2420,"@metamask/utils":3217,buffer:4137,"ethereum-cryptography/keccak":4381,lodash:4901,uuid:5796},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.overrideAnonymousEventNames=r.getDefaultMetaMetricsControllerState=r.default=void 0;var n=e("lodash"),s=e("ethereum-cryptography/keccak"),o=e("uuid"),i=e("@metamask/name-controller"),a=e("@metamask/utils"),l=e("@metamask/base-controller"),c=e("../../../shared/constants/app"),u=e("../../../shared/constants/metametrics"),d=e("../../../shared/constants/time"),g=e("../../../shared/modules/mv3.utils"),p=e("../../../shared/constants/alarms"),h=e("../lib/util"),m=e("../../../shared/constants/transaction"),f=e("../../../shared/lib/trace"),C=e("../../../development/build/constants"),b=e("../../../shared/constants/keyring");function w(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t,r){y(e,t),t.set(e,r)}function y(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function S(e,t){return e.get(k(e,t))}function M(e,t,r){return e.set(k(e,t),r),r}function k(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}const I=r.overrideAnonymousEventNames={[m.TransactionMetaMetricsEvent.added]:m.AnonymousTransactionMetaMetricsEvent.added,[m.TransactionMetaMetricsEvent.approved]:m.AnonymousTransactionMetaMetricsEvent.approved,[m.TransactionMetaMetricsEvent.finalized]:m.AnonymousTransactionMetaMetricsEvent.finalized,[m.TransactionMetaMetricsEvent.rejected]:m.AnonymousTransactionMetaMetricsEvent.rejected,[m.TransactionMetaMetricsEvent.submitted]:m.AnonymousTransactionMetaMetricsEvent.submitted,[u.MetaMetricsEventName.SignatureRequested]:u.MetaMetricsEventName.SignatureRequestedAnon,[u.MetaMetricsEventName.SignatureApproved]:u.MetaMetricsEventName.SignatureApprovedAnon,[u.MetaMetricsEventName.SignatureRejected]:u.MetaMetricsEventName.SignatureRejectedAnon},T=e=>{setTimeout(()=>{throw e})},E=e=>{const t=[];return e.uniqueIdentifier&&t.push(e.uniqueIdentifier),e.actionId&&t.push(e.actionId),t.length&&e.isDuplicateAnonymizedEvent&&t.push("0x000"),t.length?t.join("-"):(0,h.generateRandomId)()},A={'You must pass either an "anonymousId" or a "userId".':!0},P={metaMetricsId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},participateInMetaMetrics:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},latestNonAnonymousEventTimestamp:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},fragments:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},eventsBeforeMetricsOptIn:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},tracesBeforeMetricsOptIn:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},traits:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},dataCollectionForMarketing:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},marketingCampaignCookieId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},segmentApiCalls:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1}},_=()=>({participateInMetaMetrics:null,metaMetricsId:null,dataCollectionForMarketing:null,marketingCampaignCookieId:null,latestNonAnonymousEventTimestamp:0,eventsBeforeMetricsOptIn:[],tracesBeforeMetricsOptIn:[],traits:{},fragments:{},segmentApiCalls:{}});r.getDefaultMetaMetricsControllerState=_;var O=new WeakMap,N=new WeakMap,R=new WeakMap,D=new WeakMap,j=new WeakSet,L=new WeakMap;class B extends l.BaseController{constructor({state:e={},messenger:t,segment:r,version:s,environment:o,extension:i,captureException:l=T}){var c,u;super({name:"MetaMetricsController",metadata:P,state:{participateInMetaMetrics:null,metaMetricsId:null,dataCollectionForMarketing:null,marketingCampaignCookieId:null,latestNonAnonymousEventTimestamp:0,eventsBeforeMetricsOptIn:[],tracesBeforeMetricsOptIn:[],traits:{},fragments:{},segmentApiCalls:{},...e},messenger:t}),y(c=this,u=j),u.add(c),v(this,O,void 0),w(this,"chainId",void 0),w(this,"locale",void 0),w(this,"previousUserTraits",void 0),w(this,"version",void 0),v(this,N,void 0),v(this,R,void 0),v(this,D,void 0),v(this,L,(0,n.memoize)((e={})=>Object.values(e).reduce((e,t)=>e.concat(...Object.values(t)),[]))),M(O,this,e=>{const t=(0,a.getErrorMessage)(e);A[t]||l(e)}),this.chainId=k(j,this,x).call(this);const m=this.messenger.call("PreferencesController:getState");this.locale=m.currentLocale.replace("_","-"),this.version="production"===o?s:`${s}-${o}`,M(N,this,i),M(R,this,o),this.messenger.registerActionHandler("MetaMetricsController:trackEvent",this.trackEvent.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:getMetaMetricsId",this.getMetaMetricsId.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:createEventFragment",this.createEventFragment.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:getEventFragmentById",this.getEventFragmentById.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:updateEventFragment",this.updateEventFragment.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:deleteEventFragment",this.deleteEventFragment.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:finalizeEventFragment",this.finalizeEventFragment.bind(this));const f=(0,n.omitBy)(e.fragments,"persist");this.messenger.subscribe("PreferencesController:stateChange",({currentLocale:e})=>{this.locale=null==e?void 0:e.replace("_","-")}),this.messenger.subscribe("NetworkController:networkDidChange",({selectedNetworkClientId:e})=>{this.chainId=k(j,this,x).call(this,e)}),M(D,this,r),Object.values(f).forEach(e=>{this.processAbandonedFragment(e)}),g.isManifestV3&&Object.values(e.segmentApiCalls||{}).forEach(({eventType:e,payload:t})=>{try{k(j,this,Q).call(this,e,t)}catch(e){S(O,this).call(this,e)}}),g.isManifestV3?(S(N,this).alarms.getAll().then(e=>{(0,h.checkAlarmExists)(e,p.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM)||S(N,this).alarms.create(p.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM,{delayInMinutes:1,periodInMinutes:1})}),S(N,this).alarms.onAlarm.addListener(e=>{e.name===p.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM&&this.finalizeAbandonedFragments()})):setInterval(()=>{this.finalizeAbandonedFragments()},30*d.SECOND)}finalizeAbandonedFragments(){Object.values(this.state.fragments).forEach(e=>{e.timeout&&e.lastUpdated&&Date.now()-e.lastUpdated/1e3>e.timeout&&this.processAbandonedFragment(e)})}generateMetaMetricsId(){return(0,a.bytesToHex)((0,s.keccak256)(t.from(String(Date.now())+String(Math.round(Math.random()*Number.MAX_SAFE_INTEGER)))))}createEventFragment(e){if(!e.successEvent)throw new Error(`Must specify success event. Success event was: ${e.event}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`);const{fragments:t}=this.state,r=e.uniqueIdentifier??(0,o.v4)(),s={id:r,...e,lastUpdated:Date.now()},i=e.initialEvent===m.TransactionMetaMetricsEvent.submitted&&t[r]?{...t[r],canDeleteIfAbandoned:!1}:{};return this.update(e=>{e.fragments[r]=(0,n.merge)({},i,s)}),s.initialEvent&&this.trackEvent({event:s.initialEvent,category:s.category,properties:s.properties,sensitiveProperties:s.sensitiveProperties,page:s.page,referrer:s.referrer,revenue:s.revenue,value:s.value,currency:s.currency,environmentType:s.environmentType,actionId:e.actionId,uniqueIdentifier:e.uniqueIdentifier}),s}getEventFragmentById(e){return this.state.fragments[e]}processAbandonedFragment(e){e.canDeleteIfAbandoned?this.deleteEventFragment(e.id):this.finalizeEventFragment(e.id,{abandoned:!0})}updateEventFragment(e,t){const{fragments:r}=this.state,s=r[e];if(!s&&e.includes("transaction-submitted-"))this.update(r=>{r.fragments[e]={canDeleteIfAbandoned:!0,category:u.MetaMetricsEventCategory.Transactions,successEvent:m.TransactionMetaMetricsEvent.finalized,id:e,...t,lastUpdated:Date.now()}});else{if(!s)throw new Error(`Event fragment with id ${e} does not exist.`);this.update(r=>{r.fragments[e]=(0,n.merge)(r.fragments[e],{...t,lastUpdated:Date.now()})})}}deleteEventFragment(e){this.state.fragments[e]&&this.update(t=>{delete t.fragments[e]})}finalizeEventFragment(e,{abandoned:t=!1,page:r,referrer:n}={}){const s=this.state.fragments[e];if(!s)throw new Error(`Funnel with id ${e} does not exist.`);const o=t?s.failureEvent:s.successEvent;this.trackEvent({event:o??"",category:s.category,properties:s.properties,sensitiveProperties:s.sensitiveProperties,page:r??s.page,referrer:s.referrer??n,revenue:s.revenue,value:s.value,currency:s.currency,environmentType:s.environmentType,actionId:s.actionId,uniqueIdentifier:s.uniqueIdentifier?`${s.uniqueIdentifier}-${t?"failure":"success"}`:undefined}),this.update(t=>{delete t.fragments[e]})}identify(e){const{metaMetricsId:t,participateInMetaMetrics:r}=this.state;if(!r||!t||!e)return;if("object"!=typeof e)return void console.warn("MetaMetricsController#identify: userTraits parameter must be an object. Received type: "+typeof e);const n=k(j,this,K).call(this,e);k(j,this,V).call(this,n)}updateExtensionUninstallUrl(e,r){const n={av:this.version};e&&(n.mmi=t.from(r).toString("base64"),n.env=S(R,this));const s=new URLSearchParams(n);S(N,this)&&S(N,this).runtime&&S(N,this).runtime.setUninstallURL(`https://metamask.io/uninstalled?${s}`)}async setParticipateInMetaMetrics(e){const{metaMetricsId:t}=this.state,r=e&&!t?this.generateMetaMetricsId():t;return this.update(t=>{t.participateInMetaMetrics=e,t.metaMetricsId=r}),e?(this.trackEventsAfterMetricsOptIn(),this.clearEventsAfterMetricsOptIn(),this.trackTracesAfterMetricsOptIn(),this.clearTracesAfterMetricsOptIn()):this.state.marketingCampaignCookieId&&this.setMarketingCampaignCookieId(null),S(R,this)!==C.ENVIRONMENT.DEVELOPMENT&&null!==r&&null!==e&&this.updateExtensionUninstallUrl(e,r),r}setDataCollectionForMarketing(e){const{metaMetricsId:t}=this.state;return this.update(t=>{t.dataCollectionForMarketing=e}),!e&&this.state.marketingCampaignCookieId&&this.setMarketingCampaignCookieId(null),t}setMarketingCampaignCookieId(e){this.update(t=>{t.marketingCampaignCookieId=e})}trackPage(e,t){try{if(!1===this.state.participateInMetaMetrics)return;if(null===this.state.participateInMetaMetrics&&(null==t||!t.isOptInPath))return;const{name:r,params:n,environmentType:s,page:o,referrer:i,actionId:a}=e,{metaMetricsId:l}=this.state,c=l?"userId":"anonymousId",d=l??u.METAMETRICS_ANONYMOUS_ID;k(j,this,Q).call(this,"page",{messageId:E({actionId:a}),[c]:d,name:r,properties:{params:n,locale:this.locale,chain_id:this.chainId,environment_type:s},context:k(j,this,$).call(this,i,o)})}catch(e){S(O,this).call(this,e)}}trackEvent(e,t){k(j,this,U).call(this,e),k(j,this,F).call(this,e,t).catch(e=>{S(O,this).call(this,e)})}handleMetaMaskStateUpdate(e){const t=this._buildUserTraitsObject(e);t&&this.identify(t)}trackEventsAfterMetricsOptIn(){const{eventsBeforeMetricsOptIn:e}=this.state;e.forEach(e=>{this.trackEvent(e)})}clearEventsAfterMetricsOptIn(){this.update(e=>{e.eventsBeforeMetricsOptIn=[]})}addEventBeforeMetricsOptIn(e){this.update(t=>{t.eventsBeforeMetricsOptIn.push(e)})}trackTracesAfterMetricsOptIn(){const{tracesBeforeMetricsOptIn:e}=this.state;e.forEach(e=>{"start"===e.type?(0,f.trace)(e.request):"end"===e.type&&(0,f.endTrace)(e.request)})}clearTracesAfterMetricsOptIn(){this.update(e=>{e.tracesBeforeMetricsOptIn=[]})}addTraceBeforeMetricsOptIn(e){this.update(t=>{t.tracesBeforeMetricsOptIn.push(e)})}bufferedTrace(e,t){if(this.state.participateInMetaMetrics)return t?(0,f.trace)(e,t):(0,f.trace)(e);let r;if(e.parentContext&&"object"==typeof e.parentContext){const t=e.parentContext;r=null==t?void 0:t._name}return this.addTraceBeforeMetricsOptIn({type:"start",request:{...e,parentContext:undefined,startTime:e.startTime??Date.now()},parentTraceName:r}),undefined}bufferedEndTrace(e){this.state.participateInMetaMetrics?(0,f.endTrace)(e):this.addTraceBeforeMetricsOptIn({type:"end",request:{...e,timestamp:e.timestamp??Date.now()}})}updateTraits(e){this.update(t=>{t.traits={...t.traits,...e}})}getMetaMetricsId(){let{metaMetricsId:e}=this.state;return e||(e=this.generateMetaMetricsId(),this.update(t=>{t.metaMetricsId=e})),e}_buildUserTraitsObject(e){var t,r,s;const{traits:o}=this.state,i=o[u.MetaMetricsUserTrait.StorageKind],a={[u.MetaMetricsUserTrait.AddressBookEntries]:(0,n.sum)(Object.values(e.addressBook).map(n.size)),[u.MetaMetricsUserTrait.InstallDateExt]:o[u.MetaMetricsUserTrait.InstallDateExt]||"",...i?{[u.MetaMetricsUserTrait.StorageKind]:i}:{},[u.MetaMetricsUserTrait.LedgerConnectionType]:e.ledgerTransportType,[u.MetaMetricsUserTrait.NetworksAdded]:Object.values(e.networkConfigurationsByChainId).map(e=>e.chainId),[u.MetaMetricsUserTrait.NetworksWithoutTicker]:Object.values(e.networkConfigurationsByChainId).filter(({nativeCurrency:e})=>!e).map(({chainId:e})=>e),[u.MetaMetricsUserTrait.ChainIdList]:[...Object.keys(e.networkConfigurationsByChainId).map(e=>`eip155:${parseInt(e,16)}`),...Object.keys((null==e?void 0:e.multichainNetworkConfigurationsByChainId)||{})],[u.MetaMetricsUserTrait.NftAutodetectionEnabled]:e.useNftDetection,[u.MetaMetricsUserTrait.NumberOfAccounts]:Object.values(e.internalAccounts.accounts).length,[u.MetaMetricsUserTrait.NumberOfNftCollections]:k(j,this,H).call(this,e.allNfts),[u.MetaMetricsUserTrait.NumberOfNfts]:S(L,this).call(this,e.allNfts).length,[u.MetaMetricsUserTrait.NumberOfTokens]:k(j,this,W).call(this,e.allTokens),[u.MetaMetricsUserTrait.NumberOfHDEntropies]:k(j,this,q).call(this,e)??(null===(t=this.previousUserTraits)||void 0===t?void 0:t.number_of_hd_entropies),[u.MetaMetricsUserTrait.OpenSeaApiEnabled]:e.openSeaEnabled,[u.MetaMetricsUserTrait.ThreeBoxEnabled]:!1,[u.MetaMetricsUserTrait.Theme]:e.theme||"default",[u.MetaMetricsUserTrait.TokenDetectionEnabled]:e.useTokenDetection,[u.MetaMetricsUserTrait.ShowNativeTokenAsMainBalance]:e.preferences.showNativeTokenAsMainBalance,[u.MetaMetricsUserTrait.CurrentCurrency]:e.currentCurrency,[u.MetaMetricsUserTrait.SecurityProviders]:e.securityAlertsEnabled?["blockaid"]:[],[u.MetaMetricsUserTrait.PetnameAddressCount]:k(j,this,Z).call(this,e),[u.MetaMetricsUserTrait.IsMetricsOptedIn]:e.participateInMetaMetrics,[u.MetaMetricsUserTrait.HasMarketingConsent]:e.dataCollectionForMarketing,[u.MetaMetricsUserTrait.TokenSortPreference]:(null===(r=e.preferences.tokenSortConfig)||void 0===r?void 0:r.key)||"",[u.MetaMetricsUserTrait.PrivacyModeEnabled]:e.preferences.privacyMode,[u.MetaMetricsUserTrait.NetworkFilterPreference]:Object.keys(e.preferences.tokenNetworkFilter||{}),[u.MetaMetricsUserTrait.ProfileId]:null===(s=Object.entries(e.srpSessionData||{}))||void 0===s||null===(s=s[0])||void 0===s||null===(s=s[1])||void 0===s||null===(s=s.profile)||void 0===s?void 0:s.profileId};if(!this.previousUserTraits&&e.participateInMetaMetrics)return this.previousUserTraits=a,a;if(this.previousUserTraits&&!(0,n.isEqual)(this.previousUserTraits,a)){const t=(0,n.pickBy)(a,(e,t)=>{const r=this.previousUserTraits[t];return!(0,n.isEqual)(r,e)});return e.participateInMetaMetrics&&(this.previousUserTraits=a),t}return null}}function x(e){const t=e||this.messenger.call("NetworkController:getState").selectedNetworkClientId,{configuration:{chainId:r}}=this.messenger.call("NetworkController:getNetworkClientById",t);return r}async function F(e,t){if(!(this.state.participateInMetaMetrics||null!=t&&t.isOptIn))return;const r=[];if(e.sensitiveProperties){if(!0===(null==t?void 0:t.excludeMetaMetricsId))throw new Error("sensitiveProperties was specified in an event payload that also set the excludeMetaMetricsId flag");const s=I[`${e.event}`],o={...e,event:s??e.event},i=(0,n.merge)({...o.sensitiveProperties},{...o.properties});r.push(k(j,this,J).call(this,k(j,this,G).call(this,{...o,properties:i,isDuplicateAnonymizedEvent:!0}),{...t,excludeMetaMetricsId:!0}))}r.push(k(j,this,J).call(this,k(j,this,G).call(this,e),t)),await Promise.all(r)}function U(e){if(!e.event)throw new Error(`Must specify event. Event was: ${e.event}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`)}function $(e,t=u.METAMETRICS_BACKGROUND_PAGE_OBJECT){return{app:{name:"MetaMask Extension",version:this.version},userAgent:window.navigator.userAgent,page:t,referrer:e,marketingCampaignCookieId:this.state.marketingCampaignCookieId}}function G(e){const{event:t,properties:r,revenue:s,value:o,currency:i,category:a,page:l,referrer:u,environmentType:d=c.ENVIRONMENT_TYPE_BACKGROUND,timestamp:g}=e;let p;return p=r&&"chain_id_caip"in r&&"string"==typeof r.chain_id_caip?null:r&&"chain_id"in r&&"string"==typeof r.chain_id?r.chain_id:this.chainId,{event:t,messageId:E(e),properties:{...(0,n.omit)(r,["revenue","locale","currency","value"]),revenue:s,value:o,currency:i,category:a,locale:this.locale,chain_id:p,environment_type:d},context:k(j,this,$).call(this,u,l),timestamp:g}}function K(e){const t={};for(const[r,n]of Object.entries(e))k(j,this,X).call(this,n)?t[r]=n.toISOString():k(j,this,z).call(this,n)?t[r]=n:console.warn(`MetaMetricsController: "${r}" value is not a valid trait type`);return t}function H(e={}){const t=S(L,this).call(this,e).map(e=>e.address);return new Set(t).size}function W(e){return Object.values(e).reduce((e,t)=>e+(0,n.sum)(Object.values(t).map(n.size)),0)}function q(e){var t;return(null===(t=e.keyrings)||void 0===t?void 0:t.filter(e=>e.type===b.KeyringType.hdKeyTree).length)??0}function V(e){const{metaMetricsId:t}=this.state;if(e&&0!==Object.keys(e).length)try{k(j,this,Q).call(this,"identify",{userId:t??undefined,traits:e})}catch(e){S(O,this).call(this,e)}else console.warn("MetaMetricsController#_identify: No userTraits found")}function z(e){const t=typeof e;return"string"===t||"boolean"===t||"number"===t||k(j,this,Y).call(this,e)||k(j,this,X).call(this,e)}function Y(e){return Array.isArray(e)&&(e.every(e=>"string"==typeof e)||e.every(e=>"boolean"==typeof e)||e.every(e=>"number"==typeof e))}function X(e){return"[object Date]"===Object.prototype.toString.call(e)}function J(e,t){const{isOptIn:r,metaMetricsId:n,matomoEvent:s,flushImmediately:o}=t||{};let i="userId",l=this.state.metaMetricsId,c=(null==t?void 0:t.excludeMetaMetricsId)??!1;const d=Boolean(e.event.match(/^send|^confirm/iu));return!1!==(null==t?void 0:t.excludeMetaMetricsId)&&d&&(c=!0),c||r&&!n?(i="anonymousId",l=u.METAMETRICS_ANONYMOUS_ID):r&&n&&(l=n),e[i]=l??undefined,!0===s&&(e.properties.legacy_event=!0),new Promise((t,r)=>{k(j,this,Q).call(this,"track",e,e=>{if(e){const t=(0,a.isErrorWithMessage)(e)?e.message:"",n=(0,a.isErrorWithStack)(e)?e.stack:undefined,s=new Error(t);return n&&(s.stack=n),r(s)}return t()}),o&&S(D,this).flush()})}function Q(e,t,r){const{metaMetricsId:n,latestNonAnonymousEventTimestamp:s,participateInMetaMetrics:o}=this.state;if(!o||!n)return;const i=t.messageId||(0,h.generateRandomId)();let a=new Date;if(t.timestamp){const e=new Date(t.timestamp);(0,h.isValidDate)(e)&&(a=e)}const l={...t,messageId:i,timestamp:a};this.update(t=>{t.latestNonAnonymousEventTimestamp=l.anonymousId===u.METAMETRICS_ANONYMOUS_ID?s:a.valueOf(),t.segmentApiCalls[i]={eventType:e,payload:{...l,timestamp:l.timestamp.toString()}}});S(D,this)[e](l,e=>(this.update(e=>{delete e.segmentApiCalls[i]}),null==r?void 0:r(e)))}function Z(e){var t;const r=(null===(t=e.names)||void 0===t?void 0:t[i.NameType.ETHEREUM_ADDRESS])??{};return Object.keys(r).reduce((e,t)=>{const n=r[t];return e+Object.keys(n).reduce((e,t)=>{var r;return e+(Boolean(null===(r=n[t].name)||void 0===r?void 0:r.length)?1:0)},0)},0)}r.default=B}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/metametrics-controller.ts"}],[233,{"@metamask/base-controller":1407},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MetaMetricsDataDeletionController=void 0;var n=e("@metamask/base-controller");function s(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o(e,t){return e.get(i(e,t))}function i(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}const a="MetaMetricsDataDeletionController",l={metaMetricsDataDeletionId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},metaMetricsDataDeletionTimestamp:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},metaMetricsDataDeletionStatus:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0}};var c=new WeakMap,u=new WeakSet;class d extends n.BaseController{constructor({dataDeletionService:e,messenger:t,state:r}){var n,o;super({messenger:t,metadata:l,name:a,state:{metaMetricsDataDeletionId:null,metaMetricsDataDeletionTimestamp:0,...r}}),s(n=this,o=u),o.add(n),function(e,t,r){s(e,t),t.set(e,r)}(this,c,void 0),function(e,t,r){e.set(i(e,t),r)}(c,this,e),i(u,this,g).call(this)}async createMetaMetricsDataDeletionTask(){const{metaMetricsId:e}=this.messenger.call("MetaMetricsController:getState");if(!e)throw new Error("MetaMetrics ID not found");const t=await o(c,this).createDataDeletionRegulationTask(e);this.update(e=>{e.metaMetricsDataDeletionId=t??null,e.metaMetricsDataDeletionTimestamp=Date.now()}),await this.updateDataDeletionTaskStatus()}async updateDataDeletionTaskStatus(){const e=this.state.metaMetricsDataDeletionId;if(!e)throw new Error("Delete Regulation id not found");const t=await o(c,this).fetchDeletionRegulationStatus(e);this.update(e=>{e.metaMetricsDataDeletionStatus=t??undefined})}}function g(){this.messenger.registerActionHandler(`${a}:createMetaMetricsDataDeletionTask`,this.createMetaMetricsDataDeletionTask.bind(this)),this.messenger.registerActionHandler(`${a}:updateDataDeletionTaskStatus`,this.updateDataDeletionTaskStatus.bind(this))}r.MetaMetricsDataDeletionController=d}}},{package:"$root$",file:"app/scripts/controllers/metametrics-data-deletion/metametrics-data-deletion.ts"}],[234,{"../../../shared/constants/network":5857,"@metamask/base-controller":1407,"@metamask/keyring-api":2306,"@metamask/multichain-network-controller":2412},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkOrderController=void 0;var n=e("@metamask/keyring-api"),s=e("@metamask/base-controller"),o=e("@metamask/multichain-network-controller"),i=e("../../../shared/constants/network");const a={orderedNetworkList:[]},l={orderedNetworkList:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0}};class c extends s.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:l,name:"NetworkOrderController",state:{...a,...t}}),this.messenger.subscribe("NetworkController:stateChange",e=>{this.onNetworkControllerStateChange(e)})}onNetworkControllerStateChange({networkConfigurationsByChainId:e}){this.update(t=>{const r=Object.keys(e).filter(e=>!i.TEST_CHAINS.includes(e)).map(o.toEvmCaipChainId),s=[n.BtcScope.Mainnet,n.SolScope.Mainnet,n.TrxScope.Mainnet],a=r.filter(e=>!t.orderedNetworkList.some(({networkId:t})=>t===e)).map(e=>({networkId:e}));t.orderedNetworkList=t.orderedNetworkList.filter(({networkId:e})=>r.includes(e)||s.includes(e)).concat(a)})}updateNetworksList(e){this.update(t=>{t.orderedNetworkList=e.map(e=>({networkId:e}))})}}r.NetworkOrderController=c}}},{package:"$root$",file:"app/scripts/controllers/network-order.ts"}]],[],{});