(()=>{"use strict";var e={7159:(e,t)=>{let n=t.textToRegExp=e=>e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");const r=/^\/(.*)\/([imu]*)$/;t.makeRegExpParameter=function(e){let[,t,o]=r.exec(e)||[null,n(e)];try{return new RegExp(t,o)}catch(e){return null}};let o=t.splitSelector=function(e){if(!e.includes(","))return[e];let t=[],n=0,r=0,o="";for(let a=0;a<e.length;a++){let i=e[a];"\\"==i?a++:i==o?o="":""==o&&('"'==i||"'"==i?o=i:"("==i?r++:")"==i?r=Math.max(0,r-1):","==i&&0==r&&(t.push(e.substring(n,a)),n=a+1))}return t.push(e.substring(n)),t};function a(e){let t=0,n=0,r=[];for(let o of[...e].reverse()){let e=r[r.length-1];if("'"==o||'"'==o)e==o?r.pop():r.push(o);else if("]"==o||")"==o)"'"!=e&&'"'!=e&&r.push(o);else if("["==o)"]"==e&&r.pop();else if("("==o)")"==e&&r.pop();else if(!e)if(/\s/.test(o))n++;else if(">"==o||"+"==o||"~"==o||n>0&&":"!=o)break;r.length>0&&(n=0),t+=o.length}return e.length-t+n}t.qualifySelector=function(e,t){let n="",r=a(t),[,i=""]=/^([a-z][a-z-]*)?/i.exec(t.substring(r));for(let r of o(e)){r=r.trim(),n+=", ";let e=a(r),[,o="",u]=/^([a-z][a-z-]*)?\*?(.*)/i.exec(r.substring(e));o==i&&(o=""),/[\s>+~]$/.test(t)?n+=r.substring(0,e)+t+o+u:n+=r.substring(0,e)+o+t+u}return n.substring(2)}},1267:(e,t,n)=>{const{makeRegExpParameter:r,splitSelector:o,qualifySelector:a}=n(7159),{filterToRegExp:i}=n(453);let u=3e3;let s=50;const c=/:(-abp-[\w-]+|has|has-text|xpath|not)\(/;let l=null;function p(){let e=performance.now();return{didTimeout:!1,timeRemaining(){let t=performance.now()-e,n=s-t;return Math.max(0,n)}}}function f(){return new Promise((e=>{"function"==typeof requestIdleCallback?requestIdleCallback(e):setTimeout((()=>{e(p())}),0)}))}function h(e,t,n=()=>{}){let r=e[t];return void 0===r&&Object.defineProperty(e,t,{value:r=n()}),r}function d(e,t=""){if(null==e)return null;if(!e.parentElement){let e=":root";return t&&(e+=" > "+t),e}let n=function(e){let t=0;for(let n of e.parentNode.children){if(n==e)return t+1;t++}return 0}(e);if(n>0){let r=`${e.tagName}:nth-child(${n})`;return t&&(r+=" > "+t),d(e.parentElement,r)}return t}function m(e){let t=[];for(let n=0;n<e.style.length;n++){let r=e.style.item(n),o=e.style.getPropertyValue(r),a=e.style.getPropertyPriority(r);t.push(`${r}: ${o}${a?" !"+a:""};`)}return t.sort(),{style:t.join(" "),subSelectors:o(e.selectorText)}}let g=null;function y(e,t,n){return">"==t[0]?(t=":scope"+t,g?n?e.querySelectorAll(t):e.querySelector(t):null==g?function(e,t,n){let r=null;try{r=n?e.querySelectorAll(t):e.querySelector(t),g=!0}catch(e){g=!1}return r}(e,t,n):null):n?e.querySelectorAll(t):e.querySelector(t)}function v(e,t){return y(e,t,!0)}class w{constructor(e){this._selector=e,this.maybeDependsOnAttributes=/[#.:]|\[.+\]/.test(e),this.maybeContainsSiblingCombinators=/[~+]/.test(e)}*getSelectors(e,t,n){yield[e+this._selector,t]}}const A=/[\s>+~]$/;class x{constructor(e){this._innerPattern=new N(e)}get dependsOnStyles(){return this._innerPattern.dependsOnStyles}get dependsOnCharacterData(){return this._innerPattern.dependsOnCharacterData}get maybeDependsOnAttributes(){return this._innerPattern.maybeDependsOnAttributes}*getSelectors(e,t,n){for(let r of this.getElements(e,t,n))yield[d(r),r]}*getElements(e,t,n){let r=v(t,!e||A.test(e)?e+"*":e);if(r)for(let e of r)!n||n.some((t=>e.contains(t)||t.contains(e)))?(l&&l.lastProcessedElements.add(e),this._innerPattern.matches(e,t)||(yield e),yield null):yield null}setStyles(e){this._innerPattern.setStyles(e)}}class b{constructor(e){this._innerPattern=new N(e)}get dependsOnStyles(){return this._innerPattern.dependsOnStyles}get dependsOnCharacterData(){return this._innerPattern.dependsOnCharacterData}get maybeDependsOnAttributes(){return this._innerPattern.maybeDependsOnAttributes}*getSelectors(e,t,n){for(let r of this.getElements(e,t,n))yield[d(r),r]}*getElements(e,t,n){let r=v(t,!e||A.test(e)?e+"*":e);if(r)for(let e of r)if(!n||n.some((t=>e.contains(t)||t.contains(e)))){l&&l.lastProcessedElements.add(e);for(let t of this._innerPattern.evaluate(e,n))null==t?yield null:y(e,t)&&(yield e);yield null}else yield null}setStyles(e){this._innerPattern.setStyles(e)}}class B{constructor(e){this.dependsOnCharacterData=!0,this.maybeDependsOnAttributes=!0;let t=new XPathEvaluator;this._expression=t.createExpression(e,null)}*getSelectors(e,t,n){for(let r of this.getElements(e,t,n))yield[d(r),r]}*getElements(e,t,n){let{ORDERED_NODE_SNAPSHOT_TYPE:r}=XPathResult,o=e?v(t,e):[t];for(let e of o){let t=this._expression.evaluate(e,r,null);for(let e=0,{snapshotLength:n}=t;e<n;e++)yield t.snapshotItem(e)}}}class E{constructor(e){this.dependsOnCharacterData=!0,this._regexp=r(e)}*getSelectors(e,t,n){for(let r of this.getElements(e,t,n))yield[d(r),t]}*getElements(e,t,n){let r=v(t,!e||A.test(e)?e+"*":e);if(r){let e=null;for(let t of r)e&&e.contains(t)?yield null:(e=t,!n||n.some((e=>t.contains(e)||e.contains(t)))?(l&&l.lastProcessedElements.add(t),this._regexp&&this._regexp.test(t.textContent)?yield t:yield null):yield null)}}}class T{constructor(e){let t;this.dependsOnStyles=!0,this.maybeDependsOnAttributes=!0,t=e.length>=2&&"/"==e[0]&&"/"==e[e.length-1]?e.slice(1,-1):i(e),this._regexp=new RegExp(t,"i"),this._subSelectors=[]}*getSelectors(e,t,n){for(let n of this._subSelectors)n.startsWith("*")&&!A.test(e)&&(n=n.substring(1)),yield[a(n,e),t]}setStyles(e){this._subSelectors=[];for(let t of e)if(this._regexp.test(t.style))for(let e of t.subSelectors){let t=e.lastIndexOf("::");-1!=t&&(e=e.substring(0,t)),this._subSelectors.push(e)}}}class N{constructor(e,t,n=!1,r=null){this.selectors=e,this.text=t,this.remove=n,this.css=r}get dependsOnStyles(){return h(this,"_dependsOnStyles",(()=>this.selectors.some((e=>e.dependsOnStyles))))}get maybeDependsOnAttributes(){return h(this,"_maybeDependsOnAttributes",(()=>this.selectors.some((e=>e.maybeDependsOnAttributes||e instanceof b&&e.dependsOnStyles))))}get dependsOnCharacterData(){return h(this,"_dependsOnCharacterData",(()=>this.selectors.some((e=>e.dependsOnCharacterData))))}get maybeContainsSiblingCombinators(){return h(this,"_maybeContainsSiblingCombinators",(()=>this.selectors.some((e=>e.maybeContainsSiblingCombinators))))}matchesMutationTypes(e){let t=h(this,"_mutationTypeMatchMap",(()=>new Map([["childList",!0],["attributes",this.maybeDependsOnAttributes],["characterData",this.dependsOnCharacterData]])));for(let n of e)if(t.get(n))return!0;return!1}*evaluate(e,t){let n=this.selectors;yield*function*e(r,o,a){if(r>=n.length)yield o;else{for(let[i,u]of n[r].getSelectors(o,a,t))null==i?yield null:yield*e(r+1,i,u);yield null}}(0,"",e)}matches(e,t){let n=[e];this.maybeContainsSiblingCombinators&&(n=null);let r=this.evaluate(t,n);for(let t of r)if(t&&e.matches(t))return!0;return!1}setStyles(e){for(let t of this.selectors)t.dependsOnStyles&&t.setStyles(e)}}function I(e,{stylesheets:t,mutations:n}){if(!t&&!n)return e.slice();let r=n?function(e){let t=new Set;for(let n of e)if(t.add(n.type),3==t.size)break;return t}(n):null;return e.filter((e=>t&&e.dependsOnStyles||n&&e.matchesMutationTypes(r)))}function C(e){return e.some((e=>e.dependsOnCharacterData))}function S(e){return e.some((e=>e.dependsOnStyles))}t.WX=class{constructor(e=()=>{},t=()=>{},n=()=>{},r=()=>{}){this._filteringInProgress=!1,this._nextFilteringScheduled=!1,this._lastInvocation=-u,this._scheduledProcessing=null,this.document=document,this.hideElemsFunc=e,this.unhideElemsFunc=t,this.removeElemsFunc=n,this.cssElemsFunc=r,this.observer=new MutationObserver(this.observe.bind(this)),this.hiddenElements=new Map}isSameOrigin(e){try{return new URL(e.href).origin==this.document.location.origin}catch(e){return!0}}parseSelector(e){if(0==e.length)return[];let t=c.exec(e);if(!t)return[new w(e)];let n=[];t.index>0&&n.push(new w(e.substring(0,t.index)));let r=function(e,t){let n=1,r=null,o=t;for(;o<e.length;o++){let t=e[o];if("\\"==t)o++;else if(r)t==r&&(r=null);else if("'"==t||'"'==t)r=t;else if("("==t)n++;else if(")"==t&&(n--,0==n))break}return n>0?null:{text:e.substring(t,o),end:o}}(e,t.index+t[0].length);if(!r)return console.warn(new SyntaxError(`Failed to parse Adblock Plus selector ${e} due to unmatched parentheses.`)),null;if("-abp-properties"==t[1])n.push(new T(r.text));else if("-abp-has"==t[1]||"has"==t[1]){let e=this.parseSelector(r.text);if(null==e)return null;n.push(new b(e))}else if("-abp-contains"==t[1]||"has-text"==t[1])n.push(new E(r.text));else if("xpath"===t[1])try{n.push(new B(r.text))}catch({message:t}){return console.warn(new SyntaxError(`Failed to parse Adblock Plus selector ${e}, invalid xpath: ${r.text} error: ${t}.`)),null}else{if("not"!=t[1])return console.warn(new SyntaxError(`Failed to parse Adblock Plus selector ${e}, invalid pseudo-class :${t[1]}().`)),null;{let e=this.parseSelector(r.text);if(null==e)return null;e.every((e=>e instanceof w))?n.push(new w(`:not(${r.text})`)):n.push(new x(e))}}let o=this.parseSelector(e.substring(r.end+1));return null==o?null:(n.push(...o),1==n.length&&n[0]instanceof E?(console.warn(new SyntaxError(`Failed to parse Adblock Plus selector ${e}, can't have a lonely :-abp-contains().`)),null):n)}_readCssRules(e){let t=[];for(let n of e||[]){if(!this.isSameOrigin(n))continue;let e;try{e=n.cssRules}catch(e){continue}if(e)for(let n of e)n.type==n.STYLE_RULE&&t.push(m(n))}return t}async _addSelectors(e,t){l&&l.lastProcessedElements.clear();let n=p();S(this.patterns)&&this._refreshPatternStyles();let r=I(this.patterns,{stylesheets:e,mutations:t}),o=function(e){if(!e)return null;let t=new Set;for(let n of e)if("childList"==n.type){for(let e of n.addedNodes)t.add(e);n.removedNodes.length>0&&t.add(n.target)}else t.add(n.target);return[...t]}(t);const a=[],i=[],u=[],s=[],c=[],h=[];let d=new Set(this.hiddenElements.keys());for(let e of r){let t=o;e.maybeContainsSiblingCombinators&&(t=null);let r=e.evaluate(this.document,t);for(let t of r){if(null!=t)for(let n of this.document.querySelectorAll(t))e.remove?(s.push(n),u.push(e.text),d.delete(n)):e.css?(c.push(n),h.push(e)):this.hiddenElements.has(n)?d.delete(n):(a.push(n),i.push(e.text));n.timeRemaining()<=0&&(n=await f())}}this._removeElems(s,u),this._applyCSSToElems(c,h),this._hideElems(a,i);for(let e of d){if(!e.isConnected)continue;this.patterns.some((t=>t.matches(e,this.document)))&&d.delete(e),n.timeRemaining()<=0&&(n=await f())}this._unhideElems(Array.from(d))}_removeElems(e,t){if(e.length>0){this.removeElemsFunc(e,t);for(let t of e)this.hiddenElements.delete(t)}}_applyCSSToElems(e,t){e.length>0&&this.cssElemsFunc(e,t)}_hideElems(e,t){if(e.length>0){this.hideElemsFunc(e,t);for(let n=0;n<e.length;n++)this.hiddenElements.set(e[n],t[n])}}_unhideElems(e){if(e.length>0){this.unhideElemsFunc(e);for(let t of e)this.hiddenElements.delete(t)}}async _processFiltering(){if(this._filteringInProgress)return console.warn("ElemHideEmulation scheduling error: Tried to process filtering in parallel."),void(l&&l.failedAssertions.push("Tried to process filtering in parallel"));let e=this._scheduledProcessing||{};this._scheduledProcessing=null,this._filteringInProgress=!0,this._nextFilteringScheduled=!1,await this._addSelectors(e.stylesheets,e.mutations),this._lastInvocation=performance.now(),this._filteringInProgress=!1,this._scheduledProcessing&&this._scheduleNextFiltering()}_appendScheduledProcessing(e,t){this._scheduledProcessing?e||t?(this._scheduledProcessing.stylesheets||this._scheduledProcessing.mutations)&&(e&&(this._scheduledProcessing.stylesheets||(this._scheduledProcessing.stylesheets=[]),this._scheduledProcessing.stylesheets.push(...e)),t&&(this._scheduledProcessing.mutations||(this._scheduledProcessing.mutations=[]),this._scheduledProcessing.mutations.push(...t))):this._scheduledProcessing={}:this._scheduledProcessing={stylesheets:e,mutations:t}}_scheduleNextFiltering(){this._nextFilteringScheduled||this._filteringInProgress||("loading"===this.document.readyState?(this.document.addEventListener("DOMContentLoaded",(()=>this._processFiltering()),{once:!0}),this._nextFilteringScheduled=!0):performance.now()-this._lastInvocation<u?(setTimeout((()=>this._processFiltering()),u-(performance.now()-this._lastInvocation)),this._nextFilteringScheduled=!0):this._processFiltering())}queueFiltering(e,t){this._appendScheduledProcessing(e,t),this._scheduleNextFiltering()}_refreshPatternStyles(e){let t=this._readCssRules(this.document.styleSheets);for(let e of this.patterns)e.setStyles(t)}onLoad(e){let t=e.target.sheet;t&&this.queueFiltering([t])}observe(e){l&&0==(e=e.filter((({type:e,attributeName:t,target:{style:n},oldValue:r})=>{return!("attributes"==e&&"style"==t&&"none"==n.display&&"none"!=(o=r,Object.assign(document.createElement("test"),{style:o}).style).display);var o}))).length||this.queueFiltering(null,e)}apply(e){if(this.patterns){let t=[];for(let n of this.patterns)e.find((e=>e.text==n.text))||t.push(n);let n=[];for(let e of t)for(let[t,r]of this.hiddenElements)r==e.text&&n.push(t);n.length>0&&this._unhideElems(n)}this.patterns=[];for(let t of e){let e=this.parseSelector(t.selector);null!=e&&e.length>0&&this.patterns.push(new N(e,t.text,t.remove,t.css))}if(this.patterns.length>0){this.queueFiltering();let e=function(e){return e.some((e=>e.maybeDependsOnAttributes))}(this.patterns);if(this.observer.observe(this.document,{childList:!0,attributes:e,attributeOldValue:e&&!!l,characterData:C(this.patterns),subtree:!0}),S(this.patterns)){let e=this.onLoad.bind(this);"loading"===this.document.readyState&&this.document.addEventListener("DOMContentLoaded",e,!0),this.document.addEventListener("load",e,!0)}}}disconnect(){this.observer.disconnect(),this._unhideElems(Array.from(this.hiddenElements.keys()))}}},453:(e,t)=>{let n=/[\x00-\x24\x26-\x2C\x2F\x3A-\x40\x5B-\x5E\x60\x7B-\x7F]/,r=t.filterToRegExp=function(e){return"*"==(e=e.replace(/\*+/g,"*"))[0]&&(e=e.substring(1)),"*"==e[e.length-1]&&(e=e.substring(0,e.length-1)),e.replace(/\^\|$/,"^").replace(/\W/g,"\\$&").replace(/\\\*/g,".*").replace(/\\\^/g,`(?:${n.source}|$)`).replace(/^\\\|\\\|/,"^[\\w\\-]+:\\/+(?:[^\\/]+\\.)?").replace(/^\\\|/,"^").replace(/\\\|$/,"$")},o=new RegExp(r("||")+"$"),a=/[^a-z0-9%*][a-z0-9%]{2,}(?=[^a-z0-9%*])/,i=new RegExp(a,"g");class u{constructor(e,t){this._caseSensitive=e,this._caseInsensitive=t}test(e){return this._caseSensitive&&this._caseSensitive.test(e.href)||this._caseInsensitive&&this._caseInsensitive.test(e.lowerCaseHref)}}t.compilePatterns=function(e){if((Array.isArray(e)?e:[e]).length>100)return null;let t="",n="";for(let r of e){let e=r.urlPattern.regexpSource;r.matchCase?t+=e+"|":n+=e+"|"}let r=null,o=null;try{t&&(r=new RegExp(t.slice(0,-1))),n&&(o=new RegExp(n.slice(0,-1)))}catch(e){return null}return new u(r,o)},t.Pattern=class{constructor(e,t){this.matchCase=t||!1,e.length>=2&&"/"==e[0]&&"/"==e[e.length-1]?(e=e.substring(1,e.length-1),this._regexp=new RegExp(e,this.matchCase?"":"i")):(this.matchCase||(e=e.toLowerCase()),e=e.replace(/^\*+/,"").replace(/\*+$/,""),this.pattern=e)}isLiteralPattern(){return void 0!==this.pattern&&!/[*^|]/.test(this.pattern.replace(/^\|{1,2}/,"").replace(/[|^]$/,""))}get regexp(){return void 0===this._regexp&&(this._regexp=this.isLiteralPattern()?null:new RegExp(r(this.pattern))),this._regexp}get regexpSource(){return this._regexp?this._regexp.source:r(this.pattern)}matchesLocation(e){let t=this.matchCase?e.href:e.lowerCaseHref,r=this.regexp;if(r)return r.test(t);let a=this.pattern,i="|"==a[0],u=i&&"|"==a[1],s="^"==a[a.length-1],c=!s&&"|"==a[a.length-1];u?a=a.substr(2):i&&(a=a.substr(1)),(s||c)&&(a=a.slice(0,-1));let l=t.indexOf(a);for(;-1!=l;){if((u?"/"!=t[l]&&o.test(t.substring(0,l)):!i||0==l)&&(s?!t[l+a.length]||n.test(t[l+a.length]):!c||l==t.length-a.length))return!0;if(""==a)return!0;l=t.indexOf(a,l+1)}return!1}hasKeywords(){return this.pattern&&a.test(this.pattern)}keywordCandidates(){return this.pattern?this.pattern.toLowerCase().match(i):null}}},3808:(e,t)=>{let n=new Map([["n","\n"],["r","\r"],["t","\t"]]);let r=t.parseScript=function(e){let t=[],r=!1,o=!1,a=null,i=!1,u=[],s="";for(let c of e.trim()+";"){let e=i;if(i=!1,null!=a){if(a+=c,4==a.length){let e=parseInt(a,16);isNaN(e)||(s+=String.fromCodePoint(e)),a=null}}else r?(r=!1,"u"==c?a="":s+=n.get(c)||c):"\\"==c?r=!0:"'"==c?(o=!o,o||(i=!0)):o||";"!=c&&!/\s/.test(c)?s+=c:((s||e)&&(u.push(s),s=""),";"==c&&u.length>0&&(t.push(u),u=[]))}return t}},7795:(e,t,n)=>{if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{const t="The message port closed before a response was received.",r="A listener indicated an asynchronous response by returning true, but the message channel closed before a response was received",o=e=>{const o=n(9438);if(0===Object.keys(o).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class a extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const i=(t,n)=>{let r=new Error;return(...o)=>{e.runtime.lastError?(r.message=e.runtime.lastError.message,t.reject(r)):n.singleCallbackArg||o.length<=1&&!1!==n.singleCallbackArg?t.resolve(o[0]):t.resolve(o)}},u=e=>1==e?"argument":"arguments",s=(e,t,n)=>new Proxy(t,{apply:(t,r,o)=>n.call(r,e,...o)});let c=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,t={},n={})=>{let r=Object.create(null),o={has:(t,n)=>n in e||n in r,get(o,a,p){if(a in r)return r[a];if(!(a in e))return;let f=e[a];if("function"==typeof f)if("function"==typeof t[a])f=s(e,e[a],t[a]);else if(c(n,a)){let t=((e,t)=>function(n,...r){if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${u(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${u(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise(((o,a)=>{if(t.fallbackToNoCallback)try{n[e](...r,i({resolve:o,reject:a},t))}catch(a){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),n[e](...r),t.fallbackToNoCallback=!1,t.noCallback=!0,o()}else t.noCallback?(n[e](...r),o()):n[e](...r,i({resolve:o,reject:a},t))}))})(a,n[a]);f=s(e,e[a],t)}else f=f.bind(e);else if("object"==typeof f&&null!==f&&(c(t,a)||c(n,a)))f=l(f,t[a],n[a]);else{if(!c(n,"*"))return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:()=>e[a],set(t){e[a]=t}}),f;f=l(f,t[a],n["*"])}return r[a]=f,f},set:(t,n,o,a)=>(n in r?r[n]=o:e[n]=o,!0),defineProperty:(e,t,n)=>Reflect.defineProperty(r,t,n),deleteProperty:(e,t)=>Reflect.deleteProperty(r,t)},a=Object.create(e);return new Proxy(a,o)},p=e=>({addListener(t,n,...r){t.addListener(e.get(n),...r)},hasListener:(t,n)=>t.hasListener(e.get(n)),removeListener(t,n){t.removeListener(e.get(n))}}),f=new a((e=>"function"!=typeof e?e:function(t){const n=l(t,{},{getContent:{minArgs:0,maxArgs:0}});e(n)})),h=new a((e=>"function"!=typeof e?e:function(t,n,r){let o,a,i=!1,u=new Promise((e=>{o=function(t){i=!0,e(t)}}));try{a=e(t,n,o)}catch(e){a=Promise.reject(e)}const s=!0!==a&&((c=a)&&"object"==typeof c&&"function"==typeof c.then);var c;if(!0!==a&&!s&&!i)return!1;const l=e=>{e.then((e=>{r(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",r({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)}))};return l(s?a:u),!0})),d=({reject:n,resolve:o},a)=>{e.runtime.lastError?e.runtime.lastError.message===t||e.runtime.lastError.message.includes(r)?o():n(new Error(e.runtime.lastError.message)):a&&a.__mozWebExtensionPolyfillReject__?n(new Error(a.message)):o(a)},m=(e,t,n,...r)=>{if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${u(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${u(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise(((e,t)=>{const o=d.bind(null,{resolve:e,reject:t});r.push(o),n.sendMessage(...r)}))},g={devtools:{network:{onRequestFinished:p(f)}},runtime:{onMessage:p(h),onMessageExternal:p(h),sendMessage:m.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:m.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},y={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return o.privacy={network:{"*":y},services:{"*":y},websites:{"*":y}},l(e,g,o)};e.exports=o(chrome)}},9438:e=>{e.exports=JSON.parse('{"alarms":{"clear":{"minArgs":0,"maxArgs":1},"clearAll":{"minArgs":0,"maxArgs":0},"get":{"minArgs":0,"maxArgs":1},"getAll":{"minArgs":0,"maxArgs":0}},"bookmarks":{"create":{"minArgs":1,"maxArgs":1},"get":{"minArgs":1,"maxArgs":1},"getChildren":{"minArgs":1,"maxArgs":1},"getRecent":{"minArgs":1,"maxArgs":1},"getSubTree":{"minArgs":1,"maxArgs":1},"getTree":{"minArgs":0,"maxArgs":0},"move":{"minArgs":2,"maxArgs":2},"remove":{"minArgs":1,"maxArgs":1},"removeTree":{"minArgs":1,"maxArgs":1},"search":{"minArgs":1,"maxArgs":1},"update":{"minArgs":2,"maxArgs":2}},"browserAction":{"disable":{"minArgs":0,"maxArgs":1,"fallbackToNoCallback":true},"enable":{"minArgs":0,"maxArgs":1,"fallbackToNoCallback":true},"getBadgeBackgroundColor":{"minArgs":1,"maxArgs":1},"getBadgeText":{"minArgs":1,"maxArgs":1},"getPopup":{"minArgs":1,"maxArgs":1},"getTitle":{"minArgs":1,"maxArgs":1},"openPopup":{"minArgs":0,"maxArgs":0},"setBadgeBackgroundColor":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"setBadgeText":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"setIcon":{"minArgs":1,"maxArgs":1},"setPopup":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"setTitle":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true}},"browsingData":{"remove":{"minArgs":2,"maxArgs":2},"removeCache":{"minArgs":1,"maxArgs":1},"removeCookies":{"minArgs":1,"maxArgs":1},"removeDownloads":{"minArgs":1,"maxArgs":1},"removeFormData":{"minArgs":1,"maxArgs":1},"removeHistory":{"minArgs":1,"maxArgs":1},"removeLocalStorage":{"minArgs":1,"maxArgs":1},"removePasswords":{"minArgs":1,"maxArgs":1},"removePluginData":{"minArgs":1,"maxArgs":1},"settings":{"minArgs":0,"maxArgs":0}},"commands":{"getAll":{"minArgs":0,"maxArgs":0}},"contextMenus":{"remove":{"minArgs":1,"maxArgs":1},"removeAll":{"minArgs":0,"maxArgs":0},"update":{"minArgs":2,"maxArgs":2}},"cookies":{"get":{"minArgs":1,"maxArgs":1},"getAll":{"minArgs":1,"maxArgs":1},"getAllCookieStores":{"minArgs":0,"maxArgs":0},"remove":{"minArgs":1,"maxArgs":1},"set":{"minArgs":1,"maxArgs":1}},"devtools":{"inspectedWindow":{"eval":{"minArgs":1,"maxArgs":2,"singleCallbackArg":false}},"panels":{"create":{"minArgs":3,"maxArgs":3,"singleCallbackArg":true},"elements":{"createSidebarPane":{"minArgs":1,"maxArgs":1}}}},"downloads":{"cancel":{"minArgs":1,"maxArgs":1},"download":{"minArgs":1,"maxArgs":1},"erase":{"minArgs":1,"maxArgs":1},"getFileIcon":{"minArgs":1,"maxArgs":2},"open":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"pause":{"minArgs":1,"maxArgs":1},"removeFile":{"minArgs":1,"maxArgs":1},"resume":{"minArgs":1,"maxArgs":1},"search":{"minArgs":1,"maxArgs":1},"show":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true}},"extension":{"isAllowedFileSchemeAccess":{"minArgs":0,"maxArgs":0},"isAllowedIncognitoAccess":{"minArgs":0,"maxArgs":0}},"history":{"addUrl":{"minArgs":1,"maxArgs":1},"deleteAll":{"minArgs":0,"maxArgs":0},"deleteRange":{"minArgs":1,"maxArgs":1},"deleteUrl":{"minArgs":1,"maxArgs":1},"getVisits":{"minArgs":1,"maxArgs":1},"search":{"minArgs":1,"maxArgs":1}},"i18n":{"detectLanguage":{"minArgs":1,"maxArgs":1},"getAcceptLanguages":{"minArgs":0,"maxArgs":0}},"identity":{"launchWebAuthFlow":{"minArgs":1,"maxArgs":1}},"idle":{"queryState":{"minArgs":1,"maxArgs":1}},"management":{"get":{"minArgs":1,"maxArgs":1},"getAll":{"minArgs":0,"maxArgs":0},"getSelf":{"minArgs":0,"maxArgs":0},"setEnabled":{"minArgs":2,"maxArgs":2},"uninstallSelf":{"minArgs":0,"maxArgs":1}},"notifications":{"clear":{"minArgs":1,"maxArgs":1},"create":{"minArgs":1,"maxArgs":2},"getAll":{"minArgs":0,"maxArgs":0},"getPermissionLevel":{"minArgs":0,"maxArgs":0},"update":{"minArgs":2,"maxArgs":2}},"pageAction":{"getPopup":{"minArgs":1,"maxArgs":1},"getTitle":{"minArgs":1,"maxArgs":1},"hide":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"setIcon":{"minArgs":1,"maxArgs":1},"setPopup":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"setTitle":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"show":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true}},"permissions":{"contains":{"minArgs":1,"maxArgs":1},"getAll":{"minArgs":0,"maxArgs":0},"remove":{"minArgs":1,"maxArgs":1},"request":{"minArgs":1,"maxArgs":1}},"runtime":{"getBackgroundPage":{"minArgs":0,"maxArgs":0},"getPlatformInfo":{"minArgs":0,"maxArgs":0},"openOptionsPage":{"minArgs":0,"maxArgs":0},"requestUpdateCheck":{"minArgs":0,"maxArgs":0},"sendMessage":{"minArgs":1,"maxArgs":3},"sendNativeMessage":{"minArgs":2,"maxArgs":2},"setUninstallURL":{"minArgs":1,"maxArgs":1}},"sessions":{"getDevices":{"minArgs":0,"maxArgs":1},"getRecentlyClosed":{"minArgs":0,"maxArgs":1},"restore":{"minArgs":0,"maxArgs":1}},"storage":{"local":{"clear":{"minArgs":0,"maxArgs":0},"get":{"minArgs":0,"maxArgs":1},"getBytesInUse":{"minArgs":0,"maxArgs":1},"remove":{"minArgs":1,"maxArgs":1},"set":{"minArgs":1,"maxArgs":1}},"managed":{"get":{"minArgs":0,"maxArgs":1},"getBytesInUse":{"minArgs":0,"maxArgs":1}},"sync":{"clear":{"minArgs":0,"maxArgs":0},"get":{"minArgs":0,"maxArgs":1},"getBytesInUse":{"minArgs":0,"maxArgs":1},"remove":{"minArgs":1,"maxArgs":1},"set":{"minArgs":1,"maxArgs":1}}},"tabs":{"captureVisibleTab":{"minArgs":0,"maxArgs":2},"create":{"minArgs":1,"maxArgs":1},"detectLanguage":{"minArgs":0,"maxArgs":1},"discard":{"minArgs":0,"maxArgs":1},"duplicate":{"minArgs":1,"maxArgs":1},"executeScript":{"minArgs":1,"maxArgs":2},"get":{"minArgs":1,"maxArgs":1},"getCurrent":{"minArgs":0,"maxArgs":0},"getZoom":{"minArgs":0,"maxArgs":1},"getZoomSettings":{"minArgs":0,"maxArgs":1},"goBack":{"minArgs":0,"maxArgs":1},"goForward":{"minArgs":0,"maxArgs":1},"highlight":{"minArgs":1,"maxArgs":1},"insertCSS":{"minArgs":1,"maxArgs":2},"move":{"minArgs":2,"maxArgs":2},"query":{"minArgs":1,"maxArgs":1},"reload":{"minArgs":0,"maxArgs":2},"remove":{"minArgs":1,"maxArgs":1},"removeCSS":{"minArgs":1,"maxArgs":2},"sendMessage":{"minArgs":2,"maxArgs":3},"setZoom":{"minArgs":1,"maxArgs":2},"setZoomSettings":{"minArgs":1,"maxArgs":2},"update":{"minArgs":1,"maxArgs":2}},"topSites":{"get":{"minArgs":0,"maxArgs":0}},"webNavigation":{"getAllFrames":{"minArgs":1,"maxArgs":1},"getFrame":{"minArgs":1,"maxArgs":1}},"webRequest":{"handlerBehaviorChanged":{"minArgs":0,"maxArgs":0}},"windows":{"create":{"minArgs":0,"maxArgs":1},"get":{"minArgs":1,"maxArgs":2},"getAll":{"minArgs":0,"maxArgs":1},"getCurrent":{"minArgs":0,"maxArgs":1},"getLastFocused":{"minArgs":0,"maxArgs":1},"remove":{"minArgs":1,"maxArgs":1},"update":{"minArgs":2,"maxArgs":2}}}')}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}var r=n(7795);function o(e){return e.catch((e=>{if("object"!=typeof e||"Could not establish connection. Receiving end does not exist."!=e.message&&"A listener indicated an asynchronous response by returning true, but the message channel closed before a response was received"!=e.message&&"Message manager disconnected"!=e.message)throw e}))}function a(e){return{cause:e.cause instanceof Error?a(e.cause):e.cause,message:e.message,name:e.name,stack:e.stack}}let i=new Set,u=new WeakMap;function s(e){if("object"==e.localName){if(e.data)return e.data;for(let t of e.children)if("param"==t.localName&&"movie"==t.name&&t.value)return new URL(t.value,document.baseURI).href;return null}return e.currentSrc||e.src}function c(e,t){let{style:n}=e;t||(t="frame"==e.localName?[["visibility","hidden"]]:[["display","none"]]);for(let[e,r]of t)n.setProperty(e,r,"important");u.has(e)&&u.get(e).disconnect();let r=new MutationObserver((()=>{for(let[e,r]of t)n.getPropertyValue(e)==r&&"important"==n.getPropertyPriority(e)||n.setProperty(e,r,"important")}));r.observe(e,{attributes:!0,attributeFilter:["style"]}),u.set(e,r)}function l(e){let t=u.get(e);t&&(t.disconnect(),u.delete(e));let n="frame"==e.localName?"visibility":"display";e.style.removeProperty(n)}function p(e){let t=function(e){if("frame"==e.localName)return null;if("video"==e.localName||"audio"==e.localName)for(let t of e.children)if("source"==t.localName)return null;let t="";for(let n of["src","srcset"]){let r=e.getAttribute(n);r&&n in e&&(t+="["+n+"="+CSS.escape(r)+"]")}return t?e.localName+t:null}(e);t?i.has(t)||(o(r.runtime.sendMessage({type:"ewe:inject-css",selector:t})),i.add(t)):c(e)}function f(e,t){for(let n of document.querySelectorAll("iframe[src='about:blank']"))if(n.contentDocument)for(let r of n.contentDocument.querySelectorAll(e))t.has(s(r))&&c(r)}let h=0,d=null,m=!1,g=[];async function y(e){return!!function(e){return Object.getPrototypeOf(e)===CustomEvent.prototype&&!Object.hasOwnProperty.call(e,"detail")}(e)&&o(r.runtime.sendMessage({type:"ewe:allowlist-page",timestamp:e.detail.timestamp,signature:e.detail.signature,options:e.detail.options}))}async function v(){if(!m)try{m=!0;let e=g.shift();if(e)try{if(!0!==await y(e))throw new Error("Domain allowlisting rejected");document.dispatchEvent(new Event("domain_allowlisting_success")),x()}catch(e){h++,h>=30&&x()}g.length||A()}finally{m=!1}}function w(e){g.length>=20||(g.push(e),d||(v(),d=setInterval(v,100)))}function A(){clearInterval(d),d=null}function x(){document.removeEventListener("domain_allowlisting_request",w,!0),g=[],A()}const b={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let B;const E=new Uint8Array(16);function T(){if(!B&&(B="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!B))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return B(E)}const N=[];for(let e=0;e<256;++e)N.push((e+256).toString(16).slice(1));function I(e,t=0){return N[e[t+0]]+N[e[t+1]]+N[e[t+2]]+N[e[t+3]]+"-"+N[e[t+4]]+N[e[t+5]]+"-"+N[e[t+6]]+N[e[t+7]]+"-"+N[e[t+8]]+N[e[t+9]]+"-"+N[e[t+10]]+N[e[t+11]]+N[e[t+12]]+N[e[t+13]]+N[e[t+14]]+N[e[t+15]]}const C=function(e,t,n){if(b.randomUUID&&!t&&!e)return b.randomUUID();const r=(e=e||{}).random||(e.rng||T)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return I(r)};let S=null;function k(e){S||(S=C()),o(r.runtime.sendMessage({type:"ewe:blockthrough-acceptable-ads-detection-event",details:{ab:e.detail.ab,acceptable:e.detail.acceptable,sessionId:S}}))}
/*!
 * This file is part of eyeo's Anti-Circumvention Snippets module (@eyeo/snippets),
 * Copyright (C) 2006-present eyeo GmbH
 * 
 * @eyeo/snippets is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 * 
 * @eyeo/snippets is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with @eyeo/snippets.  If not, see <http://www.gnu.org/licenses/>.
 */
let F={initial:!0};const O=(e,...t)=>{const n=Proxy,{apply:r,bind:o,call:a}=Function,i=a.bind(r),u=a.bind(o),s=a.bind(a),c={get:(e,t)=>u(a,e[t])},l=e=>new n(e,c),p={get:(e,t)=>u(e[t],e)},f=e=>new n(e,p),{assign:h,defineProperties:d,freeze:m,getOwnPropertyDescriptor:g,getOwnPropertyDescriptors:y,getPrototypeOf:v}=f(Object),{hasOwnProperty:w}=l({}),{species:A}=Symbol,x={get(e,t){const n=e[t];class r extends n{}const o=y(n.prototype);delete o.constructor,m(d(r.prototype,o));const a=y(n);return delete a.length,delete a.prototype,a[A]={value:r},m(d(r,a))}},b=e=>new n(e,x);void 0!==F&&F.initial&&void 0!==e&&(F=e);const B=()=>void 0!==F?F:void 0!==e?e:{};"undefined"==typeof globalThis&&(window.globalThis=window);const{apply:E,ownKeys:T}=f(Reflect),N=B(),I="world"in N,C=I&&"ISOLATED"===N.world,S=I&&"MAIN"===N.world,k="object"==typeof chrome&&!!chrome.runtime,O="object"==typeof browser&&!!browser.runtime,D=!S&&(C||k||O),R=e=>D?e:G(e,H(e)),{create:G,defineProperties:P,defineProperty:M,freeze:U,getOwnPropertyDescriptor:j,getOwnPropertyDescriptors:H}=f(Object),_=f(globalThis),X=D?globalThis:b(globalThis),{Map:L,RegExp:Y,Set:J,WeakMap:q,WeakSet:Q}=X,K=(e,t,n=null)=>{const r=T(t);for(const o of T(e)){if(r.includes(o))continue;const a=j(e,o);if(n&&"value"in a){const{value:e}=a;"function"==typeof e&&(a.value=n(e))}M(t,o,a)}},W=e=>{const t=X[e];class n extends t{}const{toString:r,valueOf:o}=t.prototype;P(n.prototype,{toString:{value:r},valueOf:{value:o}});const a=e.toLowerCase(),i=e=>function(){const t=E(e,this,arguments);return typeof t===a?new n(t):t};return K(t,n,i),K(t.prototype,n.prototype,i),n},V=U({frozen:new q,hidden:new Q,iframePropertiesToAbort:{read:new J,write:new J},abortedIframes:new q}),$=new Y("^[A-Z]"),z=D&&(k&&chrome||O&&browser)||void 0;var Z=new Proxy(new L([["chrome",z],["browser",z],["isExtensionContext",D],["variables",V],["console",R(console)],["document",globalThis.document],["JSON",R(JSON)],["Map",L],["Math",R(Math)],["Number",D?Number:W("Number")],["RegExp",Y],["Set",J],["String",D?String:W("String")],["WeakMap",q],["WeakSet",Q],["MouseEvent",MouseEvent]]),{get(e,t){if(e.has(t))return e.get(t);let n=globalThis[t];return"function"==typeof n&&(n=($.test(t)?X:_)[t]),e.set(t,n),n},has:(e,t)=>e.has(t)});const ee={WeakSet,WeakMap,WeakValue:class{has(){return!1}set(){}}},{apply:te}=Reflect,{Map:ne,WeakMap:re,WeakSet:oe,setTimeout:ae}=Z;let ie=!0,ue=e=>{e.clear(),ie=!ie};var se=function(e){const{WeakSet:t,WeakMap:n,WeakValue:r}=this||ee,o=new t,a=new n,i=new r;return function(t){if(o.has(t))return t;if(a.has(t))return a.get(t);if(i.has(t))return i.get(t);const n=te(e,this,arguments);return o.add(n),n!==t&&("object"==typeof t&&t?a:i).set(t,n),n}}.bind({WeakMap:re,WeakSet:oe,WeakValue:class extends ne{set(e,t){return ie&&(ie=!ie,ae(ue,0,this)),super.set(e,t)}}});const{concat:ce,includes:le,join:pe,reduce:fe,unshift:he}=l([]),{Map:de,WeakMap:me}=b(globalThis),ge=new de,ye=e=>{const t=(e=>{const t=[];let n=e;for(;n;){if(ge.has(n))he(t,ge.get(n));else{const e=y(n);ge.set(n,e),he(t,e)}n=v(n)}return he(t,{}),i(h,null,t)})("function"==typeof e?e.prototype:e),n={get(e,n){if(n in t){const{value:r,get:o}=t[n];if(o)return s(o,e);if("function"==typeof r)return u(r,e)}return e[n]},set(e,n,r){if(n in t){const{set:o}=t[n];if(o)return s(o,e,r),!0}return e[n]=r,!0}};return e=>new Proxy(e,n)},{isExtensionContext:ve,Array:we,Number:Ae,String:xe,Object:be}=Z,{isArray:Be}=we,{getOwnPropertyDescriptor:Ee,setPrototypeOf:Te}=be,{toString:Ne}=be.prototype,{slice:Ie}=xe.prototype,{get:Ce}=Ee(Node.prototype,"nodeType"),Se=ve?{}:{Attr:ye(Attr),CanvasRenderingContext2D:ye(CanvasRenderingContext2D),CSSStyleDeclaration:ye(CSSStyleDeclaration),Document:ye(Document),Element:ye(Element),HTMLCanvasElement:ye(HTMLCanvasElement),HTMLElement:ye(HTMLElement),HTMLImageElement:ye(HTMLImageElement),HTMLScriptElement:ye(HTMLScriptElement),MutationRecord:ye(MutationRecord),Node:ye(Node),ShadowRoot:ye(ShadowRoot),get CSS2Properties(){return Se.CSSStyleDeclaration}};var ke=ve?e=>e===window||e===globalThis?Z:e:se(((e,t="Element")=>{if(e===window||e===globalThis)return Z;switch(typeof e){case"object":return e&&((e,t)=>{if("Element"!==t&&t in Se)return Se[t](e);if(Be(e))return Te(e,we.prototype);const n=(e=>s(Ie,s(Ne,e),8,-1))(e);if(n in Se)return Se[n](e);if(n in Z)return Te(e,Z[n].prototype);if("nodeType"in e)switch(s(Ce,e)){case 1:if(!(t in Se))throw new Error("unknown hint "+t);return Se[t](e);case 2:return Se.Attr(e);case 3:return Se.Node(e);case 9:return Se.Document(e)}throw new Error("unknown brand "+n)})(e,t);case"string":return new xe(e);case"number":return new Ae(e);default:throw new Error("unsupported value")}}));let Fe=!1;function Oe(){return Fe}let{Array:De,Math:Re,RegExp:Ge}=ke(window);function Pe(e){let{length:t}=e;if(t>1&&"/"===e[0]){let n="/"===e[t-1];if(n||t>2&&ke(e).endsWith("/i")){let t=[ke(e).slice(1,n?-1:-2)];return n||t.push("i"),new Ge(...t)}}return new Ge(ke(e).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"))}function Me(e){return ke(De.from(e)).map((e=>`'${e}'`)).join(" ")}function Ue(e){return e.reduce(((e,t)=>e+function(e,t=2){let n=ke(e).toString(16);return n.length<t&&(n=ke("0").repeat(t-n.length)+n),n}(t)),"")}let{console:je,document:He,getComputedStyle:_e,isExtensionContext:Xe,variables:Le,Array:Ye,MutationObserver:Je,Object:qe,DOMMatrix:Qe,XPathEvaluator:Ke,XPathExpression:We,XPathResult:Ve}=ke(window);const{querySelectorAll:$e}=He,ze=$e&&u($e,He);function Ze(e,t=!1){try{const n=navigator.userAgent.includes("Firefox")?e.openOrClosedShadowRoot:browser.dom.openOrClosedShadowRoot(e);return null===n&&Oe()&&!t&&je.log("Shadow root not found or not added in element yet",e),n}catch(n){return Oe()&&!t&&je.log("Error while accessing shadow root",e,n),null}}function et(e,t=!1){return rt(e,ze.bind(He),He,t)}function tt(e,t,n,r){const o=t.getAttribute("xlink:href")||t.getAttribute("href");if(o){const i=ze(o)[0];if(!i&&Oe())return je.log("No elements found matching",o),!1;if(!(a=e)||0===a.length||a.every((e=>""===e.trim()))){const e=r.length>0?r:[];return n.push({element:i,rootParents:[...e,t]}),!1}const u=i.querySelectorAll.bind(i);return{nextBoundElement:i,nestedSelectorsString:e.join("^^"),next$$:u}}var a}function nt(e,t){const n=Ze(t);if(n){const{querySelectorAll:r}=n,o=r&&u(r,n).bind(n);return{nextBoundElement:t,nestedSelectorsString:":host "+e.join("^^"),next$$:o}}return!1}function rt(e,t,n,r,o=[]){if(e.includes("^^")){const[a,i,...u]=e.split("^^");let s,c;switch(i){case"svg":c=tt;break;case"sh":c=nt;break;default:return Oe()&&je.log(i," is not supported. Supported commands are: \n^^sh^^\n^^svg^^"),[]}s=""===a.trim()?[n]:t(a);const l=[];for(const e of s){const t=c(u,e,l,o);if(!t)continue;const{next$$:n,nestedSelectorsString:a,nextBoundElement:i}=t,s=rt(a,n,i,r,[...o,e]);s&&l.push(...s)}return l}const a=t(e);return r?[...a].map((e=>({element:e,rootParents:o.length>0?o:[]}))):a}function ot(e,t,n=[]){if(t.includes("^^svg^^")&&(t=t.split("^^svg^^")[0]),t.includes("^^sh^^")){const r=t.split("^^sh^^"),o=r.length-1;return t=`:host ${r[o]}`,o===n.length?e.closest(t):n[o].closest(t)}return n[0]?n[0].closest(t):e.closest(t)}const{assign:at,setPrototypeOf:it}=qe;class ut extends We{evaluate(...e){return it(i(super.evaluate,this,e),Ve.prototype)}}class st extends Ke{createExpression(...e){return it(i(super.createExpression,this,e),ut.prototype)}}function ct(e){if(Le.hidden.has(e))return!1;!function(e){Xe&&"function"==typeof checkElement&&checkElement(e)}(e),Le.hidden.add(e);let{style:t}=ke(e),n=ke(t,"CSSStyleDeclaration"),r=ke([]);const o=B();let{debugCSSProperties:a}=o;for(let[e,t]of a||[["display","none"]])n.setProperty(e,t,"important"),r.push([e,n.getPropertyValue(e)]);return new Je((()=>{for(let[e,t]of r){let r=n.getPropertyValue(e),o=n.getPropertyPriority(e);r==t&&"important"==o||n.setProperty(e,t,"important")}})).observe(e,{attributes:!0,attributeFilter:["style"]}),!0}function lt(e){let t=e;if(t.startsWith("xpath(")&&t.endsWith(")")){let e=t.slice(6,-1),n=(new st).createExpression(e,null),r=Ve.ORDERED_NODE_SNAPSHOT_TYPE;return e=>{if(!e)return;let t=n.evaluate(He,r,null),{snapshotLength:o}=t;for(let n=0;n<o;n++)e(t.snapshotItem(n))}}return t=>et(e).forEach(t)}function pt(e,t,n,r){let o;null==n&&(n=t);const a=()=>{for(const{element:a,rootParents:i}of et(n,!0)){const n=ot(ke(a),t,i);n&&e(a,n,i)&&(o(),ct(n)&&"function"==typeof r&&r(n))}};return at(new Je(a),{race(e){o=e,this.observe(He,{childList:!0,characterData:!0,subtree:!0}),a()}})}function ft(e,t,n,r){let o=ke(t,"CSSStyleDeclaration");if("none"==o.getPropertyValue("display"))return!1;let a=o.getPropertyValue("visibility");if("hidden"==a||"collapse"==a)return!1;if(!n||e==n)return!0;let i=ke(e).parentElement;if(!i){if(!r||!r.length)return!0;i=r[r.length-1],r=r.slice(0,-1)}return ft(i,_e(i),n,r)}function ht(e){let t=_e(e),{cssText:n}=t;if(n)return n;for(let e of t)n+=`${e}: ${t[e]}; `;return ke(n).trim()}function dt(e,t=null){let n=_e(e,t).transform;return"none"===n?new Qe:new Qe(n)}let mt=null,gt=null;function yt(e,t,n=null){try{let r=n||e.innerText;if(!r)return!1;r=r.trim(),mt&&gt||(mt=He.createElement("canvas"),gt=mt.getContext("2d",{alpha:!0,willReadFrequently:!0}));let o=t.font||[t.fontStyle,t.fontVariant,t.fontWeight,t.fontSize,t.fontFamily].join(" ");gt.font=o;const a=gt.measureText(r);if(a.width<=0)return!1;mt.width=Math.min(a.width,800),mt.height=Math.max(1,1.5*parseInt(t.fontSize,10)||20),gt.font=o,gt.fillStyle="#000",gt.textBaseline="top",gt.fillText(r,0,0);const i=gt.getImageData(0,0,mt.width,mt.height).data;for(let e=3;e<i.length;e+=4)if(i[e]>0)return!0;return!1}catch(t){return Oe()&&je.log("Font visibility check failed:",e,t.message),!0}}function vt(e,t,n,{bgColorCheck:r=!0,pseudoElemCheck:o=!1,fontCheck:a=!0}={}){t||(t=_e(e)),t=ke(t);for(const[e,r]of n)if(Pe(r).test(t.getPropertyValue(e)))return!1;const i=t.getPropertyValue("color");if(r&&t.getPropertyValue("background-color")===i)return!1;if(!o){const t=_e(e,"::first-line");if(t)return vt(e,t,n,{bgColorCheck:r,pseudoElemCheck:!0,fontCheck:a})}if(a&&!yt(e,t))return!1;const u=t.getPropertyValue("text-shadow");return!i.includes("rgba(0, 0, 0, 0)")||"none"!==u&&!u.includes("rgba(0, 0, 0, 0)")}function wt(e,t,{boxMargin:n=2,ignorePadding:r=!1}={}){let o=ke(e).getBoundingClientRect();if(r){const t=_e(e),n=parseFloat(t.paddingTop)||0,r=parseFloat(t.paddingRight)||0,a=parseFloat(t.paddingBottom)||0,i=parseFloat(t.paddingLeft)||0;o={left:o.left+i,right:o.right-r,top:o.top+n,bottom:o.bottom-a}}const a=ke(t).getBoundingClientRect(),i=a.left-n,u=a.right+n,s=a.top-n,c=a.bottom+n;return i<=o.left&&o.left<=u&&s<=o.top&&o.top<=c&&s<=o.bottom&&o.bottom<=c&&i<=o.right&&o.right<=u}let{Math:At,setInterval:xt,performance:bt}=ke(window);const Bt={mark(){},end(){},toString:()=>"{mark(){},end(){}}"};let Et=!0;function Tt(e,t=10){if(Et)return Bt;function n(){let e=ke([]);for(let{name:t,duration:n}of bt.getEntriesByType("measure"))e.push({name:t,duration:n});e.length&&bt.clearMeasures()}return Tt[e]||(Tt[e]=xt(n,At.round(6e4/At.min(60,t)))),{mark(){bt.mark(e)},end(t=!1){bt.measure(e,e);const r=bt.getEntriesByName(e,"measure"),o=r.length>0?r[r.length-1]:null;console.log("PROFILER:",o),bt.clearMarks(e),t&&(clearInterval(Tt[e]),delete Tt[e],n())}}}const{console:Nt}=ke(window),It=()=>{};function Ct(...e){let{mark:t,end:n}=Tt("log");if(Oe()){const t=["%c DEBUG","font-weight: bold;"],n=e.indexOf("error"),r=e.indexOf("warn"),o=e.indexOf("success"),a=e.indexOf("info");-1!==n?(t[0]+=" - ERROR",t[1]+="color: red; border:2px solid red",ke(e).splice(n,1)):-1!==r?(t[0]+=" - WARNING",t[1]+="color: orange; border:2px solid orange ",ke(e).splice(r,1)):-1!==o?(t[0]+=" - SUCCESS",t[1]+="color: green; border:2px solid green",ke(e).splice(o,1)):-1!==a&&(t[1]+="color: black;",ke(e).splice(a,1)),ke(e).unshift(...t)}t(),Nt.log(...e),n()}function St(e){return u(Oe()?Ct:It,null,e)}let{Array:kt,Error:Ft,Map:Ot,parseInt:Dt}=ke(window),Rt=null,Gt=null;function Pt(e,t){if(null===Rt)return It;let n=Rt,{participants:r}=n;return r.set(o,t),o;function o(){if(!(n.winners<1))if(St("race")("success",`${e} won the race`),n===Rt)Gt.push(o);else if(r.delete(o),--n.winners<1){for(let e of r.values())e();r.clear()}}}const Mt={get(e,t){const n=e;for(;!w(e,t);)e=v(e);const{get:r,set:o}=g(e,t);return function(){return arguments.length?i(o,n,arguments):s(r,n)}}};let{parseFloat:Ut,variables:jt,clearTimeout:Ht,fetch:_t,setTimeout:Xt,Array:Lt,Error:Yt,Map:Jt,Object:qt,ReferenceError:Qt,Set:Kt,WeakMap:Wt}=ke(window);var Vt;function $t(e,t,n){var r,o;n?"load"===n?(e("info","Waiting until window.load"),window.addEventListener("load",(()=>{e("info","Window.load fired."),t()}))):"loading"===n||"interactive"===n||"complete"===n?(e("info","Waiting document state until :",n),document.addEventListener("readystatechange",(()=>{e("info","Document state changed:",document.readyState),document.readyState===n&&t()}))):(e("info","Waiting until ",n," event is triggered on document"),(r=document,o=n,new Promise((e=>{const t=()=>{r.removeEventListener(o,t),e()};r.addEventListener(o,t)}))).then((()=>{e("info",n," is triggered on document, starting the snippet"),t()})).catch((t=>{e("error","There was an error while waiting for the event.",t)}))):t()}Vt=window,new n(Vt,Mt),ke(/^\d+$/);let zt=new Jt;function Zt(e,{as:t="arrayBuffer",cleanup:n=6e4}={}){let r=t+":"+e,o=zt.get(r)||{remove:()=>zt.delete(r),result:null,timer:0};return Ht(o.timer),o.timer=Xt(o.remove,n),o.result||(o.result=_t(e).then((e=>e[t]())).catch(o.remove),zt.set(r,o)),o.result}let{MutationObserver:en,WeakSet:tn,getComputedStyle:nn}=ke(window),{getComputedStyle:rn,MutationObserver:on,Uint8Array:an}=ke(window);const{parseFloat:un,Math:sn,MutationObserver:cn,WeakSet:ln}=ke(window),{min:pn}=sn,fn=(e,t)=>{const n=e.length+1,r=t.length+1,o=[[0]];let a=0,i=0;for(;++a<r;)o[0][a]=a;for(a=0;++a<n;){const n=e[i];let u=0,s=0;for(o[a]=[a];++u<r;)o[a][u]=pn(o[i][u]+1,o[a][s]+1,o[i][s]+(n!=t[s])),++s;++i}return o[n-1][r-1]};let{getComputedStyle:hn,Map:dn,WeakSet:mn,parseFloat:gn,Math:yn}=ke(window);const{ELEMENT_NODE:vn,TEXT_NODE:wn}=Node;let{MutationObserver:An,WeakSet:xn,getComputedStyle:bn}=ke(window),{getComputedStyle:Bn,MutationObserver:En,WeakSet:Tn}=ke(window),{MutationObserver:Nn,WeakSet:In}=ke(window);const{ELEMENT_NODE:Cn}=Node;let{MutationObserver:Sn,WeakSet:kn}=ke(window);const{ELEMENT_NODE:Fn}=Node;let{getComputedStyle:On,MutationObserver:Dn,WeakSet:Rn,DOMParser:Gn,Math:Pn,Map:Mn}=ke(window),{parseInt:Un,setTimeout:jn,Error:Hn,MouseEvent:_n,MutationObserver:Xn,WeakSet:Ln}=ke(window);const Yn=["auxclick","click","dblclick","gotpointercapture","lostpointercapture","mouseenter","mousedown","mouseleave","mousemove","mouseout","mouseover","mouseup","pointerdown","pointerenter","pointermove","pointerover","pointerout","pointerup","pointercancel","pointerleave"];let{isNaN:Jn,MutationObserver:qn,parseInt:Qn,parseFloat:Kn,setTimeout:Wn}=ke(window);const Vn={log:Ct,race:function(e,t="1"){switch(e){case"start":Rt={winners:Dt(t,10)||1,participants:new Ot},Gt=new kt;break;case"end":case"finish":case"stop":Rt=null;for(let e of Gt)e();Gt=null;break;default:throw new Ft(`Invalid action: ${e}`)}},debug:function(){Fe=!0},profile:function(){Et=!1},"hide-if-matches-xpath":function(e,t,n){const{mark:r,end:o}=Tt("hide-if-matches-xpath"),a=Me(arguments),i=St("hide-if-matches-xpath");$t(i,(()=>{const n=n=>{const u=lt(`xpath(${e})`),s=new In,c=e=>{s.add(e),f(),ke(e).nodeType===Cn?ct(e):ke(e).textContent="",i("success","Matched: ",e,"\nFILTER: hide-if-matches-xpath",a)},l=()=>{r(),u((e=>{if(s.has(e))return!1;t?lt(`xpath(${t})`)((t=>{if(!t.contains(e))return!1;c(e)})):c(e)})),o()},p=new Nn(l),f=Pt("hide-if-matches-xpath",(()=>p.disconnect()));p.observe(n,{characterData:!0,childList:!0,subtree:!0}),l()};if(t){let e,r=0;const o=lt(`xpath(${t})`),a=()=>{o((e=>{n(e),r++})),r>0&&e.disconnect()};e=new Nn(a),e.observe(document,{characterData:!0,childList:!0,subtree:!0}),a()}else n(document)}),n)},"hide-if-matches-computed-xpath":function(e,t,n,r){const{mark:o,end:a}=Tt("hide-if-matches-computed-xpath"),i=Me(arguments),u=St("hide-if-matches-computed-xpath");if(!t||!e)return void u("error","No query or searchQuery provided.");const s=t=>{const n=(t=>e.replace("{{}}",t))(t);u("info","Starting hiding elements that match query: ",n);const r=lt(`xpath(${n})`),s=new kn,c=()=>{o(),r((e=>{if(s.has(e))return!1;s.add(e),p(),ke(e).nodeType===Fn?ct(e):ke(e).textContent="",u("success","Matched: ",e,"\nFILTER: hide-if-matches-computed-xpath",i)})),a()},l=new Sn(c),p=Pt("hide-if-matches-computed-xpath",(()=>l.disconnect()));l.observe(document,{characterData:!0,childList:!0,subtree:!0}),c()},c=Pe(n);$t(u,(()=>{if(t){u("info","Started searching for: ",t);const e=new kn;let n;const r=lt(`xpath(${t})`),o=()=>{r((t=>{if(e.has(t))return!1;if(e.add(t),u("info","Found node: ",t),t.innerHTML){u("info","Searching in: ",t.innerHTML);const e=t.innerHTML.match(c);if(e&&e.length){let t="";t=e[1]?e[1]:e[0],u("info","Matched search query: ",t),s(t)}}}))};n=new Sn(o),n.observe(document,{characterData:!0,childList:!0,subtree:!0}),o()}}),r)},"hide-if-contains":function(e,t="*",n=null){const r=Me(arguments),o=St("hide-if-contains"),{mark:a,end:i}=Tt("hide-if-contains");let u=Pe(e);const s=pt((e=>u.test(ke(e).textContent)),t,n,(e=>{a(),o("success","Matched: ",e,"\nFILTER: hide-if-contains",r),i()}));s.race(Pt("hide-if-contains",(()=>{s.disconnect()})))},"hide-if-contains-similar-text":function(e,t,n=null,r=0,o=0){const a=new ln,i=Me(arguments),u=St("hide-if-contains-similar-text"),{mark:s,end:c}=Tt("hide-if-contains-similar-text"),l=ke(e),{length:p}=l,f=p+un(r)||0,h=ke([...l]).sort(),d=un(o)||1/0;null==n&&(n=t),u("info","Looking for similar text: "+l);const m=()=>{s();for(const{element:e,rootParents:o}of et(n,!0)){if(a.has(e))continue;a.add(e);const{innerText:n}=ke(e),s=pn(d,n.length-f+1);for(let a=0;a<s;a++){const s=ke(n).substr(a,f);if(fn(h,ke([...s]).sort())-r<=0){const n=ot(ke(e),t,o);if(u("success","Found similar text: "+l,n,"\nFILTER: hide-if-contains-similar-text",i),n){y(),ct(n);break}}}}c()};let g=new cn(m),y=Pt("hide-if-contains-similar-text",(()=>g.disconnect()));g.observe(document,{childList:!0,characterData:!0,subtree:!0}),m()},"hide-if-contains-visible-text":function(e,t,n=null,...r){const{mark:o,end:a}=Tt("hide-if-contains-visible-text"),i=Me(arguments);let u=ke([]);const s=new dn([["-snippet-box-margin","2"],["-disable-bg-color-check","false"],["-check-is-contained","false"],["-pseudo-box-margin","2"],["-ignore-padding","false"],["-disable-font-check","false"]]);let c=ke([["opacity","0"],["font-size","0px"],["color","rgba(0, 0, 0, 0)"]]);for(let e of r){e=ke(e);let t=e.indexOf(":");if(t<0)continue;let n=e.slice(0,t).trim().toString(),r=e.slice(t+1).trim().toString();n&&r&&(s.has(n)?s.set(n,r):u.push([n,r]))}let l=new dn(c.concat(u));function p(e,t,n,{bgColorCheck:r=!0,transThresh:o=2,fontCheck:a=!0}={}){let i=hn(e,t);if(!ft(e,i)||!vt(e,i,l,{bgColorCheck:r,fontCheck:!1}))return"";let{content:u}=ke(i);if(u&&"none"!==u){let r=ke([]);const s=dt(e,t),c=n.multiply(s),l=yn.atan2(c.b,c.a)*(180/yn.PI);if(yn.abs(l)>5)return"";if(yn.abs(c.e)>o||yn.abs(c.f)>o)return"";u=ke(u).trim().replace(/(["'])(?:(?=(\\?))\2.)*?\1/g,(e=>""+(r.push(ke(e).slice(1,-1))-1))),u=u.replace(/\s*attr\(\s*([^\s,)]+)[^)]*?\)\s*/g,((t,n)=>ke(e).getAttribute(n)||""));const p=u.replace(/\x01(\d+)/g,((e,t)=>r[t]));return a&&p&&!yt(e,i,p)?"":p}return""}function f(e,t,n,r,o,a,i,{boxMargin:u=2,bgColorCheck:s,checkIsContained:c,fontCheck:h,transThresh:d}={}){let m=!n;if(m&&(n=hn(e)),!ft(e,n,m&&t,a))return"";r||"hidden"!==ke(n).getPropertyValue("overflow-x")&&"hidden"!==ke(n).getPropertyValue("overflow-y")||(r=e);let g=p(e,":before",i=i?i.multiply(dt(e)):dt(e),{bgColorCheck:s,transThresh:d,fontCheck:h});for(let t of function(e,t=!0){const n=Ze(e,t);return n?n.childNodes:ke(e).childNodes}(ke(e)))switch(ke(t).nodeType){case vn:g+=f(t,e,hn(t),r,o,a,i,{boxMargin:u,bgColorCheck:s,checkIsContained:c,transThresh:d,fontCheck:h});break;case wn:if(r)wt(e,r,{boxMargin:u,ignorePadding:y})&&vt(e,n,l,{bgColorCheck:s,fontCheck:h})&&(g+=ke(t).nodeValue);else if(vt(e,n,l,{bgColorCheck:s,fontCheck:h})){if(c&&!wt(e,o,{boxMargin:u,ignorePadding:y}))continue;g+=ke(t).nodeValue}}return g+=p(e,":after",i,{bgColorCheck:s,transThresh:d,fontCheck:h}),g}const h=gn(s.get("-snippet-box-margin"))||0,d="true"!==s.get("-disable-bg-color-check"),m="true"!==s.get("-disable-font-check"),g="true"===s.get("-check-is-contained"),y="true"===s.get("-ignore-padding"),v=gn(s.get("-pseudo-box-margin"))||0;let w=Pe(e),A=new mn;const x=pt(((e,t,n)=>{if(o(),A.has(e))return!1;A.add(e);let r=f(e,t,null,null,e,n,null,{boxMargin:h,bgColorCheck:d,checkIsContained:g,transThresh:v,fontCheck:m}),u=w.test(r);return Oe()&&r.length&&(u?Ct("success",u,w,r,"\nFILTER: hide-if-contains-visible-text",i):Ct("info",u,w,r)),a(),u}),t,n);x.race(Pt("hide-if-contains-visible-text",(()=>{x.disconnect()})))},"hide-if-contains-and-matches-style":function(e,t="*",n=null,r=null,o=null,a,i=null,u=null){const s=Me(arguments),c=St("hide-if-contains-and-matches-style"),{mark:l,end:p}=Tt("hide-if-contains-and-matches-style"),f=new tn,h=Oe()&&new tn;null==n&&(n=t);const d=Pe(e),m=r?Pe(r):null,g=o?Pe(o):null;$t(c,(()=>{const e=()=>{if(l(),!(i&&window.innerWidth<i||u&&window.innerWidth>u)){for(const{element:e,rootParents:r}of et(n,!0))if(!f.has(e)&&d.test(ke(e).textContent))if(!g||g.test(ht(e))){const n=ot(ke(e),t,r);if(!n)continue;if(!m||m.test(ht(n)))o(),ct(n),f.add(e),c("success","Matched: ",n,"which contains: ",e,"\nFILTER: hide-if-contains-and-matches-style",s);else{if(!h||h.has(n))continue;c("info","In this element the searchStyle matched but style didn't:\n",n,nn(n),s),h.add(n)}}else{if(!h||h.has(e))continue;c("info","In this element the searchStyle didn't match:\n",e,nn(e),s),h.add(e)}p()}},r=new en(e),o=Pt("hide-if-contains-and-matches-style",(()=>r.disconnect()));r.observe(document,{childList:!0,characterData:!0,subtree:!0}),e()}),a)},"hide-if-has-and-matches-style":function(e,t="*",n=null,r=null,o=null,a=null,i=null,u=null){const s=Me(arguments),c=St("hide-if-has-and-matches-style"),{mark:l,end:p}=Tt("hide-if-has-and-matches-style"),f=new xn,h=Oe()&&new xn;null==n&&(n=t);const d=r?Pe(r):null,m=o?Pe(o):null;$t(c,(()=>{const r=()=>{if(l(),!(i&&window.innerWidth<i||u&&window.innerWidth>u)){for(const{element:r,rootParents:o}of et(n,!0))if(!f.has(r))if(!ke(r).querySelector(e)||m&&!m.test(ht(r))){if(!h||h.has(r))continue;c("info","In this element the searchStyle didn't match:\n",r,bn(r),...arguments),h.add(r)}else{const e=ot(ke(r),t,o);if(!e||d&&!d.test(ht(e))){if(!h||h.has(e))continue;c("info","In this element the searchStyle matchedbut style didn't:\n",e,bn(e),...arguments),h.add(e)}else a(),ct(e),f.add(r),c("success","Matched: ",e,"which contains: ",r,"\nFILTER: hide-if-has-and-matches-style",s)}p()}},o=new An(r),a=Pt("hide-if-has-and-matches-style",(()=>o.disconnect()));o.observe(document,{childList:!0,subtree:!0}),r()}),a)},"hide-if-labelled-by":function(e,t,n=null){const{mark:r,end:o}=Tt("hide-if-labelled-by");let a=null==n,i=Pe(e),u=new Tn,s=()=>{r();for(const{element:e,rootParents:r}of et(t,!0)){let t=a?e:ot(ke(e),n,r);if(!t||!ft(e,Bn(e),t))continue;let o=ke(e).getAttribute("aria-labelledby"),s=()=>{u.has(t)||i.test(ke(e).getAttribute("aria-label")||"")&&(l(),u.add(t),ct(t))};if(o)for(let e of ke(o).split(/\s+/)){let n=ke(document).getElementById(e);n?!u.has(n)&&i.test(n.innerText)&&(l(),u.add(n),ct(t)):s()}else s()}o()},c=new En(s),l=Pt("hide-if-labelled-by",(()=>c.disconnect()));c.observe(document,{characterData:!0,childList:!0,subtree:!0}),s()},"hide-if-contains-image":function(e,t,n){null==n&&(n=t);let r=Pe(e);const o=Me(arguments),a=St("hide-if-contains-image"),{mark:i,end:u}=Tt("hide-if-contains-image");let s=()=>{i();for(const{element:e,rootParents:i}of et(n,!0)){let n=rn(e),u=ke(n["background-image"]).match(/^url\("(.*)"\)$/);u&&Zt(u[1]).then((n=>{if(r.test(Ue(new an(n)))){let n=ot(ke(e),t,i);n&&(l(),ct(n),a("success","Matched: ",n,"\nFILTER: hide-if-contains-image",o))}}))}u()},c=new on(s),l=Pt("hide-if-contains-image",(()=>c.disconnect()));c.observe(document,{childList:!0,subtree:!0}),s()},"hide-if-svg-contains":function(e,t,n,...r){null==n&&(n=t);const o=Pe(e),a=Me(arguments),i=new Rn,u=St("hide-if-svg-contains"),{mark:s,end:c}=Tt("hide-if-svg-contains"),l=new Mn([["-position-threshold","500"],["-disable-contained-check","false"],["-wait-until",""],["-opacity-alpha-threshold","0.1"],["-font-size-threshold","1"]]);let p=ke([]);for(let e of r){e=ke(e);let t=e.indexOf(":");if(t<0)continue;let n=e.slice(0,t).trim(),r=e.slice(t+1).trim();n&&r&&(l.has(n)?l.set(n,r):p.push([n,r]))}let f=ke([["display","none"],["visibility","hidden"],["opacity","0"],["fill","none"],["font-size","0"]]),h=new Mn(f.concat(p));const d=parseFloat(l.get("-position-threshold"))||0,m="true"===l.get("-disable-contained-check"),g=parseFloat(l.get("-opacity-alpha-threshold"))||0,y=parseFloat(l.get("-font-size-threshold"))||0,v=new Mn,w=l.get("-wait-until");function A(e,t){if(!t.test(e.textContent))return!1;const n=On(e),r=e.getBoundingClientRect(),o=e.ownerSVGElement.getBoundingClientRect(),a=/\b(rgba?|hsla?|hwb)\b/;for(const[e,t]of h){const r=n[e],o=parseFloat(r);switch(e){case"color":case"fill":if(r&&a.test(r)&&0!=g){const e=r.split(",")[3]||r.split("/")[1],t=e?parseFloat(e):1;if(!isNaN(t)&&t<=g)return!1}else if(r&&Pe(t).test(r))return!1;break;case"opacity":if(!isNaN(o)&&g>0&&o<=g)return!1;break;case"font-size":if(!isNaN(o)&&y>0&&o<=y)return!1;break;default:if(r&&Pe(t).test(r))return!1}}if(!m&&d>0){const e=r.x-o.x,t=r.y-o.y;if(Pn.abs(e)>d||Pn.abs(t)>d)return!1}return!0}function x(){u("info","Creating Isolated element to host SVGs");const e=document.createElement("div");e.style.cssText="position: absolute; top: -9999px; left: -9999px; border: none; pointer-events: none;",document.body.appendChild(e);const t=e.attachShadow({mode:"closed"});return t.innerHTML='\n      <div id="container" style="{ all: initial; }">\n      </div>\n    ',{svgContainer:t.querySelector("#container"),cleanup:()=>e.remove()}}$t(u,(async()=>{let e,r=async()=>{s();for(const{element:r,rootParents:s}of et(n,!0)){if(e||(e=x()),i.has(r))continue;let n=!1;try{const t=ke(On(r).backgroundImage).match(/url\("?(.+?)"?\)/);if(!t)continue;const a=t[1];let s=v.get(a);s||(s=Zt(a,{as:"text"}),v.set(a,s));const c=await s;if(i.has(r))continue;const l=(new Gn).parseFromString(c,"image/svg+xml");if(l.querySelector("parsererror")){u("warn","Skipping malformed SVG:",a,"for element:",r);continue}e.svgContainer.innerHTML="",e.svgContainer.appendChild(l.documentElement);const p=e.svgContainer.querySelectorAll("text, tspan");for(const e of p)if(A(e,o)){n=!0,u("info","Condition met: Text found visible in SVG of element",r);break}}catch(e){u("warn","An error occurred while processing element:",r,e);continue}if(n&&!i.has(r)){const e=ot(ke(r),t,s);e&&(p(),ct(e),i.add(r),u("success","Matched: ",e,"\nFILTER: hide-if-svg-contains",a))}}c()},l=new Dn(r),p=Pt("hide-if-svg-contains",(()=>{l.disconnect(),e.cleanup()}));l.observe(document,{childList:!0,subtree:!0}),r()}),w)},"simulate-mouse-event":function(...e){const t=Me(arguments),n=St("simulate-mouse-event"),{mark:r,end:o}=Tt("simulate-mouse-event");if(e.length<1)throw new Hn("[simulate-mouse-event snippet]: No selector provided.");e.length>7&&(e=e.slice(0,7));const a=ke([]);function i(){return a.forEach((e=>{e.found||function(e){let t=e;if(t.startsWith("xpath(")&&t.endsWith(")")){let t=lt(e);return()=>{let e=ke([]);return t((t=>e.push(t))),e}}return()=>Ye.from(et(e))}(e.selector)().length>0&&(e.found=!0)})),a.every((e=>e.found))}function u(e,r,o){e&&r&&("click"===r&&e.click?(e.click(),n("success","Clicked on this node:\n",e,"\nwith a delay of",o,"ms",`n\nFILTER: simulate-mouse-event ${t}`)):(e.dispatchEvent(new _n(r,{bubbles:!0,cancelable:!0})),n("success","A",r,"event was dispatched with a delay of",o,"ms on this node:\n",e,`n\nFILTER: simulate-mouse-event ${t}`)))}ke(e).forEach((e=>{const t=function(e){if(!e)return null;const t={selector:"",continue:!1,trigger:!1,event:"click",delay:"500",clicked:!1,found:!1},r=e.split("$");let o=[];r.length>=2&&(o=r[1].toLowerCase().split(",")),[t.selector]=r;for(const e of o)if("trigger"===e)t.trigger=!0;else if("continue"===e)t.continue=!0;else if(e.startsWith("event")){const n=e.toLowerCase().split("=");n[1]?t.event=n[1]:t.event="click"}else if(e.startsWith("delay")){const n=e.toLowerCase().split("=");n[1]?t.delay=n[1]:t.delay="500"}return Yn.includes(t.event)||n("warn",t.event," might be misspelled, check for typos.\n","These are the supported events:",Yn),t}(e);a.push(t)}));let s=!1;const[c]=a.slice(-1);c.trigger=!0;let l=new Ln;function p(){if(r(),s||(s=i()),s)for(const e of a){const t=lt(e.selector),n=Un(e.delay,10);e.trigger&&t((t=>{l.has(t)||(l.add(t),e.continue?setInterval((()=>{a.forEach((e=>{e.found=!1,e.clicked=!1})),i()&&u(t,e.event,e.delay)}),n):jn((()=>{u(t,e.event,e.delay)}),n))}))}o()}new Xn(p).observe(document,{childList:!0,subtree:!0}),p()},"skip-video":function(e,t,...n){const r=Me(arguments),o=new Map([["-max-attempts","10"],["-retry-ms","10"],["-run-once","false"],["-wait-until",""],["-skip-to","-0.1"],["-stop-on-video-end","false"],["-start-from","0"],["-mute-video-when-skipping","true"]]);for(let e of n){e=ke(e);let t=e.indexOf(":");if(t<0)continue;let n=e.slice(0,t).trim().toString(),r=e.slice(t+1).trim().toString();n&&r&&o.has(n)&&o.set(n,r)}const a=o.get("-max-attempts"),i=Qn(a||10,10),u=o.get("-retry-ms"),s=Qn(u||10,10),c="true"===o.get("-run-once"),l=o.get("-skip-to"),p=Kn(l||-.1),f=o.get("-start-from"),h=Qn(f||0,10),d=o.get("-wait-until"),m="true"===o.get("-stop-on-video-end"),g=!("false"===o.get("-mute-video-when-skipping")),y=St("skip-video"),{mark:v,end:w}=Tt("skip-video"),A=lt(`xpath(${t})`);let x=!1;$t(y,(()=>{v();const n=new WeakSet,o=(l=0)=>{x&&c?a&&a.disconnect():A((a=>{let c,f=n.has(a);f||(y("info","Matched:",a," for selector: ",t),y("info","Running video skipping logic."));const d=et(e);let v=!1;for(const e of d){if(!e||Jn(e.duration)||Jn(e.currentTime))continue;v=!0;const t=e.duration-e.currentTime<.5;!(e.duration>0&&e.currentTime<e.duration)||m&&t||(g&&(e.muted=!0,f||y("success","Muted video...")),h<=1e3*e.currentTime&&(p<=0?e.currentTime=e.duration+p:e.currentTime+=p,c!==e.duration&&(y("success","Skipped video, currentTime: ",e.currentTime,"s.","\nFILTER: skip-video",r),n.add(a),c=e.duration),e.paused&&e.play(),x=!0,u()))}!v&&l<i&&Wn((()=>{const e=l+1;y("info","Running video skipping logic. Attempt: ",e),o(e)}),s)}))},a=new qn(o),u=Pt("skip-video",(()=>a.disconnect()));a.observe(document,{characterData:!0,childList:!0,subtree:!0}),o(),w()}),d)}};let{MutationObserver:$n}=ke(window);const{ELEMENT_NODE:zn}=Node;Vn["hide-if-matches-xpath3"]=function(e,t){let{mark:n,end:r}=Tt("hide-if-matches-xpath3");const o=e=>""===e&&"http://www.w3.org/1999/xhtml";function a(e){return fontoxpath.evaluateXPathToNodes(e,document,null,null,{language:fontoxpath.evaluateXPath.XQUERY_3_1_LANGUAGE,namespaceResolver:o})}const i=Me(arguments);let u=St("hide-if-matches-xpath3");const s=t=>{const o=new WeakSet,s=()=>{n();const t=a(e);for(const e of ke(t)){if(o.has(e))return!1;o.add(e),l(),ke(e).nodeType===zn?ct(e):ke(e).textContent="",u("success","Matched: ",e,"\nFILTER: hide-if-matches-xpath3",i)}r()},c=new $n(s),l=Pt("hide-if-matches-xpath3",(()=>c.disconnect()));c.observe(t,{characterData:!0,childList:!0,subtree:!0}),s()};if(t){let e,n=0;const r=a(t),o=()=>{for(const e of ke(r))s(e),n++;n>0&&e.disconnect()};e=new $n(o),e.observe(document,{characterData:!0,childList:!0,subtree:!0}),o()}else s(document)};const Zn=Vn;let er;for(const[e,...n]of t)if(Zn.hasOwnProperty(e))try{er=Zn[e].apply(er,n)}catch(e){console.error(e)}er=void 0},D=new Map([["log",null],["race",null],["debug",null],["profile",null],["hide-if-matches-xpath",null],["hide-if-matches-computed-xpath",null],["hide-if-contains",null],["hide-if-contains-similar-text",null],["hide-if-contains-visible-text",null],["hide-if-contains-and-matches-style",null],["hide-if-has-and-matches-style",null],["hide-if-labelled-by",null],["hide-if-contains-image",null],["hide-if-svg-contains",null],["simulate-mouse-event",null],["skip-video",null],["hide-if-matches-xpath3",function(){var e,t,n,r;e=this,function(e){function t(e,t,n,r){const o={op:t,func:n,data:r};return e.push(o),o}function n(e,t){return e}class r{constructor(){this.program=[]}test(e,n){return t(this.program,5,e,void 0===n?null:n)}jump(e){return t(this.program,3,null,e)}record(e,r){return t(this.program,4,void 0===r?n:r,e)}bad(e=1){return t(this.program,1,null,e)}accept(){return t(this.program,0,null,null)}fail(e){return t(this.program,2,e||null,null)}}class o{constructor(e,t,n){this.programLength=e,this.maxFromByPc=t,this.maxSurvivorFromByPc=n}static fromProgram(e){const t=e.length,n=[],r=[];return e.forEach((e=>{n.push(0),r.push(0)})),e.forEach(((e,o)=>{switch(e.op){case 2:if(null===e.func)return;if(o+1>=t)throw new Error("Invalid program: program could run past end");n[o+1]+=1;break;case 1:case 4:if(o+1>=t)throw new Error("Invalid program: program could run past end");n[o+1]+=1;break;case 3:e.data.forEach((e=>{if(e<0||e>=t)throw new Error("Invalid program: program could run past end");n[e]+=1}));break;case 5:if(o+1>=t)throw new Error("Invalid program: program could run past end");r[o+1]+=1;break;case 0:r[o]+=1}})),new o(t,n,r)}static createStub(e){const t=[],n=[];for(let r=0;r<e;++r)t.push(e),n.push(e);return new o(e,t,n)}}class a{constructor(e){this.acceptingTraces=e,this.success=e.length>0}}const i=255;class u{constructor(e){this.t=0,this.i=0,this.h=new Uint16Array(e),this.l=new Uint8Array(e)}getBadness(e){return this.l[e]}add(e,t){this.l[e]=t>i?i:t;const n=function(e,t,n,r,o){let a=r,i=o;for(;a<i;){const r=a+i>>>1;n<t[e[r]]?i=r:a=r+1}return a}(this.h,this.l,t,this.i,this.t);this.h.copyWithin(n+1,n,this.t),this.h[n]=e,this.t+=1}reschedule(e,t){const n=Math.max(this.l[e],t>i?i:t);if(this.l[e]!==n){const t=this.h.indexOf(e,this.i);if(t<0||t>=this.t)return void(this.l[e]=n);this.h.copyWithin(t,t+1,this.t),this.t-=1,this.add(e,n)}}getNextPc(){return this.i>=this.t?null:this.h[this.i++]}reset(){this.t=0,this.i=0,this.l.fill(0)}}class s{constructor(e){this.o=[];let t=e.length;e.forEach((e=>{this.o.push(e>0?t:-1),t+=e})),this.u=new Uint16Array(t)}clear(){this.u.fill(0,0,this.o.length)}add(e,t){const n=this.u[t],r=this.o[t];this.u[t]+=1,this.u[r+n]=e}has(e){return this.u[e]>0}forEach(e,t){const n=this.u[e],r=this.o[e];for(let e=r;e<r+n;++e)t(this.u[e])}}function c(e,t,n=!1){return null===e?t:Array.isArray(e)?(-1===e.indexOf(t)&&(n&&(e=e.slice()),e.push(t)),e):e===t?e:[e,t]}class l{constructor(e,t){this.prefixes=e,this.record=t}}function p(e,t){let n;if(null===t){if(!Array.isArray(e))return e;n=e}else n=e===l.EMPTY?[]:Array.isArray(e)?e:[e];return new l(n,t)}l.EMPTY=new l([],null);class f{constructor(e){this.p=[],this.v=[];for(let t=0;t<e;++t)this.p.push(0),this.v.push(null)}mergeTraces(e,t,n,r,o,a){let i=!1;return n.forEach(t,(t=>{const n=this.trace(t,r,o,a);var u,s,l;s=n,l=i,e=null===(u=e)?s:null===s?u:Array.isArray(s)?s.reduce(((e,t)=>c(e,t,e===s)),u):c(u,s,l),i=e===n})),e}trace(e,t,n,r){switch(this.p[e]){case 2:return this.v[e];case 1:return null}this.p[e]=1;let o=null;const a=t[e];if(null!==a)o=a;else if(!n.has(e))throw new Error(`Trace without source at pc ${e}`);if(o=this.mergeTraces(o,e,n,t,n,r),null!==o){const t=r[e];null!==t&&(o=p(o,t))}return this.v[e]=o,this.p[e]=2,o}buildSurvivorTraces(e,t,n,r,o){for(let a=0,i=e.length;a<i;++a){if(!n.has(a)){t[a]=null;continue}this.v.fill(null),this.p.fill(0);const i=this.mergeTraces(null,a,n,e,r,o);if(null===i)throw new Error(`No non-cyclic paths found to survivor ${a}`);t[a]=p(i,null)}this.v.fill(null)}}class h{constructor(e){this.g=[],this.k=[],this.m=[],this.A=new s(e.maxFromByPc),this.T=new s(e.maxSurvivorFromByPc),this.S=new f(e.programLength);for(let t=0;t<e.programLength;++t)this.g.push(null),this.k.push(null),this.m.push(null);this.k[0]=l.EMPTY}reset(e){this.A.clear(),this.T.clear(),this.g.fill(null),e&&(this.k.fill(null),this.m.fill(null),this.k[0]=l.EMPTY)}record(e,t){this.g[e]=t}has(e){return this.A.has(e)||null!==this.k[e]}add(e,t){this.A.add(e,t)}hasSurvivor(e){return this.T.has(e)}addSurvivor(e,t){this.T.add(e,t)}buildSurvivorTraces(){const e=this.k;this.S.buildSurvivorTraces(e,this.m,this.T,this.A,this.g),this.k=this.m,this.m=e}getTraces(e){const t=e.reduce(((e,t)=>c(e,this.k[t])),null);return null===t?[]:Array.isArray(t)?t:[t]}}class d{constructor(e){this.I=[],this.M=new u(e.programLength),this.N=new u(e.programLength),this.j=new h(e)}reset(){this.M.reset(),this.M.add(0,0),this.I.length=0,this.j.reset(!0)}getNextThreadPc(){return this.M.getNextPc()}step(e,t,n){const r=this.j.has(t);this.j.add(e,t);const o=this.M.getBadness(e)+n;r?this.M.reschedule(t,o):this.M.add(t,o)}stepToNextGeneration(e,t){const n=this.j.hasSurvivor(t);this.j.addSurvivor(e,t);const r=this.M.getBadness(e);n?this.N.reschedule(t,r):this.N.add(t,r)}accept(e){this.I.push(e),this.j.addSurvivor(e,e)}fail(e){}record(e,t){this.j.record(e,t)}nextGeneration(){this.j.buildSurvivorTraces(),this.j.reset(!1);const e=this.M;e.reset(),this.M=this.N,this.N=e}getAcceptingTraces(){return this.j.getTraces(this.I)}}class m{constructor(e){this.P=[],this.U=e,this.G=o.fromProgram(e),this.P.push(new d(this.G))}execute(e,t){const n=this.P.pop()||new d(this.G);n.reset();const r=e.length;let o,i=-1;do{let a=n.getNextThreadPc();if(null===a)break;for(++i,o=i>=r?null:e[i];null!==a;){const e=this.U[a];switch(e.op){case 0:null===o?n.accept(a):n.fail(a);break;case 2:{const r=e.func;if(null===r||r(t)){n.fail(a);break}n.step(a,a+1,0);break}case 1:n.step(a,a+1,e.data);break;case 5:if(null===o){n.fail(a);break}if(!(0,e.func)(o,e.data,t)){n.fail(a);break}n.stepToNextGeneration(a,a+1);break;case 3:{const t=e.data,r=t.length;if(0===r){n.fail(a);break}for(let e=0;e<r;++e)n.step(a,t[e],0);break}case 4:{const r=(0,e.func)(e.data,i,t);null!=r&&n.record(a,r),n.step(a,a+1,0);break}}a=n.getNextThreadPc()}n.nextGeneration()}while(null!==o);const u=new a(n.getAcceptingTraces());return n.reset(),this.P.push(n),u}}function g(e){const t=new r;return e(t),new m(t.program)}var y={Assembler:r,VM:m,compileVM:g};e.Assembler=r,e.VM=m,e.compileVM=g,e.default=y,Object.defineProperty(e,"V",{value:!0})}((e="undefined"!=typeof globalThis?globalThis:e||self).whynot={}),t=this,function(e){function t(e,t){return{success:!0,offset:e,value:t}}function n(e){return t(e,void 0)}function r(e,t,n=!1){return{success:!1,offset:e,expected:t,fatal:n}}function o(e){return e>65535?2:1}function a(e,t){return(a,i)=>{const u=a.codePointAt(i);return void 0!==u&&e(u)?n(i+o(u)):r(i,t)}}function i(e,n){return(r,o)=>{const a=e(r,o);return a.success?t(a.offset,n(a.value)):a}}function u(e){return(n,r)=>{let o=[],a=r;for(;;){const t=e(n,a);if(!t.success){if(t.fatal)return t;break}if(o.push(t.value),t.offset===a)break;a=t.offset}return t(a,o)}}function s(e){return(t,r)=>{let o=r;for(;;){const n=e(t,o);if(!n.success){if(n.fatal)return n;break}if(n.offset===o)break;o=n.offset}return n(o)}}function c(e,n,r){return(o,a)=>{const i=e(o,a);if(!i.success)return i;const u=n(o,i.offset);return u.success?t(u.offset,r(i.value,u.value)):u}}function l(e,t){return e}function p(e,t){return t}function f(e,t){return c(e,t,p)}function h(e,t){return c(e,t,l)}function d(e,t){return(o,a)=>e(o,a).success?r(a,t):n(a)}function m(e){return(t,n)=>{const o=e(t,n);return o.success?o:r(o.offset,o.expected,!0)}}const g=(e,t)=>e.length===t?n(t):r(t,["end of input"]);function y(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return[t,n.value]}e.codepoint=a,e.codepoints=function(e,t){return(o,a)=>{const i=a;for(;;){const t=o.codePointAt(a);if(void 0===t)break;if(!e(t))break;a+=t>65535?2:1}return void 0!==t&&a===i?r(a,t):n(a)}},e.collect=y,e.complete=function(e){return c(e,g,l)},e.consume=function(e){return i(e,(()=>{}))},e.cut=m,e.delimited=function(e,t,n,r=!1){return f(e,r?m(h(t,n)):h(t,n))},e.dispatch=function(e,t,n=0,o=[]){return(a,i)=>{const u=a.codePointAt(i+n);if(void 0===u)return r(i,o);const s=e[u];return void 0===s?void 0===t?r(i,o):t(a,i):s(a,i)}},e.end=g,e.error=r,e.except=function(e,t,n){return f(d(t,n),e)},e.filter=function(e,t,n,o){return(a,i)=>{const u=e(a,i);return u.success?t(u.value)?u:r(i,n,o):u}},e.filterUndefined=function(e){return i(e,(e=>e.filter((e=>void 0!==e))))},e.first=l,e.followed=h,e.map=i,e.not=d,e.ok=n,e.okWithValue=t,e.optional=function(e){return(n,r)=>{const o=e(n,r);return o.success||o.fatal?o:t(r,null)}},e.or=function(e,t){return(n,o)=>{let a=null;for(const r of e){const e=r(n,o);if(e.success)return e;if(null===a||e.offset>a.offset?a=e:e.offset===a.offset&&void 0===t&&(a.expected=a.expected.concat(e.expected)),e.fatal)return e}return t=t||(null==a?void 0:a.expected)||[],a&&(a.expected=t),a||r(o,t)}},e.peek=function(e){return(n,r)=>{const o=e(n,r);return o.success?t(r,o.value):o}},e.plus=function(e){return c(e,u(e),((e,t)=>[e].concat(t)))},e.plusConsumed=function(e){return c(e,s(e),p)},e.preceded=f,e.range=function(e,t,n){return a((n=>e<=n&&n<=t),n||[`${String.fromCodePoint(e)}-${String.fromCodePoint(t)}`])},e.recognize=function(e){return(n,r)=>{const o=e(n,r);return o.success?t(o.offset,n.slice(r,o.offset)):o}},e.second=p,e.sequence=function(...e){return(n,r)=>{const o=[];for(const t of e){const e=t(n,r);if(!e.success)return e;r=e.offset,o.push(e.value)}return t(r,o)}},e.sequenceConsumed=function(...e){return(t,r)=>{for(const n of e){const e=n(t,r);if(!e.success)return e;r=e.offset}return n(r)}},e.skipChars=function(e){return(t,a)=>{let i=e;for(;i>0;){const e=t.codePointAt(a);if(void 0===e)return r(a,["any character"]);a+=o(e),i-=1}return n(a)}},e.star=u,e.starConsumed=s,e.start=(e,t)=>0===t?n(t):r(t,["start of input"]),e.streaming=function(e){return function*(t,n){const r=e(t,n);return r.success&&(yield r.value),r}},e.streamingComplete=function(e){return function*(t,n){const r=yield*e(t,n);return r.success?g(t,r.offset):r}},e.streamingFilterUndefined=function(e){return function*(t,n){const r=e(t,n);let o=r.next();for(;!o.done;){const e=o.value;void 0!==e&&(yield e),o=r.next()}return o.value}},e.streamingOptional=function(e){return function*(t,r){const[o,a]=y(e(t,r));return a.success?(yield*o,a):a.fatal?a:n(r)}},e.streamingStar=function(e){return function*(t,r){for(;;){const[o,a]=y(e(t,r));if(!a.success)return a.fatal?a:n(r);if(yield*o,r===a.offset)return n(r);r=a.offset}}},e.streamingThen=function(e,t){return function*(n,r){const o=yield*e(n,r);return o.success?yield*t(n,o.offset):o}},e.then=c,e.token=function(e){return(n,o)=>{const a=o+e.length;return n.slice(o,a)===e?t(a,e):r(o,[e])}},Object.defineProperty(e,"__esModule",{value:!0})}((t="undefined"!=typeof globalThis?globalThis:t||self).prsc={}),n=this,function(e,t){function n(e){return t=>t===e}function r(e,t){if(null===e||null===t)throw new Error("unescaped hyphen may not be used as a range endpoint");if(t<e)throw new Error("character range is in the wrong order");return n=>e<=n&&n<=t}function o(e){return!0}function a(){return!1}function i(e,t){return n=>e(n)||t(n)}function u(e,t){switch(t.kind){case"predicate":return void e.test(t.value);case"regexp":return void s(e,t.value,!1)}}function s(e,t,n){const r=e.program.length,o=e.jump([]);n&&(o.data.push(e.program.length),e.test((()=>!0)),e.jump([r]));const a=[];if(t.forEach((t=>{o.data.push(e.program.length),function(e,t){t.forEach((t=>{!function(e,t){const[n,{min:r,max:o}]=t;if(null!==o){for(let t=0;t<r;++t)u(e,n);for(let t=r;t<o;++t){const t=e.jump([]);t.data.push(e.program.length),u(e,n),t.data.push(e.program.length)}}else if(r>0){for(let t=0;t<r-1;++t)u(e,n);const t=e.program.length;u(e,n),e.jump([t]).data.push(e.program.length)}else{const t=e.program.length,r=e.jump([]);r.data.push(e.program.length),u(e,n),e.jump([t]),r.data.push(e.program.length)}}(e,t)}))}(e,t),a.push(e.jump([]))})),a.forEach((t=>{t.data.push(e.program.length)})),n){const t=e.program.length,n=e.jump([]);n.data.push(e.program.length),e.test((()=>!0)),e.jump([t]),n.data.push(e.program.length)}}function c(e,t){return{success:!0,offset:e,value:t}}function l(e){return c(e,void 0)}function p(e,t,n=!1){return{success:!1,offset:e,expected:t,fatal:n}}function f(e){return(t,n)=>{const r=n+e.length;return t.slice(n,r)===e?c(r,e):p(n,[e])}}function h(e,t){return(n,r)=>{const o=e(n,r);return o.success?c(o.offset,t(o.value)):o}}function d(e,t,n,r){return(o,a)=>{const i=e(o,a);return i.success?t(i.value)?i:p(a,n,r):i}}function m(e,t){return(n,r)=>{let o=null;for(const a of e){const e=a(n,r);if(e.success)return e;if(null===o||e.offset>o.offset?o=e:e.offset===o.offset&&void 0===t&&(o.expected=o.expected.concat(e.expected)),e.fatal)return e}return t=t||(null==o?void 0:o.expected)||[],o&&(o.expected=t),o||p(r,t)}}function g(e){return(t,n)=>{const r=e(t,n);return r.success||r.fatal?r:c(n,null)}}function y(e){return(t,n)=>{let r=[],o=n;for(;;){const n=e(t,o);if(!n.success){if(n.fatal)return n;break}if(r.push(n.value),n.offset===o)break;o=n.offset}return c(o,r)}}function v(e,t,n){return(r,o)=>{const a=e(r,o);if(!a.success)return a;const i=t(r,a.offset);return i.success?c(i.offset,n(a.value,i.value)):i}}function w(e){return v(e,y(e),((e,t)=>[e].concat(t)))}function A(e,t){return e}function x(e,t){return t}function b(e,t){return v(e,t,x)}function B(e,t){return v(e,t,A)}function E(e,t,n,r=!1){return b(e,r?N(B(t,n)):B(t,n))}function T(e,t){return(n,r)=>e(n,r).success?p(r,t):l(r)}function N(e){return(t,n)=>{const r=e(t,n);return r.success?r:p(r.offset,r.expected,!0)}}const I=(e,t)=>e.length===t?l(t):p(t,["end of input"]),C=["Lu","Ll","Lt","Lm","Lo","Mn","Mc","Me","Nd","Nl","No","Pc","Pd","Ps","Pe","Pi","Pf","Po","Zs","Zl","Zp","Sm","Sc","Sk","So","Cc","Cf","Co","Cn"],S={};function k(e){return e.codePointAt(0)}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(((e,t)=>{S[e]=t}));const F=e=>-1===e||-2===e;function O(e){return t=>!F(t)&&!e(t)}function D(e,t){return null===t?e:n=>e(n)&&!t(n)}const R=function(e,t){const n=new Map;let o=0;return["BasicLatin","Latin-1Supplement","LatinExtended-A","LatinExtended-B","IPAExtensions","SpacingModifierLetters","CombiningDiacriticalMarks","GreekandCoptic|Greek","Cyrillic","CyrillicSupplement","Armenian","Hebrew","Arabic","Syriac","ArabicSupplement","Thaana","NKo","Samaritan","Mandaic","SyriacSupplement","ArabicExtended-B","ArabicExtended-A","Devanagari","Bengali","Gurmukhi","Gujarati","Oriya","Tamil","Telugu","Kannada","Malayalam","Sinhala","Thai","Lao","Tibetan","Myanmar","Georgian","HangulJamo","Ethiopic","EthiopicSupplement","Cherokee","UnifiedCanadianAboriginalSyllabics","Ogham","Runic","Tagalog","Hanunoo","Buhid","Tagbanwa","Khmer","Mongolian","UnifiedCanadianAboriginalSyllabicsExtended","Limbu","TaiLe","NewTaiLue","KhmerSymbols","Buginese","TaiTham","CombiningDiacriticalMarksExtended","Balinese","Sundanese","Batak","Lepcha","OlChiki","CyrillicExtended-C","GeorgianExtended","SundaneseSupplement","VedicExtensions","PhoneticExtensions","PhoneticExtensionsSupplement","CombiningDiacriticalMarksSupplement","LatinExtendedAdditional","GreekExtended","GeneralPunctuation","SuperscriptsandSubscripts","CurrencySymbols","CombiningDiacriticalMarksforSymbols|CombiningMarksforSymbols","LetterlikeSymbols","NumberForms","Arrows","MathematicalOperators","MiscellaneousTechnical","ControlPictures","OpticalCharacterRecognition","EnclosedAlphanumerics","BoxDrawing","BlockElements","GeometricShapes","MiscellaneousSymbols","Dingbats","MiscellaneousMathematicalSymbols-A","SupplementalArrows-A","BraillePatterns","SupplementalArrows-B","MiscellaneousMathematicalSymbols-B","SupplementalMathematicalOperators","MiscellaneousSymbolsandArrows","Glagolitic","LatinExtended-C","Coptic","GeorgianSupplement","Tifinagh","EthiopicExtended","CyrillicExtended-A","SupplementalPunctuation","CJKRadicalsSupplement","KangxiRadicals",null,"IdeographicDescriptionCharacters","CJKSymbolsandPunctuation","Hiragana","Katakana","Bopomofo","HangulCompatibilityJamo","Kanbun","BopomofoExtended","CJKStrokes","KatakanaPhoneticExtensions","EnclosedCJKLettersandMonths","CJKCompatibility","CJKUnifiedIdeographsExtensionA","YijingHexagramSymbols","CJKUnifiedIdeographs","YiSyllables","YiRadicals","Lisu","Vai","CyrillicExtended-B","Bamum","ModifierToneLetters","LatinExtended-D","SylotiNagri","CommonIndicNumberForms","Phags-pa","Saurashtra","DevanagariExtended","KayahLi","Rejang","HangulJamoExtended-A","Javanese","MyanmarExtended-B","Cham","MyanmarExtended-A","TaiViet","MeeteiMayekExtensions","EthiopicExtended-A","LatinExtended-E","CherokeeSupplement","MeeteiMayek","HangulSyllables","HangulJamoExtended-B","HighSurrogates","HighPrivateUseSurrogates","LowSurrogates","PrivateUseArea|PrivateUse","CJKCompatibilityIdeographs","AlphabeticPresentationForms","ArabicPresentationForms-A","VariationSelectors","VerticalForms","CombiningHalfMarks","CJKCompatibilityForms","SmallFormVariants","ArabicPresentationForms-B","HalfwidthandFullwidthForms","Specials","LinearBSyllabary","LinearBIdeograms","AegeanNumbers","AncientGreekNumbers","AncientSymbols","PhaistosDisc",null,"Lycian","Carian","CopticEpactNumbers","OldItalic","Gothic","OldPermic","Ugaritic","OldPersian",null,"Deseret","Shavian","Osmanya","Osage","Elbasan","CaucasianAlbanian","Vithkuqi",null,"LinearA","LatinExtended-F",null,"CypriotSyllabary","ImperialAramaic","Palmyrene","Nabataean",null,"Hatran","Phoenician","Lydian",null,"MeroiticHieroglyphs","MeroiticCursive","Kharoshthi","OldSouthArabian","OldNorthArabian",null,"Manichaean","Avestan","InscriptionalParthian","InscriptionalPahlavi","PsalterPahlavi",null,"OldTurkic",null,"OldHungarian","HanifiRohingya",null,"RumiNumeralSymbols","Yezidi","ArabicExtended-C","OldSogdian","Sogdian","OldUyghur","Chorasmian","Elymaic","Brahmi","Kaithi","SoraSompeng","Chakma","Mahajani","Sharada","SinhalaArchaicNumbers","Khojki",null,"Multani","Khudawadi","Grantha",null,"Newa","Tirhuta",null,"Siddham","Modi","MongolianSupplement","Takri",null,"Ahom",null,"Dogra",null,"WarangCiti","DivesAkuru",null,"Nandinagari","ZanabazarSquare","Soyombo","UnifiedCanadianAboriginalSyllabicsExtended-A","PauCinHau","DevanagariExtended-A",null,"Bhaiksuki","Marchen",null,"MasaramGondi","GunjalaGondi",null,"Makasar","Kawi",null,"LisuSupplement","TamilSupplement","Cuneiform","CuneiformNumbersandPunctuation","EarlyDynasticCuneiform",null,"Cypro-Minoan","EgyptianHieroglyphs","EgyptianHieroglyphFormatControls",null,"AnatolianHieroglyphs",null,"BamumSupplement","Mro","Tangsa","BassaVah","PahawhHmong",null,"Medefaidrin",null,"Miao",null,"IdeographicSymbolsandPunctuation","Tangut","TangutComponents","KhitanSmallScript","TangutSupplement",null,"KanaExtended-B","KanaSupplement","KanaExtended-A","SmallKanaExtension","Nushu",null,"Duployan","ShorthandFormatControls",null,"ZnamennyMusicalNotation",null,"ByzantineMusicalSymbols","MusicalSymbols","AncientGreekMusicalNotation",null,"KaktovikNumerals","MayanNumerals","TaiXuanJingSymbols","CountingRodNumerals",null,"MathematicalAlphanumericSymbols","SuttonSignWriting",null,"LatinExtended-G","GlagoliticSupplement","CyrillicExtended-D",null,"NyiakengPuachueHmong",null,"Toto","Wancho",null,"NagMundari",null,"EthiopicExtended-B","MendeKikakui",null,"Adlam",null,"IndicSiyaqNumbers",null,"OttomanSiyaqNumbers",null,"ArabicMathematicalAlphabeticSymbols",null,"MahjongTiles","DominoTiles","PlayingCards","EnclosedAlphanumericSupplement","EnclosedIdeographicSupplement","MiscellaneousSymbolsandPictographs","Emoticons","OrnamentalDingbats","TransportandMapSymbols","AlchemicalSymbols","GeometricShapesExtended","SupplementalArrows-C","SupplementalSymbolsandPictographs","ChessSymbols","SymbolsandPictographsExtended-A","SymbolsforLegacyComputing",null,"CJKUnifiedIdeographsExtensionB",null,"CJKUnifiedIdeographsExtensionC","CJKUnifiedIdeographsExtensionD","CJKUnifiedIdeographsExtensionE","CJKUnifiedIdeographsExtensionF",null,"CJKCompatibilityIdeographsSupplement",null,"CJKUnifiedIdeographsExtensionG","CJKUnifiedIdeographsExtensionH",null,"Tags",null,"VariationSelectorsSupplement",null,"SupplementaryPrivateUseArea-A|PrivateUse","SupplementaryPrivateUseArea-B|PrivateUse"].forEach(((e,a)=>{const u=t[a];null!==e&&e.split("|").forEach((e=>{const t=n.get(e),a=r(o,o+u-1);n.set(e,t?i(t,a):a)})),o+=u})),n}(0,[128,128,128,208,96,80,112,144,256,48,96,112,256,80,48,64,64,64,32,16,48,96,128,128,128,128,128,128,128,128,128,128,128,128,256,160,96,256,384,32,96,640,32,96,32,32,32,32,128,176,80,80,48,96,32,32,144,80,128,64,64,80,48,16,48,16,48,128,64,64,256,256,112,48,48,48,80,64,112,256,256,64,32,160,128,32,96,256,192,48,16,256,128,128,256,256,96,32,128,48,80,96,32,128,128,224,16,16,64,96,96,48,96,16,32,48,16,256,256,6592,64,20992,1168,64,48,320,96,96,32,224,48,16,64,96,32,48,48,32,96,32,96,32,96,32,48,64,80,64,11184,80,896,128,1024,6400,512,80,688,16,16,16,32,32,144,240,16,128,128,64,80,64,48,128,32,64,32,48,32,48,32,64,32,80,48,48,80,48,64,80,64,384,64,64,64,32,32,48,48,32,32,32,64,32,96,96,32,32,32,64,64,32,32,48,80,80,48,128,64,288,32,64,64,48,64,64,48,32,128,80,48,80,48,96,32,80,48,48,80,128,128,128,96,160,128,96,32,80,48,80,176,80,80,96,96,64,96,80,96,16,64,96,160,112,80,64,96,80,304,32,96,80,16,64,1024,128,208,2624,112,1072,48,4e3,640,8576,576,48,96,48,144,688,96,96,160,64,32,6144,768,512,128,8816,16,256,48,64,400,2304,160,16,4688,208,48,256,256,80,112,32,32,96,32,128,1024,688,1104,256,48,96,112,80,320,48,64,464,48,736,32,224,32,96,784,80,64,80,176,256,256,48,112,96,256,256,768,80,48,128,128,128,256,256,112,144,256,1024,42720,32,4160,224,5776,7488,3088,544,1504,4944,4192,711760,128,128,240,65040,65536,65536]),G=function(){const e=new Map,t="bfUATCYATCPAQATAXATAOATBKJTBXCTBCZPATAQAZANAZADZPAXAQAXAbgUATAYDaATAZAaAGARAXAcAaAZAaAXAMBZADATBZAMAGASAMCTACWXACGDXXADHA3DAAPDAAtCAAFDBCAADCAABCCDBCCABCAABCCDCCAABCAAFCAADDAABCAABCBADCBDBGACADCGDCAEADACAEADACAEADAAPDAARDACAEADAABCBA7DFCAABCBDBABCCAJjDBAAGADaFRZDFLZNFEZGFAZAFAZQnvBAAADFAZACADABBFADCTACABDZBCATACCBACABACAABCQBACIDiCADBCCDCAXDDCADAXAABCBDBCyDvAhaAHEJBA1CAANDAgfBAABAClBBFATFDoTAOABBaBYABAHsOAHATAHBTAHBTAHABHGaBDGDTBBKcFXCTBYATBaBHKTAcATCGfFAGJHUKJTDGBHAmiBAATAGAHGcAaAHFFBHBaAHDGBKJGCaBGATNBAcAGAHAGdHaBBmYBAAHKGABNKJGgHIFBaATCFABBHAYBGVHDFAHIFAHCFAHEBBTOBAGYHCBBTABAGKBEGXZAGFBAcBBFHHGoFAHXcAHfIAG1HAIAHAGAICHHIDHAIBGAHGGJHBTBKJTAFAGOHAIBBAGHBBGBBBGVBAGGBAGABCGDBBHAGAICHDBBIBBBIBHAGABHIABDGBBAGCHBBBKJGBYBMFaAYAGATAHABBHBIABAGFBDGBBBGVBAGGBAGBBAGBBAGBBBHABAICHBBDHBBBHCBCHABGGDBAGABGKJHBGCHATABJHBIABAGIBAGCBAGVBAGGBAGBBAGEBBHAGAICHEBAHBIABAIBHABBGABOGBHBBBKJTAYABGGAHFBAHAIBBAGHBBGBBBGVBAGGBAGBBAGEBBHAGAIAHAIAHDBBIBBBIBHABGHBIABDGBBAGCHBBBKJaAGAMFBJHAGABAGFBCGCBAGDBCGBBAGABAGBBCGBBCGCBCGLBDIBHAIBBCICBAICHABBGABFIABNKJMCaFYAaABEHAICHAGHBAGCBAGWBAGPBBHAGAHCIDBAHCBAHDBGHBBAGCBBGABBGBHBBBKJBGTAMGaAGAHAIBTAGHBAGCBAGWBAGJBAGEBBHAGAIAHAIEBAHAIBBAIBHBBGIBBFGBBAGBHBBBKJBAGBIABLHBIBGIBAGCBAGoHBGAICHDBAICBAICHAGAaABDGCIAMGGCHBBBKJMIaAGFBAHAIBBAGRBCGXBAGIBAGABBGGBCHABDICHCBAHABAIHBFKJBBIBTABLGvHAGBHGBDYAGFFAHHTAKJTBBkGBBAGABAGEBAGXBAGABAGJHAGBHIGABBGEBAFABAHGBAKJBBGDBfGAaCTOaATAaCHBaFKJMJaAHAaAHAaAHAPAQAPAQAIBGHBAGjBDHNIAHETAHBGEHKBAHjBAaHHAaFBAaBTEaDTBBkGqIBHDIAHFIAHBIBHBGAKJTFGFIBHBGDHCGAICGBIGGCHDGMHAIBHBIFHAGAIAKJICHAaBClBACABECABBDqTAFADCmIFAABAGDBBGGBAGABAGDBBGoBAGDBBGgBAGDBBGGBAGABAGDBBGOBAG4BAGDBBmCBAABBHCTIMTBCGPaJBFiVBAABBDFBBOAmrJAAaATAGQUAGZPAQABCmKBAATCLCGHBGGRHCIABIGSHBIATBBIGRHBBLGMBAGCBAHBBLGzHBIAHGIHHAIBHKTCFATCYAGAHABBKJBFMJBFTFOATDHCcAHAKJBFGiFAG0BGGEHBGhHAGABEmFBAABJGeBAHCIDHBICBDIBHAIFHCBDaABCTBKJGdBBGEBKGrBDGZBFKJMABCahGWHBIBHABBTBG0IAHAIAHGBAHAIAHAIBHHIFHJBBHAKJBFKJBFTGFATFBBHNJAHPBwHDIAGuHAIAHEIAHAIEHAIBGHBCKJTGaJHIaITBBAHBIAGdIAHDIBHBIAHCGBKJGrHAIAHBICHAIAHCIBBHTDGjIHHHIBHBBCTEKJBCGCKJGdFFTBDIBGCqBBCCTHBHHCTAHMIAHGGDHAGFHAGBIAHBGABEDrF+DMFADhFkH/gVCAADHghBAADHCHDFBBCFBBDHCHDHCHDFBBCFBBDHBACABACABACABACADHCHDNBBDHEHDHEHDHEHDEBADBCDEAZADAZCDCBADBCDEAZCDDBBDBCDBAZCDHCEZCBBDCBADBCDEAZBBAUKcEOFTBRASAPARBSAPARATHVAWAcEUATIRASATDNBTCXAPAQATKXATANATJUAcEBAcJMAFABBMFXCPAQAFAMJXCPAQABAFMBCYgBOHMJDHAJCHLBOaBCAaDCAaBDACCDBCCDAaACAaBXACEaFCAaACAaACAaACDaADACDDAGDDAaBDBCBXECADDaAXAaBDAaAMPLiCADALDMAaBBDXEaEXBaDXAaBXAaBXAaGXAaeXBaBXAaAXAae3LEAAaHPAQAPAQAaTXBaGPAQA6QBAAXAadXYanXF6EBAABYaKBUM76NBAAMV62CAAXAaIXAa1XH6uBAAXA63DAAPAQAPAQAPAQAPAQAPAQAPAQAPAQAMdarXEPAQAXePAQAPAQAPAQAPAQAPAQAXP6/DAA3CCAAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAX+PAQAPAQAXfPAQA3BEAAavXUaBXFamBBafBA6oBAACvDvABCCDBAFCCADDACADFFBCBgjBAADAaFADHCCADABETDMATBDlBADABEDABBG3BGFATABNHAGWBIGGBAGGBAGGBAGGBAGGBAGGBAGGBAGGBAHfTBRASARASATCRASATARASATIOATBOATARASATBRASAPAQAPAQAPAQAPAQATEFATJOBTDOATAPATMaBTCPAQAPAQAPAQAPAQAOABhaZBA6YBAABL6VDAABZaLBDUATCaAFAGALAPAQAPAQAPAQAPAQAPAQAaBPAQAPAQAPAQAPAQAOAPAQBaALIHDIBOAFEaBLCFAGATAaBBAmVBAABBHBZBFBGAOAmZBAATAFCGABEGqBAmdBAABAaBMDaJGfajBLGPaeBAMJadMHaAMOafMJamMO6/EAAm/mBAa/mUIFAFAm2RAABCa2BIGnFFTBmLEAAFATCGPKJGBBTAtGAHAJCTAHJTAFAAbFBHBmFBAALJHBTFBHZWFIZBANDBA9FADHADCAAJFAZBADGAADDBATCDABCDAPCCADBECADABADABADAADBXFCCADAGAFBDAGGHAGCHAGDHAGWIBHBIAaDHABCMFaBYAaABFGzTDBHIBGxIPHBBHTBKJBFHRGFTCGATAGBHAKJGbHHTBGWHKIBBKTAGcBCHCIAGuHAIBHDIBHBICTMBAFAKJBDTBGEHAFAGIKJGEBAGoHFIBHBIBHBBIGCHAGHHAIABBKJBBTDGPFAGFaCGAIAHAIAGxHAGAHCGBHBGEHBGAHAGABXGBFATBGKIAHBIBTBGAFBIAHABJGFBBGFBBGFBIGGBAGGBADqZAFDDIFAZBBDjPBAAGiIBHAIBHAIBTAIAHABBKJBFmjuCABLGWBDGwhDgAA9/jBAmtFAABBmpBAABlDGBLDEBEGAHAGJXAGMBAGEBAGABAGBBAGBBAmrBAAZQBPmqFAAQAPAaPG/BBG1BGaABfGLYAaCHPTGPAQATABFHPTAOBNBPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQATBPAQATDNCTCBATDOAPAQAPAQAPAQATCXAOAXCBATAYATBBDGEBAmGCAABBcABATCYATCPAQATAXATAOATBKJTBXCTBCZPATAQAZANAZADZPAXAQAXAPAQATAPAQATBGJFAGsFBGeBCGFBBGFBBGFBBGCBCYBXAZAaAYBBAaAXDaBBJcCaBBBGLBAGZBAGSBAGBBAGOBBGNBhm6BAABETCBDMsBCaIL0MDaQMBaCBAaMBCaABuasHAhBCAAGcBCGwBOHAMaBDGfMDBIGTLAGHLABEGlHEBEGdBATAGjBDGHTALEBpCnDnmNBAABBKJBFCjBDDjBDGnBHGzBKTACKBACOBACGBACBBADKBADOBADGBADBhCBAAm2EAABIGVBJGHBXFFBAFpBAFIhEBAAGFBBGABAGrBAGBBCGABBGWBATAMHGWaBMGGeBHMIBvGSBAGBBEMEGVMFBCTAGZBETAB/G3BDMBGBMPBBMtGAHCBAHBBEHDGDBAGCBAGcBBHCBDHAMIBGTIBGGcMBTAGcMCBfGHaAGbHBBDMETGBIG1BCTGGVBBMHGSBEMHGRBGTDBLMGhPBAAmIBAAB2CyBMDyBGMFGjHDBHKJhlEAAMeBAGpBAHBOABBGBhKBAAHCGcMJGABHGVHKMDTEBVGRHDTDBlGUMGBTGWBIIAHAIAG0HOTGBDMTKJHAGBHBGABIHCIAGsICHDIBHBTBcATDHABJcABBGYBGKJBFHCGjHEIAHHBAKJTDGAIBGABHGiHATBGABIHBIAGvICHIIBGDTDHDTAIAHAKJGATAGATCBAMTBKGRBAGYICHCIBHAIAHBTFHAGBHAB9GGBAGABAGDBAGOBAGJTABFGuHAICHHBEKJBFHBIBBAGHBBGBBBGVBAGGBAGBBAGEBAHBGAIBHAIDBBIBBBICBBGABFIABEGEIBBBHGBCHEhKCAAG0ICHHIBHCIAHAGDTEKJTBBATAHAGCBdGvICHFIAHAIDHBIAHBGBTAGABHKJhlCAAGuICHDBBIDHBIAHBTWGDHBBhGvICHHIBHAIAHBTCGABKKJBFTMBSGqHAIAHAIBHFIAHAGATABFKJB1GaBBHCIBHDIAHEBDKJMBTCaAGGh4CAAGrICHIIAHBTAhjBAACfDfKJMIBLGHBBGABBGHBAGBBAGXIFBAIBBBHBIAHAGAIAGAIAHATCBIKJhFBAAGHBBGmICHDBBHBIDHAGATAGAIABaGAHJGnHFIAGAHDTHHABHGAHFIBHCGtHMIAHBTCGATEBMmIBAABGTJh1DAAGIBAGkIAHGBAHFIAHAGATEBJKJMSBCTBGdBBHVBAIAHGIAHBIAHBhIBAAGGBAGBBAGlHFBCHABAHBBAHGGAHABHKJBFGFBAGBBAGfIEBAHBBAIBHAIAHAGABGKJh1EAAGSHBIBTBBGHBGAIAGMBAGhIBHEBCIBHAIAHATMKJhVBAAGABOMUaHYDaQBMTAmZOAAhlBAAruBAABATEBKmDDAAhLpAAmgBAATBBMmvQAAcPHAGFHOhp+AAmGJAAh4GCAm4IAABGGeBAKJBDTBmOBAABAKJBFGdBBHETABJGvHGTEaDFDTAaABJKJBAMGBAGUBEGShvKAACfDfMWTDhkBAAmKBAABDHAGAI2BGHDFMB/FBTAFAHABKIBBNm3fBABHmVTAABpGIhmLCAFDBAFGBAFBBAmiEAABOGABcGCBBGABNGDBHmLGAAhDkAAmqBAABEGMBCGIBGGJBBaAHBTAcDhbJBAHtBBHWBI6zBAAB761DAABJamBBa7IBHCaCIFcHHHaBHGadHDa8BU6BBAAHCaAh5BAAMTBLMTBL6WBAABIMYhGCAACZDZCZDGBADRCZDZCABACBBBCABBCBBBCDBACHDDBADABADGBADKCZDZCBBACDBBCHBACGBADZCBBACDBACEBACABCCGBADZCZDZCZDZCZDZCZDZCZDZCZDbBBCYXADYXADFCYXADYXADFCYXADYXADFCYXADYXADFCYXADYXADFCADABBKx6/HAAH2aDHxaHHAaNHAaBTEBOHEBAHOhPRAADJGADTBFDFhUDAAHGBAHQBBHGBAHBBAHEBEF9BgHAhvBAAGsBCHGFGBBKJBDGAaAh/EAAGdHABQGrHDKJBEYAhPHAAGaFAHDKJhlLAAGGBAGDBAGBBAGOBAmEDAABBMIHGBoChDhHGFABDKJBDTBhQMAAM6aAMCYAMDhLBAAMsaAMOhBDAAGDBAGaBAGBBAGABBGABAGJBAGDBAGABAGABFGABDGABAGABAGABAGCBAGBBAGABBGABAGABAGABAGABAGABAGBBAGABBGDBAGGBAGDBAGDBAGABAGJBAGQBEGCBAGEBAGQBzXBhNEAAarBD6jBAABLaOBBaOBAaOBAakBJMM6gCAAB3acBMarBDaIBGaBBNaFhZCAA66DAAZE6XLAABDaQBCaMBC62BAABD6eBAABFaLBDaABOaLBDa3BHaJBFanBHadBBaBhNBAA6TFAABLaNBBaMBCaIBGatBAaGBHaNBDaIBGaIBG6SCAABAa2BkKJhFQAAmfbKABfm5ABABFmdDAABBmBaBABNmw0BAhewAAmdIAAhhXAAmKNBABEmfBBAhQxtCcABd8fBAAh/BAAnvDAAhP4PA99/PABB99/PA".split(""),o=C.map((()=>[]));let u=0,s=0;for(;s<t.length;){const e=S[t[s]],a=(31&e)-2;let i=1+S[t[s+1]];switch(32&e?(i+=S[t[s+2]]<<6,i+=S[t[s+3]]<<12,i+=S[t[s+4]]<<18,s+=5):s+=2,a){case-2:{let e=0;for(let t=u;t<u+i;++t)o[e].push(n(t)),e=(e+1)%2;break}case-1:break;default:{const e=o[a];1===i?e.push(n(u)):e.push(r(u,u+i-1));break}}u+=i}const c=new Map;return C.forEach(((t,n)=>{const r=o[n].reduce(i,a);e.set(t,r);const u=t.charAt(0),s=c.get(u)||[];c.set(u,s),s.push(r)})),c.forEach(((t,n)=>{e.set(n,t.reduce(i,a))})),e}();function P(e){return 32===e||9===e||10===e||13===e}const M=[n(k(":")),r(k("A"),k("Z")),n(k("_")),r(k("a"),k("z")),r(192,214),r(216,246),r(192,214),r(216,246),r(248,767),r(880,893),r(895,8191),r(8204,8205),r(8304,8591),r(11264,12271),r(12289,55295),r(63744,64975),r(65008,65533),r(65536,983039)].reduce(i),U=[M,n(k("-")),n(k(".")),r(k("0"),k("9")),n(183),r(768,879),r(8255,8256)].reduce(i),j=G.get("Nd"),H=O(j),_=D(r(0,1114111),[G.get("P"),G.get("Z"),G.get("C")].reduce(i)),X=O(_);function L(e){return 10!==e&&13!==e&&!F(e)}const Y={s:P,S:O(P),i:M,I:O(M),c:U,C:O(U),d:j,D:H,w:_,W:X},J=f("*"),q=f("\\"),Q=f("{"),K=f("}"),W=f("["),V=f("]"),$=f("^"),z=f("$"),Z=f(","),ee=f("-"),te=f("("),ne=f(")"),re=f("."),oe=f("|"),ae=f("+"),ie=f("?"),ue=f("-["),se=k("0");function ce(e){function t(e){return new Set(e.split("").map((e=>k(e))))}function a(e,t){const n=e.codePointAt(t);return void 0===n?p(t,["any character"]):c(t+String.fromCodePoint(n).length,n)}const u="xpath"===e.language?b(q,m([h(f("n"),(()=>10)),h(f("r"),(()=>13)),h(f("t"),(()=>9)),h(m([q,oe,re,ee,$,ie,J,ae,Q,K,z,te,ne,W,V]),(e=>k(e)))])):b(q,m([h(f("n"),(()=>10)),h(f("r"),(()=>13)),h(f("t"),(()=>9)),h(m([q,oe,re,ee,$,ie,J,ae,Q,K,te,ne,W,V]),(e=>k(e)))]));function s(e,n){const r=t(n);return v(f(e),g(d(a,(e=>r.has(e)),n.split(""))),((e,t)=>function(e){const t=G.get(e);if(null==t)throw new Error(`${e} is not a valid unicode category`);return t}(null===t?e:e+String.fromCodePoint(t))))}const l=m([s("L","ultmo"),s("M","nce"),s("N","dlo"),s("P","cdseifo"),s("Z","slp"),s("S","mcko"),s("C","cfon")]),x=[r(k("a"),k("z")),r(k("A"),k("Z")),r(k("0"),k("9")),n(45)].reduce(i),C=h(b(f("Is"),function(e){return(t,n)=>{const r=e(t,n);return r.success?c(r.offset,t.slice(n,r.offset)):r}}(w(d(a,x,["block identifier"])))),(t=>function(e,t){const n=R.get(e);if(void 0===n){if(t)return o;throw new Error(`The unicode block identifier "${e}" is not known.`)}return n}(t,"xpath"!==e.language))),S=m([l,C]),F=E(f("\\p{"),S,K,!0),P=h(E(f("\\P{"),S,K,!0),O),M=b(q,h(m("sSiIcCdDwW".split("").map((e=>f(e)))),(e=>Y[e]))),U=h(re,(()=>L)),j=m([M,F,P]),H=t("\\[]"),_=d(a,(e=>!H.has(e)),["unescaped character"]),X=m([u,_]),ce=m([h(ee,(()=>null)),X]),le=v(ce,b(ee,ce),r);function pe(e,t){return[e].concat(t||[])}const fe=h(function(e){return(t,n)=>{const r=e(t,n);return r.success?c(n,r.value):r}}(m([V,ue])),(()=>null)),he=k("-"),de=m([h(B(B(ee,T(W,["not ["])),fe),(()=>he)),b(T(ee,["not -"]),X)]),me=m([v(h(de,n),m([function(e,t){return me(e,t)},fe]),pe),v(m([le,j]),m([ye,fe]),pe)]),ge=m([v(h(X,n),m([me,fe]),pe),v(m([le,j]),m([ye,fe]),pe)]);function ye(e,t){return ge(e,t)}const ve=h(ge,(e=>e.reduce(i))),we=h(b($,ve),O),Ae=v(m([b(T($,["not ^"]),ve),we]),g(b(ee,(function(e,t){return xe(e,t)}))),D),xe=E(W,Ae,V,!0),be="xpath"===e.language?m([h(u,n),j,xe,U,h($,(()=>e=>-1===e)),h(z,(()=>e=>-2===e))]):m([h(u,n),j,xe,U]),Be="xpath"===e.language?t(".\\?*+{}()|^$[]"):t(".\\?*+{}()|[]"),Ee=d(a,(e=>!Be.has(e)),["NormalChar"]),Te=h(b(q,v(h(d(a,r(k("1"),k("9")),["digit"]),(e=>e-se)),y(h(d(a,r(se,k("9")),["digit"]),(e=>e-se))),((e,t)=>{t.reduce(((e,t)=>10*e+t),e)}))),(e=>{throw new Error("Backreferences in XPath patterns are not yet implemented.")})),Ne="xpath"===e.language?m([h(Ee,(e=>({kind:"predicate",value:n(e)}))),h(be,(e=>({kind:"predicate",value:e}))),h(E(te,b(g(f("?:")),De),ne,!0),(e=>({kind:"regexp",value:e}))),Te]):m([h(Ee,(e=>({kind:"predicate",value:n(e)}))),h(be,(e=>({kind:"predicate",value:e}))),h(E(te,De,ne,!0),(e=>({kind:"regexp",value:e})))]),Ie=h(w(h(d(a,r(se,k("9")),["digit"]),(e=>e-se))),(e=>e.reduce(((e,t)=>10*e+t)))),Ce=m([v(Ie,b(Z,Ie),((e,t)=>{if(t<e)throw new Error("quantifier range is in the wrong order");return{min:e,max:t}})),v(Ie,Z,(e=>({min:e,max:null}))),h(Ie,(e=>({min:e,max:e})))]),Se="xpath"===e.language?v(m([h(ie,(()=>({min:0,max:1}))),h(J,(()=>({min:0,max:null}))),h(ae,(()=>({min:1,max:null}))),E(Q,Ce,K,!0)]),g(ie),((e,t)=>e)):m([h(ie,(()=>({min:0,max:1}))),h(J,(()=>({min:0,max:null}))),h(ae,(()=>({min:1,max:null}))),E(Q,Ce,K,!0)]),ke=v(Ne,h(g(Se),(e=>null===e?{min:1,max:1}:e)),((e,t)=>[e,t])),Fe=y(ke),Oe=v(Fe,y(b(oe,N(Fe))),((e,t)=>[e].concat(t)));function De(e,t){return Oe(e,t)}const Re=function(e){return v(e,I,A)}(Oe);return function(e){let t;try{t=Re(e,0)}catch(t){throw new Error(`Error parsing pattern "${e}": ${t instanceof Error?t.message:t}`)}return t.success?t.value:function(e,t,n){const r=n.map((e=>`"${e}"`));throw new Error(`Error parsing pattern "${e}" at offset ${t}: expected ${r.length>1?"one of "+r.join(", "):r[0]} but found "${e.slice(t,t+1)}"`)}(e,t.offset,t.expected)}}function le(e){return[...e].map((e=>e.codePointAt(0)))}e.compile=function(e,n={language:"xsd"}){const r=ce(n)(e),o=t.compileVM((e=>{s(e,r,"xpath"===n.language),e.accept()}));return function(e){const t="xpath"===n.language?[-1,...le(e),-2]:le(e);return o.execute(t).success}},Object.defineProperty(e,"__esModule",{value:!0})}((n="undefined"!=typeof globalThis?globalThis:n||self).xspattern={},n.whynot),(r=this).fontoxpath=function(e,t){const n={};var r;function o(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var a="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function u(e,t){if(t)e:{var n=i;e=e.split(".");for(var r=0;r<e.length-1;r++){var o=e[r];if(!(o in n))break e;n=n[o]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&a(n,e,{configurable:!0,writable:!0,value:t})}}function s(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:o(e)}}function l(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function p(e){return e instanceof Array?e:l(c(e))}u("Symbol",(function(e){function t(e,t){this.h=e,a(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.h};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(o){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(o||"")+"_"+r++,o)}})),u("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=i[t[n]];"function"==typeof r&&"function"!=typeof r.prototype[e]&&a(r.prototype,e,{configurable:!0,writable:!0,value:function(){return s(o(this))}})}return e})),u("Symbol.asyncIterator",(function(e){return e||Symbol("Symbol.asyncIterator")}));var f,h="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)f=Object.setPrototypeOf;else{var d;e:{var m={};try{m.__proto__={a:!0},d=m.a;break e}catch(e){}d=!1}f=d?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var g=f;function y(e,t){if(e.prototype=h(t.prototype),e.prototype.constructor=e,g)g(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.zc=t.prototype}function v(){this.B=!1,this.o=null,this.l=void 0,this.h=1,this.da=0,this.v=null}function w(e){if(e.B)throw new TypeError("Generator is already running");e.B=!0}function A(e,t){e.v={kc:t,mc:!0},e.h=e.da}function x(e){this.h=new v,this.o=e}function b(e,t,n,r){try{var o=t.call(e.h.o,n);if(!(o instanceof Object))throw new TypeError("Iterator result "+o+" is not an object");if(!o.done)return e.h.B=!1,o;var a=o.value}catch(t){return e.h.o=null,A(e.h,t),B(e)}return e.h.o=null,r.call(e.h,a),B(e)}function B(e){for(;e.h.h;)try{var t=e.o(e.h);if(t)return e.h.B=!1,{value:t.value,done:!1}}catch(t){e.h.l=void 0,A(e.h,t)}if(e.h.B=!1,e.h.v){if(t=e.h.v,e.h.v=null,t.mc)throw t.kc;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function E(e){this.next=function(t){return w(e.h),e.h.o?t=b(e,e.h.o.next,t,e.h.s):(e.h.s(t),t=B(e)),t},this.throw=function(t){return w(e.h),e.h.o?t=b(e,e.h.o.throw,t,e.h.s):(A(e.h,t),t=B(e)),t},this.return=function(t){return function(e,t){w(e.h);var n=e.h.o;return n?b(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.h.return):(e.h.return(t),B(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function T(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}v.prototype.s=function(e){this.l=e},v.prototype.return=function(e){this.v={return:e},this.h=this.da},u("Promise",(function(e){function t(e){this.o=0,this.v=void 0,this.h=[],this.da=!1;var t=this.B();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.h=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.o=function(e){if(null==this.h){this.h=[];var t=this;this.v((function(){t.l()}))}this.h.push(e)};var o=i.setTimeout;n.prototype.v=function(e){o(e,0)},n.prototype.l=function(){for(;this.h&&this.h.length;){var e=this.h;this.h=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.B(e)}}}this.h=null},n.prototype.B=function(e){this.v((function(){throw e}))},t.prototype.B=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.la),reject:e(this.l)}},t.prototype.la=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.ab(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.S(e):this.s(e)}},t.prototype.S=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.Ba(t,e):this.s(e)},t.prototype.l=function(e){this.ta(2,e)},t.prototype.s=function(e){this.ta(1,e)},t.prototype.ta=function(e,t){if(0!=this.o)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.o);this.o=e,this.v=t,2===this.o&&this.pa(),this.A()},t.prototype.pa=function(){var e=this;o((function(){if(e.K()){var t=i.console;void 0!==t&&t.error(e.v)}}),1)},t.prototype.K=function(){if(this.da)return!1;var e=i.CustomEvent,t=i.Event,n=i.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=i.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.v,n(e))},t.prototype.A=function(){if(null!=this.h){for(var e=0;e<this.h.length;++e)a.o(this.h[e]);this.h=null}};var a=new n;return t.prototype.ab=function(e){var t=this.B();e.rb(t.resolve,t.reject)},t.prototype.Ba=function(e,t){var n=this.B();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{o(e(t))}catch(e){a(e)}}:t}var o,a,i=new t((function(e,t){o=e,a=t}));return this.rb(r(e,o),r(n,a)),i},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.rb=function(e,t){function n(){switch(r.o){case 1:e(r.v);break;case 2:t(r.v);break;default:throw Error("Unexpected state: "+r.o)}}var r=this;null==this.h?a.o(n):this.h.push(n),this.da=!0},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var o=c(e),a=o.next();!a.done;a=o.next())r(a.value).rb(t,n)}))},t.all=function(e){var n=c(e),o=n.next();return o.done?r([]):new t((function(e,t){function a(t){return function(n){i[t]=n,0==--u&&e(i)}}var i=[],u=0;do{i.push(void 0),u++,r(o.value).rb(a(i.length-1),t),o=n.next()}while(!o.done)}))},t}));var I="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var o in r)N(r,o)&&(e[o]=r[o])}return e};function C(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function S(e,t){return e=void 0!==e?String(e):" ",0<t&&e?e.repeat(Math.ceil(t/e.length)).substring(0,t):""}function k(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,o=0;o<r;o++){var a=e[o];if(t.call(n,a,o,e))return{Jb:o,Qb:a}}return{Jb:-1,Qb:void 0}}function F(e){return e||Array.prototype.fill}function O(e,t){e instanceof String&&(e+="");var n=0,r=!1,o={next:function(){if(!r&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return r=!0,{done:!0,value:void 0}}};return o[Symbol.iterator]=function(){return o},o}function D(e,t){if(!("0"!==e&&"-0"!==e||"0"!==t&&"-0"!==t))return 0;var n=/(?:\+|(-))?(\d+)?(?:\.(\d+))?/;e=n.exec(e+"");var r=n.exec(t+""),o=!e[1],a=!r[1];return t=(e[2]||"").replace(/^0*/,""),n=(r[2]||"").replace(/^0*/,""),e=e[3]||"",r=r[3]||"",o&&!a?1:!o&&a?-1:(o=o&&a,t.length>n.length?o?1:-1:t.length<n.length?o?-1:1:t>n?o?1:-1:t<n?o?-1:1:(t=Math.max(e.length,r.length),(n=e.padEnd(t,"0"))>(t=r.padEnd(t,"0"))?o?1:-1:n<t?o?-1:1:0))}function R(e,t){return!(-1<(e=e.toString()).indexOf(".")&&0===t)&&(!(e=/^[-+]?0*([1-9]\d*)?(?:\.((?:\d*[1-9])*)0*)?$/.exec(e))[2]||e[2].length<=t)}function G(e,t){switch(t){case"required":return/(Z)|([+-])([01]\d):([0-5]\d)$/.test(e.toString());case"prohibited":return!/(Z)|([+-])([01]\d):([0-5]\d)$/.test(e.toString());case"optional":return!0}}function P(e){switch(e){case 1:case 0:case 6:case 3:case 18:case 22:case 21:case 20:case 23:case 44:return{};case 4:return{na:R,ya:function(e,t){return 1>D(e,t)},xc:function(e,t){return 0>D(e,t)},za:function(e,t){return-1<D(e,t)},yc:function(e,t){return 0<D(e,t)}};case 9:case 8:case 7:case 11:case 12:case 13:case 15:case 14:return{Ea:G};default:return null}}u("Object.assign",(function(e){return e||I})),u("String.prototype.repeat",(function(e){return e||function(e){var t=C(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}})),u("String.prototype.padEnd",(function(e){return e||function(e,t){var n=C(this,null,"padStart");return n+S(t,e-n.length)}})),u("WeakMap",(function(e){function t(e){if(this.h=(s+=Math.random()+1).toString(),e){e=c(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function o(e){if(!N(e,u)){var t=new n;a(e,u,{value:t})}}function i(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&o(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(e){return!1}}())return e;var u="$jscomp_hidden_"+Math.random();i("freeze"),i("preventExtensions"),i("seal");var s=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(o(e),!N(e,u))throw Error("WeakMap key fail: "+e);return e[u][this.h]=t,this},t.prototype.get=function(e){return r(e)&&N(e,u)?e[u][this.h]:void 0},t.prototype.has=function(e){return r(e)&&N(e,u)&&N(e[u],this.h)},t.prototype.delete=function(e){return!!(r(e)&&N(e,u)&&N(e[u],this.h))&&delete e[u][this.h]},t})),u("Map",(function(e){function t(){var e={};return e.Ga=e.next=e.head=e}function n(e,t){var n=e.h;return s((function(){if(n){for(;n.head!=e.h;)n=n.Ga;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++i,a.set(t,n)):n="p_"+t;var r=e.o[n];if(r&&N(e.o,n))for(e=0;e<r.length;e++){var o=r[e];if(t!=t&&o.key!=o.key||t===o.key)return{id:n,list:r,index:e,ka:o}}return{id:n,list:r,index:-1,ka:void 0}}function o(e){if(this.o={},this.h=t(),this.size=0,e){e=c(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),o=r.next();return!o.done&&o.value[0]==t&&"s"==o.value[1]&&!((o=r.next()).done||4!=o.value[0].x||"t"!=o.value[1]||!r.next().done)}catch(e){return!1}}())return e;var a=new WeakMap;o.prototype.set=function(e,t){var n=r(this,e=0===e?0:e);return n.list||(n.list=this.o[n.id]=[]),n.ka?n.ka.value=t:(n.ka={next:this.h,Ga:this.h.Ga,head:this.h,key:e,value:t},n.list.push(n.ka),this.h.Ga.next=n.ka,this.h.Ga=n.ka,this.size++),this},o.prototype.delete=function(e){return!(!(e=r(this,e)).ka||!e.list||(e.list.splice(e.index,1),e.list.length||delete this.o[e.id],e.ka.Ga.next=e.ka.next,e.ka.next.Ga=e.ka.Ga,e.ka.head=null,this.size--,0))},o.prototype.clear=function(){this.o={},this.h=this.h.Ga=t(),this.size=0},o.prototype.has=function(e){return!!r(this,e).ka},o.prototype.get=function(e){return(e=r(this,e).ka)&&e.value},o.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},o.prototype.keys=function(){return n(this,(function(e){return e.key}))},o.prototype.values=function(){return n(this,(function(e){return e.value}))},o.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},o.prototype[Symbol.iterator]=o.prototype.entries;var i=0;return o})),u("Array.prototype.find",(function(e){return e||function(e,t){return k(this,e,t).Qb}})),u("String.prototype.startsWith",(function(e){return e||function(e,t){var n=C(this,e,"startsWith"),r=n.length,o=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var a=0;a<o&&t<r;)if(n[t++]!=e[a++])return!1;return a>=o}})),u("Array.prototype.fill",(function(e){return e||function(e,t,n){var r=this.length||0;for(0>t&&(t=Math.max(0,r+t)),(null==n||n>r)&&(n=r),0>(n=Number(n))&&(n=Math.max(0,r+n)),t=Number(t||0);t<n;t++)this[t]=e;return this}})),u("Int8Array.prototype.fill",F),u("Uint8Array.prototype.fill",F),u("Uint8ClampedArray.prototype.fill",F),u("Int16Array.prototype.fill",F),u("Uint16Array.prototype.fill",F),u("Int32Array.prototype.fill",F),u("Uint32Array.prototype.fill",F),u("Float32Array.prototype.fill",F),u("Float64Array.prototype.fill",F),u("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],o="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof o){e=o.call(e);for(var a=0;!(o=e.next()).done;)r.push(t.call(n,o.value,a++))}else for(o=e.length,a=0;a<o;a++)r.push(t.call(n,e[a],a));return r}})),u("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),u("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var o=n[t];if(o===e||Object.is(o,e))return!0}return!1}})),u("String.prototype.includes",(function(e){return e||function(e,t){return-1!==C(this,e,"includes").indexOf(e,t||0)}})),u("Number.MAX_SAFE_INTEGER",(function(){return 9007199254740991})),u("Number.MIN_SAFE_INTEGER",(function(){return-9007199254740991})),u("Math.trunc",(function(e){return e||function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}})),u("Number.isFinite",(function(e){return e||function(e){return"number"==typeof e&&!isNaN(e)&&1/0!==e&&-1/0!==e}})),u("String.prototype.padStart",(function(e){return e||function(e,t){var n=C(this,null,"padStart");return S(t,e-n.length)+n}})),u("Array.prototype.keys",(function(e){return e||function(){return O(this,(function(e){return e}))}})),u("Number.isInteger",(function(e){return e||function(e){return!!Number.isFinite(e)&&e===Math.floor(e)}})),u("Number.isSafeInteger",(function(e){return e||function(e){return Number.isInteger(e)&&Math.abs(e)<=Number.MAX_SAFE_INTEGER}})),u("Array.prototype.findIndex",(function(e){return e||function(e,t){return k(this,e,t).Jb}})),u("String.prototype.endsWith",(function(e){return e||function(e,t){var n=C(this,e,"endsWith");void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var r=e.length;0<r&&0<t;)if(n[--t]!=e[--r])return!1;return 0>=r}})),u("String.fromCodePoint",(function(e){return e||function(e){for(var t="",n=0;n<arguments.length;n++){var r=Number(arguments[n]);if(0>r||1114111<r||r!==Math.floor(r))throw new RangeError("invalid_code_point "+r);65535>=r?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(r>>>10&1023|55296),t+=String.fromCharCode(1023&r|56320))}return t}})),u("String.prototype.codePointAt",(function(e){return e||function(e){var t=C(this,null,"codePointAt"),n=t.length;if(0<=(e=Number(e)||0)&&e<n){e|=0;var r=t.charCodeAt(e);return 55296>r||56319<r||e+1===n||56320>(e=t.charCodeAt(e+1))||57343<e?r:1024*(r-55296)+e+9216}}})),u("Set",(function(e){function t(e){if(this.h=new Map,e){e=c(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.h.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),o=r.next();return!o.done&&o.value[0]==t&&o.value[1]==t&&!(o=r.next()).done&&o.value[0]!=t&&4==o.value[0].x&&o.value[1]==o.value[0]&&r.next().done}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.h.set(e,e),this.size=this.h.size,this},t.prototype.delete=function(e){return e=this.h.delete(e),this.size=this.h.size,e},t.prototype.clear=function(){this.h.clear(),this.size=0},t.prototype.has=function(e){return this.h.has(e)},t.prototype.entries=function(){return this.h.entries()},t.prototype.values=function(){return this.h.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.h.forEach((function(r){return e.call(t,r,r,n)}))},t)})),u("Math.log10",(function(e){return e||function(e){return Math.log(e)/Math.LN10}})),u("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)N(e,t)&&n.push(e[t]);return n}})),u("Number.isNaN",(function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}})),u("Array.prototype.values",(function(e){return e||function(){return O(this,(function(e,t){return t}))}})),u("Object.getOwnPropertySymbols",(function(e){return e||function(){return[]}}));var M={},U={};function j(e){return/^([+-]?(\d*(\.\d*)?([eE][+-]?\d*)?|INF)|NaN)$/.test(e)}function H(e){return/^[_:A-Za-z][-._:A-Za-z0-9]*$/.test(e)}function _(e){return H(e)&&/^[_A-Za-z]([-._A-Za-z0-9])*$/.test(e)}function X(e){return 1===(e=e.split(":")).length?_(e[0]):2===e.length&&_(e[0])&&_(e[1])}function L(e){return!/[\u0009\u000A\u000D]/.test(e)}function Y(e){return _(e)}var J=new Map([[45,function(){return!0}],[46,function(){return!0}],[1,function(){return!0}],[0,function(e){return/^(0|1|true|false)$/.test(e)}],[6,function(e){return j(e)}],[3,j],[4,function(e){return/^[+-]?\d*(\.\d*)?$/.test(e)}],[18,function(e){return/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.test(e)}],[9,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[8,function(e){return/^(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[7,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[11,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[12,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[13,function(e){return/^--(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[15,function(e){return/^---(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[14,function(e){return/^--(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[22,function(e){return/^([0-9A-Fa-f]{2})*$/.test(e)}],[21,function(e){return new RegExp(/^((([A-Za-z0-9+/] ?){4})*((([A-Za-z0-9+/] ?){3}[A-Za-z0-9+/])|(([A-Za-z0-9+/] ?){2}[AEIMQUYcgkosw048] ?=)|(([A-Za-z0-9+/] ?)[AQgw] ?= ?=)))?$/).test(e)}],[20,function(){return!0}],[44,X],[48,L],[52,function(e){return L(e)&&!/^ | {2,}| $/.test(e)}],[51,function(e){return/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/.test(e)}],[50,function(e){return/^[-._:A-Za-z0-9]+$/.test(e)}],[25,H],[23,X],[24,_],[42,Y],[41,Y],[26,function(e){return _(e)}],[5,function(e){return/^[+-]?\d+$/.test(e)}],[16,function(e){return/^-?P[0-9]+(Y([0-9]+M)?|M)$/.test(e)}],[17,function(e){return/^-?P([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9]+)?S)?)?$/.test(e)}]]),q=Object.create(null);function Q(e,t){if(!q[t])throw Error("Unknown type");return{type:t,value:e}}[{D:0,name:59},{D:0,name:46,parent:59,L:{whiteSpace:"preserve"}},{D:0,name:19,parent:46},{D:0,name:1,parent:46},{D:0,name:0,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:4,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:6,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:3,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:18,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:9,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:8,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:7,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:11,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:12,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:13,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:15,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:14,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:22,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:21,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:20,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:23,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:44,parent:46,L:{whiteSpace:"collapse"}},{D:1,name:10,T:9,L:{whiteSpace:"collapse",Ea:"required"}},{D:1,name:48,T:1,L:{whiteSpace:"replace"}},{D:1,name:52,T:48,L:{whiteSpace:"collapse"}},{D:1,name:51,T:52,L:{whiteSpace:"collapse"}},{D:1,name:50,T:52,L:{whiteSpace:"collapse"}},{D:2,name:49,type:50,L:{minLength:1,whiteSpace:"collapse"}},{D:1,name:25,T:52,L:{whiteSpace:"collapse"}},{D:1,name:24,T:25,L:{whiteSpace:"collapse"}},{D:1,name:42,T:24,L:{whiteSpace:"collapse"}},{D:1,name:41,T:24,L:{whiteSpace:"collapse"}},{D:2,name:43,type:41,L:{minLength:1,whiteSpace:"collapse"}},{D:1,name:26,T:24,L:{whiteSpace:"collapse"}},{D:2,name:40,type:26,L:{minLength:1,whiteSpace:"collapse"}},{D:0,name:5,parent:4,L:{na:0,whiteSpace:"collapse"}},{D:1,name:27,T:5,L:{na:0,ya:"0",whiteSpace:"collapse"}},{D:1,name:28,T:27,L:{na:0,ya:"-1",whiteSpace:"collapse"}},{D:1,name:31,T:5,L:{na:0,ya:"9223372036854775807",za:"-9223372036854775808",whiteSpace:"collapse"}},{D:1,name:32,T:31,L:{na:0,ya:"2147483647",za:"-2147483648",whiteSpace:"collapse"}},{D:1,name:33,T:32,L:{na:0,ya:"32767",za:"-32768",whiteSpace:"collapse"}},{D:1,name:34,T:33,L:{na:0,ya:"127",za:"-128",whiteSpace:"collapse"}},{D:1,name:30,T:5,L:{na:0,za:"0",whiteSpace:"collapse"}},{D:1,name:36,T:30,L:{na:0,ya:"18446744073709551615",za:"0",whiteSpace:"collapse"}},{D:1,name:35,T:36,L:{na:0,ya:"4294967295",za:"0",whiteSpace:"collapse"}},{D:1,name:38,T:35,L:{na:0,ya:"65535",za:"0",whiteSpace:"collapse"}},{D:1,name:37,T:38,L:{na:0,ya:"255",za:"0",whiteSpace:"collapse"}},{D:1,name:29,T:30,L:{na:0,za:"1",whiteSpace:"collapse"}},{D:1,name:16,T:18,L:{whiteSpace:"collapse"}},{D:1,name:17,T:18,L:{whiteSpace:"collapse"}},{D:1,name:60,T:59},{D:3,name:39,Fa:[]},{D:1,name:61,T:60},{D:1,name:62,T:60},{D:0,name:53,parent:59},{D:1,name:54,T:53},{D:1,name:58,T:53},{D:1,name:47,T:53},{D:1,name:56,T:53},{D:1,name:57,T:53},{D:1,name:55,T:53},{D:3,name:2,Fa:[4,5,6,3]},{D:3,name:63,Fa:[]}].forEach((function(e){var t=e.name,n=e.L||{};switch(e.D){case 0:e=e.parent?q[e.parent]:null;var r=J.get(t)||null;q[t]={D:0,type:t,Na:n,parent:e,kb:r,Pa:P(t),Fa:[]};break;case 1:e=q[e.T],r=J.get(t)||null,q[t]={D:1,type:t,Na:n,parent:e,kb:r,Pa:e.Pa,Fa:[]};break;case 2:q[t]={D:2,type:t,Na:n,parent:q[e.type],kb:null,Pa:M,Fa:[]};break;case 3:e=e.Fa.map((function(e){return q[e]})),q[t]={D:3,type:t,Na:n,parent:null,kb:null,Pa:U,Fa:e}}}));var K=Q(!0,0),W=Q(!1,0);function V(e){return Error("FORG0006: "+(void 0===e?"A wrong argument type was specified in a function call.":e))}function $(e,t){this.done=e,this.value=t}var z=new $(!0,void 0);function Z(e){return new $(!1,e)}function ee(e,t){if(3===t.D)return!!t.Fa.find((function(t){return ee(e,t)}));for(;e;){if(e.type===t.type)return!0;if(3===e.D)return!!e.Fa.find((function(e){return te(e.type,t.type)}));e=e.parent}return!1}function te(e,t){return e===t||ee(q[e],q[t])}function ne(e){this.o=ye,this.h=e;var t=-1;this.value={next:function(){return++t>=e.length?z:Z(e[t])}}}function re(){this.value={next:function(){return z}}}function oe(e,t){this.type=e,this.value=t}(r=ne.prototype).sb=function(){return this},r.filter=function(e){var t=this,n=-1;return this.o.create({next:function(){for(n++;n<t.h.length&&!e(t.h[n],n,t);)n++;return n>=t.h.length?z:Z(t.h[n])}})},r.first=function(){return this.h[0]},r.O=function(){return this.h},r.ha=function(){if(te(this.h[0].type,53))return!0;throw V("Cannot determine the effective boolean value of a sequence with a length higher than one.")},r.Qa=function(){return this.h.length},r.G=function(){return!1},r.wa=function(){return!1},r.map=function(e){var t=this,n=-1;return this.o.create({next:function(){return++n>=t.h.length?z:Z(e(t.h[n],n,t))}},this.h.length)},r.M=function(e){return e(this.h)},r.Z=function(e){return e.multiple?e.multiple(this):e.default(this)},(r=re.prototype).sb=function(){return this},r.filter=function(){return this},r.first=function(){return null},r.O=function(){return[]},r.ha=function(){return!1},r.Qa=function(){return 0},r.G=function(){return!0},r.wa=function(){return!1},r.map=function(){return this},r.M=function(e){return e([])},r.Z=function(e){return e.empty?e.empty(this):e.default(this)};var ae={},ie=(ae[0]="xs:boolean",ae[1]="xs:string",ae[2]="xs:numeric",ae[3]="xs:double",ae[4]="xs:decimal",ae[5]="xs:integer",ae[6]="xs:float",ae[7]="xs:date",ae[8]="xs:time",ae[9]="xs:dateTime",ae[10]="xs:dateTimeStamp",ae[11]="xs:gYearMonth",ae[12]="xs:gYear",ae[13]="xs:gMonthDay",ae[14]="xs:gMonth",ae[15]="xs:gDay",ae[16]="xs:yearMonthDuration",ae[17]="xs:dayTimeDuration",ae[18]="xs:duration",ae[19]="xs:untypedAtomic",ae[20]="xs:anyURI",ae[21]="xs:base64Binary",ae[22]="xs:hexBinary",ae[23]="xs:QName",ae[24]="xs:NCName",ae[25]="xs:Name",ae[26]="xs:ENTITY",ae[27]="xs:nonPositiveInteger",ae[28]="xs:negativeInteger",ae[29]="xs:positiveInteger",ae[30]="xs:nonNegativeInteger",ae[31]="xs:long",ae[32]="xs:int",ae[33]="xs:short",ae[34]="xs:byte",ae[35]="xs:unsignedInt",ae[36]="xs:unsignedLong",ae[37]="xs:unsignedByte",ae[38]="xs:unsignedShort",ae[39]="xs:error",ae[40]="xs:ENTITIES",ae[41]="xs:IDREF",ae[42]="xs:ID",ae[43]="xs:IDREFS",ae[44]="xs:NOTATION",ae[45]="xs:anySimpleType",ae[46]="xs:anyAtomicType",ae[47]="attribute()",ae[48]="xs:normalizedString",ae[49]="xs:NMTOKENS",ae[50]="xs:NMTOKEN",ae[51]="xs:language",ae[52]="xs:token",ae[53]="node()",ae[54]="element()",ae[55]="document-node()",ae[56]="text()",ae[57]="processing-instruction()",ae[58]="comment()",ae[59]="item()",ae[60]="function(*)",ae[61]="map(*)",ae[62]="array(*)",ae[63]="none",ae),ue={"xs:boolean":0,"xs:string":1,"xs:numeric":2,"xs:double":3,"xs:decimal":4,"xs:integer":5,"xs:float":6,"xs:date":7,"xs:time":8,"xs:dateTime":9,"xs:dateTimeStamp":10,"xs:gYearMonth":11,"xs:gYear":12,"xs:gMonthDay":13,"xs:gMonth":14,"xs:gDay":15,"xs:yearMonthDuration":16,"xs:dayTimeDuration":17,"xs:duration":18,"xs:untypedAtomic":19,"xs:anyURI":20,"xs:base64Binary":21,"xs:hexBinary":22,"xs:QName":23,"xs:NCName":24,"xs:Name":25,"xs:ENTITY":26,"xs:nonPositiveInteger":27,"xs:negativeInteger":28,"xs:positiveInteger":29,"xs:nonNegativeInteger":30,"xs:long":31,"xs:int":32,"xs:short":33,"xs:byte":34,"xs:unsignedInt":35,"xs:unsignedLong":36,"xs:unsignedByte":37,"xs:unsignedShort":38,"xs:error":39,"xs:ENTITIES":40,"xs:IDREF":41,"xs:ID":42,"xs:IDREFS":43,"xs:NOTATION":44,"xs:anySimpleType":45,"xs:anyAtomicType":46,"attribute()":47,"xs:normalizedString":48,"xs:NMTOKENS":49,"xs:NMTOKEN":50,"xs:language":51,"xs:token":52,"node()":53,"element()":54,"document-node()":55,"text()":56,"processing-instruction()":57,"comment()":58,"item()":59,"function(*)":60,"map(*)":61,"array(*)":62};function se(e){return 2===e.g?ie[e.type]+"*":1===e.g?ie[e.type]+"+":0===e.g?ie[e.type]+"?":ie[e.type]}function ce(e){if("none"===e)throw Error('XPST0051: The type "none" could not be found');if(!e.startsWith("xs:")&&0<=e.indexOf(":"))throw Error("XPST0081: Invalid prefix for input "+e);var t=ue[e];if(void 0===t)throw Error('XPST0051: The type "'+e+'" could not be found');return t}function le(e){switch(e[e.length-1]){case"*":return{type:ce(e.substr(0,e.length-1)),g:2};case"?":return{type:ce(e.substr(0,e.length-1)),g:0};case"+":return{type:ce(e.substr(0,e.length-1)),g:1};default:return{type:ce(e),g:3}}}function pe(e){var t=e.value;if(te(e.type,53))return!0;if(te(e.type,0))return t;if(te(e.type,1)||te(e.type,20)||te(e.type,19))return 0!==t.length;if(te(e.type,2))return!isNaN(t)&&0!==t;throw V("Cannot determine the effective boolean value of a value with the type "+ie[e.type])}function fe(e,t){var n=this;this.B=ye,this.value={next:function(t){return null!==n.o&&n.h>=n.o?z:void 0!==n.v[n.h]?Z(n.v[n.h++]):(t=e.next(t)).done?(n.o=n.h,t):((n.l||2>n.h)&&(n.v[n.h]=t.value),n.h++,t)}},this.l=!1,this.v=[],this.h=0,this.o=void 0===t?null:t}function he(e,t){e.h=void 0===t?0:t}function de(e){this.v=ye,this.h=e;var t=!1;this.value={next:function(){return t?z:(t=!0,Z(e))}},this.o=null}(r=fe.prototype).sb=function(){return this.B.create(this.O())},r.filter=function(e){var t=this,n=-1,r=this.value;return this.B.create({next:function(o){for(n++,o=r.next(o);!o.done&&!e(o.value,n,t);)n++,o=r.next(0);return o}})},r.first=function(){if(void 0!==this.v[0])return this.v[0];var e=this.value.next(0);return he(this),e.done?null:e.value},r.O=function(){if(this.h>this.v.length&&this.o!==this.v.length)throw Error("Implementation error: Sequence Iterator has progressed.");var e=this.value;this.l=!0;for(var t=e.next(0);!t.done;)t=e.next(0);return this.v},r.ha=function(){var e=this.value,t=this.h;he(this);var n=e.next(0);if(n.done)return he(this,t),!1;if(te((n=n.value).type,53))return he(this,t),!0;if(!e.next(0).done)throw V("Cannot determine the effective boolean value of a sequence with a length higher than one.");return he(this,t),pe(n)},r.Qa=function(e){if(null!==this.o)return this.o;if(void 0!==e&&e)return-1;e=this.h;var t=this.O().length;return he(this,e),t},r.G=function(){return 0===this.o||null===this.first()},r.wa=function(){if(null!==this.o)return 1===this.o;var e=this.value,t=this.h;return he(this),e.next(0).done?(he(this,t),!1):(e=e.next(0),he(this,t),e.done)},r.map=function(e){var t=this,n=0,r=this.value;return this.B.create({next:function(o){return(o=r.next(o)).done?z:Z(e(o.value,n++,t))}},this.o)},r.M=function(e,t){var n,r=this.value,o=[],a=!0;return function(){for(var i=r.next(a?0:t);!i.done;i=r.next(t))a=!1,o.push(i.value);n=e(o).value}(),this.B.create({next:function(){return n.next(0)}})},r.Z=function(e){function t(e){r=e.value,-1!==(e=e.Qa(!0))&&(n.o=e)}var n=this,r=null;return this.B.create({next:function(o){return r?r.next(o):n.G()?(t(e.empty?e.empty(n):e.default(n)),r.next(o)):n.wa()?(t(e.m?e.m(n):e.default(n)),r.next(o)):(t(e.multiple?e.multiple(n):e.default(n)),r.next(o))}})},(r=de.prototype).sb=function(){return this},r.filter=function(e){return e(this.h,0,this)?this:this.v.create()},r.first=function(){return this.h},r.O=function(){return[this.h]},r.ha=function(){return null===this.o&&(this.o=pe(this.h)),this.o},r.Qa=function(){return 1},r.G=function(){return!1},r.wa=function(){return!0},r.map=function(e){return this.v.create(e(this.h,0,this))},r.M=function(e){return e([this.h])},r.Z=function(e){return e.m?e.m(this):e.default(this)};var me=new re;function ge(e,t){if(null===(e=void 0===e?null:e))return me;if(Array.isArray(e))switch(e.length){case 0:return me;case 1:return new de(e[0]);default:return new ne(e)}return e.next?new fe(e,void 0===t?null:t):new de(e)}var ye={create:ge,m:function(e){return new de(e)},empty:function(){return ge()},ba:function(){return ge(K)},W:function(){return ge(W)}};function ve(e){var t=[],n=e.value;return function(){var e=0;return ye.create({next:function(){if(void 0!==t[e])return t[e++];var r=n.next(0);return r.done?r:t[e++]=r}})}}function we(e,t,n){this.namespaceURI=t||null,this.prefix=e||"",this.localName=n}function Ae(e){var t=e.j,n=e.arity,r=void 0!==e.Sa&&e.Sa,o=void 0!==e.I&&e.I,a=e.localName,i=e.namespaceURI,u=e.i;for(e=e.value,oe.call(this,60,null),this.value=e,this.I=o,o=-1,e=0;e<t.length;e++)4===t[e]&&(o=e);-1<o&&(e=Array(n-(t.length-1)).fill(t[o-1]),t=t.slice(0,o).concat(e)),this.o=t,this.v=n,this.da=r,this.B=a,this.l=i,this.s=u}function xe(e,t){var n=[];return 2!==e&&1!==e||n.push("type-1-or-type-2"),n.push("type-"+e),t&&n.push("name-"+t),n}function be(e){var t=e.node.nodeType;if(2===t||1===t)var n=e.node.localName;return xe(t,n)}function Be(e){var t=e.nodeType;if(2===t||1===t)var n=e.localName;return xe(t,n)}function Ee(){}function Te(){}we.prototype.Ca=function(){return this.prefix?this.prefix+":"+this.localName:this.localName},y(Ae,oe),Ae.prototype.Sa=function(){return this.da},Ee.prototype.getAllAttributes=function(e,t){return t=void 0===t?null:t,1!==e.nodeType?[]:(e=Array.from(e.attributes),null===t?e:e.filter((function(e){return Be(e).includes(t)})))},Ee.prototype.getAttribute=function(e,t){return 1!==e.nodeType?null:e.getAttribute(t)},Ee.prototype.getChildNodes=function(e,t){return t=void 0===t?null:t,e=Array.from(e.childNodes),null===t?e:e.filter((function(e){return Be(e).includes(t)}))},Ee.prototype.getData=function(e){return 2===e.nodeType?e.value:e.data},Ee.prototype.getFirstChild=function(e,t){for(t=void 0===t?null:t,e=e.firstChild;e;e=e.nextSibling)if(null===t||Be(e).includes(t))return e;return null},Ee.prototype.getLastChild=function(e,t){for(t=void 0===t?null:t,e=e.lastChild;e;e=e.previousSibling)if(null===t||Be(e).includes(t))return e;return null},Ee.prototype.getNextSibling=function(e,t){for(t=void 0===t?null:t,e=e.nextSibling;e;e=e.nextSibling)if(null===t||Be(e).includes(t))return e;return null},Ee.prototype.getParentNode=function(e,t){return t=void 0===t?null:t,(e=2===e.nodeType?e.ownerElement:e.parentNode)&&(null===t||Be(e).includes(t))?e:null},Ee.prototype.getPreviousSibling=function(e,t){for(t=void 0===t?null:t,e=e.previousSibling;e;e=e.previousSibling)if(null===t||Be(e).includes(t))return e;return null},(r=Te.prototype).insertBefore=function(e,t,n){return e.insertBefore(t,n)},r.removeAttributeNS=function(e,t,n){return e.removeAttributeNS(t,n)},r.removeChild=function(e,t){return e.removeChild(t)},r.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},r.setData=function(e,t){e.data=t};var Ne=new Te;function Ie(e){this.h=e}function Ce(e){return void 0!==e.Ta}function Se(e,t,n){var r=null;return t&&(Ce(t.node)?r={F:t.F,offset:n,parent:t.node}:t.F&&(r=t.F)),{node:e,F:r}}function ke(e){this.h=e,this.o=[]}function Fe(e,t,n){return e.getAllAttributes(t.node,void 0===n?null:n).map((function(e){return Se(e,t,e.nodeName)}))}function Oe(e,t,n){return Ce(t=t.node)?(e=t.attributes.find((function(e){return n===e.name})))?e.value:null:(e=e.h.getAttribute(t,n))?e:null}function De(e,t,n){return e.getChildNodes(t.node,void 0===n?null:n).map((function(e,n){return Se(e,t,n)}))}function Re(e,t){return e.getData(t.node)}function Ge(e,t,n){var r=t.node;return Ce(r)?e=r.childNodes[0]:((n=e.h.getFirstChild(r,void 0===n?null:n))&&10===n.nodeType&&(n=e.h.getNextSibling(n)),e=n),e?Se(e,t,0):null}function Pe(e,t,n){n=void 0===n?null:n;var r=t.node;return Ce(r)?(e=r.childNodes.length-1,r=r.childNodes[e]):((r=e.h.getLastChild(r,n))&&10===r.nodeType&&(r=e.h.getPreviousSibling(r)),e=e.getChildNodes(t.node,n).length-1),r?Se(r,t,e):null}function Me(e,t,n){n=void 0===n?null:n;var r=t.node,o=t.F;if(Ce(r)){if(o)var a=o.offset+1,i=o.parent.childNodes[a]}else{if(!o){for(i=r;i&&(!(i=e.h.getNextSibling(i,n))||10===i.nodeType););return i?{node:i,F:null}:null}a=o.offset+1;var u=Ue(e,t,null);i=e.getChildNodes(u.node,n)[a]}return i?Se(i,u||Ue(e,t,n),a):null}function Ue(e,t,n){n=void 0===n?null:n;var r=t.node,o=t.F;if(o)"number"==typeof o.offset&&r===o.parent.childNodes[o.offset]||"string"==typeof o.offset&&r===o.parent.attributes.find((function(e){return o.offset===e.nodeName}))?(e=o.parent,t=o.F):(e=e.getParentNode(r,n),t=o);else{if(Ce(r))return null;e=e.getParentNode(r,n),t=null}return e?{node:e,F:t}:null}function je(e,t,n){n=void 0===n?null:n;var r=t.node,o=t.F;if(Ce(r)){if(o)var a=o.offset-1,i=o.parent.childNodes[a]}else{if(!o){for(i=r;i&&(!(i=e.h.getPreviousSibling(i,n))||10===i.nodeType););return i?{node:i,F:null}:null}a=o.offset-1;var u=Ue(e,t,null);i=e.getChildNodes(u.node,n)[a]}return i?Se(i,u||Ue(e,t,n),a):null}function He(e,t,n,r,o){return o.M((function(e){var t=c(e).next().value;return r.M((function(e){e=c(e).next().value;var n=t.value;if(0>=n||n>e.P.length)throw Error("FOAY0001: array position out of bounds.");return e.P[n-1]()}))}))}function _e(e){Ae.call(this,{value:function(e,n,r,o){return He(0,0,0,ye.m(t),o)},localName:"get",namespaceURI:"http://www.w3.org/2005/xpath-functions/array",j:[{type:5,g:3}],arity:1,i:{type:59,g:2}});var t=this;this.type=62,this.P=e}function Xe(e){switch(e.node.nodeType){case 2:return 47;case 1:return 54;case 3:case 4:return 56;case 7:return 57;case 8:return 58;case 9:return 55;default:return 53}}function Le(e){return{type:Xe(e),value:e}}function Ye(e,t){return t(e=e.map((function(e){return e.first()})))}function Je(e,t){var n=te(e.type,1)||te(e.type,20)||te(e.type,19),r=te(t.type,1)||te(t.type,20)||te(t.type,19);return n&&r?e.value===t.value:(n=te(e.type,4)||te(e.type,3)||te(e.type,6),r=te(t.type,4)||te(t.type,3)||te(t.type,6),n&&r?!(!isNaN(e.value)||!isNaN(t.value))||e.value===t.value:(n=te(e.type,0)||te(e.type,22)||te(e.type,18)||te(e.type,23)||te(e.type,44),r=te(t.type,0)||te(t.type,22)||te(t.type,18)||te(t.type,23)||te(t.type,44),!(!n||!r)&&e.value===t.value))}function qe(e,t,n,r,o){return Ye([r,o],(function(e){var t=(e=c(e)).next().value,n=e.next().value;return(e=t.h.find((function(e){return Je(e.key,n)})))?e.value():ye.empty()}))}function Qe(e){Ae.call(this,{j:[{type:59,g:3}],arity:1,localName:"get",namespaceURI:"http://www.w3.org/2005/xpath-functions/map",value:function(e,n,r,o){return qe(0,0,0,ye.m(t),o)},i:{type:59,g:2}});var t=this;this.type=61,this.h=e}function Ke(){}function We(e,t){return e.eb()===t.eb()&&e.fb()===t.fb()}function Ve(e){if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw Error("FODT0002: Number of seconds given to construct DayTimeDuration overflows MAX_SAFE_INTEGER or MIN_SAFE_INTEGER");this.ea=e}function $e(e){var t=Math.abs(e.bb()),n=Math.abs(e.getHours()),r=Math.abs(e.getMinutes());return n=(n?n+"H":"")+(r?r+"M":"")+((e=Math.abs(e.getSeconds()))?e+"S":""),(t=t?t+"D":"")&&n?t+"T"+n:t||(n?"T"+n:"T0S")}function ze(e,t,n,r,o,a){return e=86400*e+3600*t+60*n+r+o,new Ve(a||0===e?e:-e)}function Ze(e){return(e=/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(?:T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.exec(e))?ze(e[4]?parseInt(e[4],10):0,e[5]?parseInt(e[5],10):0,e[6]?parseInt(e[6],10):0,e[7]?parseInt(e[7],10):0,e[8]?parseFloat(e[8]):0,!e[1]):null}function et(e){return"Z"===(e=/^(Z)|([+-])([01]\d):([0-5]\d)$/.exec(e))[1]?ze(0,0,0,0,0,!0):ze(0,e[3]?parseInt(e[3],10):0,e[4]?parseInt(e[4],10):0,0,0,"+"===e[2])}function tt(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot multiply xs:dayTimeDuration by NaN");if((e=e.ea*t)>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while multiplying xs:dayTimeDuration");return new Ve(e<Number.MIN_SAFE_INTEGER||Object.is(-0,e)?0:e)}function nt(e){return e?parseInt(e,10):null}function rt(e){var t=(e+="").startsWith("-");return t&&(e=e.substring(1)),(t?"-":"")+e.padStart(4,"0")}function ot(e){return(e+"").padStart(2,"0")}function at(e){return 1===(e+="").split(".")[0].length&&(e=e.padStart(e.length+1,"0")),e}function it(e){return 0===e.getHours()&&0===e.getMinutes()?"Z":(e.qa()?"+":"-")+ot(Math.abs(e.getHours()))+":"+ot(Math.abs(e.getMinutes()))}function ut(e,t,n,r,o,a,i,u,s){this.v=e,this.h=t,this.o=n+(24===r?1:0),this.l=24===r?0:r,this.s=o,this.B=a,this.sa=i,this.Y=u,this.type=void 0===s?9:s}function st(e){var t=/^(?:(-?\d{4,}))?(?:--?(\d\d))?(?:-{1,3}(\d\d))?(T)?(?:(\d\d):(\d\d):(\d\d))?(\.\d+)?(Z|(?:[+-]\d\d:\d\d))?$/.exec(e);e=t[1]?parseInt(t[1],10):null;var n=nt(t[2]),r=nt(t[3]),o=t[4],a=nt(t[5]),i=nt(t[6]),u=nt(t[7]),s=t[8]?parseFloat(t[8]):0;if(t=t[9]?et(t[9]):null,e&&(-271821>e||273860<e))throw Error("FODT0001: Datetime year is out of bounds");return o?new ut(e,n,r,a,i,u,s,t,9):null!==a&&null!==i&&null!==u?new ut(1972,12,31,a,i,u,s,t,8):null!==e&&null!==n&&null!==r?new ut(e,n,r,0,0,0,0,t,7):null!==e&&null!==n?new ut(e,n,1,0,0,0,0,t,11):null!==n&&null!==r?new ut(1972,n,r,0,0,0,0,t,13):null!==e?new ut(e,1,1,0,0,0,0,t,12):null!==n?new ut(1972,n,1,0,0,0,0,t,14):new ut(1972,12,r,0,0,0,0,t,15)}function ct(e,t){switch(t){case 15:return new ut(1972,12,e.o,0,0,0,0,e.Y,15);case 14:return new ut(1972,e.h,1,0,0,0,0,e.Y,14);case 12:return new ut(e.v,1,1,0,0,0,0,e.Y,12);case 13:return new ut(1972,e.h,e.o,0,0,0,0,e.Y,13);case 11:return new ut(e.v,e.h,1,0,0,0,0,e.Y,11);case 8:return new ut(1972,12,31,e.l,e.s,e.B,e.sa,e.Y,8);case 7:return new ut(e.v,e.h,e.o,0,0,0,0,e.Y,7);default:return new ut(e.v,e.h,e.o,e.l,e.s,e.B,e.sa,e.Y,9)}}function lt(e,t){return t=e.Y||t||et("Z"),new Date(Date.UTC(e.v,e.h-1,e.o,e.l-t.getHours(),e.s-t.getMinutes(),e.B,1e3*e.sa))}function pt(e,t,n){var r=lt(e,n).getTime();return r===(n=lt(t,n).getTime())?e.sa===t.sa?0:e.sa>t.sa?1:-1:r>n?1:-1}function ft(e,t,n){return 0===pt(e,t,n)}function ht(e,t,n){return new Ve(e=(lt(e,n).getTime()-lt(t,n).getTime())/1e3)}function dt(e){throw Error("Not implemented: adding durations to "+ie[e.type])}function mt(e){throw Error("Not implemented: subtracting durations from "+ie[e.type])}function gt(e,t){if(null===e)return null;switch(typeof e){case"boolean":return e?K:W;case"number":return Q(e,3);case"string":return Q(e,1);case"object":if("nodeType"in e)return Le({node:e,F:null});if(Array.isArray(e))return new _e(e.map((function(e){return void 0===e?function(){return ye.empty()}:ve(e=null===(e=gt(e))?ye.empty():ye.m(e))})));if(e instanceof Date){var n=st(e.toISOString());return Q(n,n.type)}return new Qe(Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(t){var n=gt(e[t]);return n=null===n?ye.empty():ye.m(n),{key:Q(t,1),value:ve(n)}})))}throw Error("Value "+String(e)+' of type "'+typeof e+'" is not adaptable to an XPath value.')}function yt(e,t){if("number"!=typeof e&&("string"!=typeof e||!J.get(t)(e)))throw Error("Cannot convert JavaScript value '"+e+"' to the XPath type "+ie[t]+" since it is not valid.")}function vt(e,t,n){if(null===t)return null;switch(e){case 0:return t?K:W;case 1:return Q(t+"",1);case 3:case 2:return yt(t,3),Q(+t,3);case 4:return yt(t,e),Q(+t,4);case 5:return yt(t,e),Q(0|t,5);case 6:return yt(t,e),Q(+t,6);case 7:case 8:case 9:case 11:case 12:case 13:case 14:case 15:if(!(t instanceof Date))throw Error("The JavaScript value "+t+" with type "+typeof t+" is not a valid type to be converted to an XPath "+ie[e]+".");return Q(ct(st(t.toISOString()),e),e);case 53:case 47:case 55:case 54:case 56:case 57:case 58:if("object"!=typeof t||!("nodeType"in t))throw Error("The JavaScript value "+t+" with type "+typeof t+" is not a valid type to be converted to an XPath "+ie[e]+".");return Le({node:t,F:null});case 59:case 61:return gt(t);default:throw Error('Values of the type "'+ie[e]+'" can not be adapted from JavaScript to equivalent XPath values.')}}function wt(e,t,n){if(0===n.g)return null===(t=vt(n.type,t))?[]:[t];if(2===n.g||1===n.g){if(!Array.isArray(t))throw Error("The JavaScript value "+t+" should be an array if it is to be converted to "+se(n)+".");return t.map((function(e){return vt(n.type,e)})).filter((function(e){return null!==e}))}var r=vt(n.type,t);if(null===r)throw Error("The JavaScript value "+t+" should be a single entry if it is to be converted to "+se(n)+".");return[r]}function At(e,t,n){return n=void 0===n?{type:59,g:0}:n,ye.create(wt(0,t,n))}function xt(){var e=void 0===e?Math.floor(Math.random()*bt):e;this.h=Math.abs(e%bt)}(r=Ie.prototype).insertBefore=function(e,t,n){return this.h.insertBefore(e,t,n)},r.removeAttributeNS=function(e,t,n){return this.h.removeAttributeNS(e,t,n)},r.removeChild=function(e,t){return this.h.removeChild(e,t)},r.setAttributeNS=function(e,t,n,r){this.h.setAttributeNS(e,t,n,r)},r.setData=function(e,t){this.h.setData(e,t)},ke.prototype.getAllAttributes=function(e,t){return Ce(e)?e.attributes:this.h.getAllAttributes(e,void 0===t?null:t)},ke.prototype.getChildNodes=function(e,t){return t=Ce(e)?e.childNodes:this.h.getChildNodes(e,void 0===t?null:t),9===e.nodeType?t.filter((function(e){return 10!==e.nodeType})):t},ke.prototype.getData=function(e){return Ce(e)?2===e.nodeType?e.value:e.data:this.h.getData(e)||""},ke.prototype.getParentNode=function(e,t){return this.h.getParentNode(e,void 0===t?null:t)},y(_e,Ae),y(Qe,Ae),(r=Ke.prototype).bb=function(){return 0},r.getHours=function(){return 0},r.getMinutes=function(){return 0},r.cb=function(){return 0},r.eb=function(){return 0},r.fb=function(){return 0},r.getSeconds=function(){return 0},r.gb=function(){return 0},r.qa=function(){return!0},y(Ve,Ke),(r=Ve.prototype).bb=function(){return Math.trunc(this.ea/86400)},r.getHours=function(){return Math.trunc(this.ea%86400/3600)},r.getMinutes=function(){return Math.trunc(this.ea%3600/60)},r.fb=function(){return this.ea},r.getSeconds=function(){var e=this.ea%60;return Object.is(-0,e)?0:e},r.qa=function(){return!Object.is(-0,this.ea)&&0<=this.ea},r.toString=function(){return(this.qa()?"P":"-P")+$e(this)},(r=ut.prototype).getDay=function(){return this.o},r.getHours=function(){return this.l},r.getMinutes=function(){return this.s},r.getMonth=function(){return this.h},r.getSeconds=function(){return this.B},r.getYear=function(){return this.v},r.toString=function(){switch(this.type){case 9:return rt(this.v)+"-"+ot(this.h)+"-"+ot(this.o)+"T"+ot(this.l)+":"+ot(this.s)+":"+at(this.B+this.sa)+(this.Y?it(this.Y):"");case 7:return rt(this.v)+"-"+ot(this.h)+"-"+ot(this.o)+(this.Y?it(this.Y):"");case 8:return ot(this.l)+":"+ot(this.s)+":"+at(this.B+this.sa)+(this.Y?it(this.Y):"");case 15:return"---"+ot(this.o)+(this.Y?it(this.Y):"");case 14:return"--"+ot(this.h)+(this.Y?it(this.Y):"");case 13:return"--"+ot(this.h)+"-"+ot(this.o)+(this.Y?it(this.Y):"");case 12:return rt(this.v)+(this.Y?it(this.Y):"");case 11:return rt(this.v)+"-"+ot(this.h)+(this.Y?it(this.Y):"")}throw Error("Unexpected subType")};var bt=Math.pow(2,32);function Bt(e,t,n){t=void 0===t?{yb:null,Db:null,tb:!1}:t,n=void 0===n?new xt:n,this.h=t,this.Ka=e.Ka,this.Da=e.Da,this.N=e.N,this.Aa=e.Aa||Object.create(null),this.o=n}function Et(e,t){var n=0,r=t.value;return{next:function(o){return(o=r.next(o)).done?z:Z(Ct(e,n++,o.value,t))}}}function Tt(e){return e.h.tb||(e.h.tb=!0,e.h.yb=st((new Date).toISOString()),e.h.Db=Ze("PT0S")),e.h.yb}function Nt(e){return e.h.tb||(e.h.tb=!0,e.h.yb=st((new Date).toISOString()),e.h.Db=Ze("PT0S")),e.h.Db}function It(e,t){return e=29421*(null!=(t=void 0===t?null:t)?t:e.o.h)%bt,{zb:Math.floor(e),jc:e/bt}}function Ct(e,t,n,r){return new Bt({N:n,Ka:t,Da:r||e.Da,Aa:e.Aa},e.h,e.o)}function St(e,t){return new Bt({N:e.N,Ka:e.Ka,Da:e.Da,Aa:Object.assign(Object.create(null),e.Aa,t)},e.h,e.o)}function kt(e,t,n,r,o,a,i,u,s){this.debug=e,this.La=t,this.h=n,this.o=r,this.B=o,this.l=a,this.da=i,this.s=u,this.v=s}function Ft(e){var t=0,n=null,r=!0;return ye.create({next:function(o){for(;t<e.length;){n||(n=e[t].value,r=!0);var a=n.next(r?0:o);if(r=!1,!a.done)return a;t++,n=null}return z}})}function Ot(e,t,n){return Error("FORG0001: Cannot cast "+e+" to "+ie[t]+(n?", "+n:""))}function Dt(e){return Error("XPDY0002: "+e)}function Rt(e){return Error("XPTY0004: "+e)}function Gt(e){return Error("FOTY0013: Atomization is not supported for "+ie[e]+".")}function Pt(e){return Error("XPST0081: The prefix "+e+" could not be resolved.")}function Mt(e,t){if(te(e.type,46)||te(e.type,19)||te(e.type,0)||te(e.type,4)||te(e.type,3)||te(e.type,6)||te(e.type,5)||te(e.type,2)||te(e.type,23)||te(e.type,1))return ye.create(e);var n=t.h;if(te(e.type,53)){var r=e.value;if(2===r.node.nodeType||3===r.node.nodeType)return ye.create(Q(Re(n,r),19));if(8===r.node.nodeType||7===r.node.nodeType)return ye.create(Q(Re(n,r),1));var o=[];return function e(t){if(8!==r.node.nodeType&&7!==r.node.nodeType){var a=t.nodeType;3===a||4===a?o.push(n.getData(t)):1!==a&&9!==a||n.getChildNodes(t).forEach((function(t){e(t)}))}}(r.node),ye.create(Q(o.join(""),19))}if(te(e.type,60)&&!te(e.type,62))throw Gt(e.type);if(te(e.type,62))return Ft(e.P.map((function(e){return Ut(e(),t)})));throw Error("Atomizing "+e.type+" is not implemented.")}function Ut(e,t){var n=!1,r=e.value,o=null;return ye.create({next:function(){for(;!n;){if(!o){var e=r.next(0);if(e.done){n=!0;break}o=Mt(e.value,t).value}if(!(e=o.next(0)).done)return e;o=null}return z}})}function jt(e){for(e=q[e];e&&0!==e.D;)e=e.parent;return e?e.type:null}function Ht(e,t){var n=(t=q[t]).Na;if(!n||!n.whiteSpace)return t.parent?Ht(e,t.parent.type):e;switch(t.Na.whiteSpace){case"replace":return e.replace(/[\u0009\u000A\u000D]/g," ");case"collapse":return e.replace(/[\u0009\u000A\u000D]/g," ").replace(/ {2,}/g," ").replace(/^ | $/g,"")}return e}function _t(e,t){for(t=q[t];t&&null===t.kb;){if(2===t.D||3===t.D)return!0;t=t.parent}return!t||t.kb(e)}function Xt(e,t){for(;e;){if(e.Pa&&e.Pa[t])return e.Pa[t];e=e.parent}return function(){return!0}}function Lt(e){return!e||2===e.g||0===e.g}function Yt(e,t){return e(2)?function(e){return{u:!0,value:e}}:e(0)?function(e){return{u:!0,value:e?1:0}}:e(1)||e(19)?function(e){switch(e){case"NaN":return{u:!0,value:NaN};case"INF":case"+INF":return{u:!0,value:1/0};case"-INF":return{u:!0,value:-1/0};case"0":case"+0":return{u:!0,value:0};case"-0":return{u:!0,value:-0}}var n=parseFloat(e);return isNaN(n)?{u:!1,error:Ot(e,t)}:{u:!0,value:n}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to "+t+" or any of its derived types.")}}}function Jt(e){if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw Error("FODT0002: Number of months given to construct YearMonthDuration overflows MAX_SAFE_INTEGER or MIN_SAFE_INTEGER");this.ga=e}function qt(e){var t=Math.abs(e.gb());return(t?t+"Y":"")+((e=Math.abs(e.cb()))?e+"M":"")||"0M"}function Qt(e){var t=/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(?:T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.exec(e);if(t){if(e=!t[1],(t=12*(t[2]?parseInt(t[2],10):0)+(t[3]?parseInt(t[3],10):0))>Number.MAX_SAFE_INTEGER||!Number.isFinite(t))throw Error("FODT0002: Value overflow while constructing xs:yearMonthDuration");e=new Jt(e||0===t?t:-t)}else e=null;return e}function Kt(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot multiply xs:yearMonthDuration by NaN");if((e=Math.round(e.ga*t))>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while constructing xs:yearMonthDuration");return new Jt(e<Number.MIN_SAFE_INTEGER||0===e?0:e)}function Wt(e,t){this.Wa=e,this.Ja=t}y(Jt,Ke),(r=Jt.prototype).cb=function(){var e=this.ga%12;return 0===e?0:e},r.eb=function(){return this.ga},r.gb=function(){return Math.trunc(this.ga/12)},r.qa=function(){return!Object.is(-0,this.ga)&&0<=this.ga},r.toString=function(){return(this.qa()?"P":"-P")+qt(this)},y(Wt,Ke),(r=Wt.prototype).bb=function(){return this.Ja.bb()},r.getHours=function(){return this.Ja.getHours()},r.getMinutes=function(){return this.Ja.getMinutes()},r.cb=function(){return this.Wa.cb()},r.eb=function(){return this.Wa.eb()},r.fb=function(){return this.Ja.fb()},r.getSeconds=function(){return this.Ja.getSeconds()},r.gb=function(){return this.Wa.gb()},r.qa=function(){return this.Wa.qa()&&this.Ja.qa()},r.toString=function(){var e=this.qa()?"P":"-P",t=qt(this.Wa),n=$e(this.Ja);return"0M"===t?e+n:"T0S"===n?e+t:e+t+n};var Vt=[3,6,4,5];function $t(e){if(e(1)||e(19))return function(e){return{u:!0,value:e+""}};if(e(20))return function(e){return{u:!0,value:e}};if(e(23))return function(e){return{u:!0,value:e.prefix?e.prefix+":"+e.localName:e.localName}};if(e(44))return function(e){return{u:!0,value:e.toString()}};if(e(2)){if(e(5)||e(4))return function(e){return{u:!0,value:(e+"").replace("e","E")}};if(e(6)||e(3))return function(e){return isNaN(e)?{u:!0,value:"NaN"}:isFinite(e)?Object.is(e,-0)?{u:!0,value:"-0"}:{u:!0,value:(e+"").replace("e","E").replace("E+","E")}:{u:!0,value:(0>e?"-":"")+"INF"}}}return e(9)||e(7)||e(8)||e(15)||e(14)||e(13)||e(12)||e(11)||e(16)||e(17)||e(18)?function(e){return{u:!0,value:e.toString()}}:e(22)?function(e){return{u:!0,value:e.toUpperCase()}}:function(e){return{u:!0,value:e+""}}}var zt=[2,5,17,16];function Zt(e,t){function n(t){return te(e,t)}if(39===t)return function(){return{u:!1,error:Error("FORG0001: Casting to xs:error is always invalid.")}};switch(t){case 19:return function(e){var t=$t(e);return function(e){return(e=t(e)).u?{u:!0,value:Q(e.value,19)}:e}}(n);case 1:return function(e){var t=$t(e);return function(e){return(e=t(e)).u?{u:!0,value:Q(e.value,1)}:e}}(n);case 6:return function(e){var t=Yt(e,6);return function(e){return(e=t(e)).u?{u:!0,value:Q(e.value,6)}:e}}(n);case 3:return function(e){var t=Yt(e,3);return function(e){return(e=t(e)).u?{u:!0,value:Q(e.value,3)}:e}}(n);case 4:return function(e){return e(5)?function(e){return{u:!0,value:Q(e,4)}}:e(6)||e(3)?function(e){return isNaN(e)||!isFinite(e)?{u:!1,error:Error("FOCA0002: Can not cast "+e+" to xs:decimal")}:Math.abs(e)>Number.MAX_VALUE?{u:!1,error:Error("FOAR0002: Can not cast "+e+" to xs:decimal, it is out of bounds for JavaScript numbers")}:{u:!0,value:Q(e,4)}}:e(0)?function(e){return{u:!0,value:Q(e?1:0,4)}}:e(1)||e(19)?function(e){var t=parseFloat(e);return!isNaN(t)||isFinite(t)?{u:!0,value:Q(t,4)}:{u:!1,error:Error("FORG0001: Can not cast "+e+" to xs:decimal")}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:decimal or any of its derived types.")}}}(n);case 5:return function(e){return e(0)?function(e){return{u:!0,value:Q(e?1:0,5)}}:e(2)?function(e){var t=Math.trunc(e);return!isFinite(t)||isNaN(t)?{u:!1,error:Error("FOCA0002: can not cast "+e+" to xs:integer")}:Number.isSafeInteger(t)?{u:!0,value:Q(t,5)}:{u:!1,error:Error("FOAR0002: can not cast "+e+" to xs:integer, it is out of bounds for JavaScript numbers.")}}:e(1)||e(19)?function(e){var t=parseInt(e,10);return isNaN(t)?{u:!1,error:Ot(e,5)}:Number.isSafeInteger(t)?{u:!0,value:Q(t,5)}:{u:!1,error:Error("FOCA0003: can not cast "+e+" to xs:integer, it is out of bounds for JavaScript numbers.")}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:integer or any of its derived types.")}}}(n);case 2:return function(e){var t=Zt;return function(n){for(var r=c(Vt),o=r.next();!o.done;o=r.next())if((o=t(e,o.value)(n)).u)return o;return{u:!1,error:Error('XPTY0004: Casting not supported from "'+n+'" given type to xs:numeric or any of its derived types.')}}}(e);case 18:return function(e){return e(16)?function(e){return{u:!0,value:Q(new Wt(e,new Ve(e.qa()?0:-0)),18)}}:e(17)?function(e){return{u:!0,value:Q(e=new Wt(new Jt(e.qa()?0:-0),e),18)}}:e(18)?function(e){return{u:!0,value:Q(e,18)}}:e(19)||e(1)?function(e){return{u:!0,value:Q(new Wt(Qt(e),Ze(e)),18)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:duration or any of its derived types.")}}}(n);case 16:return function(e){return e(18)&&!e(17)?function(e){return{u:!0,value:Q(e.Wa,16)}}:e(17)?function(){return{u:!0,value:Q(Qt("P0M"),16)}}:e(19)||e(1)?function(e){var t=Qt(e);return t?{u:!0,value:Q(t,16)}:{u:!1,error:Ot(e,16)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:yearMonthDuration or any of its derived types.")}}}(n);case 17:return function(e){return e(18)&&!e(16)?function(e){return{u:!0,value:Q(e.Ja,17)}}:e(16)?function(){return{u:!0,value:Q(Ze("PT0.0S"),17)}}:e(19)||e(1)?function(e){var t=Ze(e);return t?{u:!0,value:Q(t,17)}:{u:!1,error:Error("FORG0001: Can not cast "+e+" to xs:dayTimeDuration")}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:dayTimeDuration or any of its derived types.")}}}(n);case 9:return function(e){return e(7)?function(e){return{u:!0,value:Q(ct(e,9),9)}}:e(19)||e(1)?function(e){return{u:!0,value:Q(st(e),9)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:dateTime or any of its derived types.")}}}(n);case 8:return function(e){return e(9)?function(e){return{u:!0,value:Q(ct(e,8),8)}}:e(19)||e(1)?function(e){return{u:!0,value:Q(st(e),8)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:time or any of its derived types.")}}}(n);case 7:return function(e){return e(9)?function(e){return{u:!0,value:Q(ct(e,7),7)}}:e(19)||e(1)?function(e){return{u:!0,value:Q(st(e),7)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:date or any of its derived types.")}}}(n);case 11:return function(e){return e(7)||e(9)?function(e){return{u:!0,value:Q(ct(e,11),11)}}:e(19)||e(1)?function(e){return{u:!0,value:Q(st(e),11)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gYearMonth or any of its derived types.")}}}(n);case 12:return function(e){return e(7)||e(9)?function(e){return{u:!0,value:Q(ct(e,12),12)}}:e(19)||e(1)?function(e){return{u:!0,value:Q(st(e),12)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gYear or any of its derived types.")}}}(n);case 13:return function(e){return e(7)||e(9)?function(e){return{u:!0,value:Q(ct(e,13),13)}}:e(19)||e(1)?function(e){return{u:!0,value:Q(st(e),13)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gMonthDay or any of its derived types.")}}}(n);case 15:return function(e){return e(7)||e(9)?function(e){return{u:!0,value:Q(ct(e,15),15)}}:e(19)||e(1)?function(e){return{u:!0,value:Q(st(e),15)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gDay or any of its derived types.")}}}(n);case 14:return function(e){return e(7)||e(9)?function(e){return{u:!0,value:Q(ct(e,14),14)}}:e(19)||e(1)?function(e){return{u:!0,value:Q(st(e),14)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gMonth or any of its derived types.")}}}(n);case 0:return function(e){return e(2)?function(e){return{u:!0,value:0===e||isNaN(e)?W:K}}:e(1)||e(19)?function(e){switch(e){case"true":case"1":return{u:!0,value:K};case"false":case"0":return{u:!0,value:W};default:return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:boolean or any of its derived types.")}}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:boolean or any of its derived types.")}}}(n);case 21:return function(e){return e(22)?function(e){for(var t="",n=0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return{u:!0,value:Q(btoa(t),21)}}:e(1)||e(19)?function(e){return{u:!0,value:Q(e,21)}}:function(){return{error:Error("XPTY0004: Casting not supported from given type to xs:base64Binary or any of its derived types."),u:!1}}}(n);case 22:return function(e){return e(21)?function(e){for(var t="",n=0,r=(e=atob(e)).length;n<r;n++)t+=Number(e.charCodeAt(n)).toString(16);return{u:!0,value:Q(t.toUpperCase(),22)}}:e(1)||e(19)?function(e){return{u:!0,value:Q(e,22)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:hexBinary or any of its derived types.")}}}(n);case 20:return function(e){return e(1)||e(19)?function(e){return{u:!0,value:Q(e,20)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:anyURI or any of its derived types.")}}}(n);case 23:throw Error("Casting to xs:QName is not implemented.")}return function(){return{u:!1,error:Error("XPTY0004: Casting not supported from "+e+" to "+t+".")}}}var en=Object.create(null);function tn(e,t){if(19===e&&1===t)return function(e){return{u:!0,value:Q(e,1)}};if(44===t)return function(){return{u:!1,error:Error("XPST0080: Casting to xs:NOTATION is not permitted.")}};if(39===t)return function(){return{u:!1,error:Error("FORG0001: Casting to xs:error is not permitted.")}};if(45===e||45===t)return function(){return{u:!1,error:Error("XPST0080: Casting from or to xs:anySimpleType is not permitted.")}};if(46===e||46===t)return function(){return{u:!1,error:Error("XPST0080: Casting from or to xs:anyAtomicType is not permitted.")}};if(te(e,60)&&1===t)return function(){return{u:!1,error:Error("FOTY0014: Casting from function item to xs:string is not permitted.")}};if(e===t)return function(e){return{u:!0,value:{type:t,value:e}}};var n=zt.includes(e)?e:jt(e),r=zt.includes(t)?t:jt(t);if(null===r||null===n)return function(){return{u:!1,error:Error("XPST0081: Can not cast: type "+(r?ie[e]:ie[t])+" is unknown.")}};var o=[];return 1!==n&&19!==n||o.push((function(e){var n=Ht(e,t);return _t(n,t)?{u:!0,value:n}:{u:!1,error:Ot(e,t,"pattern validation failed.")}})),n!==r&&(o.push(Zt(n,r)),o.push((function(e){return{u:!0,value:e.value}}))),19!==r&&1!==r||o.push((function(e){return _t(e,t)?{u:!0,value:e}:{u:!1,error:Ot(e,t,"pattern validation failed.")}})),o.push((function(e){return function(e,t){for(var n=q[t];n;){if(n.Na&&!Object.keys(n.Na).every((function(t){if("whiteSpace"===t)return!0;var r=Xt(n,t);return!r||r(e,n.Na[t])})))return!1;n=n.parent}return!0}(e,t)?{u:!0,value:e}:{u:!1,error:Ot(e,t,"pattern validation failed.")}})),o.push((function(e){return{u:!0,value:{type:t,value:e}}})),function(e){e={u:!0,value:e};for(var t=0,n=o.length;t<n&&!1!==(e=o[t](e.value)).u;++t);return e}}function nn(e,t){var n=e.type+1e4*t,r=en[n];return r||(r=en[n]=tn(e.type,t)),r.call(void 0,e.value,t)}function rn(e,t){if(!0===(e=nn(e,t)).u)return e.value;throw e.error}function on(e){var t=!1;return{next:function(){return t?z:(t=!0,Z(e))}}}function an(e,t){return e===t||!(!e||!t||e.offset!==t.offset||e.parent!==t.parent)&&an(e.F,t.F)}function un(e,t){return!!(e===t||e.node===t.node&&an(e.F,t.F))}function sn(e,t){for(var n=[];t;t=Ue(e,t,null))n.unshift(t);return n}function cn(e,t){for(var n=[];t;t=e.getParentNode(t,null))n.unshift(t);return n}function ln(e,t,n,r){if(n.F||r.F||Ce(n.node)||Ce(r.node)){if(un(n,r))return 0;n=sn(t,n),r=sn(t,r);var o=n[0],a=r[0];if(!un(o,a))return t=e.findIndex((function(e){return un(e,o)})),n=e.findIndex((function(e){return un(e,a)})),-1===t&&(t=e.push(o)),-1===n&&(n=e.push(a)),t-n;e=1;for(var i=Math.min(n.length,r.length);e<i&&un(n[e],r[e]);++e);return n[e]?r[e]?function(e,t,n){var r=Ue(e,t,null);e=De(e,r,null),r=0;for(var o=e.length;r<o;++r){var a=e[r];if(un(a,t))return-1;if(un(a,n))return 1}}(t,n[e],r[e]):1:-1}if((n=n.node)===(r=r.node))return 0;if(n=cn(t,n),r=cn(t,r),n[0]!==r[0]){var u={node:n[0],F:null},s={node:r[0],F:null};return t=e.findIndex((function(e){return un(e,u)})),n=e.findIndex((function(e){return un(e,s)})),-1===t&&(t=e.push(u)),-1===n&&(n=e.push(s)),t-n}for(i=1,e=Math.min(n.length,r.length);i<e&&n[i]===r[i];++i);if(e=n[i],n=r[i],!e)return-1;if(!n)return 1;for(t=t.getChildNodes(r[i-1],null),r=0,i=t.length;r<i;++r){var c=t[r];if(c===e)return-1;if(c===n)return 1}}function pn(e,t,n,r){var o=te(n.type,47),a=te(r.type,47);if(o&&!a){if(un(n=Ue(t,n.value),r=r.value))return 1}else if(a&&!o){if(un(n=n.value,r=Ue(t,r.value)))return-1}else if(o&&a){if(un(Ue(t,r.value),Ue(t,n.value)))return n.value.node.localName>r.value.node.localName?1:-1;n=Ue(t,n.value),r=Ue(t,r.value)}else n=n.value,r=r.value;return ln(e,t,n,r)}function fn(e,t,n){return pn(e.o,e,t,n)}function hn(e,t){return mn(t,(function(t,n){return pn(e.o,e,t,n)})).filter((function(e,t,n){return 0===t||!un(e.value,n[t-1].value)}))}function dn(e,t){return e<t?-1:0}function mn(e,t){if(t=void 0===t?dn:t,1>=e.length)return e;var n=Math.floor(e.length/2),r=mn(e.slice(0,n),t);for(e=mn(e.slice(n),t),n=[];r.length&&e.length;)0>t(r[0],e[0])?n.push(r.shift()):n.push(e.shift());return n.concat(r.concat(e))}var gn=e;function yn(e,t,n,r,o){if(te(e.type,t.type))return e;if(te(t.type,46)&&te(e.type,53)&&(e=Mt(e,n).first()),te(e.type,t.type)||46===t.type)return e;if(te(e.type,19)){if(!(n=rn(e,t.type)))throw Error("XPTY0004 Unable to convert "+(o?"return":"argument")+" of type "+ie[e.type]+" to type "+se(t)+" while calling "+r);return n}if(!(n=function(e,t){if(te(e.type,2)){if(te(e.type,6))return 3===t?Q(e.value,3):null;if(te(e.type,4)){if(6===t)return Q(e.value,6);if(3===t)return Q(e.value,3)}return null}return te(e.type,20)&&1===t?Q(e.value,1):null}(e,t.type)))throw Error("XPTY0004 Unable to cast "+(o?"return":"argument")+" of type "+ie[e.type]+" to type "+se(t)+" while calling "+r);return n}function vn(e){switch(e){case 2:return"*";case 1:return"+";case 0:return"?";case 3:return""}}function wn(e,t,n,r,o){return 0===e.g?t.Z({default:function(){return t.map((function(t){return yn(t,e,n,r,o)}))},multiple:function(){throw Error("XPTY0004: Multiplicity of "+(o?"function return value":"function argument")+" of type "+ie[e.type]+vn(e.g)+" for "+r+' is incorrect. Expected "?", but got "+".')}}):1===e.g?t.Z({empty:function(){throw Error("XPTY0004: Multiplicity of "+(o?"function return value":"function argument")+" of type "+ie[e.type]+vn(e.g)+" for "+r+' is incorrect. Expected "+", but got "empty-sequence()"')},default:function(){return t.map((function(t){return yn(t,e,n,r,o)}))}}):2===e.g?t.map((function(t){return yn(t,e,n,r,o)})):t.Z({m:function(){return t.map((function(t){return yn(t,e,n,r,o)}))},default:function(){throw Error("XPTY0004: Multiplicity of "+(o?"function return value":"function argument")+" of type "+ie[e.type]+vn(e.g)+" for "+r+" is incorrect. Expected exactly one")}})}function An(e,t){return te(e,5)?Q(t,5):te(e,6)?Q(t,6):te(e,3)?Q(t,3):Q(t,4)}var xn=[{oa:"M",ma:1e3},{oa:"CM",ma:900},{oa:"D",ma:500},{oa:"CD",ma:400},{oa:"C",ma:100},{oa:"XC",ma:90},{oa:"L",ma:50},{oa:"XL",ma:40},{oa:"X",ma:10},{oa:"IX",ma:9},{oa:"V",ma:5},{oa:"IV",ma:4},{oa:"I",ma:1}];function bn(e,t){var n=parseInt(e,10);if(e=0>n,!(n=Math.abs(n)))return"-";var r=xn.reduce((function(e,t){var r=Math.floor(n/t.ma);return n-=r*t.ma,e+t.oa.repeat(r)}),"");return t&&(r=r.toLowerCase()),e&&(r="-"+r),r}var Bn="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");function En(e,t){var n=0>(e=parseInt(e,10));if(!(e=Math.abs(e)))return"-";for(var r,o="";0<e;)r=(e-1)%Bn.length,o=Bn[r]+o,e=(e-r)/Bn.length|0;return t&&(o=o.toLowerCase()),n&&(o="-"+o),o}function Tn(e,t,n,r,o,a){var i=!1;return ye.create({next:function(){if(i)return z;var t,n=o.first();if(!n)return i=!0,z;if((te(n.type,6)||te(n.type,3))&&(0===n.value||isNaN(n.value)||1/0===n.value||-1/0===n.value))return i=!0,Z(n);if(t=a?a.first().value:0,i=!0,function(e){if(Math.floor(e)===e||isNaN(e))return 0;var t=(e=/\d+(?:\.(\d*))?(?:[Ee](-)?(\d+))*/.exec(""+e))[1]?e[1].length:0;return e[3]?e[2]?t+parseInt(e[3],10):0>(e=t-parseInt(e[3],10))?0:e:t}(n.value)<t)return Z(n);var r=[5,4,3,6].find((function(e){return te(n.type,e)}));switch(t=function(e,t,n){return t&&0==e*n%1%.5?0==Math.floor(e*n)%2?Math.floor(e*n)/n:Math.ceil(e*n)/n:Math.round(e*n)/n}(rn(n,4).value,e,Math.pow(10,t)),r){case 4:return Z(Q(t,4));case 3:return Z(Q(t,3));case 6:return Z(Q(t,6));case 5:return Z(Q(t,5))}}})}function Nn(e,t,n,r){return Ut(r,t).Z({empty:function(){return ye.m(Q(NaN,3))},m:function(){var e=nn(r.first(),3);return e.u?ye.m(e.value):ye.m(Q(NaN,3))},multiple:function(){throw Error("fn:number may only be called with zero or one values")}})}function In(e,t,n,r){return function t(n){function r(t,r,o,a){if(a.G()||a.wa())return a;for(t=a.O(),r=n,o=t.length-1;1<o;o--){var i=t[a=(r=It(e,r).zb)%o];t[a]=t[o],t[o]=i}return ye.create(t)}return ye.m(new Qe([{key:Q("number",1),value:function(){return ye.m(Q(It(e,n).jc,3))}},{key:Q("next",1),value:function(){return ye.m(new Ae({value:function(){return t(It(e,n).zb)},Sa:!0,localName:"",namespaceURI:"",j:[],arity:0,i:{type:61,g:3}}))}},{key:Q("permute",1),value:function(){return ye.m(new Ae({value:r,Sa:!0,localName:"",namespaceURI:"",j:[{type:59,g:2}],arity:1,i:{type:59,g:2}}))}}]))}(((r=void 0===r?ye.empty():r).G()?It(e):It(e,function(e){for(var t=5381,n=0;n<e.length;++n)t=33*t+e.charCodeAt(n),t%=Number.MAX_SAFE_INTEGER;return t}(rn(r.first(),1).value))).zb)}var Cn=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"abs",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return An(e.type,Math.abs(e.value))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"format-integer",j:[{type:5,g:0},{type:1,g:3}],i:{type:1,g:3},callFunction:function(e,t,n,r,o){if(e=r.first(),o=o.first(),r.G())return ye.m(Q("",1));switch(o.value){case"I":return r=bn(e.value),ye.m(Q(r,1));case"i":return r=bn(e.value,!0),ye.m(Q(r,1));case"A":return ye.m(Q(En(e.value),1));case"a":return ye.m(Q(En(e.value,!0),1));default:throw Error("Picture: "+o.value+' is not implemented yet. The supported picture strings are "A", "a", "I", and "i"')}}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ceiling",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return An(e.type,Math.ceil(e.value))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"floor",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return An(e.type,Math.floor(e.value))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:Tn.bind(null,!1)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round",j:[{type:2,g:0},{type:5,g:3}],i:{type:2,g:0},callFunction:Tn.bind(null,!1)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round-half-to-even",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:Tn.bind(null,!0)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round-half-to-even",j:[{type:2,g:0},{type:5,g:3}],i:{type:2,g:0},callFunction:Tn.bind(null,!0)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"number",j:[{type:46,g:0}],i:{type:3,g:3},callFunction:Nn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"number",j:[],i:{type:3,g:3},callFunction:function(e,t,n){var r=e.N&&wn({type:46,g:0},ye.m(e.N),t,"fn:number",!1);if(!r)throw Dt("fn:number needs an atomizable context item.");return Nn(0,t,0,r)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"random-number-generator",j:[],i:{type:61,g:3},callFunction:In},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"random-number-generator",j:[{type:46,g:0}],i:{type:61,g:3},callFunction:In}];function Sn(){throw Error("FOCH0002: No collations are supported")}function kn(e,t,n,r){if(null===t.N)throw Dt("The function which was called depends on dynamic context, which is absent.");return e(t,n,r,ye.m(t.N))}function Fn(e,t,n,r){return r.Z({empty:function(){return ye.m(Q("",1))},default:function(){return r.map((function(e){if(te(e.type,53)){var n=Mt(e,t).first();return te(e.type,47)?rn(n,1):n}return rn(e,1)}))}})}function On(e,t,n,r,o){return Ye([o],(function(e){var n=c(e).next().value;return Ut(r,t).M((function(e){return e=e.map((function(e){return rn(e,1).value})).join(n.value),ye.m(Q(e,1))}))}))}function Dn(e,t,n,r){return r.G()?ye.m(Q(0,5)):(e=r.first().value,ye.m(Q(Array.from(e).length,5)))}function Rn(e,t,n,r,o,a){var i=Tn(!1,0,0,0,o,null),u=null!==a?Tn(!1,0,0,0,a,null):null,s=!1,c=null,l=null,p=null;return ye.create({next:function(){return s?z:c||null!==(c=r.first())?(l||(l=i.first()),!p&&a&&(p=null,p=u.first()),s=!0,Z(Q(Array.from(c.value).slice(Math.max(l.value-1,0),a?l.value+p.value-1:void 0).join(""),1))):(s=!0,Z(Q("",1)))}})}function Gn(e,t,n,r,o){return r.G()||0===r.first().value.length?ye.empty():(e=r.first().value,o=jn(o=o.first().value),ye.create(e.split(o).map((function(e){return Q(e,1)}))))}function Pn(e,t,n,r){return r.G()?ye.m(Q("",1)):(e=r.first().value.trim(),ye.m(Q(e.replace(/\s+/g," "),1)))}var Mn=new Map,Un=new Map;function jn(e){if(Un.has(e))return Un.get(e);try{var t=new RegExp(e,"g")}catch(e){throw Error("FORX0002: "+e)}if(t.test(""))throw Error("FORX0003: the pattern "+e+" matches the zero length string");return Un.set(e,t),t}var Hn=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"compare",j:[{type:1,g:0},{type:1,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r,o){return r.G()||o.G()?ye.empty():(e=r.first().value)>(o=o.first().value)?ye.m(Q(1,5)):e<o?ye.m(Q(-1,5)):ye.m(Q(0,5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"compare",j:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:5,g:0},callFunction:Sn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"concat",j:[{type:46,g:0},{type:46,g:0},4],i:{type:1,g:3},callFunction:function(e,t,n){var r=T.apply(3,arguments);return Ye(r=r.map((function(e){return Ut(e,t).M((function(e){return ye.m(Q(e.map((function(e){return null===e?"":rn(e,1).value})).join(""),1))}))})),(function(e){return ye.m(Q(e.map((function(e){return e.value})).join(""),1))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"contains",j:[{type:1,g:0},{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:Sn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"contains",j:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:function(e,t,n,r,o){return e=r.G()?"":r.first().value,0===(o=o.G()?"":o.first().value).length?ye.ba():0===e.length?ye.W():e.includes(o)?ye.ba():ye.W()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ends-with",j:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:function(e,t,n,r,o){return 0===(e=o.G()?"":o.first().value).length?ye.ba():0===(r=r.G()?"":r.first().value).length?ye.W():r.endsWith(e)?ye.ba():ye.W()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ends-with",j:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:0,g:3},callFunction:Sn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"normalize-space",j:[{type:1,g:0}],i:{type:1,g:3},callFunction:Pn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"normalize-space",j:[],i:{type:1,g:3},callFunction:kn.bind(null,(function(e,t,n,r){return Pn(e,0,0,Fn(0,t,0,r))}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"starts-with",j:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:function(e,t,n,r,o){return 0===(e=o.G()?"":o.first().value).length?ye.ba():0===(r=r.G()?"":r.first().value).length?ye.W():r.startsWith(e)?ye.ba():ye.W()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"starts-with",j:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:0,g:3},callFunction:Sn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string",j:[{type:59,g:0}],i:{type:1,g:3},callFunction:Fn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string",j:[],i:{type:1,g:3},callFunction:kn.bind(null,Fn)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring-before",j:[{type:1,g:0},{type:1,g:0}],i:{type:1,g:3},callFunction:function(e,t,n,r,o){return e=r.G()?"":r.first().value,""===(o=o.G()?"":o.first().value)||-1===(o=e.indexOf(o))?ye.m(Q("",1)):ye.m(Q(e.substring(0,o),1))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring-after",j:[{type:1,g:0},{type:1,g:0}],i:{type:1,g:3},callFunction:function(e,t,n,r,o){return e=r.G()?"":r.first().value,""===(o=o.G()?"":o.first().value)?ye.m(Q(e,1)):-1===(t=e.indexOf(o))?ye.m(Q("",1)):ye.m(Q(e.substring(t+o.length),1))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring",j:[{type:1,g:0},{type:3,g:3}],i:{type:1,g:3},callFunction:Rn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring",j:[{type:1,g:0},{type:3,g:3},{type:3,g:3}],i:{type:1,g:3},callFunction:Rn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"upper-case",j:[{type:1,g:0}],i:{type:1,g:3},callFunction:function(e,t,n,r){return r.G()?ye.m(Q("",1)):r.map((function(e){return Q(e.value.toUpperCase(),1)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"lower-case",j:[{type:1,g:0}],i:{type:1,g:3},callFunction:function(e,t,n,r){return r.G()?ye.m(Q("",1)):r.map((function(e){return Q(e.value.toLowerCase(),1)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-join",j:[{type:46,g:2},{type:1,g:3}],i:{type:1,g:3},callFunction:On},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-join",j:[{type:46,g:2}],i:{type:1,g:3},callFunction:function(e,t,n,r){return On(0,t,0,r,ye.m(Q("",1)))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-length",j:[{type:1,g:0}],i:{type:5,g:3},callFunction:Dn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-length",j:[],i:{type:5,g:3},callFunction:kn.bind(null,(function(e,t,n,r){return Dn(e,0,0,Fn(0,t,0,r))}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",j:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],i:{type:1,g:2},callFunction:function(){throw Error("Not implemented: Using flags in tokenize is not supported")}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",j:[{type:1,g:0},{type:1,g:3}],i:{type:1,g:2},callFunction:Gn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",j:[{type:1,g:0}],i:{type:1,g:2},callFunction:function(e,t,n,r){return Gn(e,0,0,Pn(e,0,0,r),ye.m(Q(" ",1)))}},{j:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],callFunction:function(e,t,n,r,o,a){return Ye([r,o,a],(function(e){var t=c(e),n=t.next().value;e=t.next().value,t=t.next().value,n=Array.from(n?n.value:"");var r=Array.from(e.value),o=Array.from(t.value);return e=n.map((function(e){return r.includes(e)?(e=r.indexOf(e))<=o.length?o[e]:void 0:e})),ye.m(Q(e.join(""),1))}))},localName:"translate",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:5,g:2}],callFunction:function(e,t,n,r){return r.M((function(e){return e=e.map((function(e){if(9===(e=e.value)||10===e||13===e||32<=e&&55295>=e||57344<=e&&65533>=e||65536<=e&&1114111>=e)return String.fromCodePoint(e);throw Error("FOCH0001")})).join(""),ye.m(Q(e,1))}))},localName:"codepoints-to-string",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:1,g:0}],callFunction:function(e,t,n,r){return Ye([r],(function(e){return 0===(e=(e=c(e).next().value)?e.value.split(""):[]).length?ye.empty():ye.create(e.map((function(e){return Q(e.codePointAt(0),5)})))}))},localName:"string-to-codepoints",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:2}},{j:[{type:1,g:0}],callFunction:function(e,t,n,r){return Ye([r],(function(e){return null===(e=c(e).next().value)||0===e.value.length?ye.create(Q("",1)):ye.create(Q(encodeURIComponent(e.value).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})),1))}))},localName:"encode-for-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:1,g:0}],callFunction:function(e,t,n,r){return Ye([r],(function(e){return null===(e=c(e).next().value)||0===e.value.length?ye.create(Q("",1)):ye.create(Q(e.value.replace(/([\u00A0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFEF "<>{}|\\^`/\n\u007f\u0080-\u009f]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,(function(e){return encodeURI(e)})),1))}))},localName:"iri-to-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:1,g:0},{type:1,g:0}],callFunction:function(e,t,n,r,o){return Ye([r,o],(function(e){var t=c(e);if(e=t.next().value,t=t.next().value,null===e||null===t)return ye.empty();if(e=e.value,t=t.value,e.length!==t.length)return ye.W();e=e.split(""),t=t.split("");for(var n=0;n<e.length;n++)if(e[n].codePointAt(0)!==t[n].codePointAt(0))return ye.W();return ye.ba()}))},localName:"codepoint-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:0}},{j:[{type:1,g:0},{type:1,g:3}],callFunction:function(e,t,n,r,o){return Ye([r,o],(function(e){var t=c(e);e=t.next().value,t=t.next().value,e=e?e.value:"",t=t.value;var n=Mn.get(t);if(!n){try{n=gn.compile(t,{language:"xpath"})}catch(e){throw Error("FORX0002: "+e)}Mn.set(t,n)}return n(e)?ye.ba():ye.W()}))},localName:"matches",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],callFunction:function(e,t,n,r,o,a){return Ye([r,o,a],(function(e){var t=c(e);e=t.next().value;var n=t.next().value;if(t=t.next().value,e=e?e.value:"",n=n.value,(t=t.value).includes("$0"))throw Error("Using $0 in fn:replace to replace substrings with full matches is not supported.");return t=t.split(/((?:\$\$)|(?:\\\$)|(?:\\\\))/).map((function(e){switch(e){case"\\$":return"$$";case"\\\\":return"\\";case"$$":throw Error('FORX0004: invalid replacement: "$$"');default:return e}})).join(""),n=jn(n),e=e.replace(n,t),ye.m(Q(e,1))}))},localName:"replace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:1,g:0},{type:1,g:3},{type:1,g:3},{type:1,g:3}],localName:"replace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3},callFunction:function(){throw Error("Not implemented: Using flags in replace is not supported")}}];function _n(e,t,n,r,o){if(null===n.N)throw Dt("The function "+e+" depends on dynamic context, which is absent.");return t(n,r,o,ye.m(n.N))}function Xn(e,t,n,r){return Ye([r],(function(e){if(null===(e=c(e).next().value))return ye.empty();switch((e=e.value).node.nodeType){case 1:case 2:return ye.m(Q(new we(e.node.prefix,e.node.namespaceURI,e.node.localName),23));case 7:return ye.m(Q(new we("","",e.node.target),23));default:return ye.empty()}}))}function Ln(e,t,n,r){return r.Z({default:function(){return Fn(0,t,0,Xn(0,0,0,r))},empty:function(){return ye.m(Q("",1))}})}function Yn(e,t,n,r){return Ut(r,t)}function Jn(e,t,n,r){return Ye([r],(function(e){return null!==(e=(e=c(e).next().value)?e.value:null)&&Ge(t.h,e,null)?ye.ba():ye.W()}))}function qn(e,t,n,r){return Ye([r],(function(e){function n(e){for(var t=0,n=e;null!==n;)(e.node.nodeType!==n.node.nodeType?0:1===n.node.nodeType?n.node.localName===e.node.localName&&n.node.namespaceURI===e.node.namespaceURI:7===n.node.nodeType?n.node.target===e.node.target:1)&&t++,n=je(o,n,null);return t}var r=c(e).next().value;if(null===r)return ye.empty();var o=t.h;for(e="",r=r.value;null!==Ue(t.h,r,null);r=Ue(t.h,r,null))switch(r.node.nodeType){case 1:var a=r;e="/Q{"+(a.node.namespaceURI||"")+"}"+a.node.localName+"["+n(a)+"]"+e;break;case 2:e="/@"+((a=r).node.namespaceURI?"Q{"+a.node.namespaceURI+"}":"")+a.node.localName+e;break;case 3:e="/text()["+n(r)+"]"+e;break;case 7:e="/processing-instruction("+(a=r).node.target+")["+n(a)+"]"+e;break;case 8:e="/comment()["+n(r)+"]"+e}return 9===r.node.nodeType?ye.create(Q(e||"/",1)):ye.create(Q("Q{http://www.w3.org/2005/xpath-functions}root()"+e,1))}))}function Qn(e,t,n,r){return r.map((function(e){return Q(e.value.node.namespaceURI||"",20)}))}function Kn(e,t,n,r){return r.Z({default:function(){return r.map((function(e){return 7===e.value.node.nodeType?Q(e.value.node.target,1):Q(e.value.node.localName||"",1)}))},empty:function(){return ye.m(Q("",1))}})}function Wn(e,t,n){if(2===t.node.nodeType)return un(t,n);for(;n;){if(un(t,n))return!0;if(9===n.node.nodeType)break;n=Ue(e,n,null)}return!1}function Vn(e,t,n,r){return r.map((function(e){if(!te(e.type,53))throw Error("XPTY0004 Argument passed to fn:root() should be of the type node()");for(e=e.value;e;){var n=e;e=Ue(t.h,n,null)}return Le(n)}))}var $n=[{j:[{type:53,g:0}],callFunction:Ln,localName:"name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[],callFunction:_n.bind(null,"name",Ln),localName:"name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:53,g:3}],callFunction:Qn,localName:"namespace-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:20,g:3}},{j:[],callFunction:_n.bind(null,"namespace-uri",Qn),localName:"namespace-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:20,g:3}},{j:[{type:53,g:2}],callFunction:function(e,t,n,r){return r.M((function(e){return e.length?(e=hn(t.h,e).reduceRight((function(e,n,r,o){return r===o.length-1?(e.push(n),e):(Wn(t.h,n.value,e[0].value)||e.unshift(n),e)}),[]),ye.create(e)):ye.empty()}))},localName:"innermost",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:2}},{j:[{type:53,g:2}],callFunction:function(e,t,n,r){return r.M((function(e){return e.length?(e=hn(t.h,e).reduce((function(e,n,r){return 0===r?(e.push(n),e):(Wn(t.h,e[e.length-1].value,n.value)||e.push(n),e)}),[]),ye.create(e)):ye.empty()}),1)},localName:"outermost",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:2}},{j:[{type:53,g:0}],callFunction:Jn,localName:"has-children",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[],callFunction:_n.bind(null,"has-children",Jn),localName:"has-children",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:53,g:0}],callFunction:qn,localName:"path",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:0}},{j:[],callFunction:_n.bind(null,"path",qn),localName:"path",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:0}},{j:[{type:53,g:0}],callFunction:Xn,localName:"node-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{j:[],callFunction:_n.bind(null,"node-name",Xn),localName:"node-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{j:[{type:53,g:0}],callFunction:Kn,localName:"local-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[],callFunction:_n.bind(null,"local-name",Kn),localName:"local-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:53,g:0}],callFunction:Vn,localName:"root",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:0}},{j:[],callFunction:_n.bind(null,"root",Vn),localName:"root",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:0}},{j:[],callFunction:_n.bind(null,"data",Yn),localName:"data",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{j:[{type:59,g:2}],callFunction:Yn,localName:"data",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}}];function zn(e,t){var n=0,r=e.length,o=!1,a=null;return{next:function(){if(!o){for(;n<r;){a||(a=t(e[n],n,e));var i=a.next(0);if(a=null,!i.value)return Z(!1);n++}return o=!0,Z(!0)}return z}}}function Zn(e){return 1===(e=e.node.nodeType)||3===e}function er(e,t){if((te(e.type,4)||te(e.type,6))&&(te(t.type,4)||te(t.type,6))){var n=rn(e,6),r=rn(t,6);return n.value===r.value||isNaN(e.value)&&isNaN(t.value)}return(te(e.type,4)||te(e.type,6)||te(e.type,3))&&(te(t.type,4)||te(t.type,6)||te(t.type,3))?(n=rn(e,3),r=rn(t,3),n.value===r.value||isNaN(e.value)&&isNaN(t.value)):te(e.type,23)&&te(t.type,23)?e.value.namespaceURI===t.value.namespaceURI&&e.value.localName===t.value.localName:(te(e.type,9)||te(e.type,7)||te(e.type,8)||te(e.type,11)||te(e.type,12)||te(e.type,13)||te(e.type,14)||te(e.type,15))&&(te(t.type,9)||te(t.type,7)||te(t.type,8)||te(t.type,11)||te(t.type,12)||te(t.type,13)||te(t.type,14)||te(t.type,15))?ft(e.value,t.value):(te(e.type,16)||te(e.type,17)||te(e.type,18))&&(te(t.type,16)||te(t.type,17)||te(t.type,17))?We(e.value,t.value):e.value===t.value}function tr(e,t,n){return n=c([t,n].map((function(t){return{type:1,value:t.reduce((function(t,n){return t+Mt(n,e).first().value}),"")}}))),Z(er(t=n.next().value,n=n.next().value))}function nr(e,t,n,r){for(;e.value&&te(e.value.type,56);){t.push(e.value);var o=Me(r,e.value.value);if(e=n.next(0),o&&3!==o.node.nodeType)break}return e}function rr(e,t,n,r,o){var a,i=t.h,u=r.value,s=o.value,c=null,l=null,p=null,f=[],h=[];return{next:function(){for(;!a;)if(c||(c=u.next(0)),c=nr(c,f,u,i),l||(l=s.next(0)),l=nr(l,h,s,i),f.length||h.length){var r=tr(t,f,h);if(f.length=0,h.length=0,!1===r.value)return a=!0,r}else{if(c.done||l.done)return a=!0,Z(c.done===l.done);if(p||(p=ar(e,t,n,c.value,l.value)),r=p.next(0),p=null,!1===r.value)return a=!0,r;l=c=null}return z}}}function or(e,t,n,r,o){return r=De(t.h,r.value),o=De(t.h,o.value),r=r.filter((function(e){return Zn(e)})),o=o.filter((function(e){return Zn(e)})),rr(e,t,n,r=ye.create(r.map((function(e){return Le(e)}))),o=ye.create(o.map((function(e){return Le(e)}))))}function ar(e,t,n,r,o){if(te(r.type,46)&&te(o.type,46))return on(er(r,o));if(te(r.type,61)&&te(o.type,61))return function(e,t,n,r,o){return r.h.length!==o.h.length?on(!1):zn(r.h,(function(r){var a=o.h.find((function(e){return er(e.key,r.key)}));return a?rr(e,t,n,r.value(),a.value()):on(!1)}))}(e,t,n,r,o);if(te(r.type,62)&&te(o.type,62))return function(e,t,n,r,o){return r.P.length!==o.P.length?on(!1):zn(r.P,(function(r,a){return a=o.P[a],rr(e,t,n,r(),a())}))}(e,t,n,r,o);if(te(r.type,53)&&te(o.type,53)){if(te(r.type,55)&&te(o.type,55))return or(e,t,n,r,o);if(te(r.type,54)&&te(o.type,54))return function(e,t,n,r,o){var a=rr(e,t,n,Xn(0,0,0,ye.m(r)),Xn(0,0,0,ye.m(o))),i=or(e,t,n,r,o);r=Fe(t.h,r.value).filter((function(e){return"http://www.w3.org/2000/xmlns/"!==e.node.namespaceURI})).sort((function(e,t){return e.node.nodeName>t.node.nodeName?1:-1})).map((function(e){return Le(e)})),o=Fe(t.h,o.value).filter((function(e){return"http://www.w3.org/2000/xmlns/"!==e.node.namespaceURI})).sort((function(e,t){return e.node.nodeName>t.node.nodeName?1:-1})).map((function(e){return Le(e)}));var u=rr(e,t,n,ye.create(r),ye.create(o)),s=!1;return{next:function(){if(s)return z;var e=a.next(0);return!e.done&&!1===e.value||!(e=u.next(0)).done&&!1===e.value?(s=!0,e):(e=i.next(0),s=!0,e)}}}(e,t,n,r,o);if(te(r.type,47)&&te(o.type,47)||te(r.type,57)&&te(o.type,57)||te(r.type,58)&&te(o.type,58))return function(e,t,n,r,o){var a=rr(e,t,n,Xn(0,0,0,ye.m(r)),Xn(0,0,0,ye.m(o))),i=!1;return{next:function(){if(i)return z;var e=a.next(0);return e.done||!1!==e.value?Z(er(Mt(r,t).first(),Mt(o,t).first())):(i=!0,e)}}}(e,t,n,r,o)}return on(!1)}function ir(e){return Error("XUST0001: "+(void 0===e?"Can not execute an updating expression in a non-updating context.":e))}function ur(e){return Error("XUTY0004: The attribute "+e.name+'="'+e.value+'" follows a node that is not an attribute node.')}function sr(){return Error("XUTY0005: The target of a insert expression with into must be a single element or document node.")}function cr(){return Error("XUTY0006: The target of a insert expression with before or after must be a single element, text, comment, or processing instruction node.")}function lr(){return Error("XUTY0008: The target of a replace expression must be a single element, attribute, text, comment, or processing instruction node.")}function pr(){return Error("XUTY0012: The target of a rename expression must be a single element, attribute, or processing instruction node.")}function fr(e){return Error("XUDY0017: The target "+e.outerHTML+" is used in more than one replace value of expression.")}function hr(e){return Error("XUDY0021: Applying the updates will result in the XDM instance violating constraint: '"+e+"'")}function dr(e){return Error("XUDY0023: The namespace binding "+e+" is conflicting.")}function mr(e){return Error("XUDY0024: The namespace binding "+e+" is conflicting.")}function gr(){return Error("XUDY0027: The target for an insert, replace, or rename expression expression should not be empty.")}function yr(e,t,n,r,o){n=void 0===n?{C:!1,X:!1,R:"unsorted",subtree:!1}:n,this.o=e,this.da=n.R||"unsorted",this.subtree=!!n.subtree,this.X=!!n.X,this.C=!!n.C,this.ta=t,this.I=!1,this.ab=null,this.Yb=void 0!==r&&r,this.type=o}function vr(e,t,n){return t&&null!==t.N&&e.C?(null===e.ab&&(e.ab=ve(e.h(null,n).sb())),e=e.ab()):e=e.h(t,n),e}function wr(e,t){this.J=e,this.fa=t}function Ar(e){e&&"object"==typeof e&&"nodeType"in e&&"function"==typeof(e=e.ownerDocument||e).createElementNS&&"function"==typeof e.createProcessingInstruction&&"function"==typeof e.createTextNode&&"function"==typeof e.createComment&&(this.h=e),this.h||(this.h=null)}function xr(e,t,n){t.forEach((function(t){n.insertBefore(e.node,t.node,null)}))}function br(e,t,n,r){var o=Ue(n,e),a=e.node.nodeType;if(2===a){if(t.some((function(e){return 2!==e.node.nodeType})))throw Error('Constraint "If $target is an attribute node, $replacement must consist of zero or more attribute nodes." failed.');var i=o?o.node:null;r.removeAttributeNS(i,e.node.namespaceURI,e.node.nodeName),t.forEach((function(e){var t=e.node.nodeName;if(Oe(n,o,t))throw hr("An attribute "+t+" already exists.");r.setAttributeNS(i,e.node.namespaceURI,t,Re(n,e))}))}if(1===a||3===a||8===a||7===a){var u=(a=Me(n,e))?a.node:null;r.removeChild(o.node,e.node),t.forEach((function(e){r.insertBefore(o.node,e.node,u)}))}}function Br(e,t,n,r){if(function(e,t){function n(e){return new we(e.node.prefix,e.node.namespaceURI,e.node.localName)}function r(t,n){var r=new Set;e.filter((function(e){return e.type===t})).map((function(e){return e.target})).forEach((function(e){e=e?e.node:null,r.has(e)&&n(e),r.add(e)}))}r("rename",(function(e){throw Error("XUDY0015: The target "+e.outerHTML+" is used in more than one rename expression.")})),r("replaceNode",(function(e){throw Error("XUDY0016: The target "+e.outerHTML+" is used in more than one replace expression.")})),r("replaceValue",(function(e){throw fr(e)})),r("replaceElementContent",(function(e){throw fr(e)}));var o=new Map;e.filter((function(e){return"replaceNode"===e.type&&2===e.target.node.nodeType})).forEach((function(e){var r=Ue(t,e.target);r=r?r.node:null;var a=o.get(r);a?a.push.apply(a,p(e.o.map(n))):o.set(r,e.o.map(n))})),e.filter((function(e){return"rename"===e.type&&2===e.target.node.nodeType})).forEach((function(e){var n=Ue(t,e.target);if(n){n=n.node;var r=o.get(n);r?r.push(e.o):o.set(n,[e.o])}})),o.forEach((function(e){var t={};e.forEach((function(e){if(t[e.prefix]||(t[e.prefix]=e.namespaceURI),t[e.prefix]!==e.namespaceURI)throw mr(e.namespaceURI)}))}))}(e,t),e.filter((function(e){return-1!==["insertInto","insertAttributes","replaceValue","rename"].indexOf(e.type)})).forEach((function(e){switch(e.type){case"insertInto":xr(e.target,e.content,r);break;case"insertAttributes":!function(e,t,n,r){t.forEach((function(t){var o=t.node.nodeName;if(Oe(n,e,o))throw hr("An attribute "+o+" already exists.");r.setAttributeNS(e.node,t.node.namespaceURI,o,Re(n,t))}))}(e.target,e.content,t,r);break;case"rename":!function(e,t,n,r,o){switch(r||(r=new Ar(e?e.node:null)),e.node.nodeType){case 1:var a=n.getAllAttributes(e.node),i=n.getChildNodes(e.node),u=r.createElementNS(t.namespaceURI,t.Ca()),s={node:u,F:null};a.forEach((function(e){o.setAttributeNS(u,e.namespaceURI,e.nodeName,e.value)})),i.forEach((function(e){o.insertBefore(u,e,null)}));break;case 2:(t=r.createAttributeNS(t.namespaceURI,t.Ca())).value=Re(n,e),s={node:t,F:null};break;case 7:s={node:r.createProcessingInstruction(t.Ca(),Re(n,e)),F:null}}if(!Ue(n,e))throw Error("Not supported: renaming detached nodes.");br(e,[s],n,o)}(e.target,e.o,t,n,r);break;case"replaceValue":var o=e.target;if(e=e.o,2===o.node.nodeType){var a=Ue(t,o);a?r.setAttributeNS(a.node,o.node.namespaceURI,o.node.nodeName,e):o.node.value=e}else r.setData(o.node,e)}})),e.filter((function(e){return-1!==["insertBefore","insertAfter","insertIntoAsFirst","insertIntoAsLast"].indexOf(e.type)})).forEach((function(e){switch(e.type){case"insertAfter":!function(e,t,n,r){var o=Ue(n,e).node,a=(e=Me(n,e))?e.node:null;t.forEach((function(e){r.insertBefore(o,e.node,a)}))}(e.target,e.content,t,r);break;case"insertBefore":!function(e,t,n,r){var o=Ue(n,e).node;t.forEach((function(t){r.insertBefore(o,t.node,e.node)}))}(e.target,e.content,t,r);break;case"insertIntoAsFirst":!function(e,t,n,r){var o=(n=Ge(n,e))?n.node:null;t.forEach((function(t){r.insertBefore(e.node,t.node,o)}))}(e.target,e.content,t,r);break;case"insertIntoAsLast":xr(e.target,e.content,r)}})),e.filter((function(e){return"replaceNode"===e.type})).forEach((function(e){br(e.target,e.o,t,r)})),e.filter((function(e){return"replaceElementContent"===e.type})).forEach((function(e){!function(e,t,n,r){n.getChildNodes(e.node).forEach((function(t){return r.removeChild(e.node,t)})),t&&r.insertBefore(e.node,t.node,null)}(e.target,e.text,t,r)})),e.filter((function(e){return"delete"===e.type})).forEach((function(e){e=e.target;var n=Ue(t,e);(n=n?n.node:null)&&(2===e.node.nodeType?r.removeAttributeNS(n,e.node.namespaceURI,e.node.nodeName):r.removeChild(n,e.node))})),e.some((function(e){return"put"===e.type})))throw Error('Not implemented: the execution for pendingUpdate "put" is not yet implemented.')}function Er(e){return e.concat.apply(e,p(T.apply(1,arguments).filter(Boolean)))}function Tr(e,t,n,r){yr.call(this,e,t,n,!0,r),this.I=!0}function Nr(e){return e.I?function(t,n){return e.s(t,n)}:function(t,n){var r=e.h(t,n);return{next:function(){return Z({fa:[],J:r.O()})}}}}function Ir(e,t){return t((e=e.next(0)).value.fa),ye.create(e.value.J)}function Cr(e,t,n,r){Tr.call(this,e,t,n,r),this.I=this.ta.some((function(e){return e.I}))}yr.prototype.B=function(){return null},yr.prototype.v=function(e){if(this.ta.forEach((function(t){return t.v(e)})),!this.Yb&&this.ta.some((function(e){return e.I})))throw ir()},(r=Ar.prototype).createAttributeNS=function(e,t){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createAttributeNS(e,t)},r.createCDATASection=function(e){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createCDATASection(e)},r.createComment=function(e){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createComment(e)},r.createDocument=function(){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.implementation.createDocument(null,null,null)},r.createElementNS=function(e,t){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createElementNS(e,t)},r.createProcessingInstruction=function(e,t){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createProcessingInstruction(e,t)},r.createTextNode=function(e){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createTextNode(e)},y(Tr,yr),Tr.prototype.h=function(){throw ir()},y(Cr,Tr),Cr.prototype.h=function(e,t){return this.A(e,t,this.ta.map((function(e){return function(n){return e.h(n,t)}})))},Cr.prototype.s=function(e,t){var n=[],r=this.A(e,t,this.ta.map((function(e){return e.I?function(r){return Ir(r=e.s(r,t),(function(e){return n=Er(n,e)}))}:function(n){return e.h(n,t)}}))),o=!1;return{next:function(){if(o)return z;var e=r.O();return o=!0,Z(new wr(e,n))}}},Cr.prototype.v=function(e){Tr.prototype.v.call(this,e),function(e){e.ta.some((function(e){return e.I}))&&(e.I=!0)}(this)};var Sr=["external","attribute","nodeName","nodeType","universal"],kr=Sr.length;function Fr(e){if(this.h=Sr.map((function(t){return e[t]||0})),Object.keys(e).some((function(e){return!Sr.includes(e)})))throw Error("Invalid specificity kind passed")}function Or(e,t){for(var n=0;n<kr;++n){if(t.h[n]<e.h[n])return 1;if(t.h[n]>e.h[n])return-1}return 0}function Dr(){return Rt("Expected base expression of a function call to evaluate to a sequence of single function item")}function Rr(e,t,n,r){for(var o=[],a=0;a<t.length;++a)if(null===t[a])o.push(null);else{var i=wn(e[a],t[a],n,r,!1);o.push(i)}return o}function Gr(e,t){if(!te(e.type,60))throw Rt("Expected base expression to evaluate to a function item");if(e.v!==t)throw Dr();return e}function Pr(e,t,n,r,o,a,i){var u=0;return o=o.map((function(e){return e?null:a[u++](n)})),0<=(o=Rr(e.o,o,r,e.B)).indexOf(null)?function(e,t){var n=e.value,r=t.map((function(e){return null===e?null:ve(e)}));return t=new Ae({j:t=t.reduce((function(t,n,r){return null===n&&t.push(e.o[r]),t}),[]),arity:t.length,Sa:!0,I:e.I,localName:"boundFunction",namespaceURI:e.l,i:e.s,value:function(e,t,o){var a=Array.from(arguments).slice(3),i=r.map((function(e){return null===e?a.shift():e()}));return n.apply(void 0,[e,t,o].concat(i))}}),ye.m(t)}(e,o):(t=t.apply(void 0,[n,r,i].concat(p(o))),wn(e.s,t,r,e.B,!0))}function Mr(e,t,n){var r={};Cr.call(this,new Fr((r.external=1,r)),[e].concat(t.filter((function(e){return!!e}))),{R:"unsorted",X:!1,subtree:!1,C:!1},n),this.la=t.length,this.S=t.map((function(e){return null===e})),this.K=null,this.pa=e,this.Ba=t}function Ur(e,t,n,r,o,a){return Ye([r,o,a],(function(e){var t=c(e);e=t.next().value;var n=t.next().value;if(t=t.next().value,n=n.value,t=t.value,n>e.P.length||0>=n)throw Error("FOAY0001: subarray start out of bounds.");if(0>t)throw Error("FOAY0002: subarray length out of bounds.");if(n+t>e.P.length+1)throw Error("FOAY0001: subarray start + length out of bounds.");return ye.m(new _e(e.P.slice(n-1,t+n-1)))}))}function jr(e,t,n,r,o){return Ye([r],(function(e){var t=c(e).next().value;return o.M((function(e){e=e.map((function(e){return e.value})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n[t-1]!==e}));for(var n=t.P.concat(),r=0,o=e.length;r<o;++r){var a=e[r];if(a>t.P.length||0>=a)throw Error("FOAY0001: subarray position out of bounds.");n.splice(a-1,1)}return ye.m(new _e(n))}))}))}function Hr(e){return te(e,1)||te(e,20)||te(e,19)}function _r(e,t,n,r,o){return 0===r.length?0!==o.length:0!==o.length&&ar(e,t,n,r[0],o[0]).next(0).value?_r(e,t,n,r.slice(1),o.slice(1)):r[0].value!=r[0].value||(Hr(r[0].type)&&0!==o.length&&Hr(o[0].type)||0!==o.length)&&r[0].value<o[0].value}function Xr(e,t,n,r){return r.sort((function(r,o){return rr(e,t,n,ye.create(r),ye.create(o)).next(0).value?0:_r(e,t,n,r,o)?-1:1})),ye.m(new _e(r.map((function(e){return function(){return ye.create(e)}}))))}function Lr(e,t){return te(t.type,62)?t.P.reduce((function(e,t){return t().M((function(t){return t.reduce(Lr,e)}))}),e):Ft([e,ye.m(t)])}Fr.prototype.add=function(e){var t=this;return new Fr(Sr.reduce((function(n,r,o){return n[r]=t.h[o]+e.h[o],n}),Object.create(null)))},y(Mr,Cr),Mr.prototype.s=function(e,t){var n=this;if(!this.l||!this.l.I)return Cr.prototype.s.call(this,e,t);var r=[],o=Pr(this.l,(function(e,t,o){return Ir(n.l.value.apply(n.l,[e,t,o].concat(p(T.apply(3,arguments)))),(function(e){r=Er(r,e)}))}),e,t,this.S,this.Ba.map((function(n){return function(){return n.I?Ir(n.s(e,t),(function(e){r=Er(r,e)})):vr(n,e,t)}})),this.K),a=!1;return{next:function(){if(a)return z;var e=o.O();return a=!0,Z({fa:r,J:e})}}},Mr.prototype.A=function(e,t,n){var r=this,o=(n=c(n)).next().value,a=l(n);if(this.l)return Pr(this.l,(function(e,t,n){return r.l.value.apply(r.l,[e,t,n].concat(p(T.apply(3,arguments))))}),e,t,this.S,a,this.K);var i=o(e);return i.Z({default:function(){throw Dr()},m:function(){return i.M((function(n){if((n=Gr(n=c(n).next().value,r.la)).I)throw Error("XUDY0038: The function returned by the PrimaryExpr of a dynamic function invocation can not be an updating function");return Pr(n,n.value,e,t,r.S,a,r.K)}))}})},Mr.prototype.v=function(e){if(this.K=Oo(e),Cr.prototype.v.call(this,e),this.pa.C){if(!(e=vr(this.pa,null,null)).wa())throw Dr();this.l=Gr(e.first(),this.la),this.l.I&&(this.I=!0)}};var Yr=[{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"size",j:[{type:62,g:3}],i:{type:5,g:3},callFunction:function(e,t,n,r){return Ye([r],(function(e){return e=c(e).next().value,ye.m(Q(e.P.length,5))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"get",j:[{type:62,g:3},{type:5,g:3}],i:{type:59,g:2},callFunction:He},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"put",j:[{type:62,g:3},{type:5,g:3},{type:59,g:2}],i:{type:62,g:3},callFunction:function(e,t,n,r,o,a){return Ye([o,r],(function(e){var t=c(e);if(e=t.next().value,t=t.next().value,0>=(e=e.value)||e>t.P.length)throw Error("FOAY0001: array position out of bounds.");return(t=t.P.concat()).splice(e-1,1,ve(a)),ye.m(new _e(t))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"append",j:[{type:62,g:3},{type:59,g:2}],i:{type:62,g:3},callFunction:function(e,t,n,r,o){return Ye([r],(function(e){return e=c(e).next().value.P.concat([ve(o)]),ye.m(new _e(e))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"subarray",j:[{type:62,g:3},{type:5,g:3},{type:5,g:3}],i:{type:62,g:3},callFunction:Ur},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"subarray",j:[{type:62,g:3},{type:5,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r,o){var a=ye.m(Q(r.first().value.length-o.first().value+1,5));return Ur(0,0,0,r,o,a)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"remove",j:[{type:62,g:3},{type:5,g:2}],i:{type:62,g:3},callFunction:jr},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"insert-before",j:[{type:62,g:3},{type:5,g:3},{type:59,g:2}],i:{type:62,g:3},callFunction:function(e,t,n,r,o,a){return Ye([r,o],(function(e){var t=c(e);if(e=t.next().value,(t=t.next().value.value)>e.P.length+1||0>=t)throw Error("FOAY0001: subarray position out of bounds.");return(e=e.P.concat()).splice(t-1,0,ve(a)),ye.m(new _e(e))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"head",j:[{type:62,g:3}],i:{type:59,g:2},callFunction:function(e,t,n,r){return He(0,0,0,r,ye.m(Q(1,5)))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"tail",j:[{type:62,g:3}],i:{type:59,g:2},callFunction:function(e,t,n,r){return jr(0,0,0,r,ye.m(Q(1,5)))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"reverse",j:[{type:62,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r){return Ye([r],(function(e){return e=c(e).next().value,ye.m(new _e(e.P.concat().reverse()))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"join",j:[{type:62,g:2}],i:{type:62,g:3},callFunction:function(e,t,n,r){return r.M((function(e){return e=e.reduce((function(e,t){return e.concat(t.P)}),[]),ye.m(new _e(e))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"for-each",j:[{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r,o){return Ye([r,o],(function(r){var o=(r=c(r)).next().value,a=r.next().value;if(1!==a.v)throw Rt("The callback passed into array:for-each has a wrong arity.");return r=o.P.map((function(r){return ve(a.value.call(void 0,e,t,n,Rr(a.o,[r()],t,"array:for-each")[0]))})),ye.m(new _e(r))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"filter",j:[{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r,o){return Ye([r,o],(function(r){var o=(r=c(r)).next().value,a=r.next().value;if(1!==a.v)throw Rt("The callback passed into array:filter has a wrong arity.");var i=o.P.map((function(r){return r=Rr(a.o,[r()],t,"array:filter")[0],(0,a.value)(e,t,n,r)})),u=[],s=!1;return ye.create({next:function(){if(s)return z;for(var e=0,t=o.P.length;e<t;++e){var n=i[e].ha();u[e]=n}return e=o.P.filter((function(e,t){return u[t]})),s=!0,Z(new _e(e))}})}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"fold-left",j:[{type:62,g:3},{type:59,g:2},{type:60,g:3}],i:{type:59,g:2},callFunction:function(e,t,n,r,o,a){return Ye([r,a],(function(r){var a=(r=c(r)).next().value,i=r.next().value;if(2!==i.v)throw Rt("The callback passed into array:fold-left has a wrong arity.");return a.P.reduce((function(r,o){return o=Rr(i.o,[o()],t,"array:fold-left")[0],i.value.call(void 0,e,t,n,r,o)}),o)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"fold-right",j:[{type:62,g:3},{type:59,g:2},{type:60,g:3}],i:{type:59,g:2},callFunction:function(e,t,n,r,o,a){return Ye([r,a],(function(r){var a=(r=c(r)).next().value,i=r.next().value;if(2!==i.v)throw Rt("The callback passed into array:fold-right has a wrong arity.");return a.P.reduceRight((function(r,o){return o=Rr(i.o,[o()],t,"array:fold-right")[0],i.value.call(void 0,e,t,n,r,o)}),o)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"for-each-pair",j:[{type:62,g:3},{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r,o,a){return Ye([r,o,a],(function(r){var o=c(r);r=o.next().value;var a=o.next().value;if(2!==(o=o.next().value).v)throw Rt("The callback passed into array:for-each-pair has a wrong arity.");for(var i=[],u=0,s=Math.min(r.P.length,a.P.length);u<s;++u){var l=c(Rr(o.o,[r.P[u](),a.P[u]()],t,"array:for-each-pair")),p=l.next().value;l=l.next().value,i[u]=ve(o.value.call(void 0,e,t,n,p,l))}return ye.m(new _e(i))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"sort",j:[{type:62,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r){return Ye([r],(function(r){return r=c(r).next().value.P.map((function(e){return e().O()})),Xr(e,t,n,r)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"flatten",j:[{type:59,g:2}],i:{type:59,g:2},callFunction:function(e,t,n,r){return r.M((function(e){return e.reduce(Lr,ye.empty())}))}}];function Jr(e,t,n,r,o){return o.G()?o:ye.m(rn(o.first(),e))}var qr=[{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"untypedAtomic",j:[{type:46,g:0}],i:{type:19,g:0},callFunction:Jr.bind(null,19)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"error",j:[{type:46,g:0}],i:{type:39,g:0},callFunction:Jr.bind(null,39)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"string",j:[{type:46,g:0}],i:{type:1,g:0},callFunction:Jr.bind(null,1)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"boolean",j:[{type:46,g:0}],i:{type:0,g:0},callFunction:Jr.bind(null,0)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"decimal",j:[{type:46,g:0}],i:{type:4,g:0},callFunction:Jr.bind(null,4)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"float",j:[{type:46,g:0}],i:{type:6,g:0},callFunction:Jr.bind(null,6)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"double",j:[{type:46,g:0}],i:{type:3,g:0},callFunction:Jr.bind(null,3)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"duration",j:[{type:46,g:0}],i:{type:18,g:0},callFunction:Jr.bind(null,18)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTime",j:[{type:46,g:0}],i:{type:9,g:0},callFunction:Jr.bind(null,9)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTimeStamp",j:[{type:46,g:0}],i:{type:10,g:0},callFunction:Jr.bind(null,10)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"time",j:[{type:46,g:0}],i:{type:8,g:0},callFunction:Jr.bind(null,8)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"date",j:[{type:46,g:0}],i:{type:7,g:0},callFunction:Jr.bind(null,7)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gYearMonth",j:[{type:46,g:0}],i:{type:11,g:0},callFunction:Jr.bind(null,11)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gYear",j:[{type:46,g:0}],i:{type:12,g:0},callFunction:Jr.bind(null,12)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gMonthDay",j:[{type:46,g:0}],i:{type:13,g:0},callFunction:Jr.bind(null,13)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gDay",j:[{type:46,g:0}],i:{type:15,g:0},callFunction:Jr.bind(null,15)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gMonth",j:[{type:46,g:0}],i:{type:14,g:0},callFunction:Jr.bind(null,14)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"hexBinary",j:[{type:46,g:0}],i:{type:22,g:0},callFunction:Jr.bind(null,22)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"base64Binary",j:[{type:46,g:0}],i:{type:21,g:0},callFunction:Jr.bind(null,21)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"QName",j:[{type:46,g:0}],i:{type:23,g:0},callFunction:function(e,t,n,r){if(r.G())return r;if(te((e=r.first()).type,2))throw Error("XPTY0004: The provided QName is not a string-like value.");if(!_t(e=Ht(e=rn(e,1).value,23),23))throw Error("FORG0001: The provided QName is invalid.");if(!e.includes(":"))return n=n.aa(""),ye.m(Q(new we("",n,e),23));if(t=(r=c(e.split(":"))).next().value,r=r.next().value,!(n=n.aa(t)))throw Error("FONS0004: The value "+e+" can not be cast to a QName. Did you mean to use fn:QName?");return ye.m(Q(new we(t,n,r),23))}},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"anyURI",j:[{type:46,g:0}],i:{type:20,g:0},callFunction:Jr.bind(null,20)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"normalizedString",j:[{type:46,g:0}],i:{type:48,g:0},callFunction:Jr.bind(null,48)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"token",j:[{type:46,g:0}],i:{type:52,g:0},callFunction:Jr.bind(null,52)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"language",j:[{type:46,g:0}],i:{type:51,g:0},callFunction:Jr.bind(null,51)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NMTOKEN",j:[{type:46,g:0}],i:{type:50,g:0},callFunction:Jr.bind(null,50)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NMTOKENS",j:[{type:46,g:0}],i:{type:49,g:2},callFunction:Jr.bind(null,49)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"Name",j:[{type:46,g:0}],i:{type:25,g:0},callFunction:Jr.bind(null,25)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NCName",j:[{type:46,g:0}],i:{type:24,g:0},callFunction:Jr.bind(null,24)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ID",j:[{type:46,g:0}],i:{type:42,g:0},callFunction:Jr.bind(null,42)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"IDREF",j:[{type:46,g:0}],i:{type:41,g:0},callFunction:Jr.bind(null,41)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"IDREFS",j:[{type:46,g:0}],i:{type:43,g:2},callFunction:Jr.bind(null,43)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ENTITY",j:[{type:46,g:0}],i:{type:26,g:0},callFunction:Jr.bind(null,26)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ENTITIES",j:[{type:46,g:0}],i:{type:40,g:2},callFunction:Jr.bind(null,40)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"integer",j:[{type:46,g:0}],i:{type:5,g:0},callFunction:Jr.bind(null,5)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"nonPositiveInteger",j:[{type:46,g:0}],i:{type:27,g:0},callFunction:Jr.bind(null,27)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"negativeInteger",j:[{type:46,g:0}],i:{type:28,g:0},callFunction:Jr.bind(null,28)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"long",j:[{type:46,g:0}],i:{type:31,g:0},callFunction:Jr.bind(null,31)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"int",j:[{type:46,g:0}],i:{type:32,g:0},callFunction:Jr.bind(null,32)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"short",j:[{type:46,g:0}],i:{type:33,g:0},callFunction:Jr.bind(null,33)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"byte",j:[{type:46,g:0}],i:{type:34,g:0},callFunction:Jr.bind(null,34)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"nonNegativeInteger",j:[{type:46,g:0}],i:{type:30,g:0},callFunction:Jr.bind(null,30)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedLong",j:[{type:46,g:0}],i:{type:36,g:0},callFunction:Jr.bind(null,36)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedInt",j:[{type:46,g:0}],i:{type:35,g:0},callFunction:Jr.bind(null,35)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedShort",j:[{type:46,g:0}],i:{type:38,g:0},callFunction:Jr.bind(null,38)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedByte",j:[{type:46,g:0}],i:{type:37,g:0},callFunction:Jr.bind(null,37)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"positiveInteger",j:[{type:46,g:0}],i:{type:29,g:0},callFunction:Jr.bind(null,29)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"yearMonthDuration",j:[{type:46,g:0}],i:{type:16,g:0},callFunction:Jr.bind(null,16)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dayTimeDuration",j:[{type:46,g:0}],i:{type:17,g:0},callFunction:Jr.bind(null,17)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTimeStamp",j:[{type:46,g:0}],i:{type:10,g:0},callFunction:Jr.bind(null,10)}];function Qr(e,t,n,r){return r.G()?r:ye.m(Q(r.first().value.getYear(),5))}function Kr(e,t,n,r){return r.G()?r:ye.m(Q(r.first().value.getMonth(),5))}function Wr(e,t,n,r){return r.G()?r:ye.m(Q(r.first().value.getDay(),5))}function Vr(e,t,n,r){return r.G()?r:ye.m(Q(r.first().value.getHours(),5))}function $r(e,t,n,r){return r.G()?r:ye.m(Q(r.first().value.getMinutes(),5))}function zr(e,t,n,r){return r.G()||(t=(e=ye).m,r=r.first().value,r=t.call(e,Q(r.B+r.sa,4))),r}function Zr(e,t,n,r){return r.G()?r:(e=r.first().value.Y)?ye.m(Q(e,17)):ye.empty()}var eo=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"dateTime",j:[{type:7,g:0},{type:8,g:0}],i:{type:9,g:0},callFunction:function(e,t,n,r,o){if(r.G())return r;if(o.G())return o;if(e=r.first().value,o=o.first().value,t=e.Y,n=o.Y,t||n){if(!t||n)if(!t&&n)t=n;else if(!We(t,n))throw Error("FORG0008: fn:dateTime: got a date and time value with different timezones.")}else t=null;return ye.m(Q(new ut(e.getYear(),e.getMonth(),e.getDay(),o.getHours(),o.getMinutes(),o.getSeconds(),o.sa,t),9))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"year-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:Qr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"month-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:Kr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"day-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:Wr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:Vr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:$r},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-dateTime",j:[{type:9,g:0}],i:{type:4,g:0},callFunction:zr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-dateTime",j:[{type:9,g:0}],i:{type:17,g:0},callFunction:Zr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"year-from-date",j:[{type:7,g:0}],i:{type:5,g:0},callFunction:Qr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"month-from-date",j:[{type:7,g:0}],i:{type:5,g:0},callFunction:Kr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"day-from-date",j:[{type:7,g:0}],i:{type:5,g:0},callFunction:Wr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-date",j:[{type:7,g:0}],i:{type:17,g:0},callFunction:Zr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-time",j:[{type:8,g:0}],i:{type:5,g:0},callFunction:Vr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-time",j:[{type:8,g:0}],i:{type:5,g:0},callFunction:$r},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-time",j:[{type:8,g:0}],i:{type:4,g:0},callFunction:zr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-time",j:[{type:8,g:0}],i:{type:17,g:0},callFunction:Zr}];function to(e,t){var n=t.h,r=t.o,o=t.B;switch(e.node.nodeType){case 1:var a=r.createElementNS(e.node.namespaceURI,e.node.nodeName);for(n.getAllAttributes(e.node).forEach((function(e){return o.setAttributeNS(a,e.namespaceURI,e.nodeName,e.value)})),e=(r=c(De(n,e))).next();!e.done;e=r.next())e=to(e.value,t),o.insertBefore(a,e.node,null);return{node:a,F:null};case 2:return(t=r.createAttributeNS(e.node.namespaceURI,e.node.nodeName)).value=Re(n,e),{node:t,F:null};case 4:return{node:r.createCDATASection(Re(n,e)),F:null};case 8:return{node:r.createComment(Re(n,e)),F:null};case 9:for(r=r.createDocument(),e=(n=c(De(n,e))).next();!e.done;e=n.next())e=to(e.value,t),o.insertBefore(r,e.node,null);return{node:r,F:null};case 7:return{node:r.createProcessingInstruction(e.node.target,Re(n,e)),F:null};case 3:return{node:r.createTextNode(Re(n,e)),F:null}}}function no(e,t){var n=t.B,r=t.o,o=t.h;if(!Ce(e.node))return to(e,t).node;switch(e.node.nodeType){case 2:return(r=r.createAttributeNS(e.node.namespaceURI,e.node.nodeName)).value=Re(o,e),r;case 8:return r.createComment(Re(o,e));case 1:var a=e.node.prefix,i=e.node.localName,u=r.createElementNS(e.node.namespaceURI,a?a+":"+i:i);return De(o,e).forEach((function(e){e=no(e,t),n.insertBefore(u,e,null)})),Fe(o,e).forEach((function(e){n.setAttributeNS(u,e.node.namespaceURI,e.node.nodeName,Re(o,e))})),u.normalize(),u;case 7:return r.createProcessingInstruction(e.node.target,Re(o,e));case 3:return r.createTextNode(Re(o,e))}}function ro(e,t,n){var r=e.node;if(!(Ce(r)||n||e.F))return r;r=t.da;var o=[];return n?no(e,t):(e=function(e,t,n){var r=e;for(e=Ue(n,r);null!==e;){if(2===r.node.nodeType)t.push(r.node.nodeName);else{var o=De(n,e);t.push(o.findIndex((function(e){return un(e,r)})))}e=Ue(n,r=e)}return r}(e,o,t.h),(n=r.get(e.node))||(n={node:no(e,t),F:null},r.set(e.node,n)),function(e,t,n){for(var r={};0<t.length;)r.$a=t.pop(),e="string"==typeof r.$a?Fe(n,e).find(function(e){return function(t){return t.node.nodeName===e.$a}}(r)):De(n,e)[r.$a],r={$a:r.$a};return e.node}(n,o,t.h))}function oo(e,t,n,r,o){return r.M((function(e){for(var n="",r=0;r<e.length;r++){var a=e[r],i=t.v&&te(a.type,53)?t.v.serializeToString(ro(a.value,t,!1)):Ut(ye.m(a),t).map((function(e){return rn(e,1)})).first().value;n+="{type: "+ie[a.type]+", value: "+i+"}\n"}return void 0!==o&&(n+=o.first().value),t.s.trace(n),ye.create(e)}))}var ao=[{j:[{type:59,g:2}],callFunction:oo,localName:"trace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:1,g:3}],callFunction:oo,localName:"trace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}}];function io(e,t,n,r,o){throw e=void 0===r||r.G()?new we("err","http://www.w3.org/2005/xqt-errors","FOER0000"):r.first().value,t="",void 0===o||o.G()||(t=": "+o.first().value),Error(""+e.localName+t)}var uo=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",j:[],i:{type:63,g:3},callFunction:io},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",j:[{type:23,g:0}],i:{type:63,g:3},callFunction:io},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",j:[{type:23,g:0},{type:1,g:3}],i:{type:63,g:3},callFunction:io},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",j:[{type:23,g:0},{type:1,g:3},{type:59,g:2}],i:{type:63,g:3},callFunction:function(){throw Error("Not implemented: Using an error object in error is not supported")}}];function so(e){return"string"==typeof e?e:(e=(new Ee).getChildNodes(e).find((function(e){return 8===e.nodeType})))?e.data:"some expression"}function co(e,t){e=Error.call(this,e),this.message=e.message,"stack"in e&&(this.stack=e.stack),this.position={end:{ja:t.end.ja,line:t.end.line,offset:t.end.offset},start:{ja:t.start.ja,line:t.start.line,offset:t.start.offset}}}function lo(e,t){if(t instanceof Error)throw t;"string"!=typeof e&&(e=so(e));var n=ja(t);e=e.replace("\r","").split("\n");var r=Math.floor(Math.log10(Math.min(n.end.line+2,e.length)))+1;throw e=e.reduce((function(e,t,o){var a=o+1;if(2<n.start.line-a||2<a-n.end.line)return e;if(o=Array(r).fill(" ",0,Math.floor(Math.log10(a))+1-r).join("")+a+": ",e.push(o+t),a>=n.start.line&&a<=n.end.line){var i=a<n.end.line?t.length+o.length:n.end.ja-1+o.length;a=a>n.start.line?o.length:n.start.ja-1+o.length,t=" ".repeat(o.length)+Array.from(t.substring(0,a-o.length),(function(e){return"\t"===e?"\t":" "})).join("")+"^".repeat(i-a),e.push(t)}return e}),[]),t=Ha(t).join("\n"),new co(e.join("\n")+"\n\n"+t,n)}y(co,Error);var po=Object.create(null);function fo(e,t){for(var n=[],r=0;r<e.length+1;++r)n[r]=[];return function r(o,a){if(0===o)return a;if(0===a)return o;if(void 0!==n[o][a])return n[o][a];var i=0;return e[o-1]!==t[a-1]&&(i=1),i=Math.min(r(o-1,a)+1,r(o,a-1)+1,r(o-1,a-1)+i),n[o][a]=i}(e.length,t.length)}function ho(e){var t=po[e]?po[e]:Object.keys(po).map((function(t){return{name:t,Ab:fo(e,t.slice(t.lastIndexOf(":")+1))}})).sort((function(e,t){return e.Ab-t.Ab})).slice(0,5).filter((function(t){return t.Ab<e.length/2})).reduce((function(e,t){return e.concat(po[t.name])}),[]).slice(0,5);return t.length?t.map((function(e){return'"Q{'+e.namespaceURI+"}"+e.localName+" ("+e.j.map((function(e){return 4===e?"...":se(e)})).join(", ")+')"'})).reduce((function(e,t,n,r){return 0===n?e+t:e+(n!==r.length-1?", ":" or ")+t}),"Did you mean ")+"?":"No similar functions found."}function mo(e,t,n){var r=po[e+":"+t];return r&&(r=r.find((function(e){return e.j.some((function(e){return 4===e}))?e.j.length-1<=n:e.j.length===n})))?{j:r.j,arity:n,callFunction:r.callFunction,I:r.I,localName:t,namespaceURI:e,i:r.i}:null}function go(e,t,n,r,o){po[e+":"+t]||(po[e+":"+t]=[]),po[e+":"+t].push({j:n,arity:n.length,callFunction:o,I:!1,localName:t,namespaceURI:e,i:r})}var yo={},vo=(yo.xml="http://www.w3.org/XML/1998/namespace",yo.xs="http://www.w3.org/2001/XMLSchema",yo.fn="http://www.w3.org/2005/xpath-functions",yo.map="http://www.w3.org/2005/xpath-functions/map",yo.array="http://www.w3.org/2005/xpath-functions/array",yo.math="http://www.w3.org/2005/xpath-functions/math",yo.fontoxpath="http://fontoxml.com/fontoxpath",yo.local="http://www.w3.org/2005/xquery-local-functions",yo);function wo(e,t,n,r){this.Ha=[Object.create(null)],this.Ia=Object.create(null),this.s=e,this.da=Object.keys(t).reduce((function(e,n){return void 0===t[n]||(e[n]="Q{}"+n+"[0]"),e}),Object.create(null)),this.o=Object.create(null),this.h=Object.create(null),this.v=n,this.l=r,this.B=[]}function Ao(e){return Error("XPTY0004: "+e)}function xo(e,t){return e=2===e.node.nodeType?e.node.nodeName+'="'+Re(t,e)+'"':e.node.outerHTML,Error("XQTY0024: The node "+e+" follows a node that is not an attribute node or a namespace node.")}function bo(e){return Error('XQDY0044: The node name "'+e.Ca()+'" is invalid for a computed attribute constructor.')}function Bo(){return Error("XQST0045: Functions and variables may not be declared in one of the reserved namespace URIs.")}function Eo(){return Error("XQST0060: Functions declared in a module or as an external function must reside in a namespace.")}function To(){return Error("XQST0066: A Prolog may contain at most one default function namespace declaration.")}function No(){return Error("XQST0070: The prefixes xml and xmlns may not be used in a namespace declaration or be bound to another namespaceURI.")}function Io(e){return Error('XQDY0074: The value "'+e+'" of a name expressions cannot be converted to an expanded QName.')}function Co(e){return Error('XPST0081: The prefix "'+e+'" could not be resolved')}function So(e,t){return"Q{"+(e||"")+"}"+t}function ko(e,t){for(var n=e.length-1;0<=n;--n)if(t in e[n])return e[n][t]}function Fo(e){this.o=e,this.s=this.h=0,this.B=[Object.create(null)],this.l=Object.create(null),this.v=null,this.Ia=e&&e.Ia,this.Ha=e&&e.Ha}function Oo(e){for(var t=new Fo(e.o),n=0;n<e.h+1;++n)t.B=[Object.assign(Object.create(null),t.B[0],e.B[n])],t.Ha=[Object.assign(Object.create(null),t.Ha[0],e.Ha[n])],t.l=Object.assign(Object.create(null),e.l),t.Ia=e.Ia,t.v=e.v;return t}function Do(e){e.s++,e.h++,e.B[e.h]=Object.create(null),e.Ha[e.h]=Object.create(null)}function Ro(e,t,n,r,o){if(r=So(t,n)+"~"+r,e.l[r])throw Error('XQST0049: The function or variable "Q{'+t+"}"+n+'" is declared more than once.');e.l[r]=o}function Go(e,t,n){e.B[e.h][t]=n}function Po(e,t,n){return t=So(t||"",n),e.Ha[e.h][t]=t+"["+e.s+"]"}function Mo(e,t,n,r){e.Ia[So(t||"",n)+"["+e.s+"]"]=r}function Uo(e){e.B.length=e.h,e.Ha.length=e.h,e.h--}function jo(e,t){"*"===t||Array.isArray(t)||(t=[t]);for(var n=1;n<e.length;++n)if(Array.isArray(e[n])){var r=e[n];if("*"===t||t.includes(r[0]))return r}return null}function Ho(e){return 2>e.length?"":"object"==typeof e[1]?e[2]||"":e[1]||""}function _o(e,t){return Array.isArray(e)?"object"!=typeof(e=e[1])||Array.isArray(e)?null:t in e?e[t]:null:null}function Xo(e,t){return t.reduce(jo,e)}function Lo(e,t){for(var n=[],r=1;r<e.length;++r)if(Array.isArray(e[r])){var o=e[r];"*"!==t&&o[0]!==t||n.push(o)}return n}function Yo(e){return{localName:Ho(e),namespaceURI:_o(e,"URI"),prefix:_o(e,"prefix")}}function Jo(e){var t=jo(e,"typeDeclaration");if(!t||jo(t,"voidSequenceType"))return{type:59,g:2};e={type:function e(n){switch(n[0]){case"documentTest":return 55;case"elementTest":return 54;case"attributeTest":return 47;case"piTest":return 57;case"commentTest":return 58;case"textTest":return 56;case"anyKindTest":return 53;case"anyItemType":return 59;case"anyFunctionTest":case"functionTest":case"typedFunctionTest":return 60;case"anyMapTest":case"typedMapTest":return 61;case"anyArrayTest":case"typedArrayTest":return 62;case"atomicType":return ce([_o(n,"prefix"),Ho(n)].join(":"));case"parenthesizedItemType":return e(jo(n,"*"));default:throw Error('Type declaration "'+jo(t,"*")[0]+'" is not supported.')}}(jo(t,"*")),g:3};var n=null,r=jo(t,"occurrenceIndicator");switch(r&&(n=Ho(r)),n){case"*":return e.g=2,e;case"?":return e.g=0,e;case"+":return e.g=1,e;case"":case null:return e}}function qo(e,t,n){if("object"!=typeof e[1]||Array.isArray(e[1])){var r={};r[t]=n,e.splice(1,0,r)}else e[1][t]=n}function Qo(e,t,n){return(e<<20)+(t<<12)+(n.charCodeAt(0)<<8)+n.charCodeAt(1)}wo.prototype.xa=function(e,t,n){return mo(e,t,n)},wo.prototype.ib=function(e,t){return e?null:(e=this.da[t],this.o[t]||(this.o[t]={name:t}),e)},wo.prototype.Ua=function(e,t){var n=this.l(e,t);if(n)this.B.push({nc:e,arity:t,Lb:n});else if(""===e.prefix){if(this.v)return{namespaceURI:this.v,localName:e.localName}}else if(t=this.aa(e.prefix,!0))return{namespaceURI:t,localName:e.localName};return n},wo.prototype.aa=function(e,t){return void 0===t||t?vo[e]?vo[e]:(t=this.s(e),this.h[e]||(this.h[e]={namespaceURI:t,prefix:e}),void 0!==t||e?t:null):null},Fo.prototype.xa=function(e,t,n,r){r=void 0!==r&&r;var o=this.l[So(e,t)+"~"+n];return!o||r&&o.Eb?null===this.o?null:this.o.xa(e,t,n,r):o},Fo.prototype.ib=function(e,t){return ko(this.Ha,So(e,t))||(null===this.o?null:this.o.ib(e,t))},Fo.prototype.Ua=function(e,t){var n=e.prefix,r=e.localName;return""===n&&this.v?{localName:r,namespaceURI:this.v}:n&&(n=this.aa(n,!1))?{localName:r,namespaceURI:n}:null===this.o?null:this.o.Ua(e,t)},Fo.prototype.aa=function(e,t){var n=ko(this.B,e||"");return void 0===n?null===this.o?void 0:this.o.aa(e||"",void 0===t||t):n};var Ko={},Wo=(Ko[Qo(2,2,"idivOp")]=5,Ko[Qo(16,16,"addOp")]=16,Ko[Qo(16,16,"subtractOp")]=16,Ko[Qo(16,16,"divOp")]=4,Ko[Qo(16,2,"multiplyOp")]=16,Ko[Qo(16,2,"divOp")]=16,Ko[Qo(2,16,"multiplyOp")]=16,Ko[Qo(17,17,"addOp")]=17,Ko[Qo(17,17,"subtractOp")]=17,Ko[Qo(17,17,"divOp")]=4,Ko[Qo(17,2,"multiplyOp")]=17,Ko[Qo(17,2,"divOp")]=17,Ko[Qo(2,17,"multiplyOp")]=17,Ko[Qo(9,9,"subtractOp")]=17,Ko[Qo(7,7,"subtractOp")]=17,Ko[Qo(8,8,"subtractOp")]=17,Ko[Qo(9,16,"addOp")]=9,Ko[Qo(9,16,"subtractOp")]=9,Ko[Qo(9,17,"addOp")]=9,Ko[Qo(9,17,"subtractOp")]=9,Ko[Qo(7,16,"addOp")]=7,Ko[Qo(7,16,"subtractOp")]=7,Ko[Qo(7,17,"addOp")]=7,Ko[Qo(7,17,"subtractOp")]=7,Ko[Qo(8,17,"addOp")]=8,Ko[Qo(8,17,"subtractOp")]=8,Ko[Qo(9,16,"addOp")]=9,Ko[Qo(9,16,"subtractOp")]=9,Ko[Qo(9,17,"addOp")]=9,Ko[Qo(9,17,"subtractOp")]=9,Ko[Qo(7,17,"addOp")]=7,Ko[Qo(7,17,"subtractOp")]=7,Ko[Qo(7,16,"addOp")]=7,Ko[Qo(7,16,"subtractOp")]=7,Ko[Qo(8,17,"addOp")]=8,Ko[Qo(8,17,"subtractOp")]=8,Ko),Vo={},$o=(Vo[Qo(2,2,"addOp")]=function(e,t){return e+t},Vo[Qo(2,2,"subtractOp")]=function(e,t){return e-t},Vo[Qo(2,2,"multiplyOp")]=function(e,t){return e*t},Vo[Qo(2,2,"divOp")]=function(e,t){return e/t},Vo[Qo(2,2,"modOp")]=function(e,t){return e%t},Vo[Qo(2,2,"idivOp")]=function(e,t){return Math.trunc(e/t)},Vo[Qo(16,16,"addOp")]=function(e,t){return new Jt(e.ga+t.ga)},Vo[Qo(16,16,"subtractOp")]=function(e,t){return new Jt(e.ga-t.ga)},Vo[Qo(16,16,"divOp")]=function(e,t){return e.ga/t.ga},Vo[Qo(16,2,"multiplyOp")]=Kt,Vo[Qo(16,2,"divOp")]=function(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot divide xs:yearMonthDuration by NaN");if((e=Math.round(e.ga/t))>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while dividing xs:yearMonthDuration");return new Jt(e<Number.MIN_SAFE_INTEGER||0===e?0:e)},Vo[Qo(2,16,"multiplyOp")]=function(e,t){return Kt(t,e)},Vo[Qo(17,17,"addOp")]=function(e,t){return new Ve(e.ea+t.ea)},Vo[Qo(17,17,"subtractOp")]=function(e,t){return new Ve(e.ea-t.ea)},Vo[Qo(17,17,"divOp")]=function(e,t){if(0===t.ea)throw Error("FOAR0001: Division by 0");return e.ea/t.ea},Vo[Qo(17,2,"multiplyOp")]=tt,Vo[Qo(17,2,"divOp")]=function(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot divide xs:dayTimeDuration by NaN");if((e=e.ea/t)>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while dividing xs:dayTimeDuration");return new Ve(e<Number.MIN_SAFE_INTEGER||Object.is(-0,e)?0:e)},Vo[Qo(2,17,"multiplyOp")]=function(e,t){return tt(t,e)},Vo[Qo(9,9,"subtractOp")]=ht,Vo[Qo(7,7,"subtractOp")]=ht,Vo[Qo(8,8,"subtractOp")]=ht,Vo[Qo(9,16,"addOp")]=dt,Vo[Qo(9,16,"subtractOp")]=mt,Vo[Qo(9,17,"addOp")]=dt,Vo[Qo(9,17,"subtractOp")]=mt,Vo[Qo(7,16,"addOp")]=dt,Vo[Qo(7,16,"subtractOp")]=mt,Vo[Qo(7,17,"addOp")]=dt,Vo[Qo(7,17,"subtractOp")]=mt,Vo[Qo(8,17,"addOp")]=dt,Vo[Qo(8,17,"subtractOp")]=mt,Vo[Qo(9,16,"addOp")]=dt,Vo[Qo(9,16,"subtractOp")]=mt,Vo[Qo(9,17,"addOp")]=dt,Vo[Qo(9,17,"subtractOp")]=mt,Vo[Qo(7,17,"addOp")]=dt,Vo[Qo(7,17,"subtractOp")]=mt,Vo[Qo(7,16,"addOp")]=dt,Vo[Qo(7,16,"subtractOp")]=mt,Vo[Qo(8,17,"addOp")]=dt,Vo[Qo(8,17,"subtractOp")]=mt,Vo);function zo(e,t){return te(e,5)&&te(t,5)?5:te(e,4)&&te(t,4)?4:te(e,6)&&te(t,6)?6:3}var Zo=[2,16,17,9,7,8];function ea(e,t,n){function r(e,t){return{U:o?o(e):e,V:a?a(t):t}}var o=null,a=null;te(t,19)&&(o=function(e){return rn(e,3)},t=3),te(n,19)&&(a=function(e){return rn(e,3)},n=3);var i=Zo.filter((function(e){return te(t,e)})),u=Zo.filter((function(e){return te(n,e)}));if(i.includes(2)&&u.includes(2)){var s=$o[Qo(2,2,e)],l=Wo[Qo(2,2,e)];return l||(l=zo(t,n)),"divOp"===e&&5===l&&(l=4),"idivOp"===e?ta(r,s)[0]:function(e,t){return e=r(e,t),Q(s(e.U.value,e.V.value),l)}}for(var p=(i=c(i)).next();!p.done;p=i.next()){p=p.value;for(var f={},h=c(u),d=h.next();!d.done;f={nb:f.nb,qb:f.qb},d=h.next())if(d=d.value,f.nb=$o[Qo(p,d,e)],f.qb=Wo[Qo(p,d,e)],f.nb&&void 0!==f.qb)return function(e){return function(t,n){return t=r(t,n),Q(e.nb(t.U.value,t.V.value),e.qb)}}(f)}}function ta(e,t){return[function(n,r){if(n=(r=e(n,r)).U,0===(r=r.V).value)throw Error("FOAR0001: Divisor of idiv operator cannot be (-)0");if(Number.isNaN(n.value)||Number.isNaN(r.value)||!Number.isFinite(n.value))throw Error("FOAR0002: One of the operands of idiv is NaN or the first operand is (-)INF");return Number.isFinite(n.value)&&!Number.isFinite(r.value)?Q(0,5):Q(t(n.value,r.value),5)},5]}var na=Object.create(null);function ra(e,t,n,r,o){yr.call(this,t.o.add(n.o),[t,n],{C:!1},!1,r),this.A=t,this.K=n,this.l=e,this.s=o}function oa(e,t,n){var r=Yo(Xo(e,["forClauseItem","typedVariableBinding","varName"]));(e=Xo(e,["forClauseItem","forExpr","sequenceExpr"]))&&((e=Lo(e,"*").map((function(e){return n(e,t)}))).includes(void 0)||e.includes(null)||1===(e=aa(e)).length&&ya(t,r.localName,e[0]))}function aa(e){return e.filter((function(e,t,n){return n.findIndex((function(t){return t.type===e.type&&t.g===e.g}))===t}))}function ia(e,t,n){var r=Lo(e,"*"),o=jo(e,"atomicType");if(!o)return{type:59,g:2};if(ce(_o(o,"prefix")+":"+o[2])===t.type)if(1===r.length){if(3===t.g)return n}else if(e=jo(e,"occurrenceIndicator")[1],t.g===function(e){switch(e){case"*":return 2;case"?":return 0;case"+":return 1;default:return 3}}(e))return n}function ua(e,t){sa(e,t)}function sa(e,t){var n=ma.get(e[0]);if(n)return n(e,t);for(n=1;n<e.length;n++)e[n]&&sa(e[n],t)}function ca(e,t){var n=sa(jo(e,"firstOperand")[1],t),r=sa(jo(e,"secondOperand")[1],t),o=e[0];if(n&&r){if(!(t=function(e,t,n){var r=[2,53,59,46,47];if(r.includes(t)||r.includes(n))return 2;var o=null,a=null;te(t,19)&&(o=function(e){return rn(e,3)},t=3),te(n,19)&&(a=function(e){return rn(e,3)},n=3);var i=Zo.filter((function(e){return te(t,e)}));if(r=Zo.filter((function(e){return te(n,e)})),i.includes(2)&&r.includes(2))return void 0===(r=Wo[Qo(2,2,e)])&&(r=zo(t,n)),"divOp"===e&&5===r&&(r=4),"idivOp"===e?ta((function(e,t){return{U:o?o(e):e,V:a?a(t):t}}),(function(e,t){return Math.trunc(e/t)}))[1]:r;for(var u=(i=c(i)).next();!u.done;u=i.next()){u=u.value;for(var s=c(r),l=s.next();!l.done;l=s.next())if(void 0!==(l=Wo[Qo(u,l.value,e)]))return l}}(o,n.type,r.type)))throw Error("XPTY0004: "+o+" not available for types "+se(n)+" and "+se(r));n={type:t,g:n.g},2!==t&&59!==t&&qo(e,"type",n),e=n}else e={type:2,g:3};return e}function la(e,t){sa(jo(e,"firstOperand")[1],t),sa(jo(e,"secondOperand")[1],t);e:{switch(e[0]){case"orOp":case"andOp":qo(e,"type",t={type:0,g:3}),e=t;break e}e=void 0}return e}function pa(e,t){sa(jo(e,"firstOperand")[1],t),sa(jo(e,"secondOperand")[1],t);e:{switch(e[0]){case"unionOp":case"intersectOp":case"exceptOp":qo(e,"type",t={type:53,g:2}),e=t;break e}e=void 0}return e}function fa(e,t){return sa(jo(e,"firstOperand")[1],t),sa(jo(e,"secondOperand")[1],t),qo(e,"type",t={type:0,g:3}),t}function ha(e,t){sa(jo(e,"firstOperand")[1],t),sa(jo(e,"secondOperand")[1],t),t=_o(Xo(e,["firstOperand","*"]),"type");var n=_o(Xo(e,["secondOperand","*"]),"type");return qo(e,"type",t={type:0,g:Lt(t)||Lt(n)?0:3}),t}function da(e,t){sa(jo(e,"firstOperand")[1],t),sa(jo(e,"secondOperand")[1],t),t=_o(Xo(e,["firstOperand","*"]),"type");var n=_o(Xo(e,["secondOperand","*"]),"type");return qo(e,"type",t={type:0,g:Lt(t)||Lt(n)?0:3}),t}y(ra,yr),ra.prototype.h=function(e,t){var n=this;return Ut(vr(this.A,e,t),t).M((function(r){return 0===r.length?ye.empty():Ut(vr(n.K,e,t),t).M((function(e){if(0===e.length)return ye.empty();if(1<r.length||1<e.length)throw Error('XPTY0004: the operands of the "'+n.l+'" operator should be empty or singleton.');var t=r[0];if(e=e[0],n.s&&n.type)return ye.m(n.s(t,e));var o=t.type,a=e.type,i=n.l,u=o+"~"+a+"~"+i,s=na[u];if(s||(s=na[u]=ea(i,o,a)),!(o=s))throw Error("XPTY0004: "+n.l+" not available for types "+ie[t.type]+" and "+ie[e.type]);return ye.m(o(t,e))}))}))};var ma=new Map([["unaryMinusOp",function(e,t){return(t=sa(jo(e,"operand")[1],t))?te(t.type,2)?(qo(e,"type",t={type:t.type,g:t.g}),e=t):(qo(e,"type",t={type:3,g:3}),e=t):(qo(e,"type",t={type:2,g:2}),e=t),e}],["unaryPlusOp",function(e,t){return(t=sa(jo(e,"operand")[1],t))?te(t.type,2)?(qo(e,"type",t={type:t.type,g:t.g}),e=t):(qo(e,"type",t={type:3,g:3}),e=t):(qo(e,"type",t={type:2,g:2}),e=t),e}],["addOp",ca],["subtractOp",ca],["divOp",ca],["idivOp",ca],["modOp",ca],["multiplyOp",ca],["andOp",la],["orOp",la],["sequenceExpr",function(e,t){var n=Lo(e,"*"),r=n.map((function(e){return sa(e,t)}));return function(e,t,n){return(t=0===t?{type:53,g:2}:1===t?n[0]:n.includes(void 0)||n.includes(null)||1<(t=aa(n)).length?{type:59,g:2}:{type:t[0].type,g:2})&&59!==t.type&&qo(e,"type",t),t}(e,n.length,r)}],["unionOp",pa],["intersectOp",pa],["exceptOp",pa],["stringConcatenateOp",function(e,t){return sa(jo(e,"firstOperand")[1],t),sa(jo(e,"secondOperand")[1],t),qo(e,"type",t={type:1,g:3}),t}],["rangeSequenceExpr",function(e,t){return sa(jo(e,"startExpr")[1],t),sa(jo(e,"endExpr")[1],t),qo(e,"type",t={type:5,g:1}),t}],["equalOp",fa],["notEqualOp",fa],["lessThanOrEqualOp",fa],["lessThanOp",fa],["greaterThanOrEqualOp",fa],["greaterThanOp",fa],["eqOp",ha],["neOp",ha],["ltOp",ha],["leOp",ha],["gtOp",ha],["geOp",ha],["isOp",da],["nodeBeforeOp",da],["nodeAfterOp",da],["pathExpr",function(e,t){var n=jo(e,"rootExpr");return n&&n[1]&&sa(n[1],t),Lo(e,"stepExpr").map((function(e){return sa(e,t)})),function(e,t){var n=Lo(e,"stepExpr");if(!n)return{type:59,g:2};for(var r=(n=c(n)).next();!r.done;r=n.next()){var o=r.value;r=t;var a=null;if(o){for(var i=Lo(o,"*"),u="",s=(i=c(i)).next();!s.done;s=i.next())switch(s=s.value,s[0]){case"filterExpr":a=_o(Xo(s,["*"]),"type");break;case"xpathAxis":e:{switch(u=s[1]){case"attribute":a={type:47,g:2};break e;case"child":case"decendant":case"self":case"descendant-or-self":case"following-sibling":case"following":case"namespace":case"parent":case"ancestor":case"preceding-sibling":case"preceding":case"ancestor-or-self":a={type:53,g:2};break e}a=void 0}break;case"nameTest":var l=Yo(s);if(null!==l.namespaceURI)break;if("attribute"===u&&!l.prefix)break;void 0!==(l=r.aa(l.prefix||""))&&qo(s,"URI",l);break;case"lookup":a={type:59,g:2}}a&&59!==a.type&&qo(o,"type",a)}o=_o(o,"type")}return o&&59!==o.type&&qo(e,"type",o),o}(e,t)}],["contextItemExpr",function(){return{type:59,g:2}}],["ifThenElseExpr",function(e,t){sa(jo(jo(e,"ifClause"),"*"),t);var n=sa(jo(jo(e,"thenClause"),"*"),t);return t=sa(jo(jo(e,"elseClause"),"*"),t),n&&t&&n.type===t.type&&n.g===t.g?(59!==n.type&&qo(e,"type",n),e=n):e={type:59,g:2},e}],["instanceOfExpr",function(e,t){return sa(jo(e,"argExpr"),t),sa(jo(e,"sequenceType"),t),qo(e,"type",t={type:0,g:3}),t}],["integerConstantExpr",function(e){var t={type:5,g:3};return qo(e,"type",t),t}],["doubleConstantExpr",function(e){var t={type:3,g:3};return qo(e,"type",t),t}],["decimalConstantExpr",function(e){var t={type:4,g:3};return qo(e,"type",t),t}],["stringConstantExpr",function(e){var t={type:1,g:3};return qo(e,"type",t),t}],["functionCallExpr",function(e,t){return Lo(jo(e,"arguments"),"*").map((function(e){return sa(e,t)})),function(e,t){if(!t||!t.ia)return{type:59,g:2};var n=jo(e,"functionName"),r=Yo(n),o=r.localName,a=r.prefix,i=r.namespaceURI;if(r=Lo(jo(e,"arguments"),"*"),null===i){if(!(a=t.ia.Ua({localName:o,prefix:a},r.length)))return{type:59,g:2};o=a.localName,qo(n,"URI",i=a.namespaceURI),n[2]=o}return(t=t.ia.xa(i,o,r.length))&&63!==t.i.type?(59!==t.i.type&&qo(e,"type",t.i),t.i):{type:59,g:2}}(e,t)}],["arrowExpr",function(e,t){return sa(jo(e,"argExpr")[1],t),function(e,t){if(!t||!t.ia)return{type:59,g:2};var n=jo(e,"EQName");if(!n)return{type:59,g:2};var r=Yo(n);n=r.localName;var o=r.prefix;return r=Lo(jo(e,"arguments"),"*"),(n=t.ia.Ua({localName:n,prefix:o},r.length))&&(t=t.ia.xa(n.namespaceURI,n.localName,r.length+1))?(59!==t.i.type&&qo(e,"type",t.i),t.i):{type:59,g:2}}(e,t)}],["dynamicFunctionInvocationExpr",function(e,t){return sa(Xo(e,["functionItem","*"]),t),(e=jo(e,"arguments"))&&sa(e,t),{type:59,g:2}}],["namedFunctionRef",function(e,t){return function(e,t){if(!t||!t.ia)return{type:59,g:2};var n=jo(e,"functionName"),r=Yo(n),o=r.localName,a=r.namespaceURI,i=r.prefix;if(r=Number(Xo(e,["integerConstantExpr","value"])[1]),!a){if(!(a=t.ia.Ua({localName:o,prefix:i},r)))return{type:59,g:2};o=a.localName,qo(n,"URI",a=a.namespaceURI)}return(t=t.ia.xa(a,o,r)||null)?(59!==t.i.type&&63!==t.i.type&&qo(e,"type",t.i),t.i):{type:59,g:2}}(e,t)}],["inlineFunctionExpr",function(e,t){return sa(jo(e,"functionBody")[1],t),qo(e,"type",t={type:60,g:3}),t}],["castExpr",function(e){var t=Xo(e,["singleType","atomicType"]);return 59!==(t={type:ce(_o(t,"prefix")+":"+t[2]),g:3}).type&&qo(e,"type",t),t}],["castableExpr",function(e){var t={type:0,g:3};return qo(e,"type",t),t}],["simpleMapExpr",function(e,t){for(var n,r=Lo(e,"pathExpr"),o=0;o<r.length;o++)n=sa(r[o],t);return null!=n?(59!==(t={type:n.type,g:2}).type&&qo(e,"type",t),e=t):e={type:59,g:2},e}],["mapConstructor",function(e,t){return Lo(e,"mapConstructorEntry").map((function(e){return{key:sa(Xo(e,["mapKeyExpr","*"]),t),value:sa(Xo(e,["mapValueExpr","*"]),t)}})),function(e){var t={type:61,g:3};return qo(e,"type",t),t}(e)}],["arrayConstructor",function(e,t){return Lo(jo(e,"*"),"arrayElem").map((function(e){return sa(e,t)})),function(e){var t={type:62,g:3};return qo(e,"type",t),t}(e)}],["unaryLookup",function(e){return jo(e,"NCName"),{type:59,g:2}}],["typeswitchExpr",function(e,t){return function(e,t,n,r){if(!t||n.includes(void 0))return{type:59,g:2};for(var o=Lo(e,"typeswitchExprCaseClause"),a=0;a<n.length;a++){var i=jo(o[a],"*");switch(i[0]){case"sequenceType":if(i=ia(i,t,n[a]))return 59!==i.type&&qo(e,"type",i),i;continue;case"sequenceTypeUnion":for(r=Lo(i,"*"),o=0;2>o;o++)if(i=ia(r[o],t,n[a]))return 59!==i.type&&qo(e,"type",i),i;default:return{type:59,g:2}}}return 59!==r.type&&qo(e,"type",r),r}(e,sa(jo(e,"argExpr")[1],t),Lo(e,"typeswitchExprCaseClause").map((function(e){return sa(Xo(e,["resultExpr"])[1],t)})),sa(Xo(e,["typeswitchExprDefaultClause","resultExpr"])[1],t))}],["quantifiedExpr",function(e,t){return Lo(e,"*").map((function(e){return sa(e,t)})),function(e){var t={type:0,g:3};return qo(e,"type",t),t}(e)}],["x:stackTrace",function(e,t){return sa((e=Lo(e,"*"))[0],t)}],["queryBody",function(e,t){return sa(e[1],t)}],["flworExpr",function(e,t){return function(e,t){for(var n=sa,r=!1,o=1;o<e.length;o++)switch(e[o][0]){case"letClause":va(t);var a=e[o],i=t,u=n,s=Xo(a,["letClauseItem","typedVariableBinding","varName"]);s=Yo(s),u=u((a=Xo(a,["letClauseItem","letExpr"]))[1],i),ya(i,s.localName,u);break;case"forClause":r=!0,va(t),oa(e[o],t,n);break;case"whereClause":va(t),n(i=e[o],t),qo(i,"type",{type:0,g:3});break;case"orderByClause":va(t);break;case"returnClause":return i=n,qo(n=Xo(o=e[o],["*"]),"type",t=i(n,t)),qo(o,"type",t),(n=t)?(r&&(n={type:n.type,g:2}),59!==n.type&&qo(e,"type",n),n):{type:59,g:2};default:return(n=n(e[o],t))?(r&&(n={type:n.type,g:2}),59!==n.type&&qo(e,"type",n),n):{type:59,g:2}}if(!(0<t.h))throw Error("Variable scope out of bound");t.h--,t.o.pop(),t.v.pop()}(e,t)}],["varRef",function(e,t){var n,r=Yo(jo(e,"name"));e:{for(n=t.h;0<=n;n--){var o=t.o[n][r.localName];if(o){n=o;break e}}n=void 0}return n&&59!==n.type&&qo(e,"type",n),null===r.namespaceURI&&void 0!==(t=t.aa(r.prefix))&&qo(e,"URI",t),n}]]);function ga(e){this.h=0,this.ia=e,this.o=[{}],this.v=[{}]}function ya(e,t,n){if(e.o[e.h][t])throw Error("Another variable of in the scope "+e.h+" with the same name "+t+" already exists");e.o[e.h][t]=n}function va(e){e.h++,e.o.push({}),e.v.push({})}function wa(e,t){var n={};yr.call(this,new Fr((n.external=1,n)),e,{C:e.every((function(e){return e.C}))},!1,t),this.l=e}function Aa(e,t){var n={};yr.call(this,new Fr((n.external=1,n)),e,{C:e.every((function(e){return e.C}))},!1,t),this.l=e}function xa(e){if(null===e)throw Dt("context is absent, it needs to be present to use axes.");if(!te(e.type,53))throw Error("XPTY0020: Axes can only be applied to nodes.");return e.value}function ba(e,t){t=t||{Ra:!1},yr.call(this,e.o,[e],{R:"reverse-sorted",X:!1,subtree:!1,C:!1}),this.l=e,this.s=!!t.Ra}ga.prototype.aa=function(e){for(var t=this.h;0<=t;t--){var n=this.v[t][e];if(void 0!==n)return n}return this.ia?this.ia.aa(e):void 0},y(wa,yr),wa.prototype.h=function(e,t){return 0===this.l.length?ye.m(new _e([])):vr(this.l[0],e,t).M((function(e){return ye.m(new _e(e.map((function(e){return ve(ye.m(e))}))))}))},y(Aa,yr),Aa.prototype.h=function(e,t){return ye.m(new _e(this.l.map((function(n){return ve(vr(n,e,t))}))))},y(ba,yr),ba.prototype.h=function(e,t){var n=this;t=t.h,e=xa(e.N);var r=this.l.B();return r=r&&(r.startsWith("name-")||"type-1"===r)?"type-1":null,ye.create(function(e,t,n){var r=t;return{next:function(){if(!r)return z;var t=r;return r=Ue(e,t,n),Z(Le(t))}}}(t,this.s?e:Ue(t,e,r),r)).filter((function(e){return n.l.l(e)}))};var Ba=new Map([["type-1-or-type-2",["name","type-1","type-2"]],["type-1",["name"]],["type-2",["name"]]]);function Ea(e,t){if(null===e)return t;if(null===t||e===t)return e;var n=e.startsWith("name-")?"name":e,r=t.startsWith("name-")?"name":t,o=Ba.get(n);return void 0!==o&&o.includes(r)?t:void 0!==(t=Ba.get(r))&&t.includes(n)?e:"empty"}function Ta(e,t){var n={};yr.call(this,new Fr((n.attribute=1,n)),[e],{R:"unsorted",subtree:!0,X:!0,C:!1}),this.l=e,this.s=Ea(this.l.B(),t)}function Na(e,t){yr.call(this,e.o,[e],{R:"sorted",subtree:!0,X:!0,C:!1}),this.s=e,this.l=Ea(t,e.B())}function Ia(e,t,n){var r=t.node.nodeType;if(1!==r&&9!==r)return{next:function(){return z}};var o=Ge(e,t,n);return{next:function(){if(!o)return z;var t=o;return o=Me(e,o,n),Z(t)}}}function Ca(e,t){t=t||{Ra:!1},yr.call(this,e.o,[e],{C:!1,X:!1,R:"sorted",subtree:!0}),this.l=e,this.s=!!t.Ra,this.A=(e=this.l.B())&&(e.startsWith("name-")||"type-1"===e)||"type-1-or-type-2"===e?"type-1":null}function Sa(e,t,n){var r=e.node.nodeType;if(1!==r&&9!==r)return e;for(r=Pe(t,e,n);null!==r;){if(1!==r.node.nodeType)return r;r=Pe(t,e=r,n)}return e}function ka(e,t,n,r){if(void 0!==n&&n){var o=t,a=!1;return{next:function(){if(a)return z;if(un(o,t))return un(o=Sa(t,e,r),t)?(a=!0,z):Z(Le(o));var n=o.node.nodeType,i=9===n||2===n?null:je(e,o,r);return null!==i?Z(Le(o=Sa(i,e,r))):un(o=9===n?null:Ue(e,o,r),t)?(a=!0,z):Z(Le(o))}}}var i=[Ia(e,t,r)];return{next:function(){if(!i.length)return z;for(var t=i[0].next(0);t.done;){if(i.shift(),!i.length)return z;t=i[0].next(0)}return i.unshift(Ia(e,t.value,r)),Z(Le(t.value))}}}function Fa(e){yr.call(this,e.o,[e],{R:"sorted",X:!0,subtree:!1,C:!1}),this.l=e,this.s=(e=this.l.B())&&(e.startsWith("name-")||"type-1"===e)?"type-1":null}function Oa(e,t){yr.call(this,e.o,[e],{R:"sorted",X:!0,subtree:!1,C:!1}),this.l=e,this.s=Ea(this.l.B(),t)}function Da(e,t){yr.call(this,e.o,[e],{R:"reverse-sorted",X:!0,subtree:!0,C:!1}),this.l=e,this.s=Ea(t,this.l.B())}function Ra(e){yr.call(this,e.o,[e],{C:!1,X:!0,R:"reverse-sorted",subtree:!1}),this.l=e,this.s=(e=this.l.B())&&(e.startsWith("name-")||"type-1"===e)?"type-1":null}function Ga(e,t){yr.call(this,e.o,[e],{C:!1,X:!0,R:"reverse-sorted",subtree:!1}),this.l=e,this.s=Ea(this.l.B(),t)}function Pa(e,t){yr.call(this,e.o,[e],{R:"sorted",subtree:!0,X:!0,C:!1}),this.l=e,this.s=Ea(this.l.B(),t)}function Ma(e,t,n,r){var o=e.o.add(t.o).add(n.o);Cr.call(this,o,[e,t,n],{C:e.C&&t.C&&n.C,X:t.X===n.X&&t.X,R:t.da===n.da?t.da:"unsorted",subtree:t.subtree===n.subtree&&t.subtree},r),this.l=e}function Ua(e,t,n){this.location=e,this.o=t,this.h=n}function ja(e){return e.h instanceof Error?e.location:ja(e.h)}function Ha(e){var t=e.h instanceof co?["Inner error:",e.h.message]:e.h instanceof Error?[e.h.toString()]:Ha(e.h);return t.push("  at <"+e.o+">:"+e.location.start.line+":"+e.location.start.ja+" - "+e.location.end.line+":"+e.location.end.ja),t}function _a(e,t,n){Cr.call(this,n.o,[n],{C:n.C,X:n.X,R:n.da,subtree:n.subtree}),this.l=t,this.K={end:{ja:e.end.ja,line:e.end.line,offset:e.end.offset},start:{ja:e.start.ja,line:e.start.line,offset:e.start.offset}}}function Xa(e,t,n,r){yr.call(this,e,t,n,!0),this.l=r,this.I=this.l.I}function La(e,t,n,r){var o=[],a=e.K(t,n,r,(function(n){if(e.l instanceof Xa)return Ir(La(e.l,t,n,r),(function(e){return o=e}));var a=null;return ye.create({next:function(){for(;;){if(!a){var t=n.next(0);if(t.done)return z;t=e.l.s(t.value,r),a=Ir(t,(function(e){return o=Er(o,e)})).value}if(!(t=a.next(0)).done)return t;a=null}}})})),i=!1;return{next:function(){if(i)return z;var e=a.O();return i=!0,Z(new wr(e,o))}}}function Ya(e,t,n,r){return e.K(t,n,r,(function(n){if(e.l instanceof Xa)return Ya(e.l,t,n,r);var o=null;return ye.create({next:function(){for(;;){if(!o){var t=n.next(0);if(t.done)return z;o=vr(e.l,t.value,r).value}if(!(t=o.next(0)).done)return t;o=null}}})}))}function Ja(e,t,n,r){Xa.call(this,t.o.add(r.o),[t,r],{C:!1},r),this.S=e.prefix,this.la=e.namespaceURI,this.Xb=e.localName,this.Gb=null,this.A=n,this.Ba=null,this.pa=t}function qa(e,t,n){var r={};yr.call(this,new Fr((r.external=1,r)),[n],{C:!1,R:"unsorted"}),this.S=e.map((function(e){return e.name})),this.A=e.map((function(e){return e.type})),this.s=null,this.K=t,this.l=n}function Qa(e,t,n){if(Xa.call(this,t.o.add(n.o),[t,n],{C:!1,X:n.X,R:n.da,subtree:n.subtree},n),e.prefix||e.namespaceURI)throw Error("Not implemented: let expressions with namespace usage.");this.A=e.prefix,this.S=e.namespaceURI,this.Ba=e.localName,this.la=t,this.pa=null}function Ka(e,t){switch(yr.call(this,new Fr({}),[],{C:!0,R:"sorted"},!1,t),t.type){case 5:var n=Q(parseInt(e,10),t.type);break;case 1:n=Q(e,t.type);break;case 4:case 3:n=Q(parseFloat(e),t.type);break;default:throw new TypeError("Type "+t+" not expected in a literal")}this.l=function(){return ye.m(n)}}function Wa(e,t){var n={};yr.call(this,new Fr((n.external=1,n)),e.reduce((function(e,t){return e.concat(t.key,t.value)}),[]),{C:!1},!1,t),this.l=e}function Va(e,t,n){var r={};yr.call(this,new Fr((r.external=1,r)),[],{C:!0},!1,n),this.s=t,this.A=e,this.l=null}y(Ta,yr),Ta.prototype.h=function(e,t){var n=this;return t=t.h,1!==(e=xa(e.N)).node.nodeType?ye.empty():(e=Fe(t,e,this.s).filter((function(e){return"http://www.w3.org/2000/xmlns/"!==e.node.namespaceURI})).map((function(e){return Le(e)})).filter((function(e){return n.l.l(e)})),ye.create(e))},Ta.prototype.B=function(){return"type-1"},y(Na,yr),Na.prototype.h=function(e,t){var n=this,r=t.h,o=xa(e.N);if(1!==(e=o.node.nodeType)&&9!==e)return ye.empty();var a=null,i=!1;return ye.create({next:function(){for(;!i;){if(!a){if(!(a=Ge(r,o,n.l))){i=!0;continue}return Z(Le(a))}if(a=Me(r,a,n.l))return Z(Le(a));i=!0}return z}}).filter((function(e){return n.s.l(e)}))},y(Ca,yr),Ca.prototype.h=function(e,t){var n=this;return e=function(e,t,n){var r=[on(t)];return{next:function(t){if(0<r.length&&1&t&&r.shift(),!r.length)return z;for(t=r[0].next(0);t.done;){if(r.shift(),!r.length)return z;t=r[0].next(0)}return r.unshift(Ia(e,t.value,n)),Z(Le(t.value))}}}(t=t.h,e=xa(e.N),this.A),this.s||e.next(0),ye.create(e).filter((function(e){return n.l.l(e)}))},y(Fa,yr),Fa.prototype.h=function(e,t){var n=this;return t=t.h,e=xa(e.N),ye.create(function(e,t,n){for(var r=[];t&&9!==t.node.nodeType;t=Ue(e,t,null)){var o=Me(e,t,n);o&&r.push(o)}var a=null;return{next:function(){for(;a||r.length;){if(!a){a=ka(e,r[0],!1,n);var t=Z(Le(r[0])),o=Me(e,r[0],n);return o?r[0]=o:r.shift(),t}if(!(t=a.next(0)).done)return t;a=null}return z}}}(t,e,this.s)).filter((function(e){return n.l.l(e)}))},y(Oa,yr),Oa.prototype.h=function(e,t){var n=this;return t=t.h,e=xa(e.N),ye.create(function(e,t,n){return{next:function(){return(t=t&&Me(e,t,n))?Z(Le(t)):z}}}(t,e,this.s)).filter((function(e){return n.l.l(e)}))},y(Da,yr),Da.prototype.h=function(e,t){return(e=Ue(t=t.h,e=xa(e.N),this.s))?(e=Le(e),this.l.l(e)?ye.m(e):ye.empty()):ye.empty()},y(Ra,yr),Ra.prototype.h=function(e,t){var n=this;return t=t.h,e=xa(e.N),ye.create(function(e,t,n){for(var r=[];t&&9!==t.node.nodeType;t=Ue(e,t,null)){var o=je(e,t,n);null!==o&&r.push(o)}var a=null;return{next:function(){for(;a||r.length;){a||(a=ka(e,r[0],!0,n));var t=a.next(0);if(t.done){a=null,t=je(e,r[0],n);var o=Z(Le(r[0]));return null===t?r.shift():r[0]=t,o}return t}return z}}}(t,e,this.s)).filter((function(e){return n.l.l(e)}))},y(Ga,yr),Ga.prototype.h=function(e,t){var n=this;return t=t.h,e=xa(e.N),ye.create(function(e,t,n){return{next:function(){return(t=t&&je(e,t,n))?Z(Le(t)):z}}}(t,e,this.s)).filter((function(e){return n.l.l(e)}))},y(Pa,yr),Pa.prototype.h=function(e){return xa(e.N),this.l.l(e.N)?ye.m(e.N):ye.empty()},Pa.prototype.B=function(){return this.s},y(Ma,Cr),Ma.prototype.A=function(e,t,n){var r=null,o=n[0](e);return ye.create({next:function(t){return r||(r=(o.ha()?n[1](e):n[2](e)).value),r.next(t)}})},Ma.prototype.v=function(e){if(Cr.prototype.v.call(this,e),this.l.I)throw ir()},y(_a,Cr),_a.prototype.A=function(e,t,n){var r=this;t=c(n).next().value;try{var o=t(e)}catch(e){throw new Ua(this.K,this.l,e)}return ye.create({next:function(e){try{return o.value.next(e)}catch(e){throw new Ua(r.K,r.l,e)}}})},_a.prototype.v=function(e){try{Cr.prototype.v.call(this,e)}catch(e){throw new Ua(this.K,this.l,e)}},y(Xa,yr),Xa.prototype.h=function(e,t){var n=this;return this.K(e,on(e),t,(function(r){if(n.l instanceof Xa)return Ya(n.l,e,r,t);var o=null;return ye.create({next:function(e){for(;;){if(!o){var a=r.next(0);if(a.done)return z;o=vr(n.l,a.value,t).value}if(!(a=o.next(e)).done)return a;o=null}}})}))},Xa.prototype.s=function(e,t){return La(this,e,on(e),t)},Xa.prototype.v=function(e){yr.prototype.v.call(this,e),this.I=this.l.I;for(var t=(e=c(this.ta)).next();!t.done;t=e.next())if((t=t.value)!==this.l&&t.I)throw ir()},y(Ja,Xa),Ja.prototype.K=function(e,t,n,r){var o=this,a=null,i=null,u=0;return r({next:function(){for(var e={};;){if(!a){var r=t.next(0);if(r.done)return z;i=r.value,u=0,a=vr(o.pa,i,n).value}if(e.mb=a.next(0),!e.mb.done)return u++,(r={})[o.Gb]=function(e){return function(){return ye.m(e.mb.value)}}(e),e=r,o.Ba&&(e[o.Ba]=function(){return ye.m(new oe(5,u))}),Z(St(i,e));a=null,e={mb:e.mb}}}})},Ja.prototype.v=function(e){if(this.S&&(this.la=e.aa(this.S),!this.la&&this.S))throw Error("XPST0081: Could not resolve namespace for prefix "+this.S+" in a for expression");if(this.pa.v(e),Do(e),this.Gb=Po(e,this.la,this.Xb),this.A){if(this.A.prefix&&(this.A.namespaceURI=e.aa(this.A.prefix),!this.A.namespaceURI&&this.A.prefix))throw Error("XPST0081: Could not resolve namespace for prefix "+this.S+" in the positionalVariableBinding in a for expression");this.Ba=Po(e,this.A.namespaceURI,this.A.localName)}if(this.l.v(e),Uo(e),this.pa.I)throw ir();this.l.I&&(this.I=!0)},y(qa,yr),qa.prototype.h=function(e,t){var n=this,r=new Ae({j:this.A,arity:this.A.length,Sa:!0,I:this.l.I,localName:"dynamic-function",namespaceURI:"",i:this.K,value:function(r,o,a){var i=T.apply(3,arguments),u=St(Ct(e,-1,null,ye.empty()),n.s.reduce((function(e,t,n){return e[t]=ve(i[n]),e}),Object.create(null)));return vr(n.l,u,t)}});return ye.m(r)},qa.prototype.v=function(e){if(Do(e),this.s=this.S.map((function(t){return Po(e,t.namespaceURI,t.localName)})),this.l.v(e),Uo(e),this.l.I)throw Error("Not implemented: inline functions can not yet be updating.")},y(Qa,Xa),Qa.prototype.K=function(e,t,n,r){var o=this;return r({next:function(){var e=t.next(0);if(e.done)return z;var r={};return Z(e=St(e=e.value,(r[o.pa]=ve(vr(o.la,e,n)),r)))}})},Qa.prototype.v=function(e){if(this.A&&(this.S=e.aa(this.A),!this.S&&this.A))throw Error("XPST0081: Could not resolve namespace for prefix "+this.A+" using in a for expression");if(this.la.v(e),Do(e),this.pa=Po(e,this.S,this.Ba),this.l.v(e),Uo(e),this.I=this.l.I,this.la.I)throw ir()},y(Ka,yr),Ka.prototype.h=function(){return this.l()},y(Wa,yr),Wa.prototype.h=function(e,t){var n=this;return Ye(this.l.map((function(n){return Ut(vr(n.key,e,t),t).Z({default:function(){throw Error("XPTY0004: A key of a map should be a single atomizable value.")},m:function(e){return e}})})),(function(r){return ye.m(new Qe(r.map((function(r,o){return{key:r,value:ve(vr(n.l[o].value,e,t))}}))))}))},y(Va,yr),Va.prototype.h=function(){var e=new Ae({j:this.l.j,I:this.l.I,arity:this.s,localName:this.l.localName,namespaceURI:this.l.namespaceURI,i:this.l.i,value:this.l.callFunction});return ye.m(e)},Va.prototype.v=function(e){var t=this.A.namespaceURI,n=this.A.localName,r=this.A.prefix;if(null===t){var o=e.Ua({localName:n,prefix:r},this.s);if(!o)throw Error("XPST0017: The function "+(r?r+":":"")+n+" with arity "+this.s+" could not be resolved. "+ho(n));t=o.namespaceURI,n=o.localName}if(this.l=e.xa(t,n,this.s)||null,!this.l)throw e=this.A,Error("XPST0017: Function "+(e.namespaceURI?"Q{"+e.namespaceURI+"}":e.prefix?e.prefix+":":"")+e.localName+" with arity of "+this.s+" not registered. "+ho(n));yr.prototype.v.call(this,e)};var $a={},za=($a[5]=5,$a[27]=5,$a[28]=5,$a[31]=5,$a[32]=5,$a[33]=5,$a[34]=5,$a[30]=5,$a[36]=5,$a[35]=5,$a[38]=5,$a[37]=5,$a[29]=5,$a[4]=4,$a[6]=6,$a[3]=3,$a);function Za(e,t,n){yr.call(this,t.o,[t],{C:!1},!1,n),this.s=t,this.l=e}function ei(e,t){yr.call(this,e.reduce((function(e,t){return e.add(t.o)}),new Fr({})),e,{C:e.every((function(e){return e.C}))},!1,t),this.l=e,this.s=e.reduce((function(e,t){return Ea(e,t.B())}),null)}function ti(e,t){var n,r=e.reduce((function(e,t){return 0<Or(e,t.o)?e:t.o}),new Fr({}));for(yr.call(this,r,e,{C:e.every((function(e){return e.C}))},!1,t),t=0;t<e.length&&(void 0===n&&(n=e[t].B()),null!==n);++t)if(n!==e[t].B()){n=null;break}this.s=n,this.l=e}function ni(e,t){var n;return ye.create({next:function(r){for(;;){if(!n){var o=e.value.next(r);if(o.done)return z;n=Mt(o.value,t)}if(!(o=n.value.next(r)).done)return o;n=null}}})}function ri(e,t,n){function r(e,t){return{U:i?i(e):e,V:u?u(t):t}}function o(e){return te(t,e)&&te(n,e)}function a(e){return 0<e.filter((function(e){return te(t,e)})).length&&0<e.filter((function(e){return te(n,e)})).length}var i=null,u=null;if(te(t,19)&&te(n,19)?t=n=1:te(t,19)?(i=function(e){return rn(e,n)},t=n):te(n,19)&&(u=function(e){return rn(e,t)},n=t),te(t,23)&&te(n,23))return function(e,t){if("eqOp"===e)return function(e,n){return e=(n=t(e,n)).U,n=n.V,e.value.namespaceURI===n.value.namespaceURI&&e.value.localName===n.value.localName};if("neOp"===e)return function(e,n){return e=(n=t(e,n)).U,n=n.V,e.value.namespaceURI!==n.value.namespaceURI||e.value.localName!==n.value.localName};throw Error('XPTY0004: Only the "eq" and "ne" comparison is defined for xs:QName')}(e,r);if(o(0)||a([1,47,61])||a([2,47,61])||o(20)||o(22)||o(21)||a([1,20])){var s=function(e,t){switch(e){case"eqOp":return function(e,n){return(e=t(e,n)).U.value===e.V.value};case"neOp":return function(e,n){return(e=t(e,n)).U.value!==e.V.value};case"ltOp":return function(e,n){return(e=t(e,n)).U.value<e.V.value};case"leOp":return function(e,n){return(e=t(e,n)).U.value<=e.V.value};case"gtOp":return function(e,n){return(e=t(e,n)).U.value>e.V.value};case"geOp":return function(e,n){return(e=t(e,n)).U.value>=e.V.value}}}(e,r);if(void 0!==s)return s}if(o(16)&&void 0!==(s=function(e,t){switch(e){case"ltOp":return function(e,n){return(e=t(e,n)).U.value.ga<e.V.value.ga};case"leOp":return function(e,n){return e=(n=t(e,n)).U,n=n.V,We(e.value,n.value)||e.value.ga<n.value.ga};case"gtOp":return function(e,n){return(e=t(e,n)).U.value.ga>e.V.value.ga};case"geOp":return function(e,n){return e=(n=t(e,n)).U,n=n.V,We(e.value,n.value)||e.value.ga>n.value.ga}}}(e,r))||o(17)&&void 0!==(s=function(e,t){switch(e){case"eqOp":return function(e,n){return We((e=t(e,n)).U.value,e.V.value)};case"ltOp":return function(e,n){return(e=t(e,n)).U.value.ea<e.V.value.ea};case"leOp":return function(e,n){return e=(n=t(e,n)).U,n=n.V,We(e.value,n.value)||e.value.ea<n.value.ea};case"gtOp":return function(e,n){return(e=t(e,n)).U.value.ea>e.V.value.ea};case"geOp":return function(e,n){return e=(n=t(e,n)).U,n=n.V,We(e.value,n.value)||e.value.ea>n.value.ea}}}(e,r))||o(18)&&void 0!==(s=function(e,t){switch(e){case"eqOp":return function(e,n){return We((e=t(e,n)).U.value,e.V.value)};case"neOp":return function(e,n){return!We((e=t(e,n)).U.value,e.V.value)}}}(e,r)))return s;if((o(9)||o(7)||o(8))&&void 0!==(s=function(e,t){switch(e){case"eqOp":return function(e,n,r){return ft((e=t(e,n)).U.value,e.V.value,Nt(r))};case"neOp":return function(e,n,r){return!ft((e=t(e,n)).U.value,e.V.value,Nt(r))};case"ltOp":return function(e,n,r){return e=t(e,n),r=Nt(r),0>pt(e.U.value,e.V.value,r)};case"leOp":return function(e,n,r){var o;return e=(n=t(e,n)).U,n=n.V,(o=ft(e.value,n.value,Nt(r)))||(r=Nt(r),o=0>pt(e.value,n.value,r)),o};case"gtOp":return function(e,n,r){return e=t(e,n),r=Nt(r),0<pt(e.U.value,e.V.value,r)};case"geOp":return function(e,n,r){var o;return e=(n=t(e,n)).U,n=n.V,(o=ft(e.value,n.value,Nt(r)))||(r=Nt(r),o=0<pt(e.value,n.value,r)),o}}}(e,r)))return s;if((o(11)||o(12)||o(13)||o(14)||o(15))&&void 0!==(s=function(e,t){switch(e){case"eqOp":return function(e,n,r){return ft((e=t(e,n)).U.value,e.V.value,Nt(r))};case"neOp":return function(e,n,r){return!ft((e=t(e,n)).U.value,e.V.value,Nt(r))}}}(e,r)))return s;throw Error("XPTY0004: "+e+" not available for "+ie[t]+" and "+ie[n])}y(Za,yr),Za.prototype.h=function(e,t){var n=this;return Ut(vr(this.s,e,t),t).M((function(e){if(0===e.length)return ye.empty();var t=e[0];if(n.type)return e="+"===n.l?+t.value:-t.value,0===t.type&&(e=Number.NaN),ye.m(Q(e,n.type.type));if(1<e.length)throw Error("XPTY0004: The operand to a unary operator must be a sequence with a length less than one");return te(t.type,19)?(t=rn(t,3).value,ye.m(Q("+"===n.l?t:-t,3))):te(t.type,2)?"+"===n.l?ye.m(t):ye.m(Q(-1*t.value,za[t.type])):ye.m(Q(Number.NaN,3))}))},y(ei,yr),ei.prototype.h=function(e,t){var n=this,r=0,o=null,a=!1,i=null;if(null!==e){var u=e.N;null!==u&&te(u.type,53)&&(i=be(u.value))}return ye.create({next:function(){if(!a){for(;r<n.l.length;){if(!o){var u=n.l[r];if(null!==i&&null!==u.B()&&!i.includes(u.B()))return r++,a=!0,Z(W);o=vr(u,e,t)}if(!1===o.ha())return a=!0,Z(W);o=null,r++}return a=!0,Z(K)}return z}})},ei.prototype.B=function(){return this.s},y(ti,yr),ti.prototype.h=function(e,t){var n=this,r=0,o=null,a=!1,i=null;if(null!==e){var u=e.N;null!==u&&te(u.type,53)&&(i=be(u.value))}return ye.create({next:function(){if(!a){for(;r<n.l.length;){if(!o){var u=n.l[r];if(null!==i&&null!==u.B()&&!i.includes(u.B())){r++;continue}o=vr(u,e,t)}if(!0===o.ha())return a=!0,Z(K);o=null,r++}return a=!0,Z(W)}return z}})},ti.prototype.B=function(){return this.s};var oi=Object.create(null);function ai(e,t,n){var r=t+"~"+n+"~"+e,o=oi[r];return o||(o=oi[r]=ri(e,t,n)),o}function ii(e,t,n){yr.call(this,t.o.add(n.o),[t,n],{C:!1}),this.l=t,this.A=n,this.s=e}y(ii,yr),ii.prototype.h=function(e,t){var n=this,r=vr(this.l,e,t),o=vr(this.A,e,t),a=ni(r,t),i=ni(o,t);return a.Z({empty:function(){return ye.empty()},m:function(){return i.Z({empty:function(){return ye.empty()},m:function(){var t=a.first(),r=i.first();return ai(n.s,t.type,r.type)(t,r,e)?ye.ba():ye.W()},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton.")}})},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton.")}})};var ui={},si=(ui.equalOp="eqOp",ui.notEqualOp="neOp",ui.lessThanOrEqualOp="leOp",ui.lessThanOp="ltOp",ui.greaterThanOrEqualOp="geOp",ui.greaterThanOp="gtOp",ui);function ci(e,t,n){yr.call(this,t.o.add(n.o),[t,n],{C:!1}),this.l=t,this.A=n,this.s=e}function li(e,t,n,r){if(!te(n,53)||!te(r,53))throw Error("XPTY0004: Sequences to compare are not nodes");switch(e){case"isOp":return function(e,t){return e!==t||47!==e&&53!==e&&54!==e&&55!==e&&56!==e&&57!==e&&58!==e?function(){return!1}:function(e,t){return un(e.first().value,t.first().value)}}(n,r);case"nodeBeforeOp":return t?function(e,n){return 0>fn(t,e.first(),n.first())}:void 0;case"nodeAfterOp":return t?function(e,n){return 0<fn(t,e.first(),n.first())}:void 0;default:throw Error("Unexpected operator")}}function pi(e,t,n){yr.call(this,t.o.add(n.o),[t,n],{C:!1}),this.l=t,this.A=n,this.s=e}function fi(e,t,n,r){return n.M((function(n){if(n.some((function(e){return!te(e.type,53)})))throw Error("XPTY0004: Sequences given to "+e+" should only contain nodes.");return"sorted"===r?ye.create(n):"reverse-sorted"===r?ye.create(n.reverse()):ye.create(hn(t,n))}))}function hi(e,t,n,r){yr.call(this,0<Or(t.o,n.o)?t.o:n.o,[t,n],{C:t.C&&n.C},!1,r),this.l=e,this.s=t,this.A=n}function di(e,t){Cr.call(this,e.reduce((function(e,t){return e.add(t.o)}),new Fr({})),e,{R:"unsorted",C:e.every((function(e){return e.C}))},t)}function mi(e,t,n){yr.call(this,new Fr({}).add(e.o),[e,t],{C:e.C&&t.C},!1,n),this.l=e,this.s=t}function gi(e,t,n){if(yr.call(this,e.o,[e],{C:!1}),this.l=ce(t.prefix?t.prefix+":"+t.localName:t.localName),46===this.l||45===this.l||44===this.l)throw Error("XPST0080: Casting to xs:anyAtomicType, xs:anySimpleType or xs:NOTATION is not permitted.");if(t.namespaceURI)throw Error("Not implemented: castable as expressions with a namespace URI.");this.A=e,this.s=n}function yi(e,t,n){if(yr.call(this,e.o,[e],{C:!1}),this.l=ce(t.prefix?t.prefix+":"+t.localName:t.localName),46===this.l||45===this.l||44===this.l)throw Error("XPST0080: Casting to xs:anyAtomicType, xs:anySimpleType or xs:NOTATION is not permitted.");if(t.namespaceURI)throw Error("Not implemented: casting expressions with a namespace URI.");this.A=e,this.s=n}function vi(e,t){var n=e.value,r=null,o=!1;return ye.create({next:function(){for(;!o;){if(!r){var e=n.next(0);if(e.done)return o=!0,Z(K);r=t(e.value)}if(e=r.ha(),r=null,!1===e)return o=!0,Z(W)}return z}})}function wi(e,t,n,r){yr.call(this,e.o,[e],{C:!1},!1,r),this.A=e,this.s=t,this.l=n}function Ai(e,t){return!(null===e||null===t||!te(e.type,53)||!te(t.type,53))&&un(e.value,t.value)}function xi(e){var t=e.next(0);if(t.done)return ye.empty();var n=null,r=null;return ye.create({next:function(o){if(t.done)return z;n||(n=t.value.value);do{var a=n.next(o);if(a.done){if((t=e.next(0)).done)return a;n=t.value.value}}while(a.done||Ai(a.value,r));return r=a.value,a}})}function bi(e,t){var n=[];!function(){for(var e=t.next(0),r={};!e.done;)r.ob=e.value.value,(e={current:r.ob.next(0),next:function(e){return function(t){return e.ob.next(t)}}(r)}).current.done||n.push(e),e=t.next(0),r={ob:r.ob}}();var r=null,o=!1,a={};return ye.create((a[Symbol.iterator]=function(){return this},a.next=function(){o||(o=!0,n.every((function(e){return te(e.current.value.type,53)}))&&n.sort((function(t,n){return fn(e,t.current.value,n.current.value)})));do{if(!n.length)return z;var t=n.shift(),a=t.current;if(t.current=t.next(0),!te(a.value.type,53))return a;if(!t.current.done){for(var i=0,u=n.length-1,s=0;i<=u;){s=Math.floor((i+u)/2);var c=fn(e,t.current.value,n[s].current.value);if(0===c){i=s;break}0<c?i=s+1:u=s-1}n.splice(i,0,t)}}while(Ai(a.value,r));return r=a.value,a},a))}function Bi(e,t){var n=e.reduce((function(e,t){return 0<Or(e,t.o)?e:t.o}),new Fr({}));yr.call(this,n,e,{C:e.every((function(e){return e.C}))},!1,t),this.l=e}function Ei(e){return e.every((function(e){return null===e||te(e.type,5)||te(e.type,4)}))||null!==e.map((function(e){return e?jt(e.type):null})).reduce((function(e,t){return null===t||t===e?e:null}))?e:e.every((function(e){return null===e||te(e.type,1)||te(e.type,20)}))?e.map((function(e){return e?rn(e,1):null})):e.every((function(e){return null===e||te(e.type,4)||te(e.type,6)}))?e.map((function(e){return e?rn(e,6):e})):e.every((function(e){return null===e||te(e.type,4)||te(e.type,6)||te(e.type,3)}))?e.map((function(e){return e?rn(e,3):e})):null}function Ti(e,t){var n=new Fr({});Xa.call(this,n,[t].concat(p(e.map((function(e){return e.ca})))),{C:!1,X:!1,R:"unsorted",subtree:!1},t),this.A=e}function Ni(e){yr.call(this,e?e.o:new Fr({}),e?[e]:[],{R:"sorted",subtree:!1,X:!1,C:!1}),this.l=e}function Ii(e){yr.call(this,new Fr({}),[],{R:"sorted"},!1,e)}function Ci(e,t){var n=e.every((function(e){return e.X})),r=e.every((function(e){return e.subtree}));yr.call(this,e.reduce((function(e,t){return e.add(t.o)}),new Fr({})),e,{C:!1,X:n,R:t?"sorted":"unsorted",subtree:r}),this.l=e,this.s=t}function Si(e,t){yr.call(this,e.o.add(t.o),[e,t],{C:e.C&&t.C,X:e.X,R:e.da,subtree:e.subtree}),this.s=e,this.l=t}function ki(e,t,n){if(n=[n],te(e.type,62))if("*"===t)n.push.apply(n,p(e.P.map((function(e){return e()}))));else{if(!te(t.type,5))throw Ao("The key specifier is not an integer.");var r=t.value;if(e.P.length<r||0>=r)throw Error("FOAY0001: Array index out of bounds");n.push(e.P[r-1]())}else{if(!te(e.type,61))throw Ao("The provided context item is not a map or an array.");"*"===t?n.push.apply(n,p(e.h.map((function(e){return e.value()})))):(e=e.h.find((function(e){return Je(e.key,t)})))&&n.push(e.value())}return Ft(n)}function Fi(e,t,n,r,o){return"*"===t?ki(e,t,n):Ft([n,t=ve(t=vr(t,r,o))().M((function(t){return t.reduce((function(t,n){return ki(e,n,t)}),new re)}))])}function Oi(e,t){yr.call(this,e.o,[e].concat("*"===t?[]:[t]),{C:e.C,R:e.da,subtree:e.subtree}),this.l=e,this.s=t}function Di(e,t){var n={};yr.call(this,new Fr((n.external=1,n)),"*"===e?[]:[e],{C:!1},!1,t),this.l=e}function Ri(e,t,n,r){var o=t.map((function(e){return e.jb}));t=t.map((function(e){return e.name}));var a=o.reduce((function(e,t){return e.add(t.o)}),n.o);yr.call(this,a,o.concat(n),{C:!1},!1,r),this.s=e,this.A=t,this.K=o,this.S=n,this.l=null}function Gi(e){yr.call(this,e,[],{C:!1})}function Pi(e){var t={};Gi.call(this,new Fr((t.nodeType=1,t))),this.s=e}function Mi(e,t){t=void 0===t?{kind:null}:t;var n=e.prefix,r=e.namespaceURI,o={};"*"!==(e=e.localName)&&(o.nodeName=1),o.nodeType=1,Gi.call(this,new Fr(o)),this.s=e,this.K=r,this.A=n,this.S=t.kind}function Ui(e){var t={};Gi.call(this,new Fr((t.nodeName=1,t))),this.s=e}function ji(e){Gi.call(this,new Fr({})),this.s=e}function Hi(e,t,n){yr.call(this,new Fr({}),[],{C:!1,R:"unsorted"}),this.A=n,this.s=t,this.K=e,this.l=null}function _i(e,t){var n=new Fr({});Xa.call(this,n,[e,t],{C:!1,X:!1,R:"unsorted",subtree:!1},t),this.A=e}function Xi(e){this.type=e}function Li(e){this.type="delete",this.target=e}function Yi(e,t,n){this.type=n,this.target=e,this.content=t}function Ji(e,t){Yi.call(this,e,t,"insertAfter")}function qi(e,t){this.type="insertAttributes",this.target=e,this.content=t}function Qi(e,t){Yi.call(this,e,t,"insertBefore")}function Ki(e,t){Yi.call(this,e,t,"insertIntoAsFirst")}function Wi(e,t){Yi.call(this,e,t,"insertIntoAsLast")}function Vi(e,t){Yi.call(this,e,t,"insertInto")}function $i(e,t){this.type="rename",this.target=e,this.o=t.Ca?t:new we(t.prefix,t.namespaceURI,t.localName)}function zi(e,t){this.type="replaceElementContent",this.target=e,this.text=t}function Zi(e,t){this.type="replaceNode",this.target=e,this.o=t}function eu(e,t){this.type="replaceValue",this.target=e,this.o=t}function tu(e,t){return new Zi(e,t)}function nu(e){Tr.call(this,new Fr({}),[e],{C:!1,R:"unsorted"}),this.l=e}function ru(e,t,n,r,o,a){var i=t.h;return e.reduce((function e(t,n){return te(n.type,62)?(n.P.forEach((function(n){return n().O().forEach((function(n){return e(t,n)}))})),t):(t.push(n),t)}),[]).forEach((function(e,u,s){if(te(e.type,47)){if(o)throw a(e.value,i);n.push(e.value.node)}else if(te(e.type,46)||te(e.type,53)&&3===e.value.node.nodeType){var c=te(e.type,46)?rn(Mt(e,t).first(),1).value:Re(i,e.value);0!==u&&te(s[u-1].type,46)&&te(e.type,46)?(r.push({data:" "+c,Ta:!0,nodeType:3}),o=!0):c&&(r.push({data:""+c,Ta:!0,nodeType:3}),o=!0)}else if(te(e.type,55)){var l=[];De(i,e.value).forEach((function(e){return l.push(Le(e))})),o=ru(l,t,n,r,o,a)}else{if(!te(e.type,53)){if(te(e.type,60))throw Gt(e.type);throw Error("Atomizing "+e.type+" is not implemented.")}r.push(e.value.node),o=!0}})),o}function ou(e,t,n){var r=[],o=[],a=!1;return e.forEach((function(e){a=ru(e,t,r,o,a,n)})),{attributes:r,Xa:o}}function au(e,t,n,r,o){var a=[];switch(e){case 4:r.length&&a.push(new qi(t,r)),o.length&&a.push(new Ki(t,o));break;case 5:r.length&&a.push(new qi(t,r)),o.length&&a.push(new Wi(t,o));break;case 3:r.length&&a.push(new qi(t,r)),o.length&&a.push(new Vi(t,o));break;case 2:r.length&&a.push(new qi(n,r)),o.length&&a.push(new Qi(t,o));break;case 1:r.length&&a.push(new qi(n,r)),o.length&&a.push(new Ji(t,o))}return a}function iu(e,t,n){Tr.call(this,new Fr({}),[e,n],{C:!1,R:"unsorted"}),this.K=e,this.l=t,this.A=n}function uu(){return Rt("Casting not supported from given type to a single xs:string or xs:untypedAtomic or any of its derived types.")}y(ci,yr),ci.prototype.h=function(e,t){var n=this,r=vr(this.l,e,t),o=vr(this.A,e,t);return r.Z({empty:function(){return ye.W()},default:function(){return o.Z({empty:function(){return ye.W()},default:function(){var a=ni(r,t),i=ni(o,t);return function(e,t,n,r){return e=si[e],n.M((function(n){return t.filter((function(t){for(var o=0,a=n.length;o<a;++o){var i=n[o],u=void 0,s=void 0,l=t.type,p=i.type;if((te(l,19)||te(p,19))&&(te(l,2)?u=3:te(p,2)?s=3:te(l,17)?u=17:te(p,17)?s=17:te(l,16)?u=16:te(p,16)?s=16:te(l,19)?s=p:te(p,19)&&(u=l)),u=(s=c([s,u])).next().value,s=s.next().value,u?t=rn(t,u):s&&(i=rn(i,s)),ai(e,t.type,i.type)(t,i,r))return!0}return!1})).Z({default:function(){return ye.ba()},empty:function(){return ye.W()}})}))}(n.s,a,i,e)}})}})},y(pi,yr),pi.prototype.h=function(e,t){var n=this,r=vr(this.l,e,t),o=vr(this.A,e,t);return r.Z({empty:function(){return ye.empty()},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton")},m:function(){return o.Z({empty:function(){return ye.empty()},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton")},m:function(){var a=r.first(),i=o.first();return li(n.s,t.h,a.type,i.type)(r,o,e)?ye.ba():ye.W()}})}})},y(hi,yr),hi.prototype.h=function(e,t){var n=this,r=fi(this.l,t.h,vr(this.s,e,t),this.s.da);e=fi(this.l,t.h,vr(this.A,e,t),this.A.da);var o=r.value,a=e.value,i=null,u=null,s=!1,c=!1;return ye.create({next:function(){if(s)return z;for(;!c;){if(!i){var e=o.next(0);if(e.done)return s=!0,z;i=e.value}if(!u){if((e=a.next(0)).done){c=!0;break}u=e.value}if(un(i.value,u.value)){if(e=Z(i),u=i=null,"intersectOp"===n.l)return e}else if(0>fn(t.h,i,u)){if(e=Z(i),i=null,"exceptOp"===n.l)return e}else u=null}return"exceptOp"===n.l?null!==i?(e=Z(i),i=null,e):o.next(0):(s=!0,z)}})},y(di,Cr),di.prototype.A=function(e,t,n){return n.length?Ft(n.map((function(t){return t(e)}))):ye.empty()},y(mi,yr),mi.prototype.h=function(e,t){var n=this,r=Et(e,vr(this.l,e,t)),o=null,a=null,i=!1;return ye.create({next:function(e){for(;!i;){if(!o&&(o=r.next(e)).done)return i=!0,z;a||(a=vr(n.s,o.value,t));var u=a.value.next(e);if(!u.done)return u;o=a=null}}})},y(gi,yr),gi.prototype.h=function(e,t){var n=this,r=Ut(vr(this.A,e,t),t);return r.Z({empty:function(){return n.s?ye.ba():ye.W()},m:function(){return r.map((function(e){return nn(e,n.l).u?K:W}))},multiple:function(){return ye.W()}})},y(yi,yr),yi.prototype.h=function(e,t){var n=this,r=Ut(vr(this.A,e,t),t);return r.Z({empty:function(){if(!n.s)throw Error("XPTY0004: Sequence to cast is empty while target type is singleton.");return ye.empty()},m:function(){return r.map((function(e){return rn(e,n.l)}))},multiple:function(){throw Error("XPTY0004: Sequence to cast is not singleton or empty.")}})},y(wi,yr),wi.prototype.h=function(e,t){var n=this,r=vr(this.A,e,t);return r.Z({empty:function(){return"?"===n.l||"*"===n.l?ye.ba():ye.W()},multiple:function(){return"+"===n.l||"*"===n.l?vi(r,(function(r){var o=ye.m(r);return r=Ct(e,0,r,o),vr(n.s,r,t)})):ye.W()},m:function(){return vi(r,(function(r){var o=ye.m(r);return r=Ct(e,0,r,o),vr(n.s,r,t)}))}})},y(Bi,yr),Bi.prototype.h=function(e,t){var n=this;if(this.l.every((function(e){return"sorted"===e.da}))){var r=0;return bi(t.h,{next:function(){return r>=n.l.length?z:Z(vr(n.l[r++],e,t))}}).map((function(e){if(!te(e.type,53))throw Error("XPTY0004: The sequences to union are not of type node()*");return e}))}return Ft(this.l.map((function(n){return vr(n,e,t)}))).M((function(e){if(e.some((function(e){return!te(e.type,53)})))throw Error("XPTY0004: The sequences to union are not of type node()*");return e=hn(t.h,e),ye.create(e)}))},y(Ti,Xa),Ti.prototype.K=function(e,t,n,r){if(this.A[1])throw Error("More than one order spec is not supported for the order by clause.");var o,a,i=[],u=!1,s=null,l=this.A[0];return ye.create({next:function(){if(!u){for(var p=t.next(0);!p.done;)i.push(p.value),p=t.next(0);if((p=i.map((function(e){return l.ca.h(e,n)})).map((function(e){return Ut(e,n)}))).find((function(e){return!e.G()&&!e.wa()})))throw Ao("Order by only accepts empty or singleton sequences");if(function(e){return(e=e.find((function(e){return!!e})))?jt(e.type):null}(o=(o=p.map((function(e){return e.first()}))).map((function(e){return null===e?e:te(19,e.type)?rn(e,1):e})))&&!(o=Ei(o)))throw Ao("Could not cast values");p=o.length,a=o.map((function(e,t){return t}));for(var f=0;f<p;f++)if(f+1!==p)for(var h=f;0<=h;h--){var d=h,m=h+1;if(m!==p){var g=o[a[d]],y=o[a[m]];if(null!==y||null!==g){if(l.lc){if(null===g)continue;if(null===y&&null!==g){g=c([a[m],a[d]]),a[d]=g.next().value,a[m]=g.next().value;continue}if(isNaN(y.value)&&null!==g&&!isNaN(g.value)){g=c([a[m],a[d]]),a[d]=g.next().value,a[m]=g.next().value;continue}}else{if(null===y)continue;if(null===g&&null!==y){g=c([a[m],a[d]]),a[d]=g.next().value,a[m]=g.next().value;continue}if(isNaN(g.value)&&null!==y&&!isNaN(y.value)){g=c([a[m],a[d]]),a[d]=g.next().value,a[m]=g.next().value;continue}}ai("gtOp",g.type,y.type)(g,y,e)&&(g=c([a[m],a[d]]),a[d]=g.next().value,a[m]=g.next().value)}}}var v=l.Kb?0:o.length-1;s=r({next:function(){return l.Kb?v>=o.length?z:Z(i[a[v++]]):0>v?z:Z(i[a[v--]])}}).value,u=!0}return s.next(0)}})},y(Ni,yr),Ni.prototype.h=function(e,t){if(null===e.N)throw Dt("context is absent, it needs to be present to use paths.");for(var n=t.h,r=e.N.value;9!==r.node.nodeType;)if(null===(r=Ue(n,r)))throw Error("XPDY0050: the root node of the context node is not a document node.");return n=ye.m(Le(r)),this.l?vr(this.l,Ct(e,0,n.first(),n),t):n},y(Ii,yr),Ii.prototype.h=function(e){if(null===e.N)throw Dt('context is absent, it needs to be present to use the "." operator');return ye.m(e.N)},y(Ci,yr),Ci.prototype.h=function(e,t){var n=this,r=!0;return this.l.reduce((function(o,a,i){var u=null===o?on(e):Et(e,o);if(o={next:function(e){if((e=u.next(e)).done)return z;if(null!==e.value.N&&!te(e.value.N.type,53)&&0<i)throw Error("XPTY0019: The result of E1 in a path expression E1/E2 should not evaluate to a sequence of nodes.");return Z(vr(a,e.value,t))}},n.s)switch(a.da){case"reverse-sorted":var s=o;o={next:function(e){return(e=s.next(e)).done?e:Z(e.value.M((function(e){return ye.create(e.reverse())})))}};case"sorted":if(a.subtree&&r){var c=xi(o);break}c=bi(t.h,o);break;case"unsorted":return xi(o).M((function(e){return ye.create(function(e,t){var n=!1,r=!1;if(t.forEach((function(e){te(e.type,53)?n=!0:r=!0})),r&&n)throw Error("XPTY0018: The path operator should either return nodes or non-nodes. Mixed sequences are not allowed.");return n?hn(e,t):t}(t.h,e))}))}else c=xi(o);return r=r&&a.X,c}),null)},Ci.prototype.B=function(){return this.l[0].B()},y(Si,yr),Si.prototype.h=function(e,t){var n=this,r=vr(this.s,e,t);if(this.l.C){var o=vr(this.l,e,t);if(o.G())return o;var a=o.first();if(te(a.type,2)){var i=a.value;if(!Number.isInteger(i))return ye.empty();var u=r.value,s=!1;return ye.create({next:function(){if(!s){for(var e=u.next(0);!e.done;e=u.next(0))if(1==i--)return s=!0,e;s=!0}return z}})}return o.ha()?r:ye.empty()}var c=r.value,l=null,p=0,f=null;return ye.create({next:function(o){for(var a=!1;!(l&&l.done||(l||(l=c.next(a?0:o),a=!0),l.done));){f||(f=vr(n.l,Ct(e,p,l.value,r),t));var i=f.first();i=null!==i&&(te(i.type,2)?i.value===p+1:f.ha()),f=null;var u=l.value;if(l=null,p++,i)return Z(u)}return l}})},Si.prototype.B=function(){return this.s.B()},y(Oi,yr),Oi.prototype.h=function(e,t){var n=this;return vr(this.l,e,t).M((function(r){return r.reduce((function(r,o){return Fi(o,n.s,r,e,t)}),new re)}))},Oi.prototype.B=function(){return this.l.B()},y(Di,yr),Di.prototype.h=function(e,t){return Fi(e.N,this.l,new re,e,t)},y(Ri,yr),Ri.prototype.h=function(e,t){var n=this,r=e,o=this.l.map((function(o,a){var i=vr(n.K[a],r,t).O();return r=St(e,((a={})[o]=function(){return ye.create(i)},a)),i}));if(o.some((function(e){return 0===e.length})))return"every"===this.s?ye.ba():ye.W();var a=Array(o.length).fill(0);a[0]=-1;for(var i=!0;i;){i=!1;for(var u=0,s=a.length;u<s;++u){var c=o[u];if(!(++a[u]>c.length-1)){for(i=Object.create(null),u={},s=0;s<a.length;u={xb:u.xb},s++)u.xb=o[s][a[s]],i[this.l[s]]=function(e){return function(){return ye.m(e.xb)}}(u);if(i=St(e,i),(i=vr(this.S,i,t)).ha()&&"some"===this.s)return ye.ba();if(!i.ha()&&"every"===this.s)return ye.W();i=!0;break}a[u]=0}}return"every"===this.s?ye.ba():ye.W()},Ri.prototype.v=function(e){this.l=[];for(var t=0,n=this.A.length;t<n;++t){this.K[t].v(e),Do(e);var r=this.A[t],o=r.prefix?e.aa(r.prefix):null;r=Po(e,o,r.localName),this.l[t]=r}for(this.S.v(e),t=0,n=this.A.length;t<n;++t)Uo(e)},y(Gi,yr),Gi.prototype.h=function(e){return this.l(e.N)?ye.ba():ye.W()},y(Pi,Gi),Pi.prototype.l=function(e){return!!te(e.type,53)&&(e=e.value.node.nodeType,3===this.s&&4===e||this.s===e)},Pi.prototype.B=function(){return"type-"+this.s},y(Mi,Gi),Mi.prototype.l=function(e){var t=te(e.type,54),n=te(e.type,47);return!(!t&&!n||(e=e.value,null!==this.S&&(1===this.S&&!t||2===this.S&&!n)||(null!==this.A||""===this.K||"*"!==this.s)&&("*"===this.A?"*"!==this.s&&this.s!==e.node.localName:"*"!==this.s&&this.s!==e.node.localName||(e.node.namespaceURI||null)!==((""===this.A?t?this.K:null:this.K)||null))))},Mi.prototype.B=function(){return"*"===this.s?null===this.S?"type-1-or-type-2":"type-"+this.S:"name-"+this.s},Mi.prototype.v=function(e){if(null===this.K&&"*"!==this.A&&(this.K=e.aa(this.A||"")||null,!this.K&&this.A))throw Error("XPST0081: The prefix "+this.A+" could not be resolved.")},y(Ui,Gi),Ui.prototype.l=function(e){return te(e.type,57)&&e.value.node.target===this.s},Ui.prototype.B=function(){return"type-7"},y(ji,Gi),ji.prototype.l=function(e){return te(e.type,ce(this.s.prefix?this.s.prefix+":"+this.s.localName:this.s.localName))},y(Hi,yr),Hi.prototype.h=function(e,t){if(!e.Aa[this.l]){if(this.S)return this.S(e,t);throw Error("XQDY0054: The variable "+this.A+" is declared but not in scope.")}return e.Aa[this.l]()},Hi.prototype.v=function(e){if(null===this.s&&this.K&&(this.s=e.aa(this.K)),this.l=e.ib(this.s||"",this.A),!this.l)throw Error("XPST0008, The variable "+this.A+" is not in scope.");(e=e.Ia[this.l])&&(this.S=e)},y(_i,Xa),_i.prototype.K=function(e,t,n,r){var o=this,a=null,i=null;return r({next:function(){for(;;){if(!i){var e=t.next(0);if(e.done)return z;a=e.value,i=vr(o.A,a,n)}e=i.ha();var r=a;if(i=a=null,e)return Z(r)}}})},y(Li,Xi),Li.prototype.h=function(e){var t={};return t.type=this.type,t.target=ro(this.target,e,!1),t},y(Yi,Xi),Yi.prototype.h=function(e){var t={};return t.type=this.type,t.target=ro(this.target,e,!1),t.content=this.content.map((function(t){return ro(t,e,!0)})),t},y(Ji,Yi),y(qi,Xi),qi.prototype.h=function(e){var t={};return t.type=this.type,t.target=ro(this.target,e,!1),t.content=this.content.map((function(t){return ro(t,e,!0)})),t},y(Qi,Yi),y(Ki,Yi),y(Wi,Yi),y(Vi,Yi),y($i,Xi),$i.prototype.h=function(e){var t={},n={};return n.type=this.type,n.target=ro(this.target,e,!1),n.newName=(t.prefix=this.o.prefix,t.namespaceURI=this.o.namespaceURI,t.localName=this.o.localName,t),n},y(zi,Xi),zi.prototype.h=function(e){var t={};return t.type=this.type,t.target=ro(this.target,e,!1),t.text=this.text?ro(this.text,e,!0):null,t},y(Zi,Xi),Zi.prototype.h=function(e){var t={};return t.type=this.type,t.target=ro(this.target,e,!1),t.replacement=this.o.map((function(t){return ro(t,e,!0)})),t},y(eu,Xi),eu.prototype.h=function(e){var t={};return t.type=this.type,t.target=ro(this.target,e,!1),t["string-value"]=this.o,t},y(nu,Tr),nu.prototype.s=function(e,t){var n,r,o=Nr(this.l)(e,t),a=t.h;return{next:function(){if(!n){var e=o.next(0);if(e.value.J.some((function(e){return!te(e.type,53)})))throw Error("XUTY0007: The target of a delete expression must be a sequence of zero or more nodes.");n=e.value.J,r=e.value.fa}return Z({fa:Er((n=n.filter((function(e){return Ue(a,e.value)}))).map((function(e){return new Li(e.value)})),r),J:[]})}}},y(iu,Tr),iu.prototype.s=function(e,t){var n,r,o,a,i,u,s=this,c=Nr(this.K)(e,t),l=Nr(this.A)(e,t),p=t.h;return{next:function(){if(!n){var e=c.next(0),f=ou([e.value.J],t,ur);n=f.attributes.map((function(e){return{node:e,F:null}})),r=f.Xa.map((function(e){return{node:e,F:null}})),o=e.value.fa}if(!a){if(0===(e=l.next(0)).value.J.length)throw gr();if(3<=s.l){if(1!==e.value.J.length)throw sr();if(!te(e.value.J[0].type,54)&&!te(e.value.J[0].type,55))throw sr()}else{if(1!==e.value.J.length)throw cr();if(!(te(e.value.J[0].type,54)||te(e.value.J[0].type,56)||te(e.value.J[0].type,58)||te(e.value.J[0].type,57)))throw cr();if(null===(u=Ue(p,e.value.J[0].value,null)))throw Error("XUDY0029: The target "+e.value.J[0].value.outerHTML+" for inserting a node before or after must have a parent.")}a=e.value.J[0],i=e.value.fa}if(n.length){if(3<=s.l){if(!te(a.type,54))throw Error("XUTY0022: An insert expression specifies the insertion of an attribute node into a document node.")}else if(1!==u.node.nodeType)throw Error("XUDY0030: An insert expression specifies the insertion of an attribute node before or after a child of a document node.");n.reduce((function(e,t){var n=t.node.prefix||"",r=t.node.prefix||"",o=t.node.namespaceURI,i=r?a.value.node.lookupNamespaceURI(r):null;if(i&&i!==o)throw dr(o);if((r=e[r])&&o!==r)throw mr(o);return e[n]=t.node.namespaceURI,e}),{})}return Z({J:[],fa:Er(au(s.l,a.value,u||null,n,r),o,i)})}}};var su=/([A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])/,cu=new RegExp(su.source+new RegExp("("+su.source+"|[-.0-9-])").source+"*","g");function lu(e){return!!(e=e.match(cu))&&1===e.length}function pu(e,t){return Ut(t,e).Z({m:function(e){if(te((e=e.first()).type,1)||te(e.type,19)){if(!lu(e.value))throw Error('XQDY0041: The value "'+e.value+'" of a name expressions cannot be converted to a NCName.');return ye.m(e)}throw uu()},default:function(){throw uu()}}).value}function fu(e,t,n){return Ut(n,t).Z({m:function(t){if(te((t=t.first()).type,23))return ye.m(t);if(te(t.type,1)||te(t.type,19)){if(1===(t=t.value.split(":")).length)t=t[0];else{var n=t[0],r=e.aa(n);t=t[1]}if(!lu(t)||n&&!lu(n))throw Io(n?n+":"+t:t);if(n&&!r)throw Io(n+":"+t);return ye.m({type:23,value:new we(n,r,t)})}throw uu()},default:function(){throw uu()}}).value}function hu(e,t){Tr.call(this,new Fr({}),[e,t],{C:!1,R:"unsorted"}),this.A=e,this.K=t,this.l=void 0}function du(e,t,n){Tr.call(this,new Fr({}),[t,n],{C:!1,R:"unsorted"}),this.K=e,this.l=t,this.A=n}function mu(e){switch(e.type){case"delete":return new Li({node:e.target,F:null});case"insertAfter":return new Ji({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertBefore":return new Qi({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertInto":return new Vi({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertIntoAsFirst":return new Ki({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertIntoAsLast":return new Wi({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertAttributes":return new qi({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"rename":return new $i({node:e.target,F:null},e.newName);case"replaceNode":return new Zi({node:e.target,F:null},e.replacement.map((function(e){return{node:e,F:null}})));case"replaceValue":return new eu({node:e.target,F:null},e["string-value"]);case"replaceElementContent":return new zi({node:e.target,F:null},e.text?{node:e.text,F:null}:null);default:throw Error('Unexpected type "'+e.type+'" when parsing a transferable pending update.')}}function gu(e,t,n){if(t.find((function(t){return un(t,e)})))return!0;var r=Ue(n,e);return!!r&&gu(r,t,n)}function yu(e,t,n){Tr.call(this,new Fr({}),e.reduce((function(e,t){return e.push(t.jb),e}),[t,n]),{C:!1,R:"unsorted"}),this.l=e,this.K=t,this.A=n,this.I=null}function vu(e,t){return{node:{nodeType:2,Ta:!0,nodeName:e.Ca(),namespaceURI:e.namespaceURI,prefix:e.prefix,localName:e.localName,name:e.Ca(),value:t},F:null}}function wu(e,t){var n=t.wb||[];n=n.concat(e.Oa||[]),yr.call(this,new Fr({}),n,{C:!1,R:"unsorted"}),e.Oa?this.s=e.Oa:this.name=new we(e.prefix,e.namespaceURI,e.localName),this.l=t,this.A=void 0}function Au(e){yr.call(this,e?e.o:new Fr({}),e?[e]:[],{C:!1,R:"unsorted"}),this.l=e}function xu(e,t,n,r){yr.call(this,new Fr({}),r.concat(t).concat(e.Oa||[]),{C:!1,R:"unsorted"}),e.Oa?this.s=e.Oa:this.l=new we(e.prefix,e.namespaceURI,e.localName),this.S=n.reduce((function(e,t){if(t.prefix in e)throw Error("XQST0071: The namespace declaration with the prefix "+t.prefix+" has already been declared on the constructed element.");return e[t.prefix||""]=t.uri,e}),{}),this.K=t,this.la=r,this.A=void 0}function bu(e){if(/^xml$/i.test(e))throw Error('XQDY0064: The target of a created PI may not be "'+e+'"')}function Bu(e,t){return{node:{data:t,Ta:!0,nodeName:e,nodeType:7,target:e},F:null}}function Eu(e,t){var n=e.Fb?[e.Fb].concat(t):[t];yr.call(this,n.reduce((function(e,t){return e.add(t.o)}),new Fr({})),n,{C:!1,R:"unsorted"}),this.l=e,this.s=t}function Tu(e){yr.call(this,e?e.o:new Fr({}),e?[e]:[],{C:!1,R:"unsorted"}),this.l=e}function Nu(e,t,n,r){var o,a=new Fr({});Cr.call(this,a,(o=[e].concat(p(t.map((function(e){return e.ic}))),[n])).concat.apply(o,p(t.map((function(e){return e.Pb.map((function(e){return e.Ob}))})))),{C:!1,X:!1,R:"unsorted",subtree:!1},r),this.K=e,this.l=t.length,this.S=t.map((function(e){return e.Pb}))}y(hu,Tr),hu.prototype.s=function(e,t){var n=this,r=Nr(this.A)(e,t),o=Nr(this.K)(e,t);return{next:function(){var e=r.next(0),a=e.value.J;if(0===a.length)throw gr();if(1!==a.length)throw pr();if(!te(a[0].type,54)&&!te(a[0].type,47)&&!te(a[0].type,57))throw pr();a=a[0];var i=o.next(0);e:{var u=n.l,s=ye.create(i.value.J);switch(a.type){case 54:if(u=fu(u,t,s).next(0).value.value,(s=a.value.node.lookupNamespaceURI(u.prefix))&&s!==u.namespaceURI)throw dr(u.namespaceURI);break e;case 47:if((u=fu(u,t,s).next(0).value.value).namespaceURI&&(s=a.value.node.lookupNamespaceURI(u.prefix))&&s!==u.namespaceURI)throw dr(u.namespaceURI);break e;case 57:u=new we("",null,u=pu(t,s).next(0).value.value);break e}u=void 0}return Z({J:[],fa:Er([new $i(a.value,u)],e.value.fa,i.value.fa)})}}},hu.prototype.v=function(e){this.l=Oo(e),Tr.prototype.v.call(this,e)},y(du,Tr),du.prototype.s=function(e,t){var n=Nr(this.l)(e,t);return e=Nr(this.A)(e,t),this.K?function(e,t,n){var r,o,a,i,u=!1;return{next:function(){if(u)return z;if(!a){var s=n.next(0),c=Ut(ye.create(s.value.J),e).map((function(e){return rn(e,1)})).O().map((function(e){return e.value})).join(" ");a=0===c.length?null:{node:e.o.createTextNode(c),F:null},i=s.value.fa}if(!r){if(0===(s=t.next(0)).value.J.length)throw gr();if(1!==s.value.J.length)throw lr();if(!(te(s.value.J[0].type,54)||te(s.value.J[0].type,47)||te(s.value.J[0].type,56)||te(s.value.J[0].type,58)||te(s.value.J[0].type,57)))throw lr();r=s.value.J[0],o=s.value.fa}if(te(r.type,54))return u=!0,Z({J:[],fa:Er([new zi(r.value,a)],i,o)});if(te(r.type,47)||te(r.type,56)||te(r.type,58)||te(r.type,57)){if(s=a?Re(e.h,a):"",te(r.type,58)&&(s.includes("--")||s.endsWith("-")))throw Error('XQDY0072: The content "'+s+'" for a comment node contains two adjacent hyphens or ends with a hyphen.');if(te(r.type,57)&&s.includes("?>"))throw Error('XQDY0026: The content "'+s+'" for a processing instruction node contains "?>".');return u=!0,Z({J:[],fa:Er([new eu(r.value,s)],i,o)})}}}}(t,n,e):function(e,t,n){var r,o,a;return{next:function(){if(!r){var i=n.next(0),u=ou([i.value.J],e,mr);r={attributes:u.attributes.map((function(e){return{node:e,F:null}})),Xa:u.Xa.map((function(e){return{node:e,F:null}}))},o=i.value.fa}if(0===(u=t.next(0)).value.J.length)throw gr();if(1!==u.value.J.length)throw lr();if(!(te(u.value.J[0].type,54)||te(u.value.J[0].type,47)||te(u.value.J[0].type,56)||te(u.value.J[0].type,58)||te(u.value.J[0].type,57)))throw lr();if(null===(a=Ue(e.h,u.value.J[0].value,null)))throw Error("XUDY0009: The target "+u.value.J[0].value.outerHTML+" for replacing a node must have a parent.");if(i=u.value.J[0],u=u.value.fa,te(i.type,47)){if(r.Xa.length)throw Error("XUTY0011: When replacing an attribute the new value must be zero or more attribute nodes.");r.attributes.reduce((function(e,t){var n=t.node.prefix||"";t=t.node.namespaceURI;var r=a.node.lookupNamespaceURI(n);if(r&&r!==t)throw dr(t);if((r=e[n])&&t!==r)throw mr(t);return e[n]=t,e}),{})}else if(r.attributes.length)throw Error("XUTY0010: When replacing an an element, text, comment, or processing instruction node the new value must be a single node.");return Z({J:[],fa:Er([tu(i.value,[].concat(r.attributes,r.Xa))],o,u)})}}}(t,n,e)},y(yu,Tr),yu.prototype.h=function(e,t){return Ir(e=this.s(e,t),(function(){}))},yu.prototype.s=function(e,t){var n,r,o,a=this,i=t.h,u=t.o,s=t.B,c=[],l=[],f=[];return{next:function(){if(l.length!==a.l.length)for(var h={},d=l.length;d<a.l.length;h={lb:h.lb},d++){var m=a.l[d],g=c[d];if(g||(c[d]=g=Nr(m.jb)(e,t)),1!==(g=g.next(0)).value.J.length||!te(g.value.J[0].type,53))throw Error("XUTY0013: The source expression of a copy modify expression must return a single node.");h.lb=Le(to(g.value.J[0].value,t)),l.push(h.lb.value),f.push(g.value.fa),e=St(e,((g={})[m.qc]=function(e){return function(){return ye.m(e.lb)}}(h),g))}return o||(n||(n=Nr(a.K)(e,t)),o=n.next(0).value.fa),o.forEach((function(e){if(e.target&&!gu(e.target,l,i))throw Error("XUDY0014: The target "+e.target.node.outerHTML+" must be a node created by the copy clause.");if("put"===e.type)throw Error("XUDY0037: The modify expression of a copy modify expression can not contain a fn:put.")})),Br(h=o.map((function(e){return mu(e=e.h(t))})),i,u,s),r||(r=Nr(a.A)(e,t)),Z({J:(h=r.next(0)).value.J,fa:Er.apply(null,[h.value.fa].concat(p(f)))})}}},yu.prototype.v=function(e){Do(e),this.l.forEach((function(t){return t.qc=Po(e,t.Rb.namespaceURI,t.Rb.localName)})),Tr.prototype.v.call(this,e),Uo(e),this.I=this.l.some((function(e){return e.jb.I}))||this.A.I},y(wu,yr),wu.prototype.h=function(e,t){var n,r,o,a=this,i=!1;return ye.create({next:function(){if(i)return z;if(!r){if(a.s){if(!n){var u=a.s.h(e,t);n=fu(a.A,t,u)}r=n.next(0).value.value}else r=a.name;if(r){if("xmlns"===r.prefix)throw bo(r);if(""===r.prefix&&"xmlns"===r.localName)throw bo(r);if("http://www.w3.org/2000/xmlns/"===r.namespaceURI)throw bo(r);if("xml"===r.prefix&&"http://www.w3.org/XML/1998/namespace"!==r.namespaceURI)throw bo(r);if(""!==r.prefix&&"xml"!==r.prefix&&"http://www.w3.org/XML/1998/namespace"===r.namespaceURI)throw bo(r)}}return a.l.wb?(u=a.l.wb,o||(o=Ft(u.map((function(n){return Ut(n.h(e,t),t).M((function(e){return ye.m(Q(e.map((function(e){return e.value})).join(" "),1))}))}))).M((function(e){return ye.m(Le(vu(r,e.map((function(e){return e.value})).join(""))))})).value),o.next(0)):(i=!0,Z(Le(vu(r,a.l.value))))}})},wu.prototype.v=function(e){if(this.A=Oo(e),this.name&&this.name.prefix&&!this.name.namespaceURI){var t=e.aa(this.name.prefix);if(void 0===t&&this.name.prefix)throw Pt(this.name.prefix);this.name.namespaceURI=t||null}yr.prototype.v.call(this,e)},y(Au,yr),Au.prototype.h=function(e,t){var n={data:"",Ta:!0,nodeType:8},r={node:n,F:null};return this.l?Ut(e=vr(this.l,e,t),t).M((function(e){if(-1!==(e=e.map((function(e){return rn(e,1).value})).join(" ")).indexOf("--\x3e"))throw Error('XQDY0072: The contents of the data of a comment may not include "--\x3e"');return n.data=e,ye.m(Le(r))})):ye.m(Le(r))},y(xu,yr),xu.prototype.h=function(e,t){var n,r,o,a,i,u=this,s=!1,c=!1,l=!1;return ye.create({next:function(){if(l)return z;if(s||(n||(n=Ft(u.K.map((function(n){return vr(n,e,t)})))),r=n.O(),s=!0),!c){o||(o=u.la.map((function(n){return vr(n,e,t)})));for(var p=[],f=0;f<o.length;f++){var h=o[f].O();p.push(h)}a=p,c=!0}if(u.s&&(i||(p=u.s.h(e,t),i=fu(u.A,t,p)),p=i.next(0),u.l=p.value.value),"xmlns"===u.l.prefix||"http://www.w3.org/2000/xmlns/"===u.l.namespaceURI||"xml"===u.l.prefix&&"http://www.w3.org/XML/1998/namespace"!==u.l.namespaceURI||u.l.prefix&&"xml"!==u.l.prefix&&"http://www.w3.org/XML/1998/namespace"===u.l.namespaceURI)throw Error('XQDY0096: The node name "'+u.l.Ca()+'" is invalid for a computed element constructor.');var d={nodeType:1,Ta:!0,attributes:[],childNodes:[],nodeName:u.l.Ca(),namespaceURI:u.l.namespaceURI,prefix:u.l.prefix,localName:u.l.localName};for(p={node:d,F:null},r.forEach((function(e){d.attributes.push(e.value.node)})),(f=ou(a,t,xo)).attributes.forEach((function(e){if(d.attributes.find((function(t){return t.namespaceURI===e.namespaceURI&&t.localName===e.localName})))throw Error("XQDY0025: The attribute "+e.name+" does not have an unique name in the constructed element.");d.attributes.push(e)})),f.Xa.forEach((function(e){d.childNodes.push(e)})),f=0;f<d.childNodes.length;f++)if(Ce(h=d.childNodes[f])&&3===h.nodeType){var m=d.childNodes[f-1];m&&Ce(m)&&3===m.nodeType&&(m.data+=h.data,d.childNodes.splice(f,1),f--)}return l=!0,Z(Le(p))}})},xu.prototype.v=function(e){var t=this;if(Do(e),Object.keys(this.S).forEach((function(n){return Go(e,n,t.S[n])})),this.ta.forEach((function(t){return t.v(e)})),this.K.reduce((function(t,n){if(n.name){if(n="Q{"+(null===n.name.namespaceURI?e.aa(n.name.prefix):n.name.namespaceURI)+"}"+n.name.localName,t.includes(n))throw Error("XQST0040: The attribute "+n+" does not have an unique name in the constructed element.");t.push(n)}return t}),[]),this.l&&null===this.l.namespaceURI){var n=e.aa(this.l.prefix);if(void 0===n&&this.l.prefix)throw Pt(this.l.prefix);this.l.namespaceURI=n}this.A=Oo(e),Uo(e)},y(Eu,yr),Eu.prototype.h=function(e,t){var n=this;return Ut(vr(this.s,e,t),t).M((function(r){var o=r.map((function(e){return rn(e,1).value})).join(" ");if(-1!==o.indexOf("?>"))throw Error('XQDY0026: The contents of the data of a processing instruction may not include "?>"');if(null!==n.l.Nb)return bu(r=n.l.Nb),ye.m(Le(Bu(r,o)));r=vr(n.l.Fb,e,t);var a=pu(t,r);return ye.create({next:function(){var e=a.next(0);return e.done?e:(bu(e=e.value.value),Z(Le(Bu(e,o))))}})}))},y(Tu,yr),Tu.prototype.h=function(e,t){return this.l?Ut(e=vr(this.l,e,t),t).M((function(e){return 0===e.length?ye.empty():(e={node:{data:e.map((function(e){return rn(e,1).value})).join(" "),Ta:!0,nodeType:3},F:null},ye.m(Le(e)))})):ye.empty()},y(Nu,Cr),Nu.prototype.A=function(e,t,n){var r=this;return n[0](e).M((function(o){for(var a=0;a<r.l;a++)if(r.S[a].some((function(n){switch(n.oc){case"?":if(1<o.length)return!1;break;case"*":break;case"+":if(1>o.length)return!1;break;default:if(1!==o.length)return!1}var r=ye.create(o);return o.every((function(o,a){return o=Ct(e,a,o,r),vr(n.Ob,o,t).ha()}))})))return n[a+1](e);return n[r.l+1](e)}))},Nu.prototype.v=function(e){if(Cr.prototype.v.call(this,e),this.K.I)throw ir()};var Iu={$:!1,ua:!1},Cu={$:!0,ua:!1},Su={$:!0,ua:!0};function ku(e){return e.$?e.ua?Su:Cu:Iu}function Fu(e,t){switch(e[0]){case"andOp":var n=_o(e,"type");return new ei(Du("andOp",e,ku(t)),n);case"orOp":return n=_o(e,"type"),new ti(Du("orOp",e,ku(t)),n);case"unaryPlusOp":return n=jo(jo(e,"operand"),"*"),e=_o(e,"type"),new Za("+",Fu(n,t),e);case"unaryMinusOp":return n=jo(jo(e,"operand"),"*"),e=_o(e,"type"),new Za("-",Fu(n,t),e);case"addOp":case"subtractOp":case"multiplyOp":case"divOp":case"idivOp":case"modOp":var r=e[0],o=Fu(Xo(e,["firstOperand","*"]),ku(t));t=Fu(Xo(e,["secondOperand","*"]),ku(t));var a=_o(e,"type"),i=_o(Xo(e,["firstOperand","*"]),"type"),u=_o(Xo(e,["secondOperand","*"]),"type");return i&&u&&_o(e,"type")&&(n=ea(r,i.type,u.type)),new ra(r,o,t,a,n);case"sequenceExpr":return function(e,t){var n=Lo(e,"*").map((function(e){return Fu(e,t)}));return 1===n.length?n[0]:(n=_o(e,"type"),new di(Lo(e,"*").map((function(e){return Fu(e,t)})),n))}(e,t);case"unionOp":return n=_o(e,"type"),new Bi([Fu(Xo(e,["firstOperand","*"]),ku(t)),Fu(Xo(e,["secondOperand","*"]),ku(t))],n);case"exceptOp":case"intersectOp":return n=_o(e,"type"),new hi(e[0],Fu(Xo(e,["firstOperand","*"]),ku(t)),Fu(Xo(e,["secondOperand","*"]),ku(t)),n);case"stringConcatenateOp":return function(e,t){var n=_o(e,"type");return new Mr(new Va({localName:"concat",namespaceURI:"http://www.w3.org/2005/xpath-functions",prefix:""},(e=[Xo(e,["firstOperand","*"]),Xo(e,["secondOperand","*"])]).length,n),e.map((function(e){return Fu(e,ku(t))})),n)}(e,t);case"rangeSequenceExpr":return function(e,t){var n=_o(e,"type");return new Mr(new Va({localName:"to",namespaceURI:"http://fontoxpath/operators",prefix:""},(e=[jo(jo(e,"startExpr"),"*"),jo(jo(e,"endExpr"),"*")]).length,n),e.map((function(e){return Fu(e,ku(t))})),n)}(e,t);case"equalOp":case"notEqualOp":case"lessThanOrEqualOp":case"lessThanOp":case"greaterThanOrEqualOp":case"greaterThanOp":return Gu("generalCompare",e,t);case"eqOp":case"neOp":case"ltOp":case"leOp":case"gtOp":case"geOp":return Gu("valueCompare",e,t);case"isOp":case"nodeBeforeOp":case"nodeAfterOp":return Gu("nodeCompare",e,t);case"pathExpr":return function(e,t){var n=_o(e,"type"),r=Lo(e,"stepExpr"),o=!1,a=r.map((function(e){for(var r=jo(e,"xpathAxis"),a=Lo(e,"*"),i=[],u=null,s=(a=c(a)).next();!s.done;s=a.next())switch(s=s.value,s[0]){case"lookup":i.push(["lookup",Ru(s,t)]);break;case"predicate":case"predicates":for(var l=(s=c(Lo(s,"*"))).next();!l.done;l=s.next())u=Ea(u,(l=Fu(l.value,ku(t))).B()),i.push(["predicate",l])}if(r)switch(o=!0,e=jo(e,"attributeTest anyElementTest piTest documentTest elementTest commentTest namespaceTest anyKindTest textTest anyFunctionTest typedFunctionTest schemaAttributeTest atomicType anyItemType parenthesizedItemType typedMapTest typedArrayTest nameTest Wildcard".split(" ")),e=Ou(e),Ho(r)){case"ancestor":var p=new ba(e,{Ra:!1});break;case"ancestor-or-self":p=new ba(e,{Ra:!0});break;case"attribute":p=new Ta(e,u);break;case"child":p=new Na(e,u);break;case"descendant":p=new Ca(e,{Ra:!1});break;case"descendant-or-self":p=new Ca(e,{Ra:!0});break;case"parent":p=new Da(e,u);break;case"following-sibling":p=new Oa(e,u);break;case"preceding-sibling":p=new Ga(e,u);break;case"following":p=new Fa(e);break;case"preceding":p=new Ra(e);break;case"self":p=new Pa(e,u)}else p=Fu(p=Xo(e,["filterExpr","*"]),ku(t));for(r=(i=c(i)).next();!r.done;r=i.next())switch(r=r.value,r[0]){case"lookup":p=new Oi(p,r[1]);break;case"predicate":p=new Si(p,r[1])}return p.type=n,p}));return e=jo(e,"rootExpr"),!(r=o||null!==e||1<r.length)&&1===a.length||!e&&1===a.length&&"sorted"===a[0].da?a[0]:e&&0===a.length?new Ni(null):(a=new Ci(a,r),e?new Ni(a):a)}(e,t);case"contextItemExpr":return new Ii(_o(e,"type"));case"functionCallExpr":return function(e,t){var n=jo(e,"functionName"),r=Lo(jo(e,"arguments"),"*");return e=_o(e,"type"),new Mr(new Va(Yo(n),r.length,e),r.map((function(e){return"argumentPlaceholder"===e[0]?null:Fu(e,t)})),e)}(e,t);case"inlineFunctionExpr":return function(e,t){var n=Lo(jo(e,"paramList"),"*"),r=Xo(e,["functionBody","*"]),o=_o(e,"type");return new qa(n.map((function(e){return{name:Yo(jo(e,"varName")),type:Jo(e)}})),Jo(e),r?Fu(r,t):new di([],o))}(e,t);case"arrowExpr":return function(e,t){var n=_o(e,"type"),r=Xo(e,["argExpr","*"]);e=Lo(e,"*").slice(1),r=[Fu(r,t)];for(var o=0;o<e.length;o++)if("arguments"!==e[o][0]){if("arguments"===e[o+1][0]){var a=Lo(e[o+1],"*");r=r.concat(a.map((function(e){return"argumentPlaceholder"===e[0]?null:Fu(e,t)})))}r=[new Mr(a="EQName"===e[o][0]?new Va(Yo(e[o]),r.length,n):Fu(e[o],ku(t)),r,n)]}return r[0]}(e,t);case"dynamicFunctionInvocationExpr":return function(e,t){var n=Xo(e,["functionItem","*"]),r=_o(e,"type"),o=[];return(e=jo(e,"arguments"))&&(o=Lo(e,"*").map((function(e){return"argumentPlaceholder"===e[0]?null:Fu(e,t)}))),new Mr(Fu(n,t),o,r)}(e,t);case"namedFunctionRef":return t=jo(e,"functionName"),n=_o(e,"type"),e=Ho(Xo(e,["integerConstantExpr","value"])),new Va(Yo(t),parseInt(e,10),n);case"integerConstantExpr":return new Ka(Ho(jo(e,"value")),{type:5,g:3});case"stringConstantExpr":return new Ka(Ho(jo(e,"value")),{type:1,g:3});case"decimalConstantExpr":return new Ka(Ho(jo(e,"value")),{type:4,g:3});case"doubleConstantExpr":return new Ka(Ho(jo(e,"value")),{type:3,g:3});case"varRef":return new Hi((e=Yo(jo(e,"name"))).prefix,e.namespaceURI,e.localName);case"flworExpr":return function(e,t){var n=Lo(e,"*");if(e=jo(n[n.length-1],"*"),1<(n=n.slice(0,-1)).length&&!t.$)throw Error("XPST0003: Use of XQuery FLWOR expressions in XPath is no allowed");return n.reduceRight((function(e,n){switch(n[0]){case"forClause":for(var r=(n=Lo(n,"*")).length-1;0<=r;--r){var o=n[r],a=Xo(o,["forExpr","*"]),i=jo(o,"positionalVariableBinding");e=new Ja(Yo(Xo(o,["typedVariableBinding","varName"])),Fu(a,ku(t)),i?Yo(i):null,e)}return e;case"letClause":for(r=(n=Lo(n,"*")).length-1;0<=r;--r)a=Xo(o=n[r],["letExpr","*"]),e=new Qa(Yo(Xo(o,["typedVariableBinding","varName"])),Fu(a,ku(t)),e);return e;case"whereClause":for(r=(n=Lo(n,"*")).length-1;0<=r;--r)e=new _i(Fu(n[r],t),e);return e;case"windowClause":case"groupByClause":case"countClause":throw Error("Not implemented: "+n[0]+" is not implemented yet.");case"orderByClause":return function(e,t,n){return new Ti((e=Lo(e,"*")).filter((function(e){return"stable"!==e[0]})).map((function(e){var n=jo(e,"orderModifier"),r=n?jo(n,"orderingKind"):null;return n=n?jo(n,"emptyOrderingMode"):null,r=!r||"ascending"===Ho(r),n=!n||"empty least"===Ho(n),{ca:Fu(Xo(e,["orderByExpr","*"]),t),Kb:r,lc:n}})),n)}(n,t,e);default:throw Error("Not implemented: "+n[0]+" is not supported in a flwor expression")}}),Fu(e,t))}(e,t);case"quantifiedExpr":return function(e,t){var n=_o(e,"type"),r=Ho(jo(e,"quantifier")),o=Xo(e,["predicateExpr","*"]);return new Ri(r,e=Lo(e,"quantifiedExprInClause").map((function(e){return{name:Yo(Xo(e,["typedVariableBinding","varName"])),jb:Fu(e=Xo(e,["sourceExpr","*"]),ku(t))}})),Fu(o,ku(t)),n)}(e,t);case"ifThenElseExpr":return n=_o(e,"type"),new Ma(Fu(jo(jo(e,"ifClause"),"*"),ku(t)),Fu(jo(jo(e,"thenClause"),"*"),t),Fu(jo(jo(e,"elseClause"),"*"),t),n);case"instanceOfExpr":return n=Fu(Xo(e,["argExpr","*"]),t),r=Xo(e,["sequenceType","*"]),o=Xo(e,["sequenceType","occurrenceIndicator"]),e=_o(e,"type"),new wi(n,Fu(r,ku(t)),o?Ho(o):"",e);case"castExpr":return t=Fu(jo(jo(e,"argExpr"),"*"),ku(t)),n=jo(e,"singleType"),new yi(t,e=Yo(jo(n,"atomicType")),n=null!==jo(n,"optional"));case"castableExpr":return t=Fu(jo(jo(e,"argExpr"),"*"),ku(t)),n=jo(e,"singleType"),new gi(t,e=Yo(jo(n,"atomicType")),n=null!==jo(n,"optional"));case"simpleMapExpr":return function(e,t){var n=_o(e,"type");return Lo(e,"*").reduce((function(e,r){return null===e?Fu(r,ku(t)):new mi(e,Fu(r,ku(t)),n)}),null)}(e,t);case"mapConstructor":return function(e,t){var n=_o(e,"type");return new Wa(Lo(e,"mapConstructorEntry").map((function(e){return{key:Fu(Xo(e,["mapKeyExpr","*"]),ku(t)),value:Fu(Xo(e,["mapValueExpr","*"]),ku(t))}})),n)}(e,t);case"arrayConstructor":return function(e,t){var n=_o(e,"type"),r=Lo(e=jo(e,"*"),"arrayElem").map((function(e){return Fu(jo(e,"*"),ku(t))}));switch(e[0]){case"curlyArray":return new wa(r,n);case"squareArray":return new Aa(r,n);default:throw Error("Unrecognized arrayType: "+e[0])}}(e,t);case"unaryLookup":return n=_o(e,"type"),new Di(Ru(e,t),n);case"typeswitchExpr":return function(e,t){if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");var n=_o(e,"type");return new Nu(Fu(jo(jo(e,"argExpr"),"*"),t),Lo(e,"typeswitchExprCaseClause").map((function(e){var n=0===Lo(e,"sequenceTypeUnion").length?[jo(e,"sequenceType")]:Lo(jo(e,"sequenceTypeUnion"),"sequenceType");return{ic:Fu(Xo(e,["resultExpr","*"]),t),Pb:n.map((function(e){var n=jo(e,"occurrenceIndicator");return{oc:n?Ho(n):"",Ob:Fu(jo(e,"*"),t)}}))}})),e=Fu(Xo(e,["typeswitchExprDefaultClause","resultExpr","*"]),t),n)}(e,t);case"elementConstructor":return function(e,t){if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");var n=Yo(jo(e,"tagName")),r=jo(e,"attributeList");return new xu(n,r?Lo(r,"attributeConstructor").map((function(e){return Fu(e,ku(t))})):[],r=r?Lo(r,"namespaceDeclaration").map((function(e){var t=jo(e,"prefix");return{prefix:t?Ho(t):"",uri:Ho(jo(e,"uri"))}})):[],e=(e=jo(e,"elementContent"))?Lo(e,"*").map((function(e){return Fu(e,ku(t))})):[])}(e,t);case"attributeConstructor":return function(e,t){if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");var n=Yo(jo(e,"attributeName")),r=jo(e,"attributeValue");return new wu(n,{value:r=r?Ho(r):null,wb:e=(e=jo(e,"attributeValueExpr"))?Lo(e,"*").map((function(e){return Fu(e,ku(t))})):null})}(e,t);case"computedAttributeConstructor":return(n=jo(e,"tagName"))?n=Yo(n):(n=jo(e,"tagNameExpr"),n={Oa:Fu(jo(n,"*"),ku(t))}),new wu(n,{wb:[e=Fu(jo(jo(e,"valueExpr"),"*"),ku(t))]});case"computedCommentConstructor":if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");return new Au(e=(e=jo(e,"argExpr"))?Fu(jo(e,"*"),ku(t)):null);case"computedTextConstructor":if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");return new Tu(e=(e=jo(e,"argExpr"))?Fu(jo(e,"*"),ku(t)):null);case"computedElementConstructor":return function(e,t){var n=jo(e,"tagName");return n?n=Yo(n):(n=jo(e,"tagNameExpr"),n={Oa:Fu(jo(n,"*"),ku(t))}),new xu(n,[],[],e=(e=jo(e,"contentExpr"))?Lo(e,"*").map((function(e){return Fu(e,ku(t))})):[])}(e,t);case"computedPIConstructor":if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");return n=jo(e,"piTargetExpr"),r=jo(e,"piTarget"),o=jo(e,"piValueExpr"),e=_o(e,"type"),new Eu({Fb:n?Fu(jo(n,"*"),ku(t)):null,Nb:r?Ho(r):null},o?Fu(jo(o,"*"),ku(t)):new di([],e));case"CDataSection":return new Ka(Ho(e),{type:1,g:3});case"deleteExpr":return new nu(e=Fu(Xo(e,["targetExpr","*"]),t));case"insertExpr":switch(n=Fu(Xo(e,["sourceExpr","*"]),t),(o=Lo(e,"*")[1])[0]){case"insertAfter":r=1;break;case"insertBefore":r=2;break;case"insertInto":r=(r=jo(o,"*"))?"insertAsFirst"===r[0]?4:5:3}return new iu(n,r,e=Fu(Xo(e,["targetExpr","*"]),t));case"renameExpr":return new hu(n=Fu(Xo(e,["targetExpr","*"]),t),e=Fu(Xo(e,["newNameExpr","*"]),t));case"replaceExpr":return new du(n=!!jo(e,"replaceValue"),r=Fu(Xo(e,["targetExpr","*"]),t),e=Fu(Xo(e,["replacementExpr","*"]),t));case"transformExpr":return function(e,t){return new yu(Lo(jo(e,"transformCopies"),"transformCopy").map((function(e){var n=Yo(jo(jo(e,"varRef"),"name"));return{jb:Fu(jo(jo(e,"copySource"),"*"),t),Rb:new we(n.prefix,n.namespaceURI,n.localName)}})),Fu(jo(jo(e,"modifyExpr"),"*"),t),e=Fu(jo(jo(e,"returnExpr"),"*"),t))}(e,t);case"x:stackTrace":for(n=e[1],e=e[2];"x:stackTrace"===e[0];)e=e[2];return new _a(n,e[0],Fu(e,t));default:return Ou(e)}}function Ou(e){switch(e[0]){case"nameTest":return new Mi(Yo(e));case"piTest":return(e=jo(e,"piTarget"))?new Ui(Ho(e)):new Pi(7);case"commentTest":return new Pi(8);case"textTest":return new Pi(3);case"documentTest":return new Pi(9);case"attributeTest":var t=(e=jo(e,"attributeName"))&&jo(e,"star");return!e||t?new Pi(2):new Mi(Yo(jo(e,"QName")),{kind:2});case"elementTest":return t=(e=jo(e,"elementName"))&&jo(e,"star"),!e||t?new Pi(1):new Mi(Yo(jo(e,"QName")),{kind:1});case"anyKindTest":return new ji({prefix:"",namespaceURI:null,localName:"node()"});case"anyMapTest":return new ji({prefix:"",namespaceURI:null,localName:"map(*)"});case"anyArrayTest":return new ji({prefix:"",namespaceURI:null,localName:"array(*)"});case"Wildcard":return jo(e,"star")?(t=jo(e,"uri"))?e=new Mi({localName:"*",namespaceURI:Ho(t),prefix:""}):(t=jo(e,"NCName"),e="star"===jo(e,"*")[0]?new Mi({localName:Ho(t),namespaceURI:null,prefix:"*"}):new Mi({localName:"*",namespaceURI:null,prefix:Ho(t)})):e=new Mi({localName:"*",namespaceURI:null,prefix:"*"}),e;case"atomicType":return new ji(Yo(e));case"anyItemType":return new ji({prefix:"",namespaceURI:null,localName:"item()"});default:throw Error("No selector counterpart for: "+e[0]+".")}}function Du(e,t,n){var r=[];return function t(o){var a=jo(jo(o,"firstOperand"),"*");o=jo(jo(o,"secondOperand"),"*"),a[0]===e?t(a):r.push(Fu(a,n)),o[0]===e?t(o):r.push(Fu(o,n))}(t),r}function Ru(e,t){switch((e=jo(e,"*"))[0]){case"NCName":return new Ka(Ho(e),{type:1,g:3});case"star":return"*";default:return Fu(e,ku(t))}}function Gu(e,t,n){var r=Xo(t,["firstOperand","*"]),o=Xo(t,["secondOperand","*"]);switch(r=Fu(r,ku(n)),n=Fu(o,ku(n)),e){case"valueCompare":return new ii(t[0],r,n);case"nodeCompare":return new pi(t[0],r,n);case"generalCompare":return new ci(t[0],r,n)}}function Pu(e,t){return Fu(e,t)}var Mu=new Map;function Uu(e,t,n,r,o,a){this.B=e,this.l=t,this.h=n,this.v=r,this.o=o,this.s=a}function ju(e,t,n,r,o,a,i){var u=Mu.get(e);u||(u=Object.create(null),Mu.set(e,u)),(t=u[e=t+(a?"_DEBUG":"")])||(t=u[e]=[]),t.push(new Uu(Object.values(n.h),Object.values(n.o),o,Object.keys(r).map((function(e){return{namespaceURI:r[e],prefix:e}})),i,n.B))}function Hu(e){var t=new Ee;if("http://www.w3.org/2005/XQueryX"!==e.namespaceURI&&"http://www.w3.org/2005/XQueryX"!==e.namespaceURI&&"http://fontoxml.com/fontoxpath"!==e.namespaceURI&&"http://www.w3.org/2007/xquery-update-10"!==e.namespaceURI)throw Rt("The XML structure passed as an XQueryX program was not valid XQueryX");var n=["stackTrace"===e.localName?"x:stackTrace":e.localName],r=t.getAllAttributes(e);for(r&&0<r.length&&n.push(Array.from(r).reduce((function(t,n){return"start"===n.localName||"end"===n.localName&&"stackTrace"===e.localName?t[n.localName]=JSON.parse(n.value):"type"===n.localName?t[n.localName]=le(n.value):t[n.localName]=n.value,t}),{})),r=(t=c(t=t.getChildNodes(e))).next();!r.done;r=t.next())switch(r=r.value,r.nodeType){case 1:n.push(Hu(r));break;case 3:n.push(r.data)}return n}var _u=Object.create(null);function Xu(e,t){var n=_u[e];n||(n=_u[e]={Ma:[],Va:[],ra:null,source:t.source});var r=n.ra||function(){};n.Ma=n.Ma.concat(t.Ma),n.Va=n.Va.concat(t.Va),n.ra=function(e){r(e),t.ra&&t.ra(e)}}function Lu(e,t){var n=_u[t];if(!n)throw Error("XQST0051: No modules found with the namespace uri "+t);n.Ma.forEach((function(n){n.hb&&Ro(e,t,n.localName,n.arity,n)})),n.Va.forEach((function(n){Po(e,t,n.localName),Mo(e,t,n.localName,(function(e,t){return vr(n.ca,e,t)}))}))}function Yu(){Object.keys(_u).forEach((function(e){if((e=_u[e]).ra)try{e.ra(e)}catch(t){e.ra=null,lo(e.source,t)}e.ra=null}))}function Ju(e){return e.replace(/(\x0D\x0A)|(\x0D(?!\x0A))/g,String.fromCharCode(10))}var qu=t;function Qu(e,t){return function(n,r){return t.has(r)?t.get(r):(n=e(n,r),t.set(r,n),n)}}function Ku(e,t){return qu.delimited(t,e,t)}function Wu(e,t){return e.reverse().reduce((function(e,t){return qu.preceded(t,e)}),t)}function Vu(e,t,n,r){return qu.then(qu.then(e,t,(function(e,t){return[e,t]})),n,(function(e,t){var n=c(e);return e=n.next().value,n=n.next().value,r(e,n,t)}))}function $u(e,t,n,r,o){return qu.then(qu.then(qu.then(e,t,(function(e,t){return[e,t]})),n,(function(e,t){var n=c(e);return[e=n.next().value,n=n.next().value,t]})),r,(function(e,t){var n=c(e);e=n.next().value;var r=n.next().value;return n=n.next().value,o(e,r,n,t)}))}function zu(e){return qu.map(e,(function(e){return[e]}))}function Zu(e,t){return qu.map(qu.or(e),(function(){return t}))}function es(e){return function(t,n){return(t=e.exec(t.substring(n)))&&0===t.index?qu.okWithValue(n+t[0].length,t[0]):qu.error(n,[e.source],!1)}}var ts=qu.or([qu.token(" "),qu.token("\t"),qu.token("\r"),qu.token("\n")]),ns=qu.token("(:"),rs=qu.token(":)"),os=qu.token("(#"),as=qu.token("#)"),is=qu.token("("),us=qu.token(")"),ss=qu.token("["),cs=qu.token("]"),ls=qu.token("{"),ps=qu.token("}"),fs=qu.token("{{"),hs=qu.token("}}"),ds=qu.token("'"),ms=qu.token("''"),gs=qu.token('"'),ys=qu.token('""'),vs=qu.token("<![CDATA["),ws=qu.token("]]>"),As=qu.token("/>"),xs=qu.token("</"),bs=qu.token("\x3c!--"),Bs=qu.token("--\x3e"),Es=qu.token("<?"),Ts=qu.token("?>"),Ns=qu.token("&#x"),Is=qu.token("&#"),Cs=qu.token(":*"),Ss=qu.token("*:"),ks=qu.token(":="),Fs=qu.token("&"),Os=qu.token(":"),Ds=qu.token(";"),Rs=qu.token("*"),Gs=qu.token("@"),Ps=qu.token("$"),Ms=qu.token("#"),Us=qu.token("%"),js=qu.token("?"),Hs=qu.token("="),_s=qu.followed(qu.token("!"),qu.not(qu.peek(Hs),[])),Xs=qu.followed(qu.token("|"),qu.not(qu.peek(qu.token("|")),[])),Ls=qu.token("||"),Ys=qu.token("!="),Js=qu.token("<"),qs=qu.token("<<"),Qs=qu.token("<="),Ks=qu.token(">"),Ws=qu.token(">>"),Vs=qu.token(">="),$s=qu.token(","),zs=qu.token("."),Zs=qu.token(".."),ec=qu.token("+"),tc=qu.token("-"),nc=qu.token("/"),rc=qu.token("//"),oc=qu.token("=>"),ac=qu.token("e"),ic=qu.token("E");qu.token("l"),qu.token("L"),qu.token("m"),qu.token("M");var uc=qu.token("Q");qu.token("x"),qu.token("X");var sc=qu.token("as"),cc=qu.token("cast"),lc=qu.token("castable"),pc=qu.token("treat"),fc=qu.token("instance"),hc=qu.token("of"),dc=qu.token("node"),mc=qu.token("nodes"),gc=qu.token("delete"),yc=qu.token("value"),vc=qu.token("function"),wc=qu.token("map"),Ac=qu.token("element"),xc=qu.token("attribute"),bc=qu.token("schema-element"),Bc=qu.token("intersect"),Ec=qu.token("except"),Tc=qu.token("union"),Nc=qu.token("to"),Ic=qu.token("is"),Cc=qu.token("or"),Sc=qu.token("and"),kc=qu.token("div"),Fc=qu.token("idiv"),Oc=qu.token("mod"),Dc=qu.token("eq"),Rc=qu.token("ne"),Gc=qu.token("lt"),Pc=qu.token("le"),Mc=qu.token("gt"),Uc=qu.token("ge"),jc=qu.token("amp"),Hc=qu.token("quot"),_c=qu.token("apos"),Xc=qu.token("if"),Lc=qu.token("then"),Yc=qu.token("else"),Jc=qu.token("allowing"),qc=qu.token("empty"),Qc=qu.token("at"),Kc=qu.token("in"),Wc=qu.token("for"),Vc=qu.token("let"),$c=qu.token("where"),zc=qu.token("collation"),Zc=qu.token("group"),el=qu.token("by"),tl=qu.token("order"),nl=qu.token("stable"),rl=qu.token("return"),ol=qu.token("array"),al=qu.token("document"),il=qu.token("namespace"),ul=qu.token("text"),sl=qu.token("comment"),cl=qu.token("processing-instruction"),ll=qu.token("lax"),pl=qu.token("strict"),fl=qu.token("validate"),hl=qu.token("type"),dl=qu.token("declare"),ml=qu.token("default"),gl=qu.token("boundary-space"),yl=qu.token("strip"),vl=qu.token("preserve"),wl=qu.token("no-preserve"),Al=qu.token("inherit"),xl=qu.token("no-inherit"),bl=qu.token("greatest"),Bl=qu.token("least"),El=qu.token("copy-namespaces"),Tl=qu.token("decimal-format"),Nl=qu.token("case"),Il=qu.token("typeswitch"),Cl=qu.token("some"),Sl=qu.token("every"),kl=qu.token("satisfies"),Fl=qu.token("replace"),Ol=qu.token("with"),Dl=qu.token("copy"),Rl=qu.token("modify"),Gl=qu.token("first"),Pl=qu.token("last"),Ml=qu.token("before"),Ul=qu.token("after"),jl=qu.token("into"),Hl=qu.token("insert"),_l=qu.token("rename"),Xl=qu.token("switch"),Ll=qu.token("variable"),Yl=qu.token("external"),Jl=qu.token("updating"),ql=qu.token("import"),Ql=qu.token("schema"),Kl=qu.token("module"),Wl=qu.token("base-uri"),Vl=qu.token("construction"),$l=qu.token("ordering"),zl=qu.token("ordered"),Zl=qu.token("unordered"),ep=qu.token("option"),tp=qu.token("context"),np=qu.token("item"),rp=qu.token("xquery"),op=qu.token("version"),ap=qu.token("encoding"),ip=qu.token("document-node"),up=qu.token("namespace-node"),sp=qu.token("schema-attribute"),cp=qu.token("ascending"),lp=qu.token("descending"),pp=qu.token("empty-sequence"),fp=qu.token("child::"),hp=qu.token("descendant::"),dp=qu.token("attribute::"),mp=qu.token("self::"),gp=qu.token("descendant-or-self::"),yp=qu.token("following-sibling::"),vp=qu.token("following::"),wp=qu.token("parent::"),Ap=qu.token("ancestor::"),xp=qu.token("preceding-sibling::"),bp=qu.token("preceding::"),Bp=qu.token("ancestor-or-self::"),Ep=qu.token("decimal-separator"),Tp=qu.token("grouping-separator"),Np=qu.token("infinity"),Ip=qu.token("minus-sign"),Cp=qu.token("NaN"),Sp=qu.token("per-mille"),kp=qu.token("zero-digit"),Fp=qu.token("digit"),Op=qu.token("pattern-separator"),Dp=qu.token("exponent-separator"),Rp=qu.token("schema-attribute("),Gp=qu.token("document-node("),Pp=qu.token("processing-instruction("),Mp=qu.token("processing-instruction()"),Up=qu.token("comment()"),jp=qu.token("text()"),Hp=qu.token("namespace-node()"),_p=qu.token("node()"),Xp=qu.token("item()"),Lp=qu.token("empty-sequence()"),Yp=new Map,Jp=new Map,qp=qu.or([es(/[\t\n\r -\uD7FF\uE000\uFFFD]/),es(/[\uD800-\uDBFF][\uDC00-\uDFFF]/)]),Qp=qu.preceded(qu.peek(qu.not(qu.or([ns,rs]),['comment contents cannot contain "(:" or ":)"'])),qp),Kp=qu.map(qu.delimited(ns,qu.star(qu.or([Qp,function(e,t){return Kp(e,t)}])),rs,!0),(function(e){return e.join("")})),Wp=qu.or([ts,Kp]),Vp=qu.map(qu.plus(ts),(function(e){return e.join("")})),$p=Qu(qu.map(qu.star(Wp),(function(e){return e.join("")})),Yp),zp=Qu(qu.map(qu.plus(Wp),(function(e){return e.join("")})),Jp),Zp=qu.or([es(/[A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/),qu.then(es(/[\uD800-\uDB7F]/),es(/[\uDC00-\uDFFF]/),(function(e,t){return e+t}))]),ef=qu.or([Zp,es(/[\-\.0-9\xB7\u0300-\u036F\u203F\u2040]/)]),tf=qu.then(Zp,qu.star(ef),(function(e,t){return e+t.join("")})),nf=qu.map(tf,(function(e){return["prefix",e]})),rf=qu.or([Zp,Os]),of=qu.or([ef,Os]);qu.then(rf,qu.star(of),(function(e,t){return e+t.join("")}));var af=qu.map(tf,(function(e){var t={};return[(t.prefix="",t.URI=null,t),e]})),uf=qu.then(tf,qu.preceded(Os,tf),(function(e,t){var n={};return[(n.prefix=e,n.URI=null,n),t]})),sf=qu.or([uf,af]),cf=qu.followed(Wu([uc,$p,ls],qu.map(qu.star(es(/[^{}]/)),(function(e){return e.join("").replace(/\s+/g," ").trim()}))),ps),lf=qu.then(cf,tf,(function(e,t){return[e,t]})),pf=qu.or([qu.map(lf,(function(e){var t={};return[(t.prefix=null,t.URI=e[0],t),e[1]]})),sf]),ff=qu.or([qu.map(pf,(function(e){return["QName"].concat(p(e))})),qu.map(Rs,(function(){return["star"]}))]),hf=qu.map(qu.preceded(Ps,pf),(function(e){return["varRef",["name"].concat(p(e))]})),df=qu.peek(qu.or([is,gs,ds,Wp])),mf=qu.map(qu.or([fp,hp,dp,mp,gp,yp,vp]),(function(e){return e.substring(0,e.length-2)})),gf=qu.map(qu.or([wp,Ap,xp,bp,Bp]),(function(e){return e.substring(0,e.length-2)})),yf=Vu(Fs,qu.or([Gc,Mc,jc,Hc,_c]),Ds,(function(e,t,n){return e+t+n})),vf=qu.or([Vu(Ns,es(/[0-9a-fA-F]+/),Ds,(function(e,t,n){return e+t+n})),Vu(Is,es(/[0-9]+/),Ds,(function(e,t,n){return e+t+n}))]),wf=Zu([ys],'"'),Af=Zu([ms],"'"),xf=zu(Zu([Up],"commentTest")),bf=zu(Zu([jp],"textTest")),Bf=zu(Zu([Hp],"namespaceTest")),Ef=zu(Zu([_p],"anyKindTest")),Tf=es(/[0-9]+/),Nf=qu.then(qu.or([qu.then(zs,Tf,(function(e,t){return e+t})),qu.then(Tf,qu.optional(qu.preceded(zs,es(/[0-9]*/))),(function(e,t){return e+(null!==t?"."+t:"")}))]),Vu(qu.or([ac,ic]),qu.optional(qu.or([ec,tc])),Tf,(function(e,t,n){return e+(t||"")+n})),(function(e,t){return["doubleConstantExpr",["value",e+t]]})),If=qu.or([qu.map(qu.preceded(zs,Tf),(function(e){return["decimalConstantExpr",["value","."+e]]})),qu.then(qu.followed(Tf,zs),qu.optional(Tf),(function(e,t){return["decimalConstantExpr",["value",e+"."+(null!==t?t:"")]]}))]),Cf=qu.map(Tf,(function(e){return["integerConstantExpr",["value",e]]})),Sf=qu.followed(qu.or([Nf,If,Cf]),qu.peek(qu.not(es(/[a-zA-Z]/),["no alphabetical characters after numeric literal"]))),kf=qu.map(qu.followed(zs,qu.peek(qu.not(zs,["context item should not be followed by another ."]))),(function(){return["contextItemExpr"]})),Ff=qu.or([ol,xc,sl,ip,Ac,pp,vc,Xc,np,wc,up,dc,cl,sp,bc,Xl,ul,Il]),Of=zu(Zu([js],"argumentPlaceholder")),Df=qu.or([js,Rs,ec]),Rf=qu.preceded(qu.peek(qu.not(es(/[{}<&]/),["elementContentChar cannot be {, }, <, or &"])),qp),Gf=qu.map(qu.delimited(vs,qu.star(qu.preceded(qu.peek(qu.not(ws,['CDataSection content may not contain "]]>"'])),qp)),ws,!0),(function(e){return["CDataSection",e.join("")]})),Pf=qu.preceded(qu.peek(qu.not(es(/["{}<&]/),['quotAttrValueContentChar cannot be ", {, }, <, or &'])),qp),Mf=qu.preceded(qu.peek(qu.not(es(/['{}<&]/),["aposAttrValueContentChar cannot be ', {, }, <, or &"])),qp),Uf=qu.map(qu.star(qu.or([qu.preceded(qu.peek(qu.not(tc,[])),qp),qu.map(Wu([tc,qu.peek(qu.not(tc,[]))],qp),(function(e){return"-"+e}))])),(function(e){return e.join("")})),jf=qu.map(qu.delimited(bs,Uf,Bs,!0),(function(e){return["computedCommentConstructor",["argExpr",["stringConstantExpr",["value",e]]]]})),Hf=qu.filter(tf,(function(e){return"xml"!==e.toLowerCase()}),['A processing instruction target cannot be "xml"']),_f=qu.map(qu.star(qu.preceded(qu.peek(qu.not(Ts,[])),qp)),(function(e){return e.join("")})),Xf=qu.then(qu.preceded(Es,qu.cut(Hf)),qu.cut(qu.followed(qu.optional(qu.preceded(Vp,_f)),Ts)),(function(e,t){return["computedPIConstructor",["piTarget",e],["piValueExpr",["stringConstantExpr",["value",t]]]]})),Lf=qu.map(rc,(function(){return["stepExpr",["xpathAxis","descendant-or-self"],["anyKindTest"]]})),Yf=qu.or([ll,pl]),Jf=qu.map(qu.star(qu.followed(qp,qu.peek(qu.not(as,["Pragma contents should not contain '#)'"])))),(function(e){return e.join("")})),qf=qu.map(qu.followed(qu.or([Dc,Rc,Gc,Pc,Mc,Uc]),df),(function(e){return e+"Op"})),Qf=qu.or([qu.followed(Zu([Ic],"isOp"),df),Zu([qs],"nodeBeforeOp"),Zu([Ws],"nodeAfterOp")]),Kf=qu.or([Zu([Hs],"equalOp"),Zu([Ys],"notEqualOp"),Zu([Qs],"lessThanOrEqualOp"),Zu([Js],"lessThanOp"),Zu([Vs],"greaterThanOrEqualOp"),Zu([Ks],"greaterThanOp")]),Wf=qu.map(Jl,(function(){return["annotation",["annotationName","updating"]]})),Vf=qu.or([vl,wl]),$f=qu.or([Al,xl]),zf=qu.or([Ep,Tp,Np,Ip,Cp,Us,Sp,kp,Fp,Op,Dp]),Zf=qu.map(Wu([dl,zp,gl,zp],qu.or([vl,yl])),(function(e){return["boundarySpaceDecl",e]})),eh=qu.map(Wu([dl,zp,Vl,zp],qu.or([vl,yl])),(function(e){return["constructionDecl",e]})),th=qu.map(Wu([dl,zp,$l,zp],qu.or([zl,Zl])),(function(e){return["orderingModeDecl",e]})),nh=qu.map(Wu([dl,zp,ml,zp,tl,zp,qc,zp],qu.or([bl,Bl])),(function(e){return["emptyOrderDecl",e]})),rh=qu.then(Wu([dl,zp,El,zp],Vf),Wu([$p,$s,$p],$f),(function(e,t){return["copyNamespacesDecl",["preserveMode",e],["inheritMode",t]]}));function oh(e){switch(e[0]){case"constantExpr":case"varRef":case"contextItemExpr":case"functionCallExpr":case"sequenceExpr":case"elementConstructor":case"computedElementConstructor":case"computedAttributeConstructor":case"computedDocumentConstructor":case"computedTextConstructor":case"computedCommentConstructor":case"computedNamespaceConstructor":case"computedPIConstructor":case"orderedExpr":case"unorderedExpr":case"namedFunctionRef":case"inlineFunctionExpr":case"dynamicFunctionInvocationExpr":case"mapConstructor":case"arrayConstructor":case"stringConstructor":case"unaryLookup":return e}return["sequenceExpr",e]}function ah(e){if(!(1<=e&&55295>=e||57344<=e&&65533>=e||65536<=e&&1114111>=e))throw Error("XQST0090: The character reference "+e+" ("+e.toString(16)+") does not reference a valid codePoint.")}function ih(e){return e.replace(/(&[^;]+);/g,(function(e){if(/^&#x/.test(e))return ah(e=parseInt(e.slice(3,-1),16)),String.fromCodePoint(e);if(/^&#/.test(e))return ah(e=parseInt(e.slice(2,-1),10)),String.fromCodePoint(e);switch(e){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&quot;":return String.fromCharCode(34);case"&apos;":return String.fromCharCode(39)}throw Error('XPST0003: Unknown character reference: "'+e+'"')}))}function uh(e,t,n){if(!e.length)return[];for(var r=[e[0]],o=1;o<e.length;++o){var a=r[r.length-1];"string"==typeof a&&"string"==typeof e[o]?r[r.length-1]=a+e[o]:r.push(e[o])}if("string"==typeof r[0]&&0===r.length)return[];if(!(r=r.reduce((function(e,t,o){if("string"!=typeof t)e.push(t);else if(n&&/^\s*$/.test(t)){var a=r[o+1];(a&&"CDataSection"===a[0]||(o=r[o-1])&&"CDataSection"===o[0])&&e.push(ih(t))}else e.push(ih(t));return e}),[])).length)return r;if(1<r.length||t)for(e=0;e<r.length;e++)"string"==typeof r[e]&&(r[e]=["stringConstantExpr",["value",r[e]]]);return r}function sh(e){return e[0].prefix?e[0].prefix+":"+e[1]:e[1]}var ch=qu.then(pf,qu.optional(js),(function(e,t){return null!==t?["singleType",["atomicType"].concat(p(e)),["optional"]]:["singleType",["atomicType"].concat(p(e))]})),lh=qu.map(pf,(function(e){return["atomicType"].concat(p(e))})),ph=new Map;function fh(e){function t(e,t){return t.reduce((function(e,t){return[t[0],["firstOperand",e],["secondOperand",t[1]]]}),e)}function n(e,t,n){return qu.then(e,qu.star(qu.then(Ku(t,$p),qu.cut(e),(function(e,t){return[e,t]}))),n)}function r(e,t,n,r){return n=void 0===n?"firstOperand":n,r=void 0===r?"secondOperand":r,qu.then(e,qu.optional(qu.then(Ku(t,$p),qu.cut(e),(function(e,t){return[e,t]}))),(function(e,t){return null===t?e:[t[0],[n,e],[r,t[1]]]}))}function o(t){return e.vb?function(e,n){if(!(e=t(e,n)).success)return e;var r=l.has(n)?l.get(n):{offset:n,line:-1,ja:-1},o=l.has(e.offset)?l.get(e.offset):{offset:e.offset,line:-1,ja:-1};return l.set(n,r),l.set(e.offset,o),qu.okWithValue(e.offset,["x:stackTrace",{start:r,end:o},e.value])}:t}function a(e,t){return $(e,t)}function i(e,t){return je(e,t)}function u(e,t){return o(qu.or([It,Dt,Xt,kt,ut,jt,Rt,Ht,Gt,Mt,it]))(e,t)}function s(e,t){return n(u,$s,(function(e,t){return 0===t.length?e:["sequenceExpr",e].concat(p(t.map((function(e){return e[1]}))))}))(e,t)}var l=new Map,f=qu.preceded(ss,qu.followed(Ku(s,$p),cs)),h=qu.map(e.Ya?qu.or([Ku(qu.star(qu.or([yf,vf,wf,es(/[^"&]/)])),gs),Ku(qu.star(qu.or([yf,vf,Af,es(/[^'&]/)])),ds)]):qu.or([Ku(qu.star(qu.or([wf,es(/[^"]/)])),gs),Ku(qu.star(qu.or([Af,es(/[^']/)])),ds)]),(function(e){return e.join("")})),d=qu.or([qu.map(Wu([Ac,$p],qu.delimited(qu.followed(is,$p),qu.then(ff,Wu([$p,$s,$p],pf),(function(e,t){return[["elementName",e],["typeName"].concat(p(t))]})),qu.preceded($p,us))),(function(e){var t=c(e);return["elementTest",e=t.next().value,t=t.next().value]})),qu.map(Wu([Ac,$p],qu.delimited(is,ff,us)),(function(e){return["elementTest",["elementName",e]]})),qu.map(Wu([Ac,$p],qu.delimited(is,$p,us)),(function(){return["elementTest"]}))]),m=qu.or([qu.map(pf,(function(e){return["QName"].concat(p(e))})),qu.map(Rs,(function(){return["star"]}))]),g=qu.or([qu.map(Wu([xc,$p],qu.delimited(qu.followed(is,$p),qu.then(m,Wu([$p,$s,$p],pf),(function(e,t){return[["attributeName",e],["typeName"].concat(p(t))]})),qu.preceded($p,us))),(function(e){var t=c(e);return["attributeTest",e=t.next().value,t=t.next().value]})),qu.map(Wu([xc,$p],qu.delimited(is,m,us)),(function(e){return["attributeTest",["attributeName",e]]})),qu.map(Wu([xc,$p],qu.delimited(is,$p,us)),(function(){return["attributeTest"]}))]),y=qu.map(Wu([bc,$p,is],qu.followed(pf,us)),(function(e){return["schemaElementTest"].concat(p(e))})),v=qu.map(qu.delimited(Rp,Ku(pf,$p),us),(function(e){return["schemaAttributeTest"].concat(p(e))})),w=qu.map(qu.preceded(Gp,qu.followed(Ku(qu.optional(qu.or([d,y])),$p),us)),(function(e){return["documentTest"].concat(p(e?[e]:[]))})),A=qu.or([qu.map(qu.preceded(Pp,qu.followed(Ku(qu.or([tf,h]),$p),us)),(function(e){return["piTest",["piTarget",e]]})),zu(Zu([Mp],"piTest"))]),x=qu.or([w,d,g,y,v,A,xf,bf,Bf,Ef]),b=qu.or([qu.map(qu.preceded(Ss,tf),(function(e){return["Wildcard",["star"],["NCName",e]]})),zu(Zu([Rs],"Wildcard")),qu.map(qu.followed(cf,Rs),(function(e){return["Wildcard",["uri",e],["star"]]})),qu.map(qu.followed(tf,Cs),(function(e){return["Wildcard",["NCName",e],["star"]]}))]),B=qu.or([b,qu.map(pf,(function(e){return["nameTest"].concat(p(e))}))]),E=qu.or([x,B]),T=qu.then(qu.optional(Gs),E,(function(e,t){return null!==e||"attributeTest"===t[0]||"schemaAttributeTest"===t[0]?["stepExpr",["xpathAxis","attribute"],t]:["stepExpr",["xpathAxis","child"],t]})),N=qu.or([qu.then(mf,E,(function(e,t){return["stepExpr",["xpathAxis",e],t]})),T]),I=qu.map(Zs,(function(){return["stepExpr",["xpathAxis","parent"],["anyKindTest"]]})),C=qu.or([qu.then(gf,E,(function(e,t){return["stepExpr",["xpathAxis",e],t]})),I]),S=qu.map(qu.star(qu.preceded($p,f)),(function(e){return 0<e.length?["predicates"].concat(p(e)):void 0})),k=qu.then(qu.or([C,N]),S,(function(e,t){return void 0===t?e:e.concat([t])})),F=qu.or([Sf,qu.map(h,(function(t){return["stringConstantExpr",["value",e.Ya?ih(t):t]]}))]),O=qu.or([qu.delimited(is,Ku(s,$p),us),qu.map(qu.delimited(is,$p,us),(function(){return["sequenceExpr"]}))]),D=qu.or([u,Of]),R=qu.map(qu.delimited(is,Ku(qu.optional(qu.then(D,qu.star(qu.preceded(Ku($s,$p),D)),(function(e,t){return[e].concat(p(t))}))),$p),us),(function(e){return null!==e?e:[]})),G=qu.preceded(qu.not(Vu(Ff,$p,is,(function(){})),["cannot use reseved keyword for function names"]),qu.then(pf,qu.preceded($p,R),(function(e,t){return["functionCallExpr",["functionName"].concat(p(e)),null!==t?["arguments"].concat(p(t)):["arguments"]]}))),P=qu.then(pf,qu.preceded(Ms,Cf),(function(e,t){return["namedFunctionRef",["functionName"].concat(p(e)),t]})),M=qu.delimited(ls,Ku(qu.optional(s),$p),ps),U=qu.map(M,(function(e){return e||["sequenceExpr"]})),j=qu.or([qu.map(Lp,(function(){return[["voidSequenceType"]]})),qu.then(a,qu.optional(qu.preceded($p,Df)),(function(e,t){return[e].concat(p(null!==t?[["occurrenceIndicator",t]]:[]))}))]),H=qu.then(Wu([Us,$p],pf),qu.optional(qu.followed(qu.then(Wu([is,$p],F),qu.star(Wu([$s,$p],F)),(function(e,t){return e.concat(t)})),us)),(function(e,t){return["annotation",["annotationName"].concat(p(e))].concat(p(t?["arguments",t]:[]))})),_=qu.map(Wu([vc,$p,is,$p,Rs,$p],us),(function(){return["anyFunctionTest"]})),X=qu.then(Wu([vc,$p,is,$p],qu.optional(n(j,$s,(function(e,t){return e.concat.apply(e,t.map((function(e){return e[1]})))})))),Wu([$p,us,zp,sc,zp],j),(function(e,t){return["typedFunctionTest",["paramTypeList",["sequenceType"].concat(p(e||[]))],["sequenceType"].concat(p(t))]})),L=qu.then(qu.star(H),qu.or([_,X]),(function(e,t){return[t[0]].concat(p(e),p(t.slice(1)))})),Y=qu.map(Wu([wc,$p,is,$p,Rs,$p],us),(function(){return["anyMapTest"]})),J=qu.then(Wu([wc,$p,is,$p],lh),Wu([$p,$s],qu.followed(Ku(j,$p),us)),(function(e,t){return["typedMapTest",e,["sequenceType"].concat(p(t))]})),q=qu.or([Y,J]),Q=qu.map(Wu([ol,$p,is,$p,Rs,$p],us),(function(){return["anyArrayTest"]})),K=qu.map(Wu([ol,$p,is],qu.followed(Ku(j,$p),us)),(function(e){return["typedArrayTest",["sequenceType"].concat(p(e))]})),W=qu.or([Q,K]),V=qu.map(qu.delimited(is,Ku(a,$p),us),(function(e){return["parenthesizedItemType",e]})),$=qu.or([x,zu(Zu([Xp],"anyItemType")),L,q,W,lh,V]),z=qu.map(Wu([sc,zp],j),(function(e){return["typeDeclaration"].concat(p(e))})),Z=qu.then(qu.preceded(Ps,pf),qu.optional(qu.preceded(zp,z)),(function(e,t){return["param",["varName"].concat(p(e))].concat(p(t?[t]:[]))})),ee=n(Z,$s,(function(e,t){return[e].concat(p(t.map((function(e){return e[1]}))))})),te=$u(qu.star(H),Wu([$p,vc,$p,is,$p],qu.optional(ee)),Wu([$p,us,$p],qu.optional(qu.map(Wu([sc,$p],qu.followed(j,$p)),(function(e){return["typeDeclaration"].concat(p(e))})))),U,(function(e,t,n,r){return["inlineFunctionExpr"].concat(p(e),[["paramList"].concat(p(t||[]))],p(n?[n]:[]),[["functionBody",r]])})),ne=qu.or([P,te]),re=qu.map(u,(function(e){return["mapKeyExpr",e]})),oe=qu.map(u,(function(e){return["mapValueExpr",e]})),ae=qu.then(re,qu.preceded(Ku(Os,$p),oe),(function(e,t){return["mapConstructorEntry",e,t]})),ie=qu.preceded(wc,qu.delimited(Ku(ls,$p),qu.map(qu.optional(n(ae,Ku($s,$p),(function(e,t){return[e].concat(p(t.map((function(e){return e[1]}))))}))),(function(e){return e?["mapConstructor"].concat(p(e)):["mapConstructor"]})),qu.preceded($p,ps))),ue=qu.map(qu.delimited(ss,Ku(qu.optional(n(u,$s,(function(e,t){return[e].concat(p(t.map((function(e){return e[1]})))).map((function(e){return["arrayElem",e]}))}))),$p),cs),(function(e){return["squareArray"].concat(p(null!==e?e:[]))})),se=qu.map(qu.preceded(ol,qu.preceded($p,M)),(function(e){return["curlyArray"].concat(p(null!==e?[["arrayElem",e]]:[]))})),ce=qu.map(qu.or([ue,se]),(function(e){return["arrayConstructor",e]})),le=qu.or([tf,Cf,O,Rs]),pe=qu.map(qu.preceded(js,qu.preceded($p,le)),(function(e){return"*"===e?["unaryLookup",["star"]]:"string"==typeof e?["unaryLookup",["NCName",e]]:["unaryLookup",e]})),fe=qu.or([yf,vf,Zu([fs],"{"),Zu([hs],"}"),qu.map(M,(function(e){return e||["sequenceExpr"]}))]),he=qu.or([Gf,function(e,t){return Ae(e,t)},fe,Rf]),de=qu.or([qu.map(Pf,(function(e){return e.replace(/[\x20\x0D\x0A\x09]/g," ")})),fe]),me=qu.or([qu.map(Mf,(function(e){return e.replace(/[\x20\x0D\x0A\x09]/g," ")})),fe]),ge=qu.map(qu.or([Ku(qu.star(qu.or([wf,de])),gs),Ku(qu.star(qu.or([Af,me])),ds)]),(function(e){return uh(e,!1,!1)})),ye=qu.then(sf,qu.preceded(Ku(Hs,qu.optional(Vp)),ge),(function(e,t){if(""===e[0].prefix&&"xmlns"===e[1]){if(t.length&&"string"!=typeof t[0])throw Error("XQST0022: A namespace declaration may not contain enclosed expressions");return["namespaceDeclaration",t.length?["uri",t[0]]:["uri"]]}if("xmlns"===e[0].prefix){if(t.length&&"string"!=typeof t[0])throw Error("XQST0022: The namespace declaration for 'xmlns:"+e[1]+"' may not contain enclosed expressions");return["namespaceDeclaration",["prefix",e[1]],t.length?["uri",t[0]]:["uri"]]}return["attributeConstructor",["attributeName"].concat(e),0===t.length?["attributeValue"]:1===t.length&&"string"==typeof t[0]?["attributeValue",t[0]]:["attributeValueExpr"].concat(t)]})),ve=qu.map(qu.star(qu.preceded(Vp,qu.optional(ye))),(function(e){return e.filter(Boolean)})),we=Vu(qu.preceded(Js,sf),ve,qu.or([qu.map(As,(function(){return null})),qu.then(qu.preceded(Ks,qu.star(he)),Wu([$p,xs],qu.followed(sf,qu.then(qu.optional(Vp),Ks,(function(){return null})))),(function(e,t){return[uh(e,!0,!0),t]}))]),(function(e,t,n){var r=n;if(n&&n.length){r=sh(e);var o=sh(n[1]);if(r!==o)throw Error('XQST0118: The start and the end tag of an element constructor must be equal. "'+r+'" does not match "'+o+'"');r=n[0]}return["elementConstructor",["tagName"].concat(p(e))].concat(p(t.length?[["attributeList"].concat(p(t))]:[]),p(r&&r.length?[["elementContent"].concat(p(r))]:[]))})),Ae=qu.or([we,jf,Xf]),xe=qu.map(Wu([al,$p],M),(function(e){return["computedDocumentConstructor"].concat(p(e?[["argExpr",e]]:[]))})),be=qu.map(M,(function(e){return e?[["contentExpr",e]]:[]})),Be=qu.then(Wu([Ac,$p],qu.or([qu.map(pf,(function(e){return["tagName"].concat(p(e))})),qu.map(qu.delimited(ls,Ku(s,$p),ps),(function(e){return["tagNameExpr",e]}))])),qu.preceded($p,be),(function(e,t){return["computedElementConstructor",e].concat(p(t))})),Ee=qu.then(qu.preceded(xc,qu.or([qu.map(Wu([df,$p],pf),(function(e){return["tagName"].concat(p(e))})),qu.map(qu.preceded($p,qu.delimited(ls,Ku(s,$p),ps)),(function(e){return["tagNameExpr",e]}))])),qu.preceded($p,M),(function(e,t){return["computedAttributeConstructor",e,["valueExpr",t||["sequenceExpr"]]]})),Te=qu.map(M,(function(e){return e?[["prefixExpr",e]]:[]})),Ne=qu.map(M,(function(e){return e?[["URIExpr",e]]:[]})),Ie=qu.then(Wu([il,$p],qu.or([nf,Te])),qu.preceded($p,Ne),(function(e,t){return["computedNamespaceConstructor"].concat(p(e),p(t))})),Ce=qu.map(Wu([ul,$p],M),(function(e){return["computedTextConstructor"].concat(p(e?[["argExpr",e]]:[]))})),Se=qu.map(Wu([sl,$p],M),(function(e){return["computedCommentConstructor"].concat(p(e?[["argExpr",e]]:[]))})),ke=Wu([cl,$p],qu.then(qu.or([qu.map(tf,(function(e){return["piTarget",e]})),qu.map(qu.delimited(ls,Ku(s,$p),ps),(function(e){return["piTargetExpr",e]}))]),qu.preceded($p,M),(function(e,t){return["computedPIConstructor",e].concat(p(t?[["piValueExpr",t]]:[]))}))),Fe=qu.or([xe,Be,Ee,Ie,Ce,Se,ke]),Oe=qu.or([Ae,Fe]),De=qu.or([F,hf,O,kf,G,Oe,ne,ie,ce,pe]),Re=qu.map(Wu([js,$p],le),(function(e){return"*"===e?["lookup",["star"]]:"string"==typeof e?["lookup",["NCName",e]]:["lookup",e]})),Ge=qu.then(qu.map(De,(function(e){return oh(e)})),qu.star(qu.or([qu.map(qu.preceded($p,f),(function(e){return["predicate",e]})),qu.map(qu.preceded($p,R),(function(e){return["argumentList",e]})),qu.preceded($p,Re)])),(function(e,t){function n(){u&&1===a.length?i.push(["predicate",a[0]]):0!==a.length&&i.push(["predicates"].concat(p(a))),a.length=0}function r(e){n(),0!==i.length?("sequenceExpr"===o[0][0]&&2<o[0].length&&(o=[["sequenceExpr"].concat(p(o))]),o=[["filterExpr"].concat(p(o))].concat(p(i)),i.length=0):e&&(o=[["filterExpr"].concat(p(o))])}var o=[e],a=[],i=[],u=!1;for(t=(e=c(t)).next();!t.done;t=e.next())switch(t=t.value,t[0]){case"predicate":a.push(t[1]);break;case"lookup":u=!0,n(),i.push(t);break;case"argumentList":r(!1),1<o.length&&(o=[["sequenceExpr",["pathExpr",["stepExpr"].concat(p(o))]]]),o=[["dynamicFunctionInvocationExpr",["functionItem"].concat(p(o))].concat(p(t[1].length?[["arguments"].concat(p(t[1]))]:[]))];break;default:throw Error("unreachable")}return r(!0),o})),Pe=qu.or([qu.map(Ge,(function(e){return["stepExpr"].concat(p(e))})),k]),Me=qu.followed(De,qu.peek(qu.not(qu.preceded($p,qu.or([f,R,Re])),["primary expression not followed by predicate, argumentList, or lookup"]))),Ue=qu.or([Vu(Pe,qu.preceded($p,Lf),qu.preceded($p,i),(function(e,t,n){return["pathExpr",e,t].concat(p(n))})),qu.then(Pe,qu.preceded(Ku(nc,$p),i),(function(e,t){return["pathExpr",e].concat(p(t))})),Me,qu.map(Pe,(function(e){return["pathExpr",e]}))]),je=qu.or([Vu(Pe,qu.preceded($p,Lf),qu.preceded($p,i),(function(e,t,n){return[e,t].concat(p(n))})),qu.then(Pe,qu.preceded(Ku(nc,$p),i),(function(e,t){return[e].concat(p(t))})),qu.map(Pe,(function(e){return[e]}))]),He=qu.or([qu.map(Wu([nc,$p],je),(function(e){return["pathExpr",["rootExpr"]].concat(p(e))})),qu.then(Lf,qu.preceded($p,je),(function(e,t){return["pathExpr",["rootExpr"],e].concat(p(t))})),qu.map(qu.followed(nc,qu.not(qu.preceded($p,e.Ya?es(/[*<a-zA-Z]/):es(/[*a-zA-Z]/)),["Single rootExpr cannot be by followed by something that can be interpreted as a relative path"])),(function(){return["pathExpr",["rootExpr"]]}))]),_e=Qu(qu.or([Ue,He]),ph),Xe=qu.preceded(fl,qu.then(qu.optional(qu.or([qu.map(qu.preceded($p,Yf),(function(e){return["validationMode",e]})),qu.map(Wu([$p,hl,$p],pf),(function(e){return["type"].concat(p(e))}))])),qu.delimited(qu.preceded($p,ls),Ku(s,$p),ps),(function(e,t){return["validateExpr"].concat(p(e?[e]:[]),[["argExpr",t]])}))),Le=qu.delimited(os,qu.then(qu.preceded($p,pf),qu.optional(qu.preceded(zp,Jf)),(function(e,t){return t?["pragma",["pragmaName",e],["pragmaContents",t]]:["pragma",["pragmaName",e]]})),qu.preceded($p,as)),Ye=qu.map(qu.followed(qu.plus(Le),qu.preceded($p,qu.delimited(ls,Ku(qu.optional(s),$p),ps))),(function(e){return["extensionExpr"].concat(p(e))})),Je=o(n(_e,_s,(function(e,t){return 0===t.length?e:["simpleMapExpr","pathExpr"===e[0]?e:["pathExpr",["stepExpr",["filterExpr",oh(e)]]]].concat(t.map((function(e){return"pathExpr"===(e=e[1])[0]?e:["pathExpr",["stepExpr",["filterExpr",oh(e)]]]})))}))),qe=qu.or([Xe,Ye,Je]),Qe=qu.or([qu.then(qu.or([Zu([tc],"unaryMinusOp"),Zu([ec],"unaryPlusOp")]),qu.preceded($p,(function(e,t){return Qe(e,t)})),(function(e,t){return[e,["operand",t]]})),qe]),Ke=qu.or([qu.map(pf,(function(e){return["EQName"].concat(p(e))})),hf,O]),We=qu.then(Qe,qu.star(Wu([$p,oc,$p],qu.then(Ke,qu.preceded($p,R),(function(e,t){return[e,t]})))),(function(e,t){return t.reduce((function(e,t){return["arrowExpr",["argExpr",e],t[0],["arguments"].concat(p(t[1]))]}),e)})),Ve=qu.then(We,qu.optional(Wu([$p,cc,zp,sc,df,$p],ch)),(function(e,t){return null!==t?["castExpr",["argExpr",e],t]:e})),$e=qu.then(Ve,qu.optional(Wu([$p,lc,zp,sc,df,$p],ch)),(function(e,t){return null!==t?["castableExpr",["argExpr",e],t]:e})),ze=qu.then($e,qu.optional(Wu([$p,pc,zp,sc,df,$p],j)),(function(e,t){return null!==t?["treatExpr",["argExpr",e],["sequenceType"].concat(p(t))]:e})),Ze=qu.then(ze,qu.optional(Wu([$p,fc,zp,hc,df,$p],j)),(function(e,t){return null!==t?["instanceOfExpr",["argExpr",e],["sequenceType"].concat(p(t))]:e})),et=n(Ze,qu.followed(qu.or([Zu([Bc],"intersectOp"),Zu([Ec],"exceptOp")]),df),t),tt=n(et,qu.or([Zu([Xs],"unionOp"),qu.followed(Zu([Tc],"unionOp"),df)]),t),nt=n(tt,qu.or([Zu([Rs],"multiplyOp"),qu.followed(Zu([kc],"divOp"),df),qu.followed(Zu([Fc],"idivOp"),df),qu.followed(Zu([Oc],"modOp"),df)]),t),rt=n(nt,qu.or([Zu([tc],"subtractOp"),Zu([ec],"addOp")]),t),ot=n(r(rt,qu.followed(Zu([Nc],"rangeSequenceExpr"),df),"startExpr","endExpr"),Zu([Ls],"stringConcatenateOp"),t),at=n(r(ot,qu.or([qf,Qf,Kf])),qu.followed(Zu([Sc],"andOp"),df),t),it=n(at,qu.followed(Zu([Cc],"orOp"),df),t),ut=qu.then(qu.then(Wu([Xc,$p,is,$p],s),Wu([$p,us,$p,Lc,df,$p],u),(function(e,t){return[e,t]})),Wu([$p,Yc,df,$p],u),(function(e,t){return["ifThenElseExpr",["ifClause",e[0]],["thenClause",e[1]],["elseClause",t]]})),st=qu.delimited(Jc,zp,qc),ct=qu.map(Wu([Qc,zp,Ps],pf),(function(e){return["positionalVariableBinding"].concat(p(e))})),lt=function(e,t,n,r,o,a){return qu.then(qu.then(qu.then(qu.then(e,t,(function(e,t){return[e,t]})),n,(function(e,t){var n=c(e);return[e=n.next().value,n=n.next().value,t]})),r,(function(e,t){var n=c(e);return[e=n.next().value,n.next().value,n=n.next().value,t]})),o,(function(e,t){var n=c(e);e=n.next().value;var r=n.next().value,o=n.next().value;return n=n.next().value,a(e,r,o,n,t)}))}(qu.preceded(Ps,qu.cut(pf)),qu.cut(qu.preceded($p,qu.optional(z))),qu.cut(qu.preceded($p,qu.optional(st))),qu.cut(qu.preceded($p,qu.optional(ct))),qu.cut(qu.preceded(Ku(Kc,$p),u)),(function(e,t,n,r,o){return["forClauseItem",["typedVariableBinding",["varName"].concat(p(e),p(t?[t]:[]))]].concat(p(n?[["allowingEmpty"]]:[]),p(r?[r]:[]),[["forExpr",o]])})),pt=Wu([Wc,zp],n(lt,$s,(function(e,t){return["forClause",e].concat(p(t.map((function(e){return e[1]}))))}))),ft=Vu(qu.preceded(Ps,pf),qu.preceded($p,qu.optional(z)),qu.preceded(Ku(ks,$p),u),(function(e,t,n){return["letClauseItem",["typedVariableBinding",["varName"].concat(p(e))].concat(p(t?[t]:[])),["letExpr",n]]})),ht=qu.map(Wu([Vc,$p],n(ft,$s,(function(e,t){return[e].concat(p(t.map((function(e){return e[1]}))))}))),(function(e){return["letClause"].concat(p(e))})),dt=qu.or([pt,ht]),mt=qu.map(Wu([$c,df,$p],u),(function(e){return["whereClause",e]})),gt=qu.map(qu.preceded(Ps,pf),(function(e){return["varName"].concat(p(e))})),yt=qu.then(qu.preceded($p,qu.optional(z)),qu.preceded(Ku(ks,$p),u),(function(e,t){return["groupVarInitialize"].concat(p(e?[["typeDeclaration"].concat(p(e))]:[]),[["varValue",t]])})),vt=Vu(gt,qu.optional(yt),qu.optional(qu.map(qu.preceded(Ku(zc,$p),h),(function(e){return["collation",e]}))),(function(e,t,n){return["groupingSpec",e].concat(p(t?[t]:[]),p(n?[n]:[]))})),wt=n(vt,$s,(function(e,t){return[e].concat(p(t.map((function(e){return e[1]}))))})),At=qu.map(Wu([Zc,zp,el,$p],wt),(function(e){return["groupByClause"].concat(p(e))})),xt=Vu(qu.optional(qu.or([cp,lp])),qu.optional(Wu([$p,qc,$p],qu.or([bl,Bl].map((function(e){return qu.map(e,(function(e){return"empty "+e}))}))))),qu.preceded($p,qu.optional(Wu([zc,$p],h))),(function(e,t,n){return e||t||n?["orderModifier"].concat(p(e?[["orderingKind",e]]:[]),p(t?[["emptyOrderingMode",t]]:[]),p(n?[["collation",n]]:[])):null})),bt=qu.then(u,qu.preceded($p,xt),(function(e,t){return["orderBySpec",["orderByExpr",e]].concat(p(t?[t]:[]))})),Bt=n(bt,$s,(function(e,t){return[e].concat(p(t.map((function(e){return e[1]}))))})),Et=qu.then(qu.or([qu.map(Wu([tl,zp],el),(function(){return!1})),qu.map(Wu([nl,zp,tl,zp],el),(function(){return!0}))]),qu.preceded($p,Bt),(function(e,t){return["orderByClause"].concat(p(e?[["stable"]]:[]),p(t))})),Tt=qu.or([dt,mt,At,Et]),Nt=qu.map(Wu([rl,$p],u),(function(e){return["returnClause",e]})),It=Vu(dt,qu.cut(qu.star(qu.preceded($p,Tt))),qu.cut(qu.preceded($p,Nt)),(function(e,t,n){return["flworExpr",e].concat(p(t),[n])})),Ct=n(j,Xs,(function(e,t){return 0===t.length?["sequenceType"].concat(p(e)):["sequenceTypeUnion",["sequenceType"].concat(p(e))].concat(p(t.map((function(e){return["sequenceType"].concat(p(e[1]))}))))})),St=Vu(Wu([Nl,$p],qu.optional(qu.preceded(Ps,qu.followed(qu.followed(pf,zp),sc)))),qu.preceded($p,Ct),Wu([zp,rl,zp],u),(function(e,t,n){return["typeswitchExprCaseClause"].concat(e?[["variableBinding"].concat(p(e))]:[],[t],[["resultExpr",n]])})),kt=$u(qu.preceded(Il,Ku(qu.delimited(is,Ku(s,$p),us),$p)),qu.plus(qu.followed(St,$p)),Wu([ml,zp],qu.optional(qu.preceded(Ps,qu.followed(pf,zp)))),Wu([rl,zp],u),(function(e,t,n,r){return["typeswitchExpr",["argExpr",e]].concat(p(t),[["typeswitchExprDefaultClause"].concat(p(n||[]),[["resultExpr",r]])])})),Ft=Vu(qu.preceded(Ps,pf),qu.optional(qu.preceded(zp,z)),qu.preceded(Ku(Kc,zp),u),(function(e,t,n){return["quantifiedExprInClause",["typedVariableBinding",["varName"].concat(p(e))].concat(p(t?[t]:[])),["sourceExpr",n]]})),Ot=n(Ft,$s,(function(e,t){return[e].concat(p(t.map((function(e){return e[1]}))))})),Dt=Vu(qu.or([Cl,Sl]),qu.preceded(zp,Ot),qu.preceded(Ku(kl,$p),u),(function(e,t,n){return["quantifiedExpr",["quantifier",e]].concat(p(t),[["predicateExpr",n]])})),Rt=qu.map(Wu([gc,zp,qu.or([mc,dc]),zp],u),(function(e){return["deleteExpr",["targetExpr",e]]})),Gt=Vu(Wu([Fl,zp],qu.optional(Wu([yc,zp,hc],zp))),Wu([dc,zp],u),qu.preceded(Ku(Ol,zp),u),(function(e,t,n){return e?["replaceExpr",["replaceValue"],["targetExpr",t],["replacementExpr",n]]:["replaceExpr",["targetExpr",t],["replacementExpr",n]]})),Pt=qu.then(hf,qu.preceded(Ku(ks,$p),u),(function(e,t){return["transformCopy",e,["copySource",t]]})),Mt=Vu(Wu([Dl,zp],n(Pt,$s,(function(e,t){return[e].concat(p(t.map((function(e){return e[1]}))))}))),Wu([$p,Rl,zp],u),qu.preceded(Ku(rl,zp),u),(function(e,t,n){return["transformExpr",["transformCopies"].concat(p(e)),["modifyExpr",t],["returnExpr",n]]})),Ut=qu.or([qu.followed(qu.map(qu.optional(qu.followed(Wu([sc,zp],qu.or([qu.map(Gl,(function(){return["insertAsFirst"]})),qu.map(Pl,(function(){return["insertAsLast"]}))])),zp)),(function(e){return e?["insertInto",e]:["insertInto"]})),jl),qu.map(Ul,(function(){return["insertAfter"]})),qu.map(Ml,(function(){return["insertBefore"]}))]),jt=Vu(Wu([Hl,zp,qu.or([mc,dc]),zp],u),qu.preceded(zp,Ut),qu.preceded(zp,u),(function(e,t,n){return["insertExpr",["sourceExpr",e],t,["targetExpr",n]]})),Ht=qu.then(Wu([_l,zp,dc,$p],u),Wu([zp,sc,zp],u),(function(e,t){return["renameExpr",["targetExpr",e],["newNameExpr",t]]})),_t=qu.then(qu.plus(qu.map(Wu([Nl,zp],u),(function(e){return["switchCaseExpr",e]}))),Wu([zp,rl,zp],u),(function(e,t){return["switchExprCaseClause"].concat(p(e),[["resultExpr",t]])})),Xt=Vu(Wu([Xl,$p,is],s),Wu([$p,us,$p],qu.plus(qu.followed(_t,$p))),Wu([ml,zp,rl,zp],u),(function(e,t,n){return["switchExpr",["argExpr",e]].concat(p(t),[["switchExprDefaultClause",["resultExpr",n]]])})),Lt=qu.map(s,(function(e){return["queryBody",e]})),Yt=Wu([dl,zp,il,zp],qu.cut(qu.then(tf,qu.preceded(Ku(Hs,$p),h),(function(e,t){return["namespaceDecl",["prefix",e],["uri",t]]})))),Jt=qu.then(Wu([Ll,zp,Ps,$p],qu.then(pf,qu.optional(qu.preceded($p,z)),(function(e,t){return[e,t]}))),qu.cut(qu.or([qu.map(Wu([$p,ks,$p],u),(function(e){return["varValue",e]})),qu.map(Wu([zp,Yl],qu.optional(Wu([$p,ks,$p],u))),(function(e){return["external"].concat(p(e?[["varValue",e]]:[]))}))])),(function(e,t){var n=c(e);return e=n.next().value,n=n.next().value,["varDecl",["varName"].concat(p(e))].concat(p(null!==n?[n]:[]),[t])})),qt=$u(Wu([vc,zp,qu.peek(qu.not(Ff,["Cannot use reserved function name"]))],pf),qu.cut(Wu([$p,is,$p],qu.optional(ee))),qu.cut(Wu([$p,us],qu.optional(Wu([zp,sc,zp],j)))),qu.cut(qu.preceded($p,qu.or([qu.map(U,(function(e){return["functionBody",e]})),qu.map(Yl,(function(){return["externalDefinition"]}))]))),(function(e,t,n,r){return["functionDecl",["functionName"].concat(p(e)),["paramList"].concat(p(t||[]))].concat(p(n?[["typeDeclaration"].concat(p(n))]:[]),[r])})),Qt=Wu([dl,zp],qu.then(qu.star(qu.followed(qu.or([H,Wf]),zp)),qu.or([Jt,qt]),(function(e,t){return[t[0]].concat(p(e),p(t.slice(1)))}))),Kt=qu.then(Wu([dl,zp,ml,zp],qu.or([Ac,vc])),Wu([zp,il,zp],h),(function(e,t){return["defaultNamespaceDecl",["defaultNamespaceCategory",e],["uri",t]]})),Wt=qu.or([qu.map(qu.followed(Wu([il,zp],tf),qu.preceded($p,Hs)),(function(e){return["namespacePrefix",e]})),qu.map(Wu([ml,zp,Ac,zp],il),(function(){return["defaultElementNamespace"]}))]),Vt=Wu([ql,zp,Ql],Vu(qu.optional(qu.preceded(zp,Wt)),qu.preceded($p,h),qu.optional(qu.then(Wu([zp,Qc,zp],h),qu.star(Wu([$p,$s,$p],h)),(function(e,t){return[e].concat(p(t))}))),(function(e,t,n){return["schemaImport"].concat(p(e?[e]:[]),[["targetNamespace",t]],p(n?[n]:[]))}))),$t=Wu([ql,zp,Kl],Vu(qu.optional(qu.followed(Wu([zp,il,zp],tf),qu.preceded($p,Hs))),qu.preceded($p,h),qu.optional(qu.then(Wu([zp,Qc,zp],h),qu.star(Wu([$p,$s,$p],h)),(function(e,t){return[e].concat(p(t))}))),(function(e,t){return["moduleImport",["namespacePrefix",e],["targetNamespace",t]]}))),zt=qu.or([Vt,$t]),Zt=qu.map(Wu([dl,zp,ml,zp,zc,zp],h),(function(e){return["defaultCollationDecl",e]})),en=qu.map(Wu([dl,zp,Wl,zp],h),(function(e){return["baseUriDecl",e]})),tn=qu.then(Wu([dl,zp],qu.or([qu.map(Wu([Tl,zp],pf),(function(e){return["decimalFormatName"].concat(p(e))})),qu.map(Wu([ml,zp],Tl),(function(){return null}))])),qu.star(qu.then(qu.preceded(zp,zf),qu.preceded(Ku(Hs,zp),h),(function(e,t){return["decimalFormatParam",["decimalFormatParamName",e],["decimalFormatParamValue",t]]}))),(function(e,t){return["decimalFormatDecl"].concat(p(e?[e]:[]),p(t))})),nn=qu.or([Zf,Zt,en,eh,th,nh,rh,tn]),rn=qu.then(Wu([dl,zp,ep,zp],pf),qu.preceded(zp,h),(function(e,t){return["optionDecl",["optionName",e],["optionContents",t]]})),on=qu.then(Wu([dl,zp,tp,zp,np],qu.optional(Wu([zp,sc],$))),qu.or([qu.map(qu.preceded(Ku(ks,$p),u),(function(e){return["varValue",e]})),qu.map(Wu([zp,Yl],qu.optional(qu.preceded(Ku(ks,$p),u))),(function(){return["external"]}))]),(function(e,t){return["contextItemDecl"].concat(p(e?[["contextItemType",e]]:[]),[t])})),an=qu.then(qu.star(qu.followed(qu.or([Kt,nn,Yt,zt]),qu.cut(Ku(Ds,$p)))),qu.star(qu.followed(qu.or([on,Qt,rn]),qu.cut(Ku(Ds,$p)))),(function(e,t){return 0===e.length&&0===t.length?null:["prolog"].concat(p(e),p(t))})),un=Wu([Kl,zp,il,zp],qu.then(qu.followed(tf,Ku(Hs,$p)),qu.followed(h,Ku(Ds,$p)),(function(e,t){return["moduleDecl",["prefix",e],["uri",t]]}))),sn=qu.then(un,qu.preceded($p,an),(function(e,t){return["libraryModule",e].concat(p(t?[t]:[]))})),cn=qu.then(an,qu.preceded($p,Lt),(function(e,t){return["mainModule"].concat(p(e?[e]:[]),[t])})),ln=qu.map(Wu([rp,$p],qu.followed(qu.or([qu.then(qu.preceded(ap,zp),h,(function(e){return["encoding",e]})),qu.then(Wu([op,zp],h),qu.optional(Wu([zp,ap,zp],h)),(function(e,t){return[["version",e]].concat(p(t?[["encoding",t]]:[]))}))]),qu.preceded($p,Ds))),(function(e){return["versionDecl"].concat(p(e))})),pn=qu.then(qu.optional(Ku(ln,$p)),qu.or([sn,cn]),(function(e,t){return["module"].concat(p(e?[e]:[]),[t])})),fn=qu.complete(Ku(pn,$p));return function(e,t){l.clear(),t=fn(e,t);for(var n=1,r=1,o=0;o<e.length+1;o++){if(l.has(o)){var a=l.get(o);a.line=r,a.ja=n}"\r"===(a=e[o])||"\n"===a?(r++,n=1):n++}return t}}var hh=fh({vb:!1,Ya:!1}),dh=fh({vb:!0,Ya:!1}),mh=fh({vb:!1,Ya:!0}),gh=fh({vb:!0,Ya:!0});function yh(e,t){var n=!!t.$;if(t=!!t.debug,Yp.clear(),Jp.clear(),ph.clear(),!0===(n=n?t?gh(e,0):mh(e,0):t?dh(e,0):hh(e,0)).success)return n.value;throw t=(e=e.substring(0,n.offset).split("\n"))[e.length-1].length+1,new Ua({start:{offset:n.offset,line:e.length,ja:t},end:{offset:n.offset+1,line:e.length,ja:t+1}},"",Error("XPST0003: Failed to parse script. Expected "+[].concat(p(new Set(n.expected)))))}var vh="http://www.w3.org/XML/1998/namespace http://www.w3.org/2001/XMLSchema http://www.w3.org/2001/XMLSchema-instance http://www.w3.org/2005/xpath-functions http://www.w3.org/2005/xpath-functions/math http://www.w3.org/2012/xquery http://www.w3.org/2005/xpath-functions/array http://www.w3.org/2005/xpath-functions/map".split(" ");function wh(e,t,n,r,o){var a=jo(e,"functionName"),i=_o(a,"prefix")||"",u=_o(a,"URI"),s=Ho(a);if(null===u&&!(u=""===i?null===t.v?"http://www.w3.org/2005/xpath-functions":t.v:t.aa(i))&&i)throw Co(i);if(vh.includes(u))throw Bo();if(a=(i=Lo(e,"annotation").map((function(e){return jo(e,"annotationName")}))).every((function(e){return!_o(e,"URI")&&"private"!==Ho(e)})),i=i.some((function(e){return!_o(e,"URI")&&"updating"===Ho(e)})),!u)throw Eo();var c=Jo(e),l=Lo(jo(e,"paramList"),"param"),f=l.map((function(e){return jo(e,"varName")})),h=l.map((function(e){return Jo(e)}));if(e=jo(e,"functionBody")){if(t.xa(u,s,h.length))throw Error("XQST0049: The function Q{"+u+"}"+s+"#"+h.length+" has already been declared.");if(!o)return;var d=Pu(e[1],{ua:!1,$:!0}),m=new Fo(t),g=f.map((function(e){var n=_o(e,"URI"),r=_o(e,"prefix");return e=Ho(e),r&&null===n&&(n=t.aa(r||"")),Po(m,n,e)}));o=i?{j:h,arity:f.length,callFunction:function(e,t,n){var r=T.apply(3,arguments),o=St(Ct(e,-1,null,ye.empty()),g.reduce((function(e,t,n){return e[t]=ve(r[n]),e}),Object.create(null)));return d.s(o,t)},Eb:!1,I:!0,hb:a,localName:s,namespaceURI:u,i:c}:{j:h,arity:f.length,callFunction:function(e,t,n){var r=T.apply(3,arguments),o=St(Ct(e,-1,null,ye.empty()),g.reduce((function(e,t,n){return e[t]=ve(r[n]),e}),Object.create(null)));return vr(d,o,t)},Eb:!1,I:!1,hb:a,localName:s,namespaceURI:u,i:c},n.push({ca:d,Mb:m}),r.push({arity:f.length,ca:d,Ib:o,localName:s,namespaceURI:u,hb:a})}else{if(i)throw Error("Updating external function declarations are not supported");o={j:h,arity:f.length,callFunction:function(e,t,n){var r=T.apply(3,arguments),o=n.xa(u,s,f.length,!0);if(!o)throw Error("XPST0017: Function Q{"+u+"}"+s+" with arity of "+f.length+" not registered. "+ho(s));if(o.i.type!==c.type||o.j.some((function(e,t){return e.type!==h[t].type})))throw Error("External function declaration types do not match actual function");return o.callFunction.apply(o,[e,t,n].concat(p(r)))},Eb:!0,I:!1,localName:s,namespaceURI:u,hb:a,i:c}}Ro(t,u,s,f.length,o)}function Ah(e,t,n,r){var o=[],a=[];Lo(e,"*").forEach((function(e){switch(e[0]){case"moduleImport":case"namespaceDecl":case"defaultNamespaceDecl":case"functionDecl":case"varDecl":break;default:throw Error("Not implemented: only module imports, namespace declarations, and function declarations are implemented in XQuery modules")}}));var i=new Set;Lo(e,"moduleImport").forEach((function(e){var n=Ho(jo(e,"namespacePrefix"));if(e=Ho(jo(e,"targetNamespace")),i.has(e))throw Error('XQST0047: The namespace "'+e+'" is imported more than once.');i.add(e),Go(t,n,e)})),Lo(e,"namespaceDecl").forEach((function(e){var n=Ho(jo(e,"prefix"));if(e=Ho(jo(e,"uri")),"xml"===n||"xmlns"===n)throw No();if("http://www.w3.org/XML/1998/namespace"===e||"http://www.w3.org/2000/xmlns/"===e)throw No();Go(t,n,e)}));for(var u=null,s=null,l=c(Lo(e,"defaultNamespaceDecl")),p=l.next();!p.done;p=l.next()){var f=p.value;if(p=Ho(jo(f,"defaultNamespaceCategory")),!(f=Ho(jo(f,"uri"))))throw Eo();if("http://www.w3.org/XML/1998/namespace"===f||"http://www.w3.org/2000/xmlns/"===f)throw No();if("function"===p){if(u)throw To();u=f}else if("element"===p){if(s)throw To();s=f}}u&&(t.v=u),s&&Go(t,"",s),Lo(e,"functionDecl").forEach((function(e){wh(e,t,o,a,n)}));var h=[];return Lo(e,"varDecl").forEach((function(e){var r=Yo(jo(e,"varName")),a=r.namespaceURI;if(null===a&&!(a=t.aa(r.prefix))&&r.prefix)throw Co(r.prefix);if(vh.includes(a))throw Bo();var i,u,s=jo(e,"external");if(e=jo(e,"varValue"),null!==s?null!==(s=jo(s,"varValue"))&&(i=jo(s,"*")):null!==e&&(i=jo(e,"*")),h.some((function(e){return e.namespaceURI===a&&e.localName===r.localName})))throw Error("XQST0049: The variable "+(a?"Q{"+a+"}":"")+r.localName+" has already been declared.");if(Po(t,a||"",r.localName),n&&(i&&(u=Pu(i,{ua:!1,$:!0})),i&&!function(e,t,n){return(e=e.Ia[So(t,n)])?e:null}(t,a||"",r.localName))){var c=null;Mo(t,a,r.localName,(function(e,t){return c?c():(c=ve(vr(u,e,t)))()})),o.push({ca:u,Mb:t}),h.push({ca:u,localName:r.localName,namespaceURI:a})}})),a.forEach((function(e){if(!e.Ib.I&&e.ca.I)throw ir("The function Q{"+e.namespaceURI+"}"+e.localName+" is updating but the %updating annotation is missing.")})),{Ma:a.map((function(e){return e.Ib})),Va:h,source:r,ra:function(e){i.forEach((function(e){Lu(t,e)})),o.forEach((function(t){var n=t.ca,r=t.Mb;i.forEach((function(e){Lu(r,e)})),e.Ma.forEach((function(e){r.xa(e.namespaceURI,e.localName,e.arity,!0)||e.hb&&Ro(r,e.namespaceURI,e.localName,e.arity,e)})),e.Va.forEach((function(e){r.ib(e.namespaceURI,e.localName)||Po(r,e.namespaceURI,e.localName)})),n.v(r)}))}}}function xh(e,t,n,r,o,a,i){var u=t.$?"XQuery":"XPath";return null!==(n=t.La?null:function(e,t,n,r,o,a,i,u){return(e=Mu.get(e))&&(t=e[t+(a?"_DEBUG":"")])&&(t=t.find((function(e){return e.o===i&&e.B.every((function(e){return n(e.prefix)===e.namespaceURI}))&&e.l.every((function(e){return void 0!==r[e.name]}))&&e.v.every((function(e){return o[e.prefix]===e.namespaceURI}))&&e.s.every((function(e){var t=u(e.nc,e.arity);return t&&t.namespaceURI===e.Lb.namespaceURI&&t.localName===e.Lb.localName}))})))?{ca:t.h,rc:!1}:null}(e,u,n,r,o,t.debug,a,i))?{state:n.rc?1:2,ca:n.ca}:{state:0,hc:"string"==typeof e?yh(e,t):Hu(e)}}function bh(e,t,n,r,o,a,i){var u=new wo(n,r,a,i),s=new Fo(u);switch(0<Object.keys(o).length&&Yu(),Object.keys(o).forEach((function(e){var t=o[e];Lu(s,t),Go(s,e,t)})),"string"==typeof e&&(e=Ju(e)),(n=xh(e,t,n,r,o,a,i)).state){case 2:return{ia:s,ca:n.ca};case 1:return n.ca.v(s),ju(e,t.$?"XQuery":"XPath",u,o,n.ca,t.debug,a),{ia:s,ca:n.ca};case 0:return(n=function(e,t,n,r){var o=jo(e,"mainModule");if(!o)throw Error("Can not execute a library module.");var a=jo(o,"prolog");if(a){if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");Yu(),(r=Ah(a,n,!0,r)).ra(r)}return sa(e,new ga(n)),Fu(e=Xo(o,["queryBody","*"]),t)}(n.hc,t,s,e)).v(s),t.La||ju(e,t.$?"XQuery":"XPath",u,o,n,t.debug,a),{ia:s,ca:n}}}function Bh(e,t,n){if(1!==t.node.nodeType&&9!==t.node.nodeType)return[];var r=De(e,t).reduce((function(t,r){for(var o=(r=c(Bh(e,r,n))).next();!o.done;o=r.next())t.push(o.value);return t}),[]);return n(t)&&r.unshift(t),r}function Eh(e,t,n,r,o){if(!(e=o.first()))throw Dt("The context is absent, it needs to be present to use id function.");if(!te(e.type,53))throw Rt("The context item is not a node, it needs to be node to use id function.");var a=t.h,i=r.O().reduce((function(e,t){return t.value.split(/\s+/).forEach((function(t){e[t]=!0})),e}),Object.create(null));for(t=e.value;9!==t.node.nodeType;)if(null===(t=Ue(a,t)))throw Error("FODC0001: the root node of the target node is not a document node.");return t=Bh(a,t,(function(e){return!(1!==e.node.nodeType||!(e=Oe(a,e,"id"))||!i[e]||(i[e]=!1,0))})),ye.create(t.map((function(e){return Le(e)})))}function Th(e,t,n,r,o){if(!(e=o.first()))throw Dt("The context is absent, it needs to be present to use idref function.");if(!te(e.type,53))throw Rt("The context item is not a node, it needs to be node to use idref function.");var a=t.h,i=r.O().reduce((function(e,t){return e[t.value]=!0,e}),Object.create(null));for(t=e.value;9!==t.node.nodeType;)if(null===(t=Ue(a,t)))throw Error("FODC0001: the root node of the context node is not a document node.");return t=Bh(a,t,(function(e){return 1===e.node.nodeType&&!!(e=Oe(a,e,"idref"))&&e.split(/\s+/).some((function(e){return i[e]}))})),ye.create(t.map((function(e){return Le(e)})))}function Nh(e){switch(typeof e){case"object":return Array.isArray(e)?ye.m(new _e(e.map((function(e){return ve(Nh(e))})))):null===e?ye.empty():ye.m(new Qe(Object.keys(e).map((function(t){return{key:Q(t,1),value:ve(Nh(e[t]))}}))));case"number":return ye.m(Q(e,3));case"string":return ye.m(Q(e,1));case"boolean":return e?ye.ba():ye.W();default:throw Error("Unexpected type in JSON parse")}}function Ih(e,t,n,r,o){var a=(e=qe(0,0,0,o,ye.m(Q("duplicates",1)))).G()?"use-first":e.first().value;return r.M((function(e){return ye.m(new Qe(e.reduce((function(e,t){return t.h.forEach((function(t){var n=e.findIndex((function(e){return Je(e.key,t.key)}));if(0<=n)switch(a){case"reject":throw Error("FOJS0003: Duplicate encountered when merging maps.");case"use-last":return void e.splice(n,1,t);case"combine":return void e.splice(n,1,{key:t.key,value:ve(ye.create(e[n].value().O().concat(t.value().O())))});default:return}e.push(t)})),e}),[])))}))}function Ch(e,t,n){var r=1,o=e.value;e=e.Qa(!0);var a=null,i=Math.max(t-1,0);return-1!==e&&(a=Math.max(0,(null===n?e:Math.max(0,Math.min(e,n+(t-1))))-i)),ye.create({next:function(e){for(;r<t;)o.next(e),r++;return null!==n&&r>=t+n?z:(e=o.next(e),r++,e)}},a)}function Sh(e){return e.map((function(e){return te(e.type,19)?rn(e,3):e}))}function kh(e){if((e=Sh(e)).some((function(e){return Number.isNaN(e.value)})))return[Q(NaN,3)];if(!(e=Ei(e)))throw Error("FORG0006: Incompatible types to be converted to a common type");return e}function Fh(e,t,n,r,o,a){return Ye([o,a],(function(e){var t=c(e);if(e=t.next().value,t=t.next().value,1/0===e.value)return ye.empty();if(-1/0===e.value)return t&&1/0===t.value?ye.empty():r;if(t){if(isNaN(t.value))return ye.empty();1/0===t.value&&(t=null)}return isNaN(e.value)?ye.empty():Ch(r,Math.round(e.value),t?Math.round(t.value):null)}))}function Oh(e,t,n,r,o){if(r.G())return o;if(!(e=Ei(e=Sh(r.O()))))throw Error("FORG0006: Incompatible types to be converted to a common type");if(!e.every((function(e){return te(e.type,2)})))throw Error("FORG0006: items passed to fn:sum are not all numeric.");return t=e.reduce((function(e,t){return e+t.value}),0),e.every((function(e){return te(e.type,5)}))?ye.m(Q(t,5)):e.every((function(e){return te(e.type,3)}))?ye.m(Q(t,3)):e.every((function(e){return te(e.type,4)}))?ye.m(Q(t,4)):ye.m(Q(t,6))}var Dh=[].concat(Yr,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"boolean",j:[{type:59,g:2}],i:{type:0,g:3},callFunction:function(e,t,n,r){return r.ha()?ye.ba():ye.W()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"true",j:[],i:{type:0,g:3},callFunction:function(){return ye.ba()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"not",j:[{type:59,g:2}],i:{type:0,g:3},callFunction:function(e,t,n,r){return!1===r.ha()?ye.ba():ye.W()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"false",j:[],i:{type:0,g:3},callFunction:function(){return ye.W()}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"last",j:[],i:{type:5,g:3},callFunction:function(e){if(null===e.N)throw Dt("The fn:last() function depends on dynamic context, which is absent.");var t=!1;return ye.create({next:function(){if(t)return z;var n=e.Da.Qa();return t=!0,Z(Q(n,5))}},1)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"position",j:[],i:{type:5,g:3},callFunction:function(e){if(null===e.N)throw Dt("The fn:position() function depends on dynamic context, which is absent.");return ye.m(Q(e.Ka+1,5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-dateTime",j:[],i:{type:10,g:3},callFunction:function(e){return ye.m(Q(Tt(e),10))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-date",j:[],i:{type:7,g:3},callFunction:function(e){return ye.m(Q(ct(Tt(e),7),7))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-time",j:[],i:{type:8,g:3},callFunction:function(e){return ye.m(Q(ct(Tt(e),8),8))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"implicit-timezone",j:[],i:{type:17,g:3},callFunction:function(e){return ye.m(Q(Nt(e),17))}}],qr,eo,ao,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"years-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r){return r.G()?r:ye.m(Q(r.first().value.gb(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"months-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r){return r.G()?r:ye.m(Q(r.first().value.cb(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"days-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r){return r.G()?r:ye.m(Q(r.first().value.bb(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r){return r.G()?r:ye.m(Q(r.first().value.getHours(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r){return r.G()?r:ye.m(Q(r.first().value.getMinutes(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-duration",j:[{type:18,g:0}],i:{type:4,g:0},callFunction:function(e,t,n,r){return r.G()?r:ye.m(Q(r.first().value.getSeconds(),4))}}],uo,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"id",j:[{type:1,g:2},{type:53,g:3}],i:{type:54,g:2},callFunction:Eh},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"id",j:[{type:1,g:2}],i:{type:54,g:2},callFunction:function(e,t,n,r){return Eh(e,t,0,r,ye.m(e.N))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"idref",j:[{type:1,g:2},{type:53,g:3}],i:{type:53,g:2},callFunction:Th},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"idref",j:[{type:1,g:2}],i:{type:53,g:2},callFunction:function(e,t,n,r){return Th(e,t,0,r,ye.m(e.N))}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"parse-json",j:[{type:1,g:3}],i:{type:59,g:0},callFunction:function(e,t,n,r){try{var o=JSON.parse(r.first().value)}catch(e){throw Error("FOJS0001: parsed JSON string contains illegal JSON.")}return Nh(o)}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"contains",j:[{type:61,g:3},{type:46,g:3}],i:{type:0,g:3},callFunction:function(e,t,n,r,o){return Ye([r,o],(function(e){var t=(e=c(e)).next().value,n=e.next().value;return t.h.some((function(e){return Je(e.key,n)}))?ye.ba():ye.W()}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"entry",j:[{type:46,g:3},{type:59,g:2}],i:{type:61,g:3},callFunction:function(e,t,n,r,o){return r.map((function(e){return new Qe([{key:e,value:ve(o)}])}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"for-each",j:[{type:61,g:3},{type:59,g:2}],i:{type:59,g:2},callFunction:function(e,t,n,r,o){return Ye([r,o],(function(r){var o=(r=c(r)).next().value,a=r.next().value;return Ft(o.h.map((function(r){return a.value.call(void 0,e,t,n,ye.m(r.key),r.value())})))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"get",j:[{type:61,g:3},{type:46,g:3}],i:{type:59,g:2},callFunction:qe},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"keys",j:[{type:61,g:3}],i:{type:46,g:2},callFunction:function(e,t,n,r){return Ye([r],(function(e){return e=c(e).next().value,ye.create(e.h.map((function(e){return e.key})))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"merge",j:[{type:61,g:2},{type:61,g:3}],i:{type:61,g:3},callFunction:Ih},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"merge",j:[{type:61,g:2}],i:{type:61,g:3},callFunction:function(e,t,n,r){return Ih(e,0,0,r,ye.m(new Qe([{key:Q("duplicates",1),value:function(){return ye.m(Q("use-first",1))}}])))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"put",j:[{type:61,g:3},{type:46,g:3},{type:59,g:2}],i:{type:61,g:3},callFunction:function(e,t,n,r,o,a){return Ye([r,o],(function(e){var t=(e=c(e)).next().value,n=e.next().value;return e=t.h.concat(),0<=(t=e.findIndex((function(e){return Je(e.key,n)})))?e.splice(t,1,{key:n,value:ve(a)}):e.push({key:n,value:ve(a)}),ye.m(new Qe(e))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"remove",j:[{type:61,g:3},{type:46,g:2}],i:{type:61,g:3},callFunction:function(e,t,n,r,o){return Ye([r],(function(e){var t=c(e).next().value.h.concat();return o.M((function(e){return e.forEach((function(e){var n=t.findIndex((function(t){return Je(t.key,e)}));0<=n&&t.splice(n,1)})),ye.m(new Qe(t))}))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"size",j:[{type:61,g:3}],i:{type:5,g:3},callFunction:function(e,t,n,r){return r.map((function(e){return Q(e.h.length,5)}))}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"pi",j:[],i:{type:3,g:3},callFunction:function(){return ye.m(Q(Math.PI,3))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"exp",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return Q(Math.pow(Math.E,e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"exp10",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return Q(Math.pow(10,e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"log",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return Q(Math.log(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"log10",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return Q(Math.log10(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"pow",j:[{type:3,g:0},{type:2,g:3}],i:{type:3,g:0},callFunction:function(e,t,n,r,o){return o.M((function(e){var t=c(e).next().value;return r.map((function(e){return 1!==Math.abs(e.value)||Number.isFinite(t.value)?Q(Math.pow(e.value,t.value),3):Q(1,3)}))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"sqrt",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return Q(Math.sqrt(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"sin",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return Q(Math.sin(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"cos",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return Q(Math.cos(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"tan",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return Q(Math.tan(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"asin",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return Q(Math.asin(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"acos",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return Q(Math.acos(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"atan",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return Q(Math.atan(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"atan2",j:[{type:3,g:0},{type:3,g:3}],i:{type:3,g:0},callFunction:function(e,t,n,r,o){return o.M((function(e){var t=c(e).next().value;return r.map((function(e){return Q(Math.atan2(e.value,t.value),3)}))}))}}],$n,Cn,[{namespaceURI:"http://fontoxpath/operators",localName:"to",j:[{type:5,g:0},{type:5,g:0}],i:{type:5,g:2},callFunction:function(e,t,n,r,o){if(e=r.first(),o=o.first(),null===e||null===o)return ye.empty();var a=e.value;return o=o.value,a>o?ye.empty():ye.create({next:function(){return Z(Q(a++,5))}},o-a+1)}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"QName",j:[{type:1,g:0},{type:1,g:3}],i:{type:23,g:3},callFunction:function(e,t,n,r,o){return Ye([r,o],(function(e){var t=c(e);if(e=t.next().value,!_t(t=t.next().value.value,23))throw Error("FOCA0002: The provided QName is invalid.");if(null===(e=e&&e.value||null)&&t.includes(":"))throw Error("FOCA0002: The URI of a QName may not be empty if a prefix is provided.");if(r.G())return ye.m(Q(new we("",null,t),23));if(!t.includes(":"))return ye.m(Q(new we("",e,t),23));var n=c(t.split(":"));return t=n.next().value,n=n.next().value,ye.m(Q(new we(t,e,n),23))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"prefix-from-QName",j:[{type:23,g:0}],i:{type:24,g:0},callFunction:function(e,t,n,r){return Ye([r],(function(e){return null===(e=c(e).next().value)?ye.empty():(e=e.value).prefix?ye.m(Q(e.prefix,24)):ye.empty()}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"local-name-from-QName",j:[{type:23,g:0}],i:{type:24,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return Q(e.value.localName,24)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"namespace-uri-from-QName",j:[{type:23,g:0}],i:{type:20,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return Q(e.value.namespaceURI||"",20)}))}}],[{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return r.Z({empty:function(){return ye.ba()},multiple:function(){return ye.W()},m:function(){return ye.W()}})},localName:"empty",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return r.Z({empty:function(){return ye.W()},multiple:function(){return ye.ba()},m:function(){return ye.ba()}})},localName:"exists",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return Ch(r,1,1)},localName:"head",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:0}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return Ch(r,2,null)},localName:"tail",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:5,g:3},{type:59,g:2}],callFunction:function(e,t,n,r,o,a){return r.G()?a:a.G()?r:(e=r.O(),0>(o=o.first().value-1)?o=0:o>e.length&&(o=e.length),t=e.slice(o),ye.create(e.slice(0,o).concat(a.O(),t)))},localName:"insert-before",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:5,g:3}],callFunction:function(e,t,n,r,o){return e=o.first().value,!(r=r.O()).length||1>e||e>r.length||r.splice(e-1,1),ye.create(r)},localName:"remove",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return r.M((function(e){return ye.create(e.reverse())}))},localName:"reverse",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:3,g:3}],callFunction:function(e,t,n,r,o){return Fh(0,0,0,r,o,ye.empty())},localName:"subsequence",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:3,g:3},{type:3,g:3}],callFunction:Fh,localName:"subsequence",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return r},localName:"unordered",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:46,g:2}],callFunction:function(e,t,n,r){var o=Ut(r,t).O();return ye.create(o).filter((function(e,t){return o.slice(0,t).every((function(t){return!er(e,t)}))}))},localName:"distinct-values",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{j:[{type:46,g:2},{type:1,g:3}],callFunction:function(){throw Error("FOCH0002: No collations are supported")},localName:"distinct-values",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{j:[{type:46,g:2},{type:46,g:3}],callFunction:function(e,t,n,r,o){return o.M((function(n){var o=c(n).next().value;return Ut(r,t).map((function(t,n){return ai("eqOp",t.type,o.type)(t,o,e)?Q(n+1,5):Q(-1,5)})).filter((function(e){return-1!==e.value}))}))},localName:"index-of",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:2}},{j:[{type:46,g:2},{type:46,g:3},{type:1,g:3}],callFunction:function(){throw Error("FOCH0002: No collations are supported")},localName:"index-of",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:2}},{j:[{type:59,g:2},{type:59,g:2}],callFunction:function(e,t,n,r,o){var a=!1,i=rr(e,t,n,r,o);return ye.create({next:function(){if(a)return z;var e=i.next(0);return e.done?e:(a=!0,Z(Q(e.value,0)))}})},localName:"deep-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:59,g:2},{type:59,g:2},{type:1,g:3}],callFunction:function(){throw Error("FOCH0002: No collations are supported")},localName:"deep-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){var o=!1;return ye.create({next:function(){if(o)return z;var e=r.Qa();return o=!0,Z(Q(e,5))}})},localName:"count",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:3}},{j:[{type:46,g:2}],callFunction:function(e,t,n,r){if(r.G())return r;if(!(e=Ei(e=Sh(r.O()))))throw Error("FORG0006: Incompatible types to be converted to a common type");if(!e.every((function(e){return te(e.type,2)})))throw Error("FORG0006: items passed to fn:avg are not all numeric.");return t=e.reduce((function(e,t){return e+t.value}),0)/e.length,e.every((function(e){return te(e.type,5)||te(e.type,3)}))?ye.m(Q(t,3)):e.every((function(e){return te(e.type,4)}))?ye.m(Q(t,4)):ye.m(Q(t,6))},localName:"avg",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2}],callFunction:function(e,t,n,r){return r.G()?r:(e=kh(r.O()),ye.m(e.reduce((function(e,t){return e.value<t.value?t:e}))))},localName:"max",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2},{type:1,g:3}],callFunction:function(){throw Error("FOCH0002: No collations are supported")},localName:"max",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2}],callFunction:function(e,t,n,r){return r.G()?r:(e=kh(r.O()),ye.m(e.reduce((function(e,t){return e.value>t.value?t:e}))))},localName:"min",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2},{type:1,g:3}],callFunction:function(){throw Error("FOCH0002: No collations are supported")},localName:"min",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2}],callFunction:function(e,t,n,r){return Oh(e,t,0,r,ye.m(Q(0,5)))},localName:"sum",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:3}},{j:[{type:46,g:2},{type:46,g:0}],callFunction:Oh,localName:"sum",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){if(!r.G()&&!r.wa())throw Error("FORG0003: The argument passed to fn:zero-or-one contained more than one item.");return r},localName:"zero-or-one",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:0}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){if(r.G())throw Error("FORG0004: The argument passed to fn:one-or-more was empty.");return r},localName:"one-or-more",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:1}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){if(!r.wa())throw Error("FORG0005: The argument passed to fn:exactly-one is empty or contained more than one item.");return r},localName:"exactly-one",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:3}},{j:[{type:59,g:2},{type:60,g:3}],callFunction:function(e,t,n,r,o){if(r.G())return r;var a=o.first(),i=a.o;if(1!==i.length)throw Error("XPTY0004: signature of function passed to fn:filter is incompatible.");return r.filter((function(r){if(r=wn(i[0],ye.m(r),t,"fn:filter",!1),!(r=a.value.call(void 0,e,t,n,r)).wa()||!te(r.first().type,0))throw Error("XPTY0004: signature of function passed to fn:filter is incompatible.");return r.first().value}))},localName:"filter",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:60,g:3}],callFunction:function(e,t,n,r,o){if(r.G())return r;var a=o.first(),i=a.o;if(1!==i.length)throw Error("XPTY0004: signature of function passed to fn:for-each is incompatible.");var u,s=r.value;return ye.create({next:function(r){for(;;){if(!u){var o=s.next(0);if(o.done)return o;o=wn(i[0],ye.m(o.value),t,"fn:for-each",!1),u=a.value.call(void 0,e,t,n,o).value}if(!(o=u.next(r)).done)return o;u=null}}})},localName:"for-each",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:59,g:2},{type:60,g:3}],callFunction:function(e,t,n,r,o,a){if(r.G())return r;var i=a.first(),u=i.o;if(2!==u.length)throw Error("XPTY0004: signature of function passed to fn:fold-left is incompatible.");return r.M((function(r){return r.reduce((function(r,o){return r=wn(u[0],r,t,"fn:fold-left",!1),o=wn(u[1],ye.m(o),t,"fn:fold-left",!1),i.value.call(void 0,e,t,n,r,o)}),o)}))},localName:"fold-left",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:59,g:2},{type:60,g:3}],callFunction:function(e,t,n,r,o,a){if(r.G())return r;var i=a.first(),u=i.o;if(2!==u.length)throw Error("XPTY0004: signature of function passed to fn:fold-right is incompatible.");return r.M((function(r){return r.reduceRight((function(r,o){return r=wn(u[0],r,t,"fn:fold-right",!1),o=wn(u[1],ye.m(o),t,"fn:fold-right",!1),i.value.call(void 0,e,t,n,o,r)}),o)}))},localName:"fold-right",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){if(!t.v)throw Error("serialize() called but no xmlSerializer set in execution parameters.");if(!(e=r.O()).every((function(e){return te(e.type,53)})))throw Error("Expected argument to fn:serialize to resolve to a sequence of Nodes.");return ye.m(Q(e.map((function(e){return t.v.serializeToString(ro(e.value,t,!1))})).join(""),1))},localName:"serialize",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}}],Hn,[{j:[{type:59,g:3},{type:61,g:3}],callFunction:function(e,t,n,r,o){var a,i;return ye.create({next:function(){if(!a){var e=function(e,t,n,r){e=e.first();var o=t.first().h.reduce((function(e,t){return e[t.key.value]=ve(t.value()),e}),Object.create(null));t=o["."]?o["."]():ye.empty(),delete o["."];try{if(te(e.type,1))var a=e.value;else{if(!te(e.type,54))throw Rt("Unable to convert selector argument of type "+ie[e.type]+" to either an "+ie[1]+" or an "+ie[54]+" representing an XQueryX program while calling 'fontoxpath:evaluate'");a=e.value.node}var i=bh(a,{ua:!1,$:!0,debug:r.debug,La:r.La},(function(e){return n.aa(e)}),Object.keys(o).reduce((function(e,t){return e[t]=t,e}),{}),{},"http://www.w3.org/2005/xpath-functions",(function(e,t){return n.Ua(e,t)})),u=i.ca,s=i.ia,c=!t.G(),l=new Bt({N:c?t.first():null,Ka:c?0:-1,Da:t,Aa:Object.keys(o).reduce((function(e,t){return e[s.ib(null,t)]=o[t],e}),Object.create(null))});return{sc:u.h(l,r).value,pc:e}}catch(t){lo(e.value,t)}}(r,o,n,t);a=e.sc,i=e.pc}try{return a.next(0)}catch(e){lo(i.value,e)}}})},localName:"evaluate",namespaceURI:"http://fontoxml.com/fontoxpath",i:{type:59,g:2}},{j:[],callFunction:function(){return ye.m(Q("3.29.0",1))},localName:"version",namespaceURI:"http://fontoxml.com/fontoxpath",i:{type:1,g:3}}],[{j:[{type:23,g:3},{type:5,g:3}],callFunction:function(e,t,n,r,o){return Ye([r,o],(function(e){var t=c(e);e=t.next().value,t=t.next().value;var r=n.xa(e.value.namespaceURI,e.value.localName,t.value);return null===r?ye.empty():(e=new Ae({j:r.j,arity:t.value,localName:e.value.localName,namespaceURI:e.value.namespaceURI,i:r.i,value:r.callFunction}),ye.m(e))}))},localName:"function-lookup",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{g:0,type:60}},{j:[{type:60,g:3}],callFunction:function(e,t,n,r){return Ye([r],(function(e){return(e=c(e).next().value).Sa()?ye.empty():ye.m(Q(new we("",e.l,e.B),23))}))},localName:"function-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{j:[{type:60,g:3}],callFunction:function(e,t,n,r){return Ye([r],(function(e){return e=c(e).next().value,ye.m(Q(e.v,5))}))},localName:"function-arity",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:3}}]);function Rh(e){this.h=e}(r=Rh.prototype).createAttributeNS=function(e,t){return this.h.createAttributeNS(e,t)},r.createCDATASection=function(e){return this.h.createCDATASection(e)},r.createComment=function(e){return this.h.createComment(e)},r.createDocument=function(){return this.h.createDocument()},r.createElementNS=function(e,t){return this.h.createElementNS(e,t)},r.createProcessingInstruction=function(e,t){return this.h.createProcessingInstruction(e,t)},r.createTextNode=function(e){return this.h.createTextNode(e)};var Gh=Symbol("IS_XPATH_VALUE_SYMBOL");function Ph(e){return e&&"object"==typeof e&&"lookupNamespaceURI"in e?function(t){return e.lookupNamespaceURI(t||null)}:function(){return null}}function Mh(e){return function(t){var n=t.localName;return t.prefix?null:{namespaceURI:e,localName:n}}}function Uh(e,t,n,r,o,a){if(null==r&&(r=r||{}),o)var i=o.logger||{trace:console.log.bind(console)},u=o.documentWriter,s=o.moduleImports,l=o.namespaceResolver,p=o.functionNameResolver,f=o.nodesFactory,h=o.xmlSerializer;else i={trace:console.log.bind(console)},s={},h=u=f=l=null,p=void 0;var d=new ke(null===n?new Ee:n);n=s||Object.create(null),s=void 0===o.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":o.defaultFunctionNamespaceURI;var m=bh(e,a,l||Ph(t),r,n,s,p||Mh(s));for(e=t?At(0,t):ye.empty(),t=!f&&a.$?new Ar(t):new Rh(f),u=u?new Ie(u):Ne,f=Object.keys(r).reduce((function(e,t){var n=r[t];return e["Q{}"+t+"[0]"]=n&&"object"==typeof n&&Gh in n?function(){return ye.create(n.Hb)}:function(){return At(0,r[t])},e}),Object.create(null)),l={},n=(p=c(Object.keys(m.ia.Ia))).next();!n.done;l={Za:l.Za},n=p.next())l.Za=n.value,f[l.Za]||(f[l.Za]=function(e){return function(){return(0,m.ia.Ia[e.Za])(g,y)}}(l));var g=new Bt({N:e.first(),Ka:0,Da:e,Aa:f}),y=new kt(a.debug,a.La,d,t,u,o.currentContext,new Map,i,h);return{Bb:g,Cb:y,ca:m.ca}}function jh(e,t){var n={},r=0,o=!1,a=null;return{next:function(){if(o)return z;for(var i={};r<e.h.length;){e:{var u=e.h[r].key.value;if(!a){i.pb=e.h[r];var s=i.pb.value().Z({default:function(e){return e},multiple:function(e){return function(){throw Error("Serialization error: The value of an entry in a map is expected to be a single item or an empty sequence. Use arrays when putting multiple values in a map. The value of the key "+e.pb.key.value+" holds multiple items")}}(i)}).first();if(null===s){n[u]=null,r++;break e}a=_h(s,t)}s=a.next(0),a=null,n[u]=s.value,r++}i={pb:i.pb}}return o=!0,Z(n)}}}function Hh(e,t){var n=[],r=0,o=!1,a=null;return{next:function(){if(o)return z;for(;r<e.P.length;){if(!a){var i=e.P[r]().Z({default:function(e){return e},multiple:function(){throw Error("Serialization error: The value of an entry in an array is expected to be a single item or an empty sequence. Use nested arrays when putting multiple values in an array.")}}).first();if(null===i){n[r++]=null;continue}a=_h(i,t)}i=a.next(0),a=null,n[r++]=i.value}return o=!0,Z(n)}}}function _h(e,t){if(te(e.type,61))return jh(e,t);if(te(e.type,62))return Hh(e,t);if(te(e.type,23)){var n=e.value;return{next:function(){return Z("Q{"+(n.namespaceURI||"")+"}"+n.localName)}}}switch(e.type){case 7:case 8:case 9:case 11:case 12:case 13:case 14:case 15:var r=e.value;return{next:function(){return Z(lt(r))}};case 47:case 53:case 54:case 55:case 56:case 57:case 58:var o=e.value;return{next:function(){return Z(ro(o,t,!1))}};default:return{next:function(){return Z(e.value)}}}}Dh.forEach((function(e){go(e.namespaceURI,e.localName,e.j,e.i,e.callFunction)}));var Xh={ANY:0,NUMBER:1,STRING:2,BOOLEAN:3,NODES:7,FIRST_NODE:9,STRINGS:10,MAP:11,ARRAY:12,NUMBERS:13,ALL_RESULTS:14,ASYNC_ITERATOR:99};function Lh(e,t,n,r){switch(n){case 3:return t.ha();case 2:return(t=Ut(t,r).O()).length?t.map((function(e){return rn(e,1).value})).join(" "):"";case 10:return(t=Ut(t,r).O()).length?t.map((function(e){return e.value+""})):[];case 1:return null!==(t=t.first())&&te(t.type,2)?t.value:NaN;case 9:if(null===(t=t.first()))return null;if(!te(t.type,53))throw Error("Expected XPath "+so(e)+" to resolve to Node. Got "+ie[t.type]);return ro(t.value,r,!1);case 7:if(!(t=t.O()).every((function(e){return te(e.type,53)})))throw Error("Expected XPath "+so(e)+" to resolve to a sequence of Nodes.");return t.map((function(e){return ro(e.value,r,!1)}));case 11:if(1!==(t=t.O()).length)throw Error("Expected XPath "+so(e)+" to resolve to a single map.");if(!te((t=t[0]).type,61))throw Error("Expected XPath "+so(e)+" to resolve to a map");return jh(t,r).next(0).value;case 12:if(1!==(t=t.O()).length)throw Error("Expected XPath "+so(e)+" to resolve to a single array.");if(!te((t=t[0]).type,62))throw Error("Expected XPath "+so(e)+" to resolve to an array");return Hh(t,r).next(0).value;case 13:return t.O().map((function(t){if(!te(t.type,2))throw Error("Expected XPath "+so(e)+" to resolve to numbers");return t.value}));case 99:var o=t.value,a=null,i=!1,u=function(){for(;!i;){if(!a){var e=o.next(0);if(e.done){i=!0;break}a=_h(e.value,r)}return e=a.next(0),a=null,e}return Promise.resolve({done:!0,value:null})};return"asyncIterator"in Symbol?((t={})[Symbol.asyncIterator]=function(){return this},t.next=function(){return new Promise((function(e){return e(u())})).catch((function(t){lo(e,t)}))}):t={next:function(){return new Promise((function(e){return e(u())}))}},t;case 14:return t.O().map((function(e){return _h(e,r).next(0).value}));default:return(t=t.O()).every((function(e){return te(e.type,53)&&!te(e.type,47)}))?1===(t=t.map((function(e){return ro(e.value,r,!1)}))).length?t[0]:t:1===t.length?te((t=t[0]).type,62)?Hh(t,r).next(0).value:te(t.type,61)?jh(t,r).next(0).value:Mt(t,r).first().value:Ut(ye.create(t),r).O().map((function(e){return e.value}))}}Xh[Xh.ANY]="ANY",Xh[Xh.NUMBER]="NUMBER",Xh[Xh.STRING]="STRING",Xh[Xh.BOOLEAN]="BOOLEAN",Xh[Xh.NODES]="NODES",Xh[Xh.FIRST_NODE]="FIRST_NODE",Xh[Xh.STRINGS]="STRINGS",Xh[Xh.MAP]="MAP",Xh[Xh.ARRAY]="ARRAY",Xh[Xh.NUMBERS]="NUMBERS",Xh[Xh.ALL_RESULTS]="ALL_RESULTS",Xh[Xh.ASYNC_ITERATOR]="ASYNC_ITERATOR";var Yh=!1,Jh=null,qh={getPerformanceSummary:function(){var e=Jh.getEntriesByType("measure").filter((function(e){return e.name.startsWith("XPath: ")}));return Array.from(e.reduce((function(e,t){var n=t.name.substring(7);return e.has(n)?((n=e.get(n)).times+=1,n.totalDuration+=t.duration):e.set(n,{xpath:n,times:1,totalDuration:t.duration,average:0}),e}),new Map).values()).map((function(e){return e.average=e.totalDuration/e.times,e})).sort((function(e,t){return t.totalDuration-e.totalDuration}))},setPerformanceImplementation:function(e){Jh=e},startProfiling:function(){if(null===Jh)throw Error("Performance API object must be set using `profiler.setPerformanceImplementation` before starting to profile");Jh.clearMarks(),Jh.clearMeasures(),Yh=!0},stopProfiling:function(){Yh=!1}},Qh=0;function Kh(e,t,n,r,o,a){if(o=o||0,!e||"string"!=typeof e&&!("nodeType"in e))throw new TypeError("Failed to execute 'evaluateXPath': xpathExpression must be a string or an element depicting an XQueryX DOM tree.");a=a||{};try{var i=Uh(e,t,n||null,r||{},a,{ua:"XQueryUpdate3.1"===a.language,$:"XQuery3.1"===a.language||"XQueryUpdate3.1"===a.language,debug:!!a.debug,La:!!a.disableCache}),u=i.Bb,s=i.Cb,c=i.ca}catch(t){lo(e,t)}if(c.I)throw Error("XUST0001: Updating expressions should be evaluated as updating expressions");if(3===o&&t&&"object"==typeof t&&"nodeType"in t&&(n=c.B(),t=Be(t),null!==n&&!t.includes(n)))return!1;try{t=e,Yh&&("string"!=typeof t&&(t=so(t)),Jh.mark(t+(0===Qh?"":"@"+Qh)),Qh++);var l=Lh(e,vr(c,u,s),o,s);return o=e,Yh&&("string"!=typeof o&&(o=so(o)),u=o+(0==--Qh?"":"@"+Qh),Jh.measure("XPath: "+o,u),Jh.clearMarks(u)),l}catch(t){lo(e,t)}}Object.assign(Kh,{tc:14,ANY_TYPE:0,Tb:12,Ub:99,BOOLEAN_TYPE:3,Wb:9,Zb:11,ac:7,bc:13,NUMBER_TYPE:1,cc:10,STRING_TYPE:2,uc:"XPath3.1",vc:"XQuery3.1",fc:"XQueryUpdate3.1"});var Wh={};function Vh(e,t,n,r,o){return Kh(e,t,n,r,Kh.Ub,o)}function $h(e,t,n,r){var o={};return o.pendingUpdateList=e.fa.map((function(e){return e.h(r)})),o.xdmValue=Lh(t,ye.create(e.J),n,r),o}function zh(e,t,n){return{code:e,va:t,H:n,isAstAccepted:!0}}function Zh(e){return{isAstAccepted:!1,reason:e}}function ed(e,t){return e.isAstAccepted?t(e):e}function td(e,t){return e.isAstAccepted?t(e):[e,null]}function nd(e,t,n){return ed(e,(function(e){switch(e.va.type){case 0:return e;case 1:return ed(Hd(n,e,"nodes"),(function(e){return ed(Hd(n,t,"contextItem"),(function(t){return zh("(function () {\n\t\t\t\t\t\t\tconst { done, value } = "+e.code+"("+t.code+").next();\n\t\t\t\t\t\t\treturn done ? null : value;\n\t\t\t\t\t\t})()",{type:0},[].concat(p(e.H),p(t.H)))}))}));default:throw Error("invalid generated code type to convert to value: "+e.va.type)}}))}function rd(e,t,n,r){return e=nd(e,n,r),t&&0===t.type&&3===t.g?e:ed(e,(function(e){return zh("!!"+e.code,{type:0},e.H)}))}function od(e,t,n){return t?e.isAstAccepted&&0!==e.va.type?Zh("Atomization only implemented for single value"):te(t.type,1)?e:te(t.type,47)?ed(Hd(n,e,"attr"),(function(e){return zh("("+e.code+" ? domFacade.getData("+e.code+") : null)",{type:0},e.H)})):Zh("Atomization only implemented for string and attribute"):Zh("Can not atomize value if type was not annotated")}function ad(e,t,n,r){return r=od(e=nd(e,n,r),t,r),Lt(t)?ed(r,(function(e){return zh(e.code+" ?? ''",{type:0},e.H)})):r}function id(e,t,n){return ed(Hd(n,e,"node"),(function(e){return 1===e.va.type?e:t&&!te(t.type,53)?Zh("Can not evaluate to node if expression does not result in nodes"):zh("(function () {\n\t\t\t\tif ("+e.code+" !== null && !"+e.code+".nodeType) {\n\t\t\t\t\tthrow new Error('XPDY0050: The result of the expression was not a node');\n\t\t\t\t}\n\t\t\t\treturn "+e.code+";\n\t\t\t})()",{type:0},e.H)}))}function ud(e,t){return ed(e,(function(e){return ed(t,(function(t){if(0!==e.va.type||0!==t.va.type)throw Error("can only use emitAnd with value expressions");return zh(e.code+" && "+t.code,{type:0},[].concat(p(e.H),p(t.H)))}))}))}function sd(e,t,n,r){return(e=Xo(e,[t,"*"]))?r.h(e,n,r):[Zh(t+" expression not found"),null]}Object.assign(Kh,(Wh.ALL_RESULTS_TYPE=14,Wh.ANY_TYPE=0,Wh.ARRAY_TYPE=12,Wh.ASYNC_ITERATOR_TYPE=99,Wh.BOOLEAN_TYPE=3,Wh.FIRST_NODE_TYPE=9,Wh.MAP_TYPE=11,Wh.NODES_TYPE=7,Wh.NUMBERS_TYPE=13,Wh.NUMBER_TYPE=1,Wh.STRINGS_TYPE=10,Wh.STRING_TYPE=2,Wh.XPATH_3_1_LANGUAGE="XPath3.1",Wh.XQUERY_3_1_LANGUAGE="XQuery3.1",Wh.XQUERY_UPDATE_3_1_LANGUAGE="XQueryUpdate3.1",Wh));var cd={},ld=(cd.equalOp="eqOp",cd.notEqualOp="neOp",cd.lessThanOrEqualOp="leOp",cd.lessThanOp="ltOp",cd.greaterThanOrEqualOp="geOp",cd.greaterThanOp="gtOp",cd),pd={},fd=(pd.eqOp="eqOp",pd.neOp="neOp",pd.leOp="geOp",pd.ltOp="gtOp",pd.geOp="leOp",pd.gtOp="ltOp",pd);function hd(e,t,n,r){var o=_o(Xo(e,["firstOperand","*"]),"type"),a=_o(Xo(e,["secondOperand","*"]),"type");if(!o||!a)return Zh("Can not generate code for value compare without both types");var i=[47,1];if(!i.includes(o.type)||!i.includes(a.type))return Zh("Unsupported types in compare: ["+ie[o.type]+", "+ie[a.type]+"]");if(!(i=new Map([["eqOp","==="],["neOp","!=="]])).has(t))return Zh(t+" not yet implemented");var u=i.get(t);return i=(t=c(sd(e,"firstOperand",n,r))).next().value,t.next(),t=od(t=nd(i,n,r),o,r),ed(Hd(r,t,"first"),(function(t){var i=c(sd(e,"secondOperand",n,r)),s=i.next().value;return i.next(),i=od(i=nd(s,n,r),a,r),ed(Hd(r,i,"second"),(function(e){var n=[];return Lt(o)&&n.push(t.code+" === null"),Lt(a)&&n.push(e.code+" === null"),zh("("+(n.length?n.join(" || ")+" ? null : ":"")+t.code+" "+u+" "+e.code+")",{type:0},[].concat(p(t.H),p(e.H)))}))}))}function dd(e,t,n,r,o,a){var i=_o(Xo(e,[t,"*"]),"type"),u=_o(Xo(e,[n,"*"]),"type");if(!i||!u)return Zh("Can not generate code for general compare without both types");var s=[47,1];if(!s.includes(i.type)||!s.includes(u.type))return Zh("Unsupported types in compare: ["+ie[i.type]+", "+ie[u.type]+"]");if(!(s=new Map([["eqOp","==="],["neOp","!=="]])).has(r))return Zh(r+" not yet implemented");var l=s.get(r);return r=(t=c(sd(e,t,o,a))).next().value,t.next(),i=od(t=nd(r,o,a),i,a),ed(Hd(a,i,"single"),(function(t){var r=c(sd(e,n,o,a)),i=r.next().value;return r.next(),ed(Hd(a,i,"multiple"),(function(e){if(1!==e.va.type)return Zh("can only generate general compare for a single value and a generator");var n=_d(a,Xd(a,"n")),r=od(n,u,a);return ed(o,(function(o){return ed(r,(function(r){return zh("(function () {\n\t\t\t\t\t\t\t\t\tfor (const "+n.code+" of "+e.code+"("+o.code+")) {\n\t\t\t\t\t\t\t\t\t\t"+r.H.join("\n")+"\n\t\t\t\t\t\t\t\t\t\tif ("+r.code+" "+l+" "+t.code+") {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t})()",{type:0},[].concat(p(t.H),p(n.H),p(o.H),p(e.H)))}))}))}))}))}function md(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}var gd={"false#0":function(){return zh("false",{type:0},[])},"local-name#0":Bd,"local-name#1":Bd,"name#0":bd,"name#1":bd,"not#1":function(e,t,n){var r=Xo(e,["arguments","*"]);e=_o(r,"type");var o=(r=c(n.h(r,t,n))).next().value;return r.next(),ed(t=rd(o,e,t,n),(function(e){return zh("!"+e.code,{type:0},e.H)}))},"true#0":function(){return zh("true",{type:0},[])}},yd={},vd=(yd["http://fontoxml.com/fontoxpath"]=["version#0"],yd[""]=["root#1","path#1"],yd);function wd(e,t,n,r){if(e.length!==t.length||t.some((function(e){return 4===e})))return Zh("Not supported: variadic function or mismatch in argument count");if(0===e.length)return zh("",{type:0},[]);var o=c(e);e=o.next().value;var a=l(o);o=(t=c(t)).next().value;var i=l(t);return e=Hd(r,function(e,t,n,r){var o=c(r.h(e,n,r)),a=o.next().value;if(o.next(),e=_o(e,"type"),!t||2===t.g||1===t.g)return Zh("Not supported: sequence arguments with multiple items");if(te(t.type,53))return id(t=nd(a,n,r),e,r);switch(t.type){case 59:return nd(a,n,r);case 0:return rd(a,e,n,r);case 1:return ad(a,e,n,r)}return Zh("Argument types not supported: "+(e?ie[e.type]:"unknown")+" -> "+ie[t.type])}(e,o,n,r),"arg"),0===a.length?e:ed(e,(function(e){return ed(wd(a,i,n,r),(function(t){return zh(e.code+", "+t.code,{type:0},[].concat(p(e.H),p(t.H)))}))}))}function Ad(e,t,n){var r=Yo(jo(e,"functionName")),o=r.localName,a=r.namespaceURI,i=(r=Lo(jo(e,"arguments"),"*")).length,u=o+"#"+i,s=a===n.B;if(s){var c=gd[u];if(void 0!==c)return c(e,t,n)}return(e=vd[s?"":a])&&!e.includes(u)?Zh("Not supported: built-in function not on allow list: "+u):(e=mo(a,o,i))?e.I?Zh("Not supported: updating functions"):function(e,t){return ed(e,(function(e){return t&&2!==t.g&&1!==t.g&&([0,1].includes(t.type)||te(t.type,53))?e:Zh("Function return type "+ie[t.type]+" not supported")}))}(t=ed(t=wd(r,e.j,t,n),(function(e){return zh("runtimeLib.callFunction(domFacade, "+md(a)+", "+md(o)+", ["+e.code+"], options)",{type:0},e.H)})),e.i):Zh("Unknown function / arity: "+u)}function xd(e,t,n,r){if((e=Xo(e,["arguments","*"]))&&"contextItemExpr"!==e[0]){var o=_o(e,"type");if(!o||!te(o.type,53))return Zh("name function only implemented if arg is a node");o=(e=c(n.h(e,t,n))).next().value,e.next(),e=o}else e=function(e,t){return ed(Hd(t,e,"contextItem"),(function(e){return zh(e.code,{type:0},[].concat(p(e.H),["if ("+e.code+" === undefined || "+e.code+" === null) {\n\t\t\t\t\tthrow errXPDY0002('The function which was called depends on dynamic context, which is absent.');\n\t\t\t\t}"]))}))}(t,n);return ed(Hd(n,t=nd(e,t,n),"arg"),(function(e){return zh("("+e.code+" ? "+r(e.code)+" : '')",{type:0},e.H)}))}function bd(e,t,n){return xd(e,t,n,(function(e){return"((("+e+".prefix || '').length !== 0 ? "+e+".prefix + ':' : '')\n\t\t+ ("+e+".localName || "+e+".target || ''))"}))}function Bd(e,t,n){return xd(e,t,n,(function(e){return"("+e+".localName || "+e+".target || '')"}))}function Ed(e,t,n,r){var o=c(sd(e,"firstOperand",n,r)),a=o.next().value;o=o.next().value;var i=_o(Xo(e,["firstOperand","*"]),"type");a=rd(a,i,n,r);var u=(i=c(sd(e,"secondOperand",n,r))).next().value;return i=i.next().value,[a=ed(a,(function(o){var a=_o(Xo(e,["secondOperand","*"]),"type");return ed(a=rd(u,a,n,r),(function(e){return zh("("+o.code+" "+t+" "+e.code+")",{type:0},[].concat(p(o.H),p(e.H)))}))})),o="&&"===t?Ea(o,i):o===i?o:null]}function Td(e,t,n){return ed(e,(function(e){return ed(t,(function(t){return ed(n,(function(n){return zh("for ("+e.code+") {\n\t\t\t\t\t\t"+t.H.join("\n")+"\n\t\t\t\t\t\tif (!("+t.code+")) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t"+n.H.join("\n")+"\n\t\t\t\t\t\t"+n.code+"\n\t\t\t\t\t}",{type:2},e.H)}))}))}))}function Nd(e,t,n,r,o){var a=t?', "'+t+'"':"";return Td(t=ed(r,(function(e){return ed(o,(function(t){return zh("let "+e.code+" = domFacade.getFirstChild("+t.code+a+");\n\t\t\t\t\t\t\t"+e.code+";\n\t\t\t\t\t\t\t"+e.code+" = domFacade.getNextSibling("+e.code+a+")",{type:2},[].concat(p(e.H),p(t.H)))}))})),e,n)}function Id(e,t,n,r,o){var a=Ea(t,"type-2"),i=ed(o,(function(e){return zh("("+e.code+" && "+e.code+".nodeType === /*ELEMENT_NODE*/ 1 ? domFacade.getAllAttributes("+e.code+(a?', "'+a+'"':"")+") : [])",{type:0},e.H)}));return Td(t=ed(r,(function(e){return ed(i,(function(t){return zh("const "+e.code+" of "+t.code,{type:2},[].concat(p(e.H),p(t.H)))}))})),e,n)}function Cd(e,t,n,r,o){var a=t?', "'+t+'"':"";return Sd(r,t=ed(o,(function(e){return zh("domFacade.getParentNode("+e.code+a+")",{type:0},e.H)})),e,n)}function Sd(e,t,n,r){var o=ud(e,n);return ed(e,(function(e){return ed(t,(function(t){return ed(o,(function(n){return ed(r,(function(r){return zh("const "+e.code+" = "+t.code+";\n\t\t\t\t\t\t"+n.H.join("\n")+"\n\t\t\t\t\t\tif ("+n.code+") {\n\t\t\t\t\t\t\t"+r.H.join("\n")+"\n\t\t\t\t\t\t\t"+r.code+"\n\t\t\t\t\t\t}",{type:2},[].concat(p(e.H),p(t.H)))}))}))}))}))}var kd={dc:"textTest",Vb:"elementTest",$b:"nameTest",ec:"Wildcard",Sb:"anyKindTest"},Fd=Object.values(kd);function Od(e,t,n,r){!function(e,t){if(null===e.namespaceURI&&"*"!==e.prefix){if(!(t=t.aa(e.prefix||"")||null)&&e.prefix)throw Error("XPST0081: The prefix "+e.prefix+" could not be resolved.");e.namespaceURI=t}}(e,r);var o=e.prefix,a=e.namespaceURI,i=e.localName;return td(n,(function(e){var n=zh(t?e.code+".nodeType\n\t\t\t\t\t\t&& ("+e.code+".nodeType === /*ELEMENT_NODE*/ 1\n\t\t\t\t\t\t|| "+e.code+".nodeType === /*ATTRIBUTE_NODE*/ 2)":e.code+".nodeType\n\t\t\t\t\t\t&& "+e.code+".nodeType === /*ELEMENT_NODE*/ 1",{type:0},[]);if("*"===o)return"*"===i?[n,t?"type-1-or-type-2":"type-1"]:[ud(n,zh(e.code+".localName === "+md(i),{type:0},[])),"name-"+i];n="*"===i?n:ud(n,zh(e.code+".localName === "+md(i),{type:0},[]));var r=zh(md(a),{type:0},[]);return r=""===o&&t?ed(r,(function(t){return zh(e.code+".nodeType === /*ELEMENT_NODE*/ 1 ? "+t.code+" : null",{type:0},t.H)})):r,[ud(n,r=ed(r,(function(t){return zh("("+e.code+".namespaceURI || null) === (("+t.code+") || null)",{type:0},t.H)}))),"name-"+i]}))}function Dd(e,t,n,r){var o=e[0];switch(o){case kd.Vb:return function(e,t,n){var r=(e=jo(e,"elementName"))&&jo(e,"star");return null===e||r?[ed(t,(function(e){return zh(e.code+".nodeType === /*ELEMENT_NODE*/ 1",{type:0},[])})),"type-1"]:Od(e=Yo(jo(e,"QName")),!1,t,n)}(e,n,r);case kd.dc:return function(e){return[ed(e,(function(e){return zh(e.code+".nodeType === /*TEXT_NODE*/ 3",{type:0},[])})),"type-3"]}(n);case kd.$b:return Od(Yo(e),t,n,r);case kd.ec:return jo(e,"star")?null!==(o=jo(e,"uri"))?e=Od({localName:"*",namespaceURI:Ho(o),prefix:""},t,n,r):(o=jo(e,"NCName"),e="star"===jo(e,"*")[0]?Od({localName:Ho(o),namespaceURI:null,prefix:"*"},t,n,r):Od({localName:"*",namespaceURI:null,prefix:Ho(o)},t,n,r)):e=Od({localName:"*",namespaceURI:null,prefix:"*"},t,n,r),e;case kd.Sb:return function(e){return[ed(e,(function(e){return zh("!!"+e.code+".nodeType",{type:0},[])})),null]}(n);default:return[Zh("Test not implemented: '"+o),null]}}function Rd(e,t,n){var r=c(n.h(e,t,n)),o=r.next().value;return r=r.next().value,[rd(o,_o(e,"type"),t,n),r]}function Gd(e,t,n){var r=c((e=e?Lo(e,"*"):[]).reduce((function(e,r){var o=(e=c(e)).next().value,a=e.next().value;if(!o)return Rd(r,t,n);var i=a;return td(o,(function(e){var o=c(Rd(r,t,n)),u=o.next().value;return o=o.next().value,i=Ea(a,o),[ed(u,(function(t){return zh(e.code+" && "+t.code,{type:0},[].concat(p(e.H),p(t.H)))})),i]}))}),[null,null]));return e=r.next().value,r=r.next().value,[e?ed(e,(function(e){return zh("(function () {\n\t\t\t\t\t\t\t"+e.H.join("\n")+"\n\t\t\t\t\t\t\treturn "+e.code+";\n\t\t\t\t\t\t})()",{type:0},[])})):null,r]}function Pd(e,t,n,r){if(0===e.length)return[ed(n,(function(e){return zh("yield "+e.code+";",{type:2},e.H)})),null];var o=(e=c(e)).next().value,a=l(e);if(0<Lo(o,"lookup").length)return[Zh("Unsupported: lookups"),null];var i=_d(r,Xd(r,"contextItem")),u=(e=c(Gd(e=jo(o,"predicates"),i,r))).next().value,s=e.next().value;if(e=jo(o,"xpathAxis")){if(!(o=jo(o,Fd)))return[Zh("Unsupported test in step"),null];var f=Ho(e);return o=(f=c(Dd(o,t="attribute"===f||"self"===f&&t,i,r))).next().value,f=f.next().value,o=null===u?o:ud(o,u),s=Ea(f,s),f=(t=c(Pd(a,t,i,r))).next().value,t.next(),function(e,t,n,r,o,a){switch(e=Ho(e)){case"attribute":return[Id(t,n,r,o,a),"type-1"];case"child":return[Nd(t,n,r,o,a),null];case"parent":return[Cd(t,n,r,o,a),null];case"self":return[Sd(o,a,t,r),n];default:return[Zh("Unsupported: the "+e+" axis"),null]}}(e,o,s,f,i,n)}return(e=Xo(o,["filterExpr","*"]))?(e=(s=c(r.h(e,n,r))).next().value,s=s.next().value,[ed(e,(function(e){var t=0===a.length?zh("",{type:2},[]):zh("if ("+i.code+" !== null && !"+i.code+".nodeType) {\n\t\t\t\t\t\t\t\t\tthrow new Error('XPTY0019: The result of E1 in a path expression E1/E2 should evaluate to a sequence of nodes.');\n\t\t\t\t\t\t\t\t}",{type:2},[]),o=c(Pd(a,!0,i,r)),s=o.next().value;return o.next(),o=null===u?s:ed(u,(function(e){return ed(s,(function(t){return zh("if ("+e.code+") {\n\t\t\t\t\t\t\t\t\t"+t.H.join("\n")+"\n\t\t\t\t\t\t\t\t\t"+t.code+"\n\t\t\t\t\t\t\t\t}",{type:2},e.H)}))})),ed(o,(function(r){switch(e.va.type){case 1:return ed(n,(function(n){return zh("for (const "+i.code+" of "+e.code+"("+n.code+")) {\n\t\t\t\t\t\t\t\t\t"+r.H.join("\n")+"\n\t\t\t\t\t\t\t\t\t"+r.code+"\n\t\t\t\t\t\t\t\t}",{type:2},[].concat(p(i.H),p(e.H),p(t.H)))}));case 0:return zh("const "+i.code+" = "+e.code+";\n\t\t\t\t\t\t\t"+t.code+"\n\t\t\t\t\t\t\tif ("+i.code+" !== null) {\n\t\t\t\t\t\t\t\t"+r.H.join("\n")+"\n\t\t\t\t\t\t\t\t"+r.code+"\n\t\t\t\t\t\t\t}",{type:2},[].concat(p(i.H),p(e.H),p(t.H)));default:return Zh("Unsupported generated code type for filterExpr")}}))})),s]):[Zh("Unsupported: unknown step type"),null]}function Md(e,t,n){var r=Lo(e,"stepExpr");if(1===r.length){var o=jo(r[0],"xpathAxis");if(o&&"self"===Ho(o))return function(e,t,n){return td(t,(function(t){if(0<Lo(e,"lookup").length)return[Zh("Unsupported: lookups"),null];var r=jo(e,"predicates"),o=c(Gd(r,t,n));r=o.next().value,o=o.next().value;var a=jo(e,Fd);if(!a)return[Zh("Unsupported test in step"),null];var i=c(Dd(a,!0,t,n));return a=i.next().value,i=i.next().value,r=null===r?a:ud(a,r),o=Ea(i,o),[ed(r,(function(e){return zh("(("+e.code+") ? "+t.code+" : null)",{type:0},[].concat(p(t.H),p(e.H)))})),o]}))}(r[0],t,n)}var a=_d(n,Xd(n,"contextItem"));return t=(e=jo(e,"rootExpr"))?Hd(n,function(e){return ed(e,(function(e){return zh("(function () {\n\t\t\t\tlet n = "+e.code+";\n\t\t\t\twhile (n.nodeType !== /*DOCUMENT_NODE*/9) {\n\t\t\t\t\tn = domFacade.getParentNode(n);\n\t\t\t\t\tif (n === null) {\n\t\t\t\t\t\tthrow new Error('XPDY0050: the root node of the context node is not a document node.');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn n;\n\t\t\t})()",{type:0},e.H)}))}(a),"root"):a,n=(r=c(Pd(r,!e,t,n))).next().value,r=r.next().value,[ed(n,(function(e){return zh("(function* ("+a.code+") {\n\t\t\t"+e.H.join("\n")+"\n\t\t\t"+e.code+"\n\t\t})",{type:1},[])})),r]}function Ud(e,t,n){var r=e[0];switch(r){case"contextItemExpr":return[t,null];case"pathExpr":return Md(e,t,n);case"andOp":return Ed(e,"&&",t,n);case"orOp":return Ed(e,"||",t,n);case"stringConstantExpr":return[zh(e=md(e=jo(e,"value")[1]||""),{type:0},[]),null];case"equalOp":case"notEqualOp":case"lessThanOrEqualOp":case"lessThanOp":case"greaterThanOrEqualOp":case"greaterThanOp":case"eqOp":case"neOp":case"ltOp":case"leOp":case"gtOp":case"geOp":case"isOp":case"nodeBeforeOp":case"nodeAfterOp":e:switch(r){case"eqOp":case"neOp":case"ltOp":case"leOp":case"gtOp":case"geOp":case"isOp":e=hd(e,r,t,n);break e;case"equalOp":case"notEqualOp":case"lessThanOrEqualOp":case"lessThanOp":case"greaterThanOrEqualOp":case"greaterThanOp":var o=_o(Xo(e,["firstOperand","*"]),"type"),a=_o(Xo(e,["secondOperand","*"]),"type");e=o&&a?3===o.g&&3===a.g?hd(e,ld[r],t,n):3===o.g?dd(e,"firstOperand","secondOperand",ld[r],t,n):3===a.g?dd(e,"secondOperand","firstOperand",fd[ld[r]],t,n):Zh("General comparison for sequences is not implemented"):Zh("types of compare are not known");break e;default:e=Zh("Unsupported compare type: "+r)}return[e,null];case"functionCallExpr":return[Ad(e,t,n),null];default:return[Zh("Unsupported: the base expression '"+r+"'."),null]}}function jd(e,t){this.o=new Map,this.v=new Map,this.aa=e,this.B=t,this.h=Ud}function Hd(e,t,n){return ed(t,(function(t){var r=e.o.get(t);return r||(r=zh(r=Xd(e,n),t.va,[].concat(p(t.H),["const "+r+" = "+t.code+";"])),e.o.set(t,r),e.o.set(r,r)),r}))}function _d(e,t){return t=zh(t,{type:0},[]),e.o.set(t,t),t}function Xd(e,t){t=void 0===t?"v":t;var n=e.v.get(t)||0;return e.v.set(t,n+1),t+n}function Ld(e){var t=Lo(e,"*");if("pathExpr"===e[0])return!0;for(t=(e=c(t)).next();!t.done;t=e.next())if(Ld(t.value))return!0;return!1}function Yd(e,t,n){var r=e.stack;r&&(r.includes(e.message)&&(r=r.substr(r.indexOf(e.message)+e.message.length).trim()),(r=r.split("\n")).splice(10),r=(r=r.map((function(e){return e.startsWith("    ")||e.startsWith("\t")?e:"    "+e}))).join("\n")),e=Error.call(this,"Custom XPath function Q{"+n+"}"+t+" raised:\n"+e.message+"\n"+r),this.message=e.message,"stack"in e&&(this.stack=e.stack)}function Jd(e,t,n){return 0===t.g?e.G()?null:_h(e.first(),n).next(0).value:2===t.g||1===t.g?e.O().map((function(e){if(te(e.type,47))throw Error("Cannot pass attribute nodes to custom functions");return _h(e,n).next(0).value})):_h(e.first(),n).next(0).value}y(Yd,Error);var qd={callFunction:function(e,t,n,r,o){var a=mo(t,n,r.length);if(!a)throw Error("function not found for codegen function call");t=new Bt({N:null,Ka:0,Da:ye.empty(),Aa:{}});var i=new ke(e);return e=new kt(!1,!1,i,null,null,o?o.currentContext:null,null),Jd(r=a.callFunction.apply(a,[t,e,null].concat(p(r.map((function(e,t){return At(0,e,a.j[t])}))))),{type:59,g:0},e)},errXPDY0002:Dt};var Qd={},Kd=(Qd["http://www.w3.org/2005/XQueryX"]="xqx",Qd["http://www.w3.org/2007/xquery-update-10"]="xquf",Qd["http://fontoxml.com/fontoxpath"]="x",Qd);function Wd(e,t,n,r,o){if("string"==typeof n)return 0===n.length?null:t.createTextNode(n);if(!Array.isArray(n))throw new TypeError("JsonML element should be an array or string");var a=(r=function(e,t){switch(e){case"copySource":case"insertAfter":case"insertAsFirst":case"insertAsLast":case"insertBefore":case"insertInto":case"modifyExpr":case"newNameExpr":case"replacementExpr":case"replaceValue":case"returnExpr":case"sourceExpr":case"targetExpr":case"transformCopies":case"transformCopy":return{localName:e,ub:t||"http://www.w3.org/2005/XQueryX"};case"deleteExpr":case"insertExpr":case"renameExpr":case"replaceExpr":case"transformExpr":return{localName:e,ub:"http://www.w3.org/2007/xquery-update-10"};case"x:stackTrace":return{localName:"stackTrace",ub:"http://fontoxml.com/fontoxpath"};default:return{localName:e,ub:"http://www.w3.org/2005/XQueryX"}}}(n[0],r)).localName;r=r.ub;var i=t.createElementNS(r,Kd[r]+":"+a),u=n[1],s=1;if("object"==typeof u&&!Array.isArray(u)){if(null!==u)for(var l=(s=c(Object.keys(u))).next();!l.done;l=s.next()){var p=u[l=l.value];null!==p&&("type"===l?void 0!==p&&e.setAttributeNS(i,r,"fontoxpath:"+l,se(p)):("start"!==l&&"end"!==l||"stackTrace"!==a||(p=JSON.stringify(p)),o&&"prefix"===l&&""===p||e.setAttributeNS(i,r,Kd[r]+":"+l,p)))}s=2}for(a=s,u=n.length;a<u;++a)null!==(s=Wd(e,t,n[a],r,o))&&e.insertBefore(i,s,null);return i}var Vd=new Map;function $d(e){var t;e:{if(t=Mu.get(e))for(var n=c(Object.keys(t)),r=n.next();!r.done;r=n.next())if(t[r=r.value]&&t[r].length){t=t[r][0].h;break e}t=null}if(t)return t;if(Vd.has(e))return Vd.get(e);if(null===(t=Xo(t="string"==typeof e?yh(e,{$:!1}):Hu(e),["mainModule","queryBody","*"])))throw Error("Library modules do not have a specificity");return t=Pu(t,{ua:!1,$:!1}),Vd.set(e,t),t}var zd=new Ee;return void 0!==n&&(n.compareSpecificity=function(e,t){return Or($d(e).o,$d(t).o)},n.compileXPathToJavaScript=function(e,t,n){if(n=n||{},t=t||0,"string"==typeof e){e=Ju(e);var r={$:"XQuery3.1"===n.language||"XQueryUpdate3.1"===n.language,debug:!1};try{var o=yh(e,r)}catch(t){lo(e,t)}}else o=Hu(e);if(!(e=jo(o,"mainModule")))return Zh("Unsupported: XQuery Library modules are not supported.");if(jo(e,"prolog"))return Zh("Unsupported: XQuery Prologs are not supported.");if(r=void 0===n.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":n.defaultFunctionNamespaceURI,sa(o,n=new ga(new Fo(new wo((e=new jd(n.namespaceResolver||Ph(null),r)).aa,{},r,n.functionNameResolver||Mh("http://www.w3.org/2005/xpath-functions"))))),n=jo(o,"mainModule"))if(jo(n,"prolog"))e=Zh("Unsupported: XQuery.");else{var a=Xo(n,["queryBody","*"]);n=_d(e,"contextItem");var i=c(e.h(a,n,e));r=i.next().value,i.next();e:switch(a=_o(a,"type"),t){case 9:e=id(t=nd(r,n,e),a,e);break e;case 7:e=function(e,t,n,r){return ed(e,(function(e){switch(e.va.type){case 1:return ed(Hd(r,e,"nodes"),(function(e){return ed(Hd(r,n,"contextItem"),(function(t){return zh("Array.from("+e.code+"("+t.code+"))",{type:0},[].concat(p(e.H),p(t.H)))}))}));case 0:return ed(Hd(r,id(e,t,r),"node"),(function(e){return zh("("+e.code+" === null ? [] : ["+e.code+"])",{type:0},e.H)}));default:return Zh("Unsupported code type to evaluate to nodes")}}))}(r,a,n,e);break e;case 3:e=rd(r,a,n,e);break e;case 2:e=ad(r,a,n,e);break e;default:e=Zh("Unsupported: the return type '"+t+"'.")}e.isAstAccepted&&(e="\n\t\t"+e.H.join("\n")+"\n\t\treturn "+e.code+";",t="\n\treturn (contextItem, domFacade, runtimeLib, options) => {\n\t\tconst {\n\t\t\terrXPDY0002,\n\t\t} = runtimeLib;",Ld(o)&&(t+='\n\t\tif (!contextItem) {\n\t\t\tthrow errXPDY0002("Context is needed to evaluate the given path expression.");\n\t\t}\n\n\t\tif (!contextItem.nodeType) {\n\t\t\tthrow new Error("Context item must be subtype of node().");\n\t\t}\n\t\t'),e={code:t+(e+"}\n//# sourceURL=generated.js"),isAstAccepted:!0})}else e=Zh("Unsupported: Can not execute a library module.");return e},n.domFacade=zd,n.evaluateXPath=Kh,n.evaluateXPathToArray=function(e,t,n,r,o){return Kh(e,t,n,r,Kh.Tb,o)},n.evaluateXPathToAsyncIterator=Vh,n.evaluateXPathToBoolean=function(e,t,n,r,o){return Kh(e,t,n,r,Kh.BOOLEAN_TYPE,o)},n.evaluateXPathToFirstNode=function(e,t,n,r,o){return Kh(e,t,n,r,Kh.Wb,o)},n.evaluateXPathToMap=function(e,t,n,r,o){return Kh(e,t,n,r,Kh.Zb,o)},n.evaluateXPathToNodes=function(e,t,n,r,o){return Kh(e,t,n,r,Kh.ac,o)},n.evaluateXPathToNumber=function(e,t,n,r,o){return Kh(e,t,n,r,Kh.NUMBER_TYPE,o)},n.evaluateXPathToNumbers=function(e,t,n,r,o){return Kh(e,t,n,r,Kh.bc,o)},n.evaluateXPathToString=function(e,t,n,r,o){return Kh(e,t,n,r,Kh.STRING_TYPE,o)},n.evaluateXPathToStrings=function(e,t,n,r,o){return Kh(e,t,n,r,Kh.cc,o)},n.evaluateUpdatingExpression=function(e,t,n,r,o){var a,i,u,s,c,l,p,f,h,d;return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(r,o){!function e(a){a.done?r(a.value):Promise.resolve(a.value).then(t,n).then(e,o)}(e.next())}))}(new E(new x((function(m){switch(m.h){case 1:o=o||{},Yu();try{s=Uh(e,t,n||null,r||{},o||{},{ua:!0,$:!0,debug:!!o.debug,La:!!o.disableCache}),a=s.Bb,i=s.Cb,u=s.ca}catch(t){lo(e,t)}if(u.I){m.h=2;break}c=[];var g=(l=Vh(e,t,n,r,Object.assign(Object.assign({},o),{language:"XQueryUpdate3.1"}))).next();return m.h=3,{value:g};case 3:p=m.l;case 4:if(p.done){m.h=6;break}return c.push(p.value),g=l.next(),m.h=7,{value:g};case 7:p=m.l,m.h=4;break;case 6:return f={},m.return(Promise.resolve((f.pendingUpdateList=[],f.xdmValue=c,f)));case 2:try{d=u.s(a,i),h=d.next(0)}catch(t){lo(e,t)}return m.return($h(h.value,e,o.returnType,i))}}))))},n.evaluateUpdatingExpressionSync=function(e,t,n,r,o){o=o||{},Yu();try{var a=Uh(e,t,n||null,r||{},o||{},{ua:!0,$:!0,debug:!!o.debug,La:!!o.disableCache}),i=a.Bb,u=a.Cb,s=a.ca}catch(t){lo(e,t)}if(!s.I)return i={},(u={}).pendingUpdateList=[],u.xdmValue=Kh(e,t,n,r,o.i,Object.assign(Object.assign({},o),(i.language=Kh.fc,i))),u;try{var c=s.s(i,u).next(0)}catch(t){lo(e,t)}return $h(c.value,e,o.returnType,u)},n.executeJavaScriptCompiledXPath=function(e,t,n,r){return n=n||new Ee,e()(null!=t?t:null,n,qd,r)},n.executePendingUpdateList=function(e,t,n,r){t=new ke(t||new Ee),r=r?new Ie(r):Ne,n=n?n=new Rh(n):null,Br(e=e.map(mu),t,n,r)},n.getBucketForSelector=function(e){return $d(e).B()},n.getBucketsForNode=Be,n.precompileXPath=function(e){return Promise.resolve(e)},n.registerXQueryModule=function(e,t){if(ua(t=yh(e,{$:!0,debug:(t=void 0===t?{debug:!1}:t).debug}),new ga(void 0)),!(t=jo(t,"libraryModule")))throw Error("XQuery module must be declared in a library module.");var n=jo(t,"moduleDecl"),r=jo(n,"uri"),o=Ho(r);if(r=Ho(n=jo(n,"prefix")),Go(n=new Fo(new wo((function(){return null}),Object.create(null),"http://www.w3.org/2005/xpath-functions",Mh("http://www.w3.org/2005/xpath-functions"))),r,o),null!==(t=jo(t,"prolog"))){try{var a=Ah(t,n,!0,e)}catch(t){lo(e,t)}a.Ma.forEach((function(e){if(o!==e.namespaceURI)throw Error("XQST0048: Functions and variables declared in a module must reside in the module target namespace.")})),Xu(o,a)}else Xu(o,{Ma:[],Va:[],ra:null,source:e});return o},n.registerCustomXPathFunction=function(e,t,n,r){var o=(e=function(e){if("object"==typeof e)return e;if(2!==(e=e.split(":")).length)throw Error("Do not register custom functions in the default function namespace");var t=c(e);e=t.next().value,t=t.next().value;var n=vo[e];if(!n){if(n="generated_namespace_uri_"+e,vo[e])throw Error("Prefix already registered: Do not register the same prefix twice.");vo[e]=n}return{localName:t,namespaceURI:n}}(e)).namespaceURI,a=e.localName;if(!o)throw Eo();var i=t.map((function(e){return le(e)})),u=le(n);go(o,a,i,u,(function(e,t,n){var s=Array.from(arguments);s.splice(0,3),s=s.map((function(e,n){return Jd(e,i[n],t)}));var c={};c.currentContext=t.l,c.domFacade=t.h.h;try{var l=r.apply(void 0,[c].concat(p(s)))}catch(e){throw new Yd(e,a,o)}return l&&"object"==typeof l&&Object.getOwnPropertySymbols(l).includes(Gh)?ye.create(l.Hb):At(t.h,l,u)}))},n.parseScript=function(e,t,n,r){r=void 0===r?Ne:r,e=Ju(e);try{var o=yh(e,{$:"XQuery3.1"===t.language||"XQueryUpdate3.1"===t.language,debug:t.debug})}catch(t){lo(e,t)}var a=new wo(t.namespaceResolver||function(){return null},{},void 0===t.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":t.defaultFunctionNamespaceURI,t.functionNameResolver||function(){return null});a=new Fo(a);var i=jo(o,["mainModule","libraryModule"]),u=jo(i,"moduleDecl");return u&&Go(a,Ho(jo(u,"prefix")),u=Ho(jo(u,"uri"))),(i=jo(i,"prolog"))&&Ah(i,a,!1,e),!1!==t.annotateAst&&ua(o,new ga(a)),a=new Ee,t=Wd(r,n,o,null,!1===t.wc),r.insertBefore(t,n.createComment(e),a.getFirstChild(t)),t},n.profiler=qh,n.createTypedValueFactory=function(e){return function(t,n){return t=wt(new ke(null===n?new Ee:n),t,le(e)),(n={})[Gh]=!0,n.Hb=t,n}},n.finalizeModuleRegistration=Yu,n.Language={XPATH_3_1_LANGUAGE:"XPath3.1",XQUERY_3_1_LANGUAGE:"XQuery3.1",XQUERY_UPDATE_3_1_LANGUAGE:"XQueryUpdate3.1"},n.ReturnType=Xh),n}(r.xspattern,r.prsc)}]]);O.get=e=>D.get(e),O.has=e=>D.has(e),O.getGraph=()=>D,O.setEnvironment=e=>{void 0!==F&&(F=e)},O.setDebugStyle=e=>{void 0!==F&&(delete F.initial,F.debugCSSProperties=e)},O.getEnvironment=()=>F;const R=O;var G=n(3808);const P="ab",M=`${P}FiltersChannel`,U=`${P}-handshake`,j=`${P}-filters-config`,H=[["background","repeating-linear-gradient(to bottom, #e67370 0, #e67370 9px, white 9px, white 10px)"],["outline","solid red"]];const _={reportError:async e=>await async function(e){o(r.runtime.sendMessage({type:"ewe:sentry-error",error:e instanceof Error?a(e):e}))}(e)},X={adblock_ui:{options_clicked:{description:"User clicked the gear icon"},support_icon_clicked:{description:"User clicked the support icon on the header of the Adblock popup"},opt_out_acceptable_ads_clicked:{description:"The user clicked the opt-out link to disable Acceptable Ads on the getadblock.com installed page"},cm_pause_on_site:{description:"User right clicked on the page to open the context menu and selected 'Pause on this site' from the AdBlock section."},cm_pause_on_all_sites:{description:"User right clicked on the page to open the context menu and selected 'Pause on all sites' from the AdBlock section."},cm_resume_adblock:{description:"User right clicked on the page to open the context menu and selected 'Resume blocking ads' from the AdBlock section."},pause_on_site:{description:"User clicked 'Pause on this site' on the Adblock popup"},resume_adblock:{description:"User clicked 'Resume Ad blocking' on the Adblock popup"},popup_opened:{description:"User clicked the AdBlock toolbar icon to open the popup menu",data:{description:"Data about the popup opened event",type:"object",properties:{isBadgeTextNew:{description:"The 'new' badge is shown on the popup icon",type:"boolean"},reason:{description:"The reason why the 'new' badge was shown",type:"string"}}}},hide_on_this_page_clicked:{description:"User clicked on the three dots in the popup menu, then clicked the 'Hide something on this page' link"},titletext_clicked:{description:"User clicked the AdBlock logo in the popup menu header"},more_pause_options_clicked:{description:"User clicked on the three dots in the popup menu, then clicked 'More pause options' link"},help_flow_results:{description:"Emitted when a user completes the help flow in the popup. The flow presents different options based on the user's issue (e.g., ads not blocked, site broken, etc.), and the emitted event includes the path representing the sequence of choices the user made",data:{description:"Data about the help flow results",type:"object",properties:{helpFlowPath:{description:"The path of the help flow (e.g. 'start,seeAd,seeAdEverywhere,link')",type:"string"}}}},premium_options_clicked:{description:"Triggered when a premium user clicks the 'Premium' label in the popup header which is shown next to the Adblock logo. The label is only visible to premium users and opens the Premium tab in the settings page"},popup_sub_clicked_cookies_premium:{description:"Triggered when a premium user clicks the toggle to enable the Premium Cookie Blocking filter list in the popup. The list is not enabled automatically when upgrading to premium"},popup_sub_clicked_distraction_control:{description:"Triggered when a premium user clicks the toggle to enable the Premium Block Distractions filter list in the popup. The list is not enabled automatically when upgrading to premium"},skip_cookie_walls_learn_more_clicked:{description:"A free user clicked the Learn More button on the 'Skip Cookie Walls' section in the AdBlock popup"},block_distractions_learn_more_clicked:{description:"A free user clicked the Learn More button on the 'Block Distractions' section in the AdBlock popup"},options_page_tab_premium_cta:{description:"User interacted with a premium CTA on a premium tab in the options page",data:{description:"Data about which tab the user was viewing",type:"object",properties:{tab:{description:"The name of the tab being viewed when the CTA was clicked",type:"string",enum:["premium","themes","image_swap","premium_filters"]},action:{description:"Type of interaction with the Premium CTA",type:"string",enum:["clicked"]}}}},options_page_tab:{description:"User clicked or opened a tab on the options page side bar",data:{description:"Data about the user interaction with the options page tab",type:"object",properties:{tab:{description:"The tab that the user interacted with",type:"string",enum:["stats","general","filter_lists","customize","support","premium","themes","image_swap","premium_filters"]},action:{description:"Type of interaction with the options page tab",type:"string",enum:["opened","clicked"]}}}},vpn_cta:{description:"User interacted with AdBlock VPN promotional banner in the popup menu. This CTA promotes the VPN with 'Introducing AdBlock VPN' message",data:{description:"Data about the user interaction with the AdBlock VPN promotional banner",type:"object",properties:{action:{description:"Type of interaction with the AdBlock VPN promotional banner",type:"string",enum:["seen","clicked","closed"]}}}},premium_themes_cta:{description:"User interacted with themes customization CTA in the popup menu, opening the themes section in options page",data:{description:"Information about the theme that was being promoted when clicked",type:"object",properties:{theme:{description:"The name of the theme being showcased when the user clicked",type:"string",enum:["solarized","solarized_light","watermelon","sunshine","ocean"]},action:{description:"Type of interaction with the themes customization CTA",type:"string",enum:["seen","clicked","closed"]}}}},free_dc_cta:{description:"User interacted with Distraction Control promotional banner in the popup menu. This CTA promotes the premium Distraction Control feature with 'Block Floating Videos' message",data:{description:"Data about the user interaction with the Distraction Control promotional banner",type:"object",properties:{action:{description:"Type of interaction with the Distraction Control promotional banner",type:"string",enum:["seen","clicked","closed"]}}}},premium_dc_cta:{description:"Premium user interacted with the enhanced Distraction Control CTA in the popup menu. This CTA highlights 'New Premium feature available!' to promote advanced distraction blocking options",data:{description:"Data about the user interaction with the Distraction Control CTA",type:"object",properties:{action:{description:"Type of interaction with the Distraction Control CTA",type:"string",enum:["seen","clicked","closed"]}}}},premium_upsell_cta:{description:"User interacted with Premium upsell upgrade banner in the popup menu. This CTA displays 'Upgrade your AdBlock' message to encourage premium subscription",data:{description:"Data about the user interaction with the Premium upsell upgrade banner",type:"object",properties:{action:{description:"Type of interaction with the Premium upsell upgrade banner",type:"string",enum:["seen","clicked","closed"]}}}},premium_filter_list_cta:{description:"User interacted with Premium filter list banner in the popup menu. This CTA displays 'Upgrade your AdBlock' message to encourage premium subscription",data:{description:"Data about the user interaction with the premium filter list CTA",type:"object",properties:{action:{description:"Type of interaction with the premium filter list CTA",type:"string",enum:["seen","clicked"]}}}},data_collection_opt_out:{description:"User opted out of data collection in the options page"}},smart_allowlisting:{allowlisting_expired:{description:"An allowlisting filter expired automatically",data:{description:"Details about the filter at the time of expiration.",type:"object",properties:{allowlistExtendDuration:{description:"The number of milliseconds to extend the allowlisting filter's expiry when the user navigated to a URL that matches the filter.",type:"number"}}}},allowlisting_renewed:{description:"An allowlisting filter was renewed automatically",data:{description:"Details about the filter at the time of renewal.",type:"object",properties:{allowlistExtendDuration:{description:"The number of milliseconds to extend the allowlisting filter's expiry when the user navigated to a URL that matches the filter.",type:"number"}}}}},getadblock:{opt_out_acceptable_ads_clicked:{description:"The user clicked the opt-out link to disable Acceptable Ads on the getadblock.com installed page"}},cdp:{built_cdp_payload:{description:"A payload has been built with the intention of sending it to CDP. This is debug information, and will temporarily include the eventStats until the CDP server is ready to ingest them.",data:{description:"Data about the built payload",type:"object",properties:{eventStats:{description:"Counts of behavior event logs since the last payload.",type:"any"},uncompressedPayloadSize:{description:"Size in bytes of the uncompressed and unencrypted payload.",type:"integer"}}}}},snippets:{context_tampering:{description:"Recorded when the website is trying to disable the snippets"},local_storage_unavailable:{description:"The extension intended to use localStorage as a cache, but localStorage was unavailable",data:{description:"Metadata about the context where localStorage was unavailable",type:"object",properties:{isMainFrame:{description:"This occurred in the main frame, not in an iframe",type:"boolean"}}}},zero_delay_cleanup:{description:"Recorded when we cleaned up zero-delay storage key from previous extension versions.",data:{description:"Metadata about the cleanup operation",type:"object",properties:{key:{description:"The storage key that was cleaned up",type:"string"}}}}},youtube:{yt_site_navigation:{description:"Recorded 5 seconds after a user navigates to a YouTube page. This event is sent only once per session. Refreshing or opening a new tab will start a new session. Navigating through videos without refreshing (aka SPA navigation) will not trigger another event.",data:{description:"Data about the YouTube navigation event",type:"object",properties:{userLoggedIn:{description:"Indicates whether the user is logged in to a YouTube account. '1' for logged in, '0' for not logged in.",type:"string",enum:["1","0"]}}}},yt_site_ad_shown:{description:"Recorded when a video ad on YouTube stops playing, either because it was skipped, the user navigated away, or it finished playing",data:{description:"Data for the YouTube ad shown event",type:"object",properties:{isAllowListed:{description:"Indicates whether the page is allowlisted. '1' for allowlisted, '0' for not allowlisted.",type:"string",enum:["1","0"]},isPremium:{description:"Specifies whether the user has a Premium subscription. Used to be called 'p' in getadblock.logs_unified.logs_fact",type:"boolean"},adFormat:{description:"Format ID of the displayed ad. Used to be called 'category' in getadblock.logs_unified.logs_fact",type:"string"},totalAdDurationMs:{description:"Total duration of the ad, in milliseconds. Used to be called 'bc' in getadblock.logs_unified.logs_fact",type:"number"},adShownDurationMs:{description:"Actual playback duration of the ad, in milliseconds. Used to be called 'amount' in getadblock.logs_unified.logs_fact",type:"number"}}}},yt_site_ad_wall_detected:{description:"Recorded when the YouTube ad wall is detected and the page is not yet allowlisted.",data:{description:"Data for YouTube ad wall detection when the page is not yet allowlisted",type:"object",properties:{adwallCategory:{description:"The ad wall type: 'soft' (dismiss button) or 'hard' (no dismiss button).",type:"string",enum:["soft","hard"]},userLoggedIn:{description:"String flag indicating whether the user is logged in to a YouTube account ('1' if logged in, otherwise '0').",type:"string",enum:["1","0"]},isAllowListed:{description:"String flag indicating whether the page is allowlisted ('1' if allowlisted, otherwise '0'). Should always be '0' for this event.",type:"string",enum:["1","0"]},allowlistScope:{description:"Scope of the applied allowlist rule: 'video' (single video url) or 'tab' (all videos until the tab is closed).",type:"string",enum:["video","tab"]}}}},yt_site_already_allowlisted:{description:"Recorded when the YouTube ad wall is detected, but the page was already allowlisted.",data:{description:"Data for YouTube ad wall detection when the page is already allowlisted",type:"object",properties:{adwallCategory:{description:"The ad wall type: 'soft' (dismiss button) or 'hard' (no dismiss button).",type:"string",enum:["soft","hard"]},userLoggedIn:{description:"String flag indicating whether the user is logged in to a YouTube account ('1' if logged in, otherwise '0').",type:"string",enum:["1","0"]},isAllowListed:{description:"String flag indicating whether the page is allowlisted ('1' if allowlisted, otherwise '0'). Should always be '1' for this event.",type:"string",enum:["1","0"]},allowlistScope:{description:"Scope of the applied allowlist rule: 'video' (single video url) or 'tab' (all videos until the tab is closed).",type:"string",enum:["video","tab"]}}}},yt_auto_allowlisted:{description:"Recorded immediately after the extension automatically allowlists a YouTube page in response to an ad wall.",data:{description:"Data for the YouTube auto allowlisted event",type:"object",properties:{allowlistScope:{description:"Scope of the applied allowlist rule: 'video' (single video url) or 'tab' (all videos until the tab is closed).",type:"string",enum:["video","tab"]}}}},yt_site_toast_shown:{description:"Recorded when the YouTube 'ad blocker' toast notification appears in the DOM. This is an experiment ran by YouTube that only appears for certain adblocking users, warning them that their adblocker might be causing interruptions.",data:{description:"Data for the YouTube toast shown event",type:"object",properties:{isAllowListed:{description:"String flag indicating whether the page is allowlisted ('1' if allowlisted, otherwise '0').",type:"string",enum:["1","0"]},isPremium:{description:"Specifies whether the user has a Premium subscription",type:"boolean"}}}},yt_site_context_tampering:{description:"Recorded when the YouTube error_204 beacon indicates a possible script conflict that could interfere with the extension.",data:{description:"Data for the YouTube context tampering event",type:"object",properties:{isAllowListed:{description:"String flag indicating whether the page is allowlisted ('1' if allowlisted, otherwise '0').",type:"string",enum:["1","0"]},isPremium:{description:"Specifies whether the user has a Premium subscription",type:"boolean"},applicationVersion:{description:"YouTube client version from the client.version query param on the error_204 request.",type:"string"}}}},yt_site_yt_error:{description:"This event is triggered in the event of an error on YouTube. There could be multiple types of errors happening on the page, so we try to differentiate them via the category parameter.",data:{description:"Data for the YouTube error event",type:"object",properties:{category:{description:"Indicates the error type as defined in our extension code. It can be one of the following: 'uncaught_exception', 'player_error' or 'sww_error'.",type:"string",enum:["uncaught_exception","player_error","sww_error"]},applicationVersion:{description:"The client version of the YouTube application (e.g., '2.20251020.01.00').",type:"string"},error:{description:"Indicates the exception type of JavaScript error, captured by the YouTube error handler (e.g., 'TypeError').",type:"string"},errorMsg:{description:"Either the stack trace of the error or an empty string.",type:"string"},isAllowListed:{description:"String flag indicating whether the site is allowlisted ('1' if allowlisted, otherwise '0').",type:"string",enum:["1","0"]},isPremium:{description:"Specifies whether the user has a Premium subscription.",type:"boolean"}}}}},conflict_detection:{bt_loader_blocked:{description:"Recorded on every website when the script from Blockthrough fails to load. BTLoader initiates ad recovery for users who allow Acceptable Ads, enabling monetization. This event indicates the script was blocked, which can happen when the user has disabled Acceptable Ads, installed another ad blocker that blocks BTLoader, or allowlisted the page. When BTLoader is blocked, ad recovery cannot occur and monetization is lost.",data:{description:"Data about why BTLoader was blocked",type:"object",properties:{isPageAllowlisted:{description:"Whether the page is allowlisted",type:"boolean"},aaListsStatus:{description:"The status of the Acceptable Ads lists. 0: none, 1: AA, 2: AA Privacy, 3: both",type:"number"},errorMsg:{description:"Browser string indicating the error that occurred",type:"string"}}}},bt_loader_success:{description:"Recorded on every website when the script from Blockthrough successfully loads. BTLoader initiates ad recovery for users who allow Acceptable Ads, enabling monetization. This event confirms that ad recovery can proceed normally on this page.",data:{description:"Data about the BTLoader success event",type:"object",properties:{isPageAllowlisted:{description:"Whether the page is allowlisted",type:"boolean"},aaListsStatus:{description:"The status of the Acceptable Ads lists. 0: none, 1: AA, 2: AA Privacy, 3: both",type:"number"}}}},aa_bait1_blocked:{description:"Acceptable Ads bait 1 was blocked",data:{description:"Data about why Acceptable Ads bait 1 was blocked",type:"object",properties:{isPageAllowlisted:{description:"Whether the page is allowlisted",type:"boolean"},aaListsStatus:{description:"The status of the Acceptable Ads lists. 0: none, 1: AA, 2: AA Privacy, 3: both",type:"number"},errorMsg:{description:"Browser string indicating the error that occurred",type:"string"}}}},aa_bait1_success:{description:"Acceptable Ads bait 1 was successfully loaded",data:{description:"Data about the Acceptable Ads bait 1 success event",type:"object",properties:{isPageAllowlisted:{description:"Whether the page is allowlisted",type:"boolean"},aaListsStatus:{description:"The status of the Acceptable Ads lists. 0: none, 1: AA, 2: AA Privacy, 3: both",type:"number"}}}},aa_bait2_blocked:{description:"Acceptable Ads bait 2 was blocked",data:{description:"Data about why Acceptable Ads bait 2 was blocked",type:"object",properties:{isPageAllowlisted:{description:"Whether the page is allowlisted",type:"boolean"},aaListsStatus:{description:"The status of the Acceptable Ads lists. 0: none, 1: AA, 2: AA Privacy, 3: both",type:"number"},errorMsg:{description:"Browser string indicating the error that occurred",type:"string"}}}},aa_bait2_success:{description:"Acceptable Ads bait 2 was successfully loaded",data:{description:"Data about the Acceptable Ads bait 2 success event",type:"object",properties:{isPageAllowlisted:{description:"Whether the page is allowlisted",type:"boolean"},aaListsStatus:{description:"The status of the Acceptable Ads lists. 0: none, 1: AA, 2: AA Privacy, 3: both",type:"number"}}}},aa_other_blocked:{description:"Acceptable Ads filters on Amazon, Yahoo, LinkedIn, Outlook were blocked",data:{description:"Data about why Acceptable Ads filters were blocked",type:"object",properties:{isPageAllowlisted:{description:"Whether the page is allowlisted",type:"boolean"},aaListsStatus:{description:"The status of the Acceptable Ads lists. 0: none, 1: AA, 2: AA Privacy, 3: both",type:"number"},errorMsg:{description:"Browser string indicating the error that occurred",type:"string"}}}},aa_other_success:{description:"Acceptable Ads filters on Amazon, Yahoo, LinkedIn, Outlook were successfully loaded",data:{description:"Data about the Acceptable Ads filters success event",type:"object",properties:{isPageAllowlisted:{description:"Whether the page is allowlisted",type:"boolean"},aaListsStatus:{description:"The status of the Acceptable Ads lists. 0: none, 1: AA, 2: AA Privacy, 3: both",type:"number"}}}}},cohorts:{facts_snapshot:{description:"Cohorts facts snapshot used for cohort estimation",data:{description:"The updated facts",type:"object",properties:{extName:{description:"The name of the extension",type:"string"},extVersion:{description:"The version of the extension",type:"string"},browserName:{description:"The name of the browser",type:"string"},browserLanguage:{description:"The language of the browser",type:"string"},countryCode:{description:"The 2-letter country code of the user",type:"string"},aaEnabled:{description:"Whether Acceptable Ads is enabled",type:"boolean"},installType:{description:"The installation type of the extension",type:"string"},hasPremium:{description:"Whether the user has a premium subscription",type:"boolean"},installDate:{description:"The timestamp when the extension was installed",type:"number"},blockedCount:{description:"The number of blocked requests",type:"number"}}}}},dnr_filters:{recreated_dnr_rules:{description:"On extension upgrade, our DNR filter management module will compare the dynamic DNR rules that the browser has with the filters that we know about. If these do not match, we recreate the DNR rules and log this report.",data:{description:"Report on the before and after state of the recreation",type:"object",properties:{recreateStats:{description:"Stats on how many DNR rules were recreated",type:"object",properties:{recreatedRulesCount:{description:"How many DNR rules were recreated",type:"integer"},removedRulesCount:{description:"How many existing DNR rules were removed",type:"integer"}}},checkResultBefore:{description:"Results of the data integrity check done before recreating the DNR rules.",type:"object",properties:{valid:{description:"True if the data integrity check passed. We only do the recreation if it failed, so this would be expected to always be false.",type:"boolean"},extraRulesInDNRCount:{description:"Count of the number of active dynamic DNR rules which we do not expect to see",type:"integer"},missingRulesInDNRCount:{description:"Count of the number of rules that our filters expected to exist but didn't",type:"integer"}}},checkResultAfter:{description:"Results of the data integrity check done after recreating the DNR rules.",type:"object",properties:{valid:{description:"True if the data integrity check passed. We expect this to be true after the rule recreation has run.",type:"boolean"},extraRulesInDNRCount:{description:"Count of the number of active dynamic DNR rules which we do not expect to see. We expect this to be 0 after the rule recreation has run.",type:"integer"},missingRulesInDNRCount:{description:"Count of the number of rules that our filters expected to exist but didn't. We expect this to be 0 after the rule recreation has run.",type:"integer"}}}}}},exceeded_static_rule_count_limit:{description:"Debug log when someone runs into the 'set of enabled rulesets exceeds the rule count limit' error when enabling static rulesets",data:{description:"Data on the current state of static rules and the rulesets being enabled or disabled. Rule counts refer to static DNR rules, bundled in the extension at build time in rulesets.",type:"object",properties:{enableRulesetIds:{description:"Ruleset IDs that were to be enabled",type:"array",items:{type:"string"}},enableRuleCount:{description:"Static rules that we are trying to enable",type:"integer"},disableRulesetIds:{description:"Ruleset IDs that were to be disabled",type:"array",items:{type:"string"}},disableRuleCount:{description:"Static rules that we are trying to disable",type:"integer"},currentEnabledRulesetIdsBefore:{description:"Currently enabled ruleset IDs, gathered before calling updateEnabledRulesets",type:"array",items:{type:"string"}},currentEnabledRulesetIdsAfter:{description:"Currently enabled ruleset IDs, gathered after calling updateEnabledRulesets",type:"array",items:{type:"string"}},currentEnabledRuleCountBefore:{description:"Used static rules, gathered before calling updateEnabledRulesets",type:"integer"},currentEnabledRuleCountAfter:{description:"Used static rules, gathered after calling updateEnabledRulesets",type:"integer"},availableRuleCountBefore:{description:"Available static rules, gathered before calling updateEnabledRulesets",type:"integer"},availableRuleCountAfter:{description:"Available static rules, gathered after calling updateEnabledRulesets",type:"integer"}}}}},in_product_messaging:{command_received:{description:"Extension received a valid IPM command from the remote config",data:{description:"IPM command ID",type:"string"}}},initialization:{initialization_complete:{description:"The extension has finished initializing without any errors",data:{description:"Data about the initialized system",type:"object",properties:{subscriptionsCount:{description:"The number of subscriptions the user has active",type:"number"},availableStaticRuleCount:{description:"The number of DNR static rules that the user has available, or null for MV2 extensions",type:["number","null"]},timings:{description:"Profiling information about startup performance",type:"object",properties:{marks:{type:"array",description:"Specific points in time when something happened",items:{type:"object",properties:{name:{description:"Name of the initialization step",type:"string"},startTime:{description:"Milliseconds elapsed since the service worker started",type:"number"}}}},measures:{type:"array",description:"Measurements of how long steps took",items:{type:"object",properties:{name:{description:"Name of the initialization step",type:"string"},startTime:{description:"When the measure started, in milliseconds elapsed since the service worker started",type:"number"},duration:{description:"Duration that the step took in milliseconds",type:"number"}}}}}}}}},initialization_error:{description:"Errors recorded during the initialization of the extension",data:{description:"Data about the initializion error",type:"object",properties:{errorMsg:{description:"The error message that was recorded",type:"string"},hasInternalError:{description:"Whether or not the error string matched 'internal error' which indicates that it is a browser error",type:"boolean"},timings:{description:"Profiling information about startup performance",type:"object",properties:{marks:{type:"array",description:"Specific points in time when something happened",items:{type:"object",properties:{name:{description:"Name of the initialization step",type:"string"},startTime:{description:"Milliseconds elapsed since the service worker started",type:"number"}}}},measures:{type:"array",description:"Measurements of how long steps took",items:{type:"object",properties:{name:{description:"Name of the initialization step",type:"string"},startTime:{description:"When the measure started, in milliseconds elapsed since the service worker started",type:"number"},duration:{description:"Duration that the step took in milliseconds",type:"number"}}}}}}}}},zero_subs_reset:{description:"Event logged when subscriptions are reset to defaults due to zero enabled subscriptions",data:{description:"Debug metadata about the subscription reset",type:"object",properties:{subs:{description:"The total number of subscriptions after reset",type:"number"},enabledSubs:{description:"The number of enabled subscriptions after reset",type:"number"},enabledRulesets:{description:"The number of enabled DNR rulesets after reset",type:"number"},totalUserFilters:{description:"The total number of user filters after reset",type:"number"},dynamicRules:{description:"The number of dynamic DNR rules after reset",type:"number"},dataCorrupted:{description:"Whether the data is corrupted. True if the extension has detected that storage has thrown an error.",type:"boolean"},firstRun:{description:"Whether this is the first run of the extension based on the number of subscriptions and user filters.",type:"boolean"},reinitialized:{description:"Whether the extension was reinitialized before reset.",type:"boolean"},errorMsg:{description:"An error that occurred when readding subscriptions, if any",type:["string","null"]},lastErrorMsg:{description:"The last error in the browser runtime, if any",type:["string","null"]}}}}},customer_lifecycle:{new_install_normal:{description:"The extension was installed from the browser's official web store (Chrome Web Store, Firefox Add-ons, Microsoft Edge Add-ons)"},new_install_development:{description:"The extension was installed manually in development mode, either as an unpacked directory or from a local .zip/.crx/.xpi package"},new_install_admin:{description:"The extension was installed and managed by an administrator through a policy setting"},new_install_sideload:{description:"The extension was installed by other software on the user's computer"},new_install_other:{description:"The extension was installed through an unrecognized method not covered by other install types(normal/development/admin/sideload)"},new_install_unknown:{description:"The extension was installed but the installation type could not be determined"},trial_license_expired:{description:"The premium trial license has expired"}},new_tab:{command_ready:{description:"'create_tab' IPM command has passed all checks and new tab is going to be created at the next possible opportunity",data:{description:"IPM command ID",type:"string"}},tab_created:{description:"A tab has been created for the IPM command",data:{description:"IPM command ID",type:"string"}},tab_loaded:{description:"The contents of the tab for the IPM command have been loaded",data:{description:"IPM command ID",type:"string"}}},onpage_dialog:{command_ready:{description:"'create_on_page_dialog' IPM command has passed all checks and on-page dialog is going to be created at the next possible opportunity",data:{description:"IPM command ID",type:"string"}},dialog_button_clicked:{description:"The user clicked on the button presented on the dialog",data:{description:"IPM command ID",type:"string"}},dialog_closed:{description:"The user closed the dialog by clicking the close icon in the dialog header",data:{description:"IPM command ID",type:"string"}},dialog_ignored:{description:"The user did not interact with the dialog while being injected into the page, and the dialog no longer can be interacted with",data:{description:"IPM command ID",type:"string"}},dialog_injected:{description:"The extension injected the dialog into the page and rendered it. This doesn't mean that the dialog is visible to the user, or that it looks as expected",data:{description:"IPM command ID",type:"string"}}},test_ewe_background:{test_event:{description:"TEST: A logging test event for various types of data",data:{description:"Arbitrary test data",type:"any"}},test_event_no_data:{description:"TEST: A logging test event that has no associated data"}},test_ewe_content_api:{test_got_experiment_flag:{description:"TEST: In the content test script, an experiment was loaded",data:{description:"Information about the loaded experiment",type:"object",properties:{flagName:{description:"The flag name that was loaded",type:"string"},flag:{description:"The loaded value",type:"any"}}}}},test_ewe_ui_api:{test_message_received:{description:"TEST: A logger test event indicating the UI page received a request to log",data:{description:"The data sent to the test listener",type:"any"}},test_event:{description:"TEST: A logging test event for various types of data",data:{description:"Arbitrary test data",type:"any"}},test_event_no_data:{description:"TEST: A logging test event that has no associated data"}}},L={debug:1,info:2,behavior:3,warn:4,off:5};Object.fromEntries(Object.entries(L).map((([e,t])=>[t,e])));function Y(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function J(e,t=new WeakSet){let n=typeof e;return null===e||"undefined"==n||"string"==n||"boolean"==n||("number"==n?Number.isFinite(e):Y(e)?!t.has(e)&&(t.add(e),Object.values(e).every((e=>J(e,t)))):!!Array.isArray(e)&&(!t.has(e)&&(t.add(e),e.every((e=>J(e,t))))))}function q(e,t){let n=typeof e;if("undefined"===n||!t)return("undefined"===n||null===e)&&!t;let r=t.type;return"string"==typeof r&&(r=[r]),!!r.some((r=>{switch(r){case"any":return!0;case"boolean":case"number":case"string":return n===r;case"null":return null===e;case"integer":return Number.isInteger(e);case"object":return Y(e)&&Object.keys(t.properties).every((n=>q(e[n],t.properties[n])));case"array":return Array.isArray(e)&&e.every((e=>q(e,t.items)))}return!1}))&&!(void 0!==t.enum&&!t.enum.includes(e))}class Q{constructor(e,t=X){this._module=e,this._events=t,this._events[this._module]||console.error(`Unknown module: ${e}. Did you remember to add it to core/sdk/events.js?`)}_log(e,t,n,r){if(!this._events[this._module])return;if(!this._events[this._module][t])return void console.error(`Unknown event: ${t} in module: ${this._module}. Did you remember to add it to core/sdk/events.js?`);if(!J(n))return void console.error(`Data for event: ${t} in module: ${this._module} cannot be serialized to JSON.`);const o=this._events[this._module][t].data;if(!q(n,o))return void console.error(`Data for event: ${t} in module: ${this._module} does not match the schema provided in core/sdk/events.js. `,{data:n,dataSchema:o});const a=(new Date).toISOString();this._validatedLog(a,e,t,n,r)}_validatedLog(e,t,n,r,o){}debug(e,t){this._log(1,e,t)}info(e,t){this._log(2,e,t)}behavior(e,t,n){this._log(3,e,t,n)}warn(e,t){this._log(4,e,t)}}const K={ServerLogger:class extends Q{constructor(e){super(e)}_validatedLog(e,t,n,a){o(r.runtime.sendMessage({type:"ewe:telemetry-log",logTime:e,module:this._module,level:t,event:n,data:a}))}}};async function W(e,...t){return await o(r.runtime.sendMessage({type:"ewe:api-call",apiName:"experiments",methodName:e,params:t}))}const V={getFlag:async e=>await W("getFlag",e),getFlags:async()=>await W("getFlags"),getAssignments:async()=>await W("getAssignments")},$=function(e){let t=document.documentElement.dataset[M];return t?delete document.documentElement.dataset[M]:(t=e,document.documentElement.dataset[M]=t),t}(C());let z,Z,ee,te=null,ne=!0;const re=new K.ServerLogger("snippets");const oe=function(){if(window===window.parent)return!1;try{return window.parent.location.href,!1}catch(e){return!0}}();function ae(e){if(!e||!e.filters||!e.filters.length)return;const{debug:t}=e,n=e.filters.map(G.parseScript);let r={detail:{type:"ewe:filters-config",filters:n,debug:t}};"function"==typeof cloneInto&&(r=cloneInto(r,document.defaultView));!document.documentElement.dataset[M]?document.dispatchEvent(new CustomEvent($,r)):z.then((()=>{document.dispatchEvent(new CustomEvent($,r))}));const o=[],a=[];for(const e of n)for(let[t,...n]of e)if(R.has(t)){let e=R.get(t);e&&o.push(e),a.push([t,...n])}for(const e of o)e.bind(globalThis)();if(a.length){R({debugCSSProperties:t?H:null},...a)}}function ie(e){if(!ne)return e.useCache&&re.debug("local_storage_unavailable",{isMainFrame:window===window.top}),e;let t=null;ee?t=ee.websiteValue:te&&(t=te),t&&(e.websiteValue=t);const n=e.useCache&&e.filters.length>0?JSON.stringify(e):t;if(te===n)return e.useCache?null:e;try{return n?sessionStorage.setItem(j,n):sessionStorage.removeItem(j),window.location.reload(),null}catch(t){return _.reportError(t),e}}function ue({detail:e}){if(e&&"ewe:main-error"===e.type){const{error:t}=e;if(!t)return;t.name&&"TypeError"===t.name&&re.behavior("context_tampering"),_.reportError(t)}}var se=n(1267);const ce=new Set(["abpchina.org","abpindo.blogspot.com","abpvn.com","adblock.ee","adblock.gardar.net","adblockplus.me","adblockplus.org","abptestpages.org","commentcamarche.net","droit-finances.commentcamarche.com","easylist.to","eyeo.com","fanboy.co.nz","filterlists.com","forums.lanik.us","gitee.com","gitee.io","github.com","github.io","gitlab.com","gitlab.io","gurud.ee","hugolescargot.com","i-dont-care-about-cookies.eu","journaldesfemmes.fr","journaldunet.com","linternaute.com","spam404.com","stanev.org","void.gr","xfiles.noads.it","zoso.ro"]);function le(e){let{protocol:t,hostname:n}=new URL(e);return"localhost"==n||"https:"==t&&function(e){for(e.endsWith(".")&&(e=e.substring(0,e.length-1));;){if(ce.has(e))return!0;let t=e.indexOf(".");if(-1==t)return!1;e=e.substr(t+1)}}(n)}let pe,fe,he=!1;function de(){he&&(o(r.runtime.sendMessage({type:"ewe:cdp-session-active"})),he=!1),me()}function me(){setTimeout(de,1e3)}function ge(){he=!0}class ye{constructor(e){this.selectors=new Map(e),this.observer=new MutationObserver((()=>{this.observer.disconnect(),setTimeout((()=>this.trace()),1e3)})),"loading"==document.readyState?document.addEventListener("DOMContentLoaded",(()=>this.trace())):this.trace()}log(e,t=[]){o(r.runtime.sendMessage({type:"ewe:trace-elem-hide",filters:e,selectors:t}))}trace(){let e=[],t=[];for(let[n,r]of this.selectors)try{document.querySelector(n)&&(this.selectors.delete(n),r?e.push(r):t.push(n))}catch(e){console.error(e.toString())}(e.length>0||t.length>0)&&this.log(e,t),this.observer.observe(document,{childList:!0,attributes:!0,subtree:!0})}disconnect(){this.observer.disconnect()}}async function ve(e){e.tracedSelectors&&(pe=new ye(e.tracedSelectors));const t=(t,n)=>{for(let n of t)c(n,e.cssProperties);pe&&pe.log(n)},n=e=>{for(let t of e)l(t)},r=(e,t)=>{for(const t of e)t.remove();pe&&pe.log(t)},o=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n],o=t[n];for(const[e,t]of Object.entries(o.css))r.style.setProperty(e,t,"important")}if(pe){const e=t.map((e=>e.text));pe.log(e)}};e.emulatedPatterns.length>0?(fe||(fe=new se.WX(t,n,r,o)),fe.apply(e.emulatedPatterns)):fe&&fe.apply(e.emulatedPatterns),e.notifyActive&&(me(),document.addEventListener("scroll",ge,!0),document.addEventListener("click",ge),document.addEventListener("keypress",ge,!0))}function we(e){"object"==typeof e&&null!=e&&e.type&&"ewe:apply-content-features"==e.type&&(!async function(){pe&&pe.disconnect()}(),ve(e))}window.addEventListener("message",(e=>{if(e.isTrusted)return e&&e.data&&"ewe:safari-onhistorystateupdated-content"===e.data.type?o(r.runtime.sendMessage({type:"ewe:safari-onhistorystateupdated",event:e.data.event})):void 0}),!1),function(){let e=null;r.runtime.onMessage.addListener(((t,n)=>{if(t&&"ewe:collapse"==t.type){if("loading"==document.readyState){e||(e=new Map,document.addEventListener("DOMContentLoaded",(()=>{if(e){for(let[t,n]of e){for(let e of document.querySelectorAll(t))n.has(s(e))&&p(e);f(t,n)}e=null}})));let n=e.get(t.selector)||new Set;e.set(t.selector,n),n.add(t.url)}else{for(let e of document.querySelectorAll(t.selector))s(e)==t.url&&p(e);f(t.selector,new Set([t.url]))}return!1}}))}(),async function(){r.runtime.onMessage.addListener(we),le(window.location.href)&&document.addEventListener("click",(e=>{if(2==e.button||!e.isTrusted)return;let t=e.target;for(;!(t instanceof HTMLAnchorElement);)if(t=t.parentNode,!t)return;let n=null;if("http:"==t.protocol||"https:"==t.protocol)"subscribe.adblockplus.org"==t.host&&"/"==t.pathname&&(n=t.search.substr(1));else{let e=/^abp:\/*subscribe\/*\?(.*)/i.exec(t.href);e&&(n=e[1])}if(!n)return;let a=null,i=null;for(let e of n.split("&")){let t=e.split("=",2);if(2==t.length&&/\S/.test(t[1]))switch(t[0]){case"title":a=decodeURIComponent(t[1]);break;case"location":i=decodeURIComponent(t[1])}}i&&(a||(a=i),a=a.trim(),i=i.trim(),/^(https?|ftp):/.test(i)&&(o(r.runtime.sendMessage({type:"ewe:subscribe-link-clicked",title:a,url:i})),e.preventDefault(),e.stopPropagation()))}),!0);let e=await o(r.runtime.sendMessage({type:"ewe:content-hello"}));e&&await ve(e)}(),document.addEventListener("domain_allowlisting_request",w,!0),window.addEventListener("BTAADetection",k),function(){document.removeEventListener($,ue),document.addEventListener($,ue),Z=async function(){const e=await o(r.runtime.sendMessage({type:"ewe:get-filters-config"}));if(e)return e}(),z=new Promise((e=>{document.addEventListener(U,(function t(){document.removeEventListener(U,t),e(!0)}))}));try{te=sessionStorage.getItem(j)}catch(e){ne=!1}if(async function(){const e=await V.getFlag("zero-delay-cleanup");if(ne&&e)try{const t=JSON.parse(localStorage.getItem(e));t&&void 0!==t.filters&&(void 0!==t.websiteValue?localStorage.setItem(e,t.websiteValue):localStorage.removeItem(e),re.debug("zero_delay_cleanup",{key:e}))}catch(e){}}(),te)try{ee=JSON.parse(te)}catch(e){}if(ee&&!oe)try{ae(ee)}catch(e){_.reportError(e)}oe?Z.then(ae):Z.then(ie).then(ae)}()})();
