LavaPack.loadBundle([[808,{"./_version":805,"./formatter":814,"@ethersproject/abstract-provider":757,"@ethersproject/base64":763,"@ethersproject/basex":764,"@ethersproject/bignumber":768,"@ethersproject/bytes":770,"@ethersproject/constants":774,"@ethersproject/hash":783,"@ethersproject/logger":798,"@ethersproject/networks":800,"@ethersproject/properties":804,"@ethersproject/sha2":834,"@ethersproject/strings":844,"@ethersproject/web":854,bech32:825},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function i(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,i)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.BaseProvider=r.Resolver=r.Event=void 0;var c=e("@ethersproject/abstract-provider"),u=e("@ethersproject/base64"),l=e("@ethersproject/basex"),d=e("@ethersproject/bignumber"),p=e("@ethersproject/bytes"),h=e("@ethersproject/constants"),f=e("@ethersproject/hash"),g=e("@ethersproject/networks"),m=e("@ethersproject/properties"),E=e("@ethersproject/sha2"),_=e("@ethersproject/strings"),T=e("@ethersproject/web"),S=i(e("bech32")),v=e("@ethersproject/logger"),N=e("./_version"),b=new v.Logger(N.version),A=e("./formatter");function I(e){return null==e?"null":(32!==(0,p.hexDataLength)(e)&&b.throwArgumentError("invalid topic","topic",e),e.toLowerCase())}function y(e){for(e=e.slice();e.length>0&&null==e[e.length-1];)e.pop();return e.map(function(e){if(Array.isArray(e)){var t={};e.forEach(function(e){t[I(e)]=!0});var r=Object.keys(t);return r.sort(),r.join("|")}return I(e)}).join("&")}function k(e){if("string"==typeof e){if(e=e.toLowerCase(),32===(0,p.hexDataLength)(e))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter:*:"+y(e);if(c.ForkEvent.isForkEvent(e))throw b.warn("not implemented"),new Error("not implemented");if(e&&"object"==typeof e)return"filter:"+(e.address||"*")+":"+y(e.topics||[])}throw new Error("invalid event - "+e)}function O(){return(new Date).getTime()}function C(e){return new Promise(function(t){setTimeout(t,e)})}var w=["block","network","pending","poll"],P=function(){function e(e,t,r){(0,m.defineReadOnly)(this,"tag",e),(0,m.defineReadOnly)(this,"listener",t),(0,m.defineReadOnly)(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}return Object.defineProperty(e.prototype,"event",{get:function(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.tag.split(":")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){var e=this.tag.split(":");return"tx"!==e[0]?null:e[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filter",{get:function(){var e=this.tag.split(":");if("filter"!==e[0])return null;var t,r=e[1],n=""===(t=e[2])?[]:t.split(/&/g).map(function(e){if(""===e)return[];var t=e.split("|").map(function(e){return"null"===e?null:e});return 1===t.length?t[0]:t}),o={};return n.length>0&&(o.topics=n),r&&"*"!==r&&(o.address=r),o},enumerable:!1,configurable:!0}),e.prototype.pollable=function(){return this.tag.indexOf(":")>=0||w.indexOf(this.tag)>=0},e}();r.Event=P;var R={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function D(e){return(0,p.hexZeroPad)(d.BigNumber.from(e).toHexString(),32)}function M(e){return l.Base58.encode((0,p.concat)([e,(0,p.hexDataSlice)((0,E.sha256)((0,E.sha256)(e)),0,4)]))}var L=new RegExp("^(ipfs)://(.*)$","i"),B=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),L,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function x(e,t){try{return(0,_.toUtf8String)(j(e,t))}catch(e){}return null}function j(e,t){if("0x"===e)return null;var r=d.BigNumber.from((0,p.hexDataSlice)(e,t,t+32)).toNumber(),n=d.BigNumber.from((0,p.hexDataSlice)(e,r,r+32)).toNumber();return(0,p.hexDataSlice)(e,r+32,r+32+n)}function F(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):b.throwArgumentError("unsupported IPFS format","link",e),"https://gateway.ipfs.io/ipfs/"+e}function U(e){var t=(0,p.arrayify)(e);if(t.length>32)throw new Error("internal; should not happen");var r=new Uint8Array(32);return r.set(t,32-t.length),r}function H(e){if(e.length%32==0)return e;var t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}function G(e){for(var t=[],r=0,n=0;n<e.length;n++)t.push(null),r+=32;for(n=0;n<e.length;n++){var o=(0,p.arrayify)(e[n]);t[n]=U(r),t.push(U(o.length)),t.push(H(o)),r+=32+32*Math.ceil(o.length/32)}return(0,p.hexConcat)(t)}var W=function(){function e(e,t,r,n){(0,m.defineReadOnly)(this,"provider",e),(0,m.defineReadOnly)(this,"name",r),(0,m.defineReadOnly)(this,"address",e.formatter.address(t)),(0,m.defineReadOnly)(this,"_resolvedAddress",n)}return e.prototype.supportsWildcard=function(){var e=this;return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(function(e){return d.BigNumber.from(e).eq(1)}).catch(function(t){if(t.code===v.Logger.errors.CALL_EXCEPTION)return!1;throw e._supportsEip2544=null,t})),this._supportsEip2544},e.prototype._fetch=function(e,t){return a(this,void 0,void 0,function(){var r,n,o,a;return s(this,function(s){switch(s.label){case 0:return r={to:this.address,ccipReadEnabled:!0,data:(0,p.hexConcat)([e,(0,f.namehash)(this.name),t||"0x"])},n=!1,[4,this.supportsWildcard()];case 1:s.sent()&&(n=!0,r.data=(0,p.hexConcat)(["0x9061b923",G([(0,f.dnsEncode)(this.name),r.data])])),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.provider.call(r)];case 3:return o=s.sent(),(0,p.arrayify)(o).length%32==4&&b.throwError("resolver threw error",v.Logger.errors.CALL_EXCEPTION,{transaction:r,data:o}),n&&(o=j(o,0)),[2,o];case 4:if((a=s.sent()).code===v.Logger.errors.CALL_EXCEPTION)return[2,null];throw a;case 5:return[2]}})})},e.prototype._fetchBytes=function(e,t){return a(this,void 0,void 0,function(){var r;return s(this,function(n){switch(n.label){case 0:return[4,this._fetch(e,t)];case 1:return null!=(r=n.sent())?[2,j(r,0)]:[2,null]}})})},e.prototype._getAddress=function(e,t){var r=R[String(e)];if(null==r&&b.throwError("unsupported coin type: "+e,v.Logger.errors.UNSUPPORTED_OPERATION,{operation:"getAddress("+e+")"}),"eth"===r.ilk)return this.provider.formatter.address(t);var n=(0,p.arrayify)(t);if(null!=r.p2pkh){var o=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(o){var a=parseInt(o[1],16);if(o[2].length===2*a&&a>=1&&a<=75)return M((0,p.concat)([[r.p2pkh],"0x"+o[2]]))}}if(null!=r.p2sh){var s=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){var i=parseInt(s[1],16);if(s[2].length===2*i&&i>=1&&i<=75)return M((0,p.concat)([[r.p2sh],"0x"+s[2]]))}}if(null!=r.prefix){var c=n[1],u=n[0];if(0===u?20!==c&&32!==c&&(u=-1):u=-1,u>=0&&n.length===2+c&&c>=1&&c<=75){var l=S.default.toWords(n.slice(2));return l.unshift(u),S.default.encode(r.prefix,l)}}return null},e.prototype.getAddress=function(e){return a(this,void 0,void 0,function(){var t,r,n,o;return s(this,function(a){switch(a.label){case 0:if(null==e&&(e=60),60!==e)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._fetch("0x3b3b57de")];case 2:return"0x"===(t=a.sent())||t===h.HashZero?[2,null]:[2,this.provider.formatter.callAddress(t)];case 3:if((r=a.sent()).code===v.Logger.errors.CALL_EXCEPTION)return[2,null];throw r;case 4:return[4,this._fetchBytes("0xf1cb7e06",D(e))];case 5:return null==(n=a.sent())||"0x"===n?[2,null]:(null==(o=this._getAddress(e,n))&&b.throwError("invalid or unsupported coin data",v.Logger.errors.UNSUPPORTED_OPERATION,{operation:"getAddress("+e+")",coinType:e,data:n}),[2,o])}})})},e.prototype.getAvatar=function(){return a(this,void 0,void 0,function(){var e,t,r,n,o,a,i,c,u,l,h,f,g,m,E,_,S,v,N,b,A,I;return s(this,function(s){switch(s.label){case 0:e=[{type:"name",content:this.name}],s.label=1;case 1:return s.trys.push([1,19,,20]),[4,this.getText("avatar")];case 2:if(null==(t=s.sent()))return[2,null];r=0,s.label=3;case 3:if(!(r<B.length))return[3,18];if(null==(n=t.match(B[r])))return[3,17];switch(o=n[1].toLowerCase(),o){case"https":return[3,4];case"data":return[3,5];case"ipfs":return[3,6];case"erc721":case"erc1155":return[3,7]}return[3,17];case 4:return e.push({type:"url",content:t}),[2,{linkage:e,url:t}];case 5:return e.push({type:"data",content:t}),[2,{linkage:e,url:t}];case 6:return e.push({type:"ipfs",content:t}),[2,{linkage:e,url:F(t)}];case 7:return a="erc721"===o?"0xc87b56dd":"0x0e89341c",e.push({type:o,content:t}),(c=this._resolvedAddress)?[3,9]:[4,this.getAddress()];case 8:c=s.sent(),s.label=9;case 9:return i=c,2!==(u=(n[2]||"").split("/")).length?[2,null]:[4,this.provider.formatter.address(u[0])];case 10:return l=s.sent(),h=(0,p.hexZeroPad)(d.BigNumber.from(u[1]).toHexString(),32),"erc721"!==o?[3,12]:(m=(g=this.provider.formatter).callAddress,[4,this.provider.call({to:l,data:(0,p.hexConcat)(["0x6352211e",h])})]);case 11:return f=m.apply(g,[s.sent()]),i!==f?[2,null]:(e.push({type:"owner",content:f}),[3,14]);case 12:return"erc1155"!==o?[3,14]:(S=(_=d.BigNumber).from,[4,this.provider.call({to:l,data:(0,p.hexConcat)(["0x00fdd58e",(0,p.hexZeroPad)(i,32),h])})]);case 13:if((E=S.apply(_,[s.sent()])).isZero())return[2,null];e.push({type:"balance",content:E.toString()}),s.label=14;case 14:return v={to:this.provider.formatter.address(u[0]),data:(0,p.hexConcat)([a,h])},b=x,[4,this.provider.call(v)];case 15:return null==(N=b.apply(void 0,[s.sent(),0]))?[2,null]:(e.push({type:"metadata-url-base",content:N}),"erc1155"===o&&(N=N.replace("{id}",h.substring(2)),e.push({type:"metadata-url-expanded",content:N})),N.match(/^ipfs:/i)&&(N=F(N)),e.push({type:"metadata-url",content:N}),[4,(0,T.fetchJson)(N)]);case 16:if(!(A=s.sent()))return[2,null];if(e.push({type:"metadata",content:JSON.stringify(A)}),"string"!=typeof(I=A.image))return[2,null];if(I.match(/^(https:\/\/|data:)/i));else{if(null==I.match(L))return[2,null];e.push({type:"url-ipfs",content:I}),I=F(I)}return e.push({type:"url",content:I}),[2,{linkage:e,url:I}];case 17:return r++,[3,3];case 18:return[3,20];case 19:return s.sent(),[3,20];case 20:return[2,null]}})})},e.prototype.getContentHash=function(){return a(this,void 0,void 0,function(){var e,t,r,n,o,a,i,c;return s(this,function(s){switch(s.label){case 0:return[4,this._fetchBytes("0xbc1c58d1")];case 1:return null==(e=s.sent())||"0x"===e?[2,null]:(t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/))&&(r=parseInt(t[3],16),t[4].length===2*r)?[2,"ipfs://"+l.Base58.encode("0x"+t[1])]:(n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/))&&(o=parseInt(n[3],16),n[4].length===2*o)?[2,"ipns://"+l.Base58.encode("0x"+n[1])]:(a=e.match(/^0xe40101fa011b20([0-9a-f]*)$/))&&64===a[1].length?[2,"bzz://"+a[1]]:(i=e.match(/^0x90b2c605([0-9a-f]*)$/))&&68===i[1].length?(c={"=":"","+":"-","/":"_"},[2,"sia://"+(0,u.encode)("0x"+i[1]).replace(/[=+\/]/g,function(e){return c[e]})]):[2,b.throwError("invalid or unsupported content hash data",v.Logger.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})]}})})},e.prototype.getText=function(e){return a(this,void 0,void 0,function(){var t,r;return s(this,function(n){switch(n.label){case 0:return t=(0,_.toUtf8Bytes)(e),(t=(0,p.concat)([D(64),D(t.length),t])).length%32!=0&&(t=(0,p.concat)([t,(0,p.hexZeroPad)("0x",32-e.length%32)])),[4,this._fetchBytes("0x59d1d43c",(0,p.hexlify)(t))];case 1:return null==(r=n.sent())||"0x"===r?[2,null]:[2,(0,_.toUtf8String)(r)]}})})},e}();r.Resolver=W;var K=null,q=1,V=function(e){function t(t){var r=this.constructor,n=e.call(this)||this;if(n._events=[],n._emitted={block:-2},n.disableCcipRead=!1,n.formatter=r.getFormatter(),(0,m.defineReadOnly)(n,"anyNetwork","any"===t),n.anyNetwork&&(t=n.detectNetwork()),t instanceof Promise)n._networkPromise=t,t.catch(function(e){}),n._ready().catch(function(e){});else{var o=(0,m.getStatic)(r,"getNetwork")(t);o?((0,m.defineReadOnly)(n,"_network",o),n.emit("network",o,null)):b.throwArgumentError("invalid network","network",t)}return n._maxInternalBlockNumber=-1024,n._lastBlockNumber=-2,n._maxFilterBlockRange=10,n._pollingInterval=4e3,n._fastQueryDate=0,n}return o(t,e),t.prototype._ready=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:if(null!=this._network)return[3,7];if(e=null,!this._networkPromise)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._networkPromise];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return null!=e?[3,6]:[4,this.detectNetwork()];case 5:e=t.sent(),t.label=6;case 6:e||b.throwError("no network detected",v.Logger.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=e:(0,m.defineReadOnly)(this,"_network",e),this.emit("network",e,null)),t.label=7;case 7:return[2,this._network]}})})},Object.defineProperty(t.prototype,"ready",{get:function(){var e=this;return(0,T.poll)(function(){return e._ready().then(function(e){return e},function(e){if(e.code===v.Logger.errors.NETWORK_ERROR&&"noNetwork"===e.event)return undefined;throw e})})},enumerable:!1,configurable:!0}),t.getFormatter=function(){return null==K&&(K=new A.Formatter),K},t.getNetwork=function(e){return(0,g.getNetwork)(null==e?"homestead":e)},t.prototype.ccipReadFetch=function(e,t,r){return a(this,void 0,void 0,function(){var n,o,a,i,c,u,l,d,p;return s(this,function(s){switch(s.label){case 0:if(this.disableCcipRead||0===r.length)return[2,null];n=e.to.toLowerCase(),o=t.toLowerCase(),a=[],i=0,s.label=1;case 1:return i<r.length?(c=r[i],u=c.replace("{sender}",n).replace("{data}",o),l=c.indexOf("{data}")>=0?null:JSON.stringify({data:o,sender:n}),[4,(0,T.fetchJson)({url:u,errorPassThrough:!0},l,function(e,t){return e.status=t.statusCode,e})]):[3,4];case 2:if((d=s.sent()).data)return[2,d.data];if(p=d.message||"unknown error",d.status>=400&&d.status<500)return[2,b.throwError("response not found during CCIP fetch: "+p,v.Logger.errors.SERVER_ERROR,{url:c,errorMessage:p})];a.push(p),s.label=3;case 3:return i++,[3,1];case 4:return[2,b.throwError("error encountered during CCIP fetch: "+a.map(function(e){return JSON.stringify(e)}).join(", "),v.Logger.errors.SERVER_ERROR,{urls:r,errorMessages:a})]}})})},t.prototype._getInternalBlockNumber=function(e){return a(this,void 0,void 0,function(){var t,r,n,o,a=this;return s(this,function(s){switch(s.label){case 0:return[4,this._ready()];case 1:if(s.sent(),!(e>0))return[3,7];s.label=2;case 2:if(!this._internalBlockNumber)return[3,7];t=this._internalBlockNumber,s.label=3;case 3:return s.trys.push([3,5,,6]),[4,t];case 4:return r=s.sent(),O()-r.respTime<=e?[2,r.blockNumber]:[3,7];case 5:return s.sent(),this._internalBlockNumber===t?[3,7]:[3,6];case 6:return[3,2];case 7:return n=O(),o=(0,m.resolveProperties)({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(function(e){return null},function(e){return e})}).then(function(e){var t=e.blockNumber,r=e.networkError;if(r)throw a._internalBlockNumber===o&&(a._internalBlockNumber=null),r;var s=O();return(t=d.BigNumber.from(t).toNumber())<a._maxInternalBlockNumber&&(t=a._maxInternalBlockNumber),a._maxInternalBlockNumber=t,a._setFastBlockNumber(t),{blockNumber:t,reqTime:n,respTime:s}}),this._internalBlockNumber=o,o.catch(function(e){a._internalBlockNumber===o&&(a._internalBlockNumber=null)}),[4,o];case 8:return[2,s.sent().blockNumber]}})})},t.prototype.poll=function(){return a(this,void 0,void 0,function(){var e,t,r,n,o,a=this;return s(this,function(s){switch(s.label){case 0:e=q++,t=[],r=null,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._getInternalBlockNumber(100+this.pollingInterval/2)];case 2:return r=s.sent(),[3,4];case 3:return n=s.sent(),this.emit("error",n),[2];case 4:if(this._setFastBlockNumber(r),this.emit("poll",e,r),r===this._lastBlockNumber)return this.emit("didPoll",e),[2];if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)b.warn("network block skew detected; skipping block events (emitted="+this._emitted.block+" blockNumber"+r+")"),this.emit("error",b.makeError("network block skew detected",v.Logger.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(o=this._emitted.block+1;o<=r;o++)this.emit("block",o);return this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(function(e){if("block"!==e){var t=a._emitted[e];"pending"!==t&&r-t>12&&delete a._emitted[e]}})),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach(function(e){switch(e.type){case"tx":var n=e.hash,o=a.getTransactionReceipt(n).then(function(e){return e&&null!=e.blockNumber?(a._emitted["t:"+n]=e.blockNumber,a.emit(n,e),null):null}).catch(function(e){a.emit("error",e)});t.push(o);break;case"filter":if(!e._inflight){e._inflight=!0,-2===e._lastBlockNumber&&(e._lastBlockNumber=r-1);var s=e.filter;s.fromBlock=e._lastBlockNumber+1,s.toBlock=r;var i=s.toBlock-a._maxFilterBlockRange;i>s.fromBlock&&(s.fromBlock=i),s.fromBlock<0&&(s.fromBlock=0);o=a.getLogs(s).then(function(t){e._inflight=!1,0!==t.length&&t.forEach(function(t){t.blockNumber>e._lastBlockNumber&&(e._lastBlockNumber=t.blockNumber),a._emitted["b:"+t.blockHash]=t.blockNumber,a._emitted["t:"+t.transactionHash]=t.blockNumber,a.emit(s,t)})}).catch(function(t){a.emit("error",t),e._inflight=!1});t.push(o)}}}),this._lastBlockNumber=r,Promise.all(t).then(function(){a.emit("didPoll",e)}).catch(function(e){a.emit("error",e)}),[2]}})})},t.prototype.resetEventsBlock=function(e){this._lastBlockNumber=e-1,this.polling&&this.poll()},Object.defineProperty(t.prototype,"network",{get:function(){return this._network},enumerable:!1,configurable:!0}),t.prototype.detectNetwork=function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,b.throwError("provider does not support network detection",v.Logger.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})]})})},t.prototype.getNetwork=function(){return a(this,void 0,void 0,function(){var e,t,r;return s(this,function(n){switch(n.label){case 0:return[4,this._ready()];case 1:return e=n.sent(),[4,this.detectNetwork()];case 2:return t=n.sent(),e.chainId===t.chainId?[3,5]:this.anyNetwork?(this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),[4,C(0)]):[3,4];case 3:return n.sent(),[2,this._network];case 4:throw r=b.makeError("underlying network changed",v.Logger.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t}),this.emit("error",r),r;case 5:return[2,e]}})})},Object.defineProperty(t.prototype,"blockNumber",{get:function(){var e=this;return this._getInternalBlockNumber(100+this.pollingInterval/2).then(function(t){e._setFastBlockNumber(t)},function(e){}),null!=this._fastBlockNumber?this._fastBlockNumber:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polling",{get:function(){return null!=this._poller},set:function(e){var t=this;e&&!this._poller?(this._poller=setInterval(function(){t.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(function(){t.poll(),t._bootstrapPoll=setTimeout(function(){t._poller||t.poll(),t._bootstrapPoll=null},t.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pollingInterval",{get:function(){return this._pollingInterval},set:function(e){var t=this;if("number"!=typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(function(){t.poll()},this._pollingInterval))},enumerable:!1,configurable:!0}),t.prototype._getFastBlockNumber=function(){var e=this,t=O();return t-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=t,this._fastBlockNumberPromise=this.getBlockNumber().then(function(t){return(null==e._fastBlockNumber||t>e._fastBlockNumber)&&(e._fastBlockNumber=t),e._fastBlockNumber})),this._fastBlockNumberPromise},t.prototype._setFastBlockNumber=function(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=O(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))},t.prototype.waitForTransaction=function(e,t,r){return a(this,void 0,void 0,function(){return s(this,function(n){return[2,this._waitForTransaction(e,null==t?1:t,r||0,null)]})})},t.prototype._waitForTransaction=function(e,t,r,n){return a(this,void 0,void 0,function(){var o,i=this;return s(this,function(c){switch(c.label){case 0:return[4,this.getTransactionReceipt(e)];case 1:return((o=c.sent())?o.confirmations:0)>=t?[2,o]:[2,new Promise(function(o,c){var u=[],l=!1,d=function(){return!!l||(l=!0,u.forEach(function(e){e()}),!1)},p=function(e){e.confirmations<t||d()||o(e)};if(i.on(e,p),u.push(function(){i.removeListener(e,p)}),n){var h=n.startBlock,f=null,g=function(r){return a(i,void 0,void 0,function(){var o=this;return s(this,function(i){switch(i.label){case 0:return l?[2]:[4,C(1e3)];case 1:return i.sent(),this.getTransactionCount(n.from).then(function(i){return a(o,void 0,void 0,function(){var o,a,u,p,m,E;return s(this,function(s){switch(s.label){case 0:return l?[2]:i<=n.nonce?(h=r,[3,9]):[3,1];case 1:return[4,this.getTransaction(e)];case 2:if((o=s.sent())&&null!=o.blockNumber)return[2];null==f&&(f=h-3)<n.startBlock&&(f=n.startBlock),s.label=3;case 3:return f<=r?l?[2]:[4,this.getBlockWithTransactions(f)]:[3,9];case 4:a=s.sent(),u=0,s.label=5;case 5:return u<a.transactions.length?(p=a.transactions[u]).hash===e?[2]:p.from!==n.from||p.nonce!==n.nonce?[3,7]:l?[2]:[4,this.waitForTransaction(p.hash,t)]:[3,8];case 6:return m=s.sent(),d()?[2]:(E="replaced",p.data===n.data&&p.to===n.to&&p.value.eq(n.value)?E="repriced":"0x"===p.data&&p.from===p.to&&p.value.isZero()&&(E="cancelled"),c(b.makeError("transaction was replaced",v.Logger.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===E||"cancelled"===E,reason:E,replacement:this._wrapTransaction(p),hash:e,receipt:m})),[2]);case 7:return u++,[3,5];case 8:return f++,[3,3];case 9:return l||this.once("block",g),[2]}})})},function(e){l||o.once("block",g)}),[2]}})})};if(l)return;i.once("block",g),u.push(function(){i.removeListener("block",g)})}if("number"==typeof r&&r>0){var m=setTimeout(function(){d()||c(b.makeError("timeout exceeded",v.Logger.errors.TIMEOUT,{timeout:r}))},r);m.unref&&m.unref(),u.push(function(){clearTimeout(m)})}})]}})})},t.prototype.getBlockNumber=function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,this._getInternalBlockNumber(0)]})})},t.prototype.getGasPrice=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return[4,this.getNetwork()];case 1:return t.sent(),[4,this.perform("getGasPrice",{})];case 2:e=t.sent();try{return[2,d.BigNumber.from(e)]}catch(t){return[2,b.throwError("bad result from backend",v.Logger.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})]}return[2]}})})},t.prototype.getBalance=function(e,t){return a(this,void 0,void 0,function(){var r,n;return s(this,function(o){switch(o.label){case 0:return[4,this.getNetwork()];case 1:return o.sent(),[4,(0,m.resolveProperties)({address:this._getAddress(e),blockTag:this._getBlockTag(t)})];case 2:return r=o.sent(),[4,this.perform("getBalance",r)];case 3:n=o.sent();try{return[2,d.BigNumber.from(n)]}catch(e){return[2,b.throwError("bad result from backend",v.Logger.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:e})]}return[2]}})})},t.prototype.getTransactionCount=function(e,t){return a(this,void 0,void 0,function(){var r,n;return s(this,function(o){switch(o.label){case 0:return[4,this.getNetwork()];case 1:return o.sent(),[4,(0,m.resolveProperties)({address:this._getAddress(e),blockTag:this._getBlockTag(t)})];case 2:return r=o.sent(),[4,this.perform("getTransactionCount",r)];case 3:n=o.sent();try{return[2,d.BigNumber.from(n).toNumber()]}catch(e){return[2,b.throwError("bad result from backend",v.Logger.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:e})]}return[2]}})})},t.prototype.getCode=function(e,t){return a(this,void 0,void 0,function(){var r,n;return s(this,function(o){switch(o.label){case 0:return[4,this.getNetwork()];case 1:return o.sent(),[4,(0,m.resolveProperties)({address:this._getAddress(e),blockTag:this._getBlockTag(t)})];case 2:return r=o.sent(),[4,this.perform("getCode",r)];case 3:n=o.sent();try{return[2,(0,p.hexlify)(n)]}catch(e){return[2,b.throwError("bad result from backend",v.Logger.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:e})]}return[2]}})})},t.prototype.getStorageAt=function(e,t,r){return a(this,void 0,void 0,function(){var n,o;return s(this,function(a){switch(a.label){case 0:return[4,this.getNetwork()];case 1:return a.sent(),[4,(0,m.resolveProperties)({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(function(e){return(0,p.hexValue)(e)})})];case 2:return n=a.sent(),[4,this.perform("getStorageAt",n)];case 3:o=a.sent();try{return[2,(0,p.hexlify)(o)]}catch(e){return[2,b.throwError("bad result from backend",v.Logger.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:o,error:e})]}return[2]}})})},t.prototype._wrapTransaction=function(e,t,r){var n=this;if(null!=t&&32!==(0,p.hexDataLength)(t))throw new Error("invalid response - sendTransaction");var o=e;return null!=t&&e.hash!==t&&b.throwError("Transaction hash mismatch from Provider.sendTransaction.",v.Logger.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),o.wait=function(t,o){return a(n,void 0,void 0,function(){var n,a;return s(this,function(s){switch(s.label){case 0:return null==t&&(t=1),null==o&&(o=0),n=undefined,0!==t&&null!=r&&(n={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r}),[4,this._waitForTransaction(e.hash,t,o,n)];case 1:return null==(a=s.sent())&&0===t?[2,null]:(this._emitted["t:"+e.hash]=a.blockNumber,0===a.status&&b.throwError("transaction failed",v.Logger.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:a}),[2,a])}})})},o},t.prototype.sendTransaction=function(e){return a(this,void 0,void 0,function(){var t,r,n,o,a;return s(this,function(s){switch(s.label){case 0:return[4,this.getNetwork()];case 1:return s.sent(),[4,Promise.resolve(e).then(function(e){return(0,p.hexlify)(e)})];case 2:return t=s.sent(),null==(r=this.formatter.transaction(e)).confirmations&&(r.confirmations=0),[4,this._getInternalBlockNumber(100+2*this.pollingInterval)];case 3:n=s.sent(),s.label=4;case 4:return s.trys.push([4,6,,7]),[4,this.perform("sendTransaction",{signedTransaction:t})];case 5:return o=s.sent(),[2,this._wrapTransaction(r,o,n)];case 6:throw(a=s.sent()).transaction=r,a.transactionHash=r.hash,a;case 7:return[2]}})})},t.prototype._getTransactionRequest=function(e){return a(this,void 0,void 0,function(){var t,r,n,o,a=this;return s(this,function(s){switch(s.label){case 0:return[4,e];case 1:return t=s.sent(),r={},["from","to"].forEach(function(e){null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(function(e){return e?a._getAddress(e):null}))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(function(e){null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(function(e){return e?d.BigNumber.from(e):null}))}),["type"].forEach(function(e){null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(function(e){return null!=e?e:null}))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(function(e){null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(function(e){return e?(0,p.hexlify)(e):null}))}),o=(n=this.formatter).transactionRequest,[4,(0,m.resolveProperties)(r)];case 2:return[2,o.apply(n,[s.sent()])]}})})},t.prototype._getFilter=function(e){return a(this,void 0,void 0,function(){var t,r,n,o=this;return s(this,function(a){switch(a.label){case 0:return[4,e];case 1:return e=a.sent(),t={},null!=e.address&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(function(r){null!=e[r]&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(function(r){null!=e[r]&&(t[r]=o._getBlockTag(e[r]))}),n=(r=this.formatter).filter,[4,(0,m.resolveProperties)(t)];case 2:return[2,n.apply(r,[a.sent()])]}})})},t.prototype._call=function(e,t,r){return a(this,void 0,void 0,function(){var n,o,a,i,c,u,l,h,f,g,m,E,_,T,S,N;return s(this,function(s){switch(s.label){case 0:return r>=10&&b.throwError("CCIP read exceeded maximum redirections",v.Logger.errors.SERVER_ERROR,{redirects:r,transaction:e}),n=e.to,[4,this.perform("call",{transaction:e,blockTag:t})];case 1:if(o=s.sent(),!(r>=0&&"latest"===t&&null!=n&&"0x556f1830"===o.substring(0,10)&&(0,p.hexDataLength)(o)%32==4))return[3,5];s.label=2;case 2:for(s.trys.push([2,4,,5]),a=(0,p.hexDataSlice)(o,4),i=(0,p.hexDataSlice)(a,0,32),d.BigNumber.from(i).eq(n)||b.throwError("CCIP Read sender did not match",v.Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o}),c=[],u=d.BigNumber.from((0,p.hexDataSlice)(a,32,64)).toNumber(),l=d.BigNumber.from((0,p.hexDataSlice)(a,u,u+32)).toNumber(),h=(0,p.hexDataSlice)(a,u+32),f=0;f<l;f++)null==(g=x(h,32*f))&&b.throwError("CCIP Read contained corrupt URL string",v.Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o}),c.push(g);return m=j(a,64),d.BigNumber.from((0,p.hexDataSlice)(a,100,128)).isZero()||b.throwError("CCIP Read callback selector included junk",v.Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o}),E=(0,p.hexDataSlice)(a,96,100),_=j(a,128),[4,this.ccipReadFetch(e,m,c)];case 3:return null==(T=s.sent())&&b.throwError("CCIP Read disabled or provided no URLs",v.Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o}),S={to:n,data:(0,p.hexConcat)([E,G([T,_])])},[2,this._call(S,t,r+1)];case 4:if((N=s.sent()).code===v.Logger.errors.SERVER_ERROR)throw N;return[3,5];case 5:try{return[2,(0,p.hexlify)(o)]}catch(r){return[2,b.throwError("bad result from backend",v.Logger.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:o,error:r})]}return[2]}})})},t.prototype.call=function(e,t){return a(this,void 0,void 0,function(){var r;return s(this,function(n){switch(n.label){case 0:return[4,this.getNetwork()];case 1:return n.sent(),[4,(0,m.resolveProperties)({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)})];case 2:return r=n.sent(),[2,this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)]}})})},t.prototype.estimateGas=function(e){return a(this,void 0,void 0,function(){var t,r;return s(this,function(n){switch(n.label){case 0:return[4,this.getNetwork()];case 1:return n.sent(),[4,(0,m.resolveProperties)({transaction:this._getTransactionRequest(e)})];case 2:return t=n.sent(),[4,this.perform("estimateGas",t)];case 3:r=n.sent();try{return[2,d.BigNumber.from(r)]}catch(e){return[2,b.throwError("bad result from backend",v.Logger.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:e})]}return[2]}})})},t.prototype._getAddress=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(r){switch(r.label){case 0:return[4,e];case 1:return"string"!=typeof(e=r.sent())&&b.throwArgumentError("invalid address or ENS name","name",e),[4,this.resolveName(e)];case 2:return null==(t=r.sent())&&b.throwError("ENS name not configured",v.Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName("+JSON.stringify(e)+")"}),[2,t]}})})},t.prototype._getBlock=function(e,t){return a(this,void 0,void 0,function(){var r,n,o,i=this;return s(this,function(c){switch(c.label){case 0:return[4,this.getNetwork()];case 1:return c.sent(),[4,e];case 2:return e=c.sent(),r=-128,n={includeTransactions:!!t},(0,p.isHexString)(e,32)?(n.blockHash=e,[3,6]):[3,3];case 3:return c.trys.push([3,5,,6]),o=n,[4,this._getBlockTag(e)];case 4:return o.blockTag=c.sent(),(0,p.isHexString)(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16)),[3,6];case 5:return c.sent(),b.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e),[3,6];case 6:return[2,(0,T.poll)(function(){return a(i,void 0,void 0,function(){var e,o,a,i,c,u,l=this;return s(this,function(s){switch(s.label){case 0:return[4,this.perform("getBlock",n)];case 1:if(null==(e=s.sent()))return null!=n.blockHash&&null==this._emitted["b:"+n.blockHash]||null!=n.blockTag&&r>this._emitted.block?[2,null]:[2,undefined];if(!t)return[3,8];o=null,a=0,s.label=2;case 2:return a<e.transactions.length?null!=(i=e.transactions[a]).blockNumber?[3,3]:(i.confirmations=0,[3,6]):[3,7];case 3:return null!=i.confirmations?[3,6]:null!=o?[3,5]:[4,this._getInternalBlockNumber(100+2*this.pollingInterval)];case 4:o=s.sent(),s.label=5;case 5:(c=o-i.blockNumber+1)<=0&&(c=1),i.confirmations=c,s.label=6;case 6:return a++,[3,2];case 7:return(u=this.formatter.blockWithTransactions(e)).transactions=u.transactions.map(function(e){return l._wrapTransaction(e)}),[2,u];case 8:return[2,this.formatter.block(e)]}})})},{oncePoll:this})]}})})},t.prototype.getBlock=function(e){return this._getBlock(e,!1)},t.prototype.getBlockWithTransactions=function(e){return this._getBlock(e,!0)},t.prototype.getTransaction=function(e){return a(this,void 0,void 0,function(){var t,r=this;return s(this,function(n){switch(n.label){case 0:return[4,this.getNetwork()];case 1:return n.sent(),[4,e];case 2:return e=n.sent(),t={transactionHash:this.formatter.hash(e,!0)},[2,(0,T.poll)(function(){return a(r,void 0,void 0,function(){var r,n,o,a;return s(this,function(s){switch(s.label){case 0:return[4,this.perform("getTransaction",t)];case 1:return null==(r=s.sent())?null==this._emitted["t:"+e]?[2,null]:[2,undefined]:null!=(n=this.formatter.transactionResponse(r)).blockNumber?[3,2]:(n.confirmations=0,[3,4]);case 2:return null!=n.confirmations?[3,4]:[4,this._getInternalBlockNumber(100+2*this.pollingInterval)];case 3:o=s.sent(),(a=o-n.blockNumber+1)<=0&&(a=1),n.confirmations=a,s.label=4;case 4:return[2,this._wrapTransaction(n)]}})})},{oncePoll:this})]}})})},t.prototype.getTransactionReceipt=function(e){return a(this,void 0,void 0,function(){var t,r=this;return s(this,function(n){switch(n.label){case 0:return[4,this.getNetwork()];case 1:return n.sent(),[4,e];case 2:return e=n.sent(),t={transactionHash:this.formatter.hash(e,!0)},[2,(0,T.poll)(function(){return a(r,void 0,void 0,function(){var r,n,o,a;return s(this,function(s){switch(s.label){case 0:return[4,this.perform("getTransactionReceipt",t)];case 1:return null==(r=s.sent())?null==this._emitted["t:"+e]?[2,null]:[2,undefined]:null==r.blockHash?[2,undefined]:null!=(n=this.formatter.receipt(r)).blockNumber?[3,2]:(n.confirmations=0,[3,4]);case 2:return null!=n.confirmations?[3,4]:[4,this._getInternalBlockNumber(100+2*this.pollingInterval)];case 3:o=s.sent(),(a=o-n.blockNumber+1)<=0&&(a=1),n.confirmations=a,s.label=4;case 4:return[2,n]}})})},{oncePoll:this})]}})})},t.prototype.getLogs=function(e){return a(this,void 0,void 0,function(){var t,r;return s(this,function(n){switch(n.label){case 0:return[4,this.getNetwork()];case 1:return n.sent(),[4,(0,m.resolveProperties)({filter:this._getFilter(e)})];case 2:return t=n.sent(),[4,this.perform("getLogs",t)];case 3:return(r=n.sent()).forEach(function(e){null==e.removed&&(e.removed=!1)}),[2,A.Formatter.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)]}})})},t.prototype.getEtherPrice=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.getNetwork()];case 1:return e.sent(),[2,this.perform("getEtherPrice",{})]}})})},t.prototype._getBlockTag=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(r){switch(r.label){case 0:return[4,e];case 1:return"number"==typeof(e=r.sent())&&e<0?(e%1&&b.throwArgumentError("invalid BlockTag","blockTag",e),[4,this._getInternalBlockNumber(100+2*this.pollingInterval)]):[3,3];case 2:return t=r.sent(),(t+=e)<0&&(t=0),[2,this.formatter.blockTag(t)];case 3:return[2,this.formatter.blockTag(e)]}})})},t.prototype.getResolver=function(e){return a(this,void 0,void 0,function(){var t,r,n,o;return s(this,function(a){switch(a.label){case 0:t=e,a.label=1;case 1:return""===t||"."===t||"eth"!==e&&"eth"===t?[2,null]:[4,this._getResolver(t,"getResolver")];case 2:return null==(r=a.sent())?[3,5]:(n=new W(this,r,e),(o=t!==e)?[4,n.supportsWildcard()]:[3,4]);case 3:o=!a.sent(),a.label=4;case 4:return o?[2,null]:[2,n];case 5:return t=t.split(".").slice(1).join("."),[3,1];case 6:return[2]}})})},t.prototype._getResolver=function(e,t){return a(this,void 0,void 0,function(){var r,n;return s(this,function(o){switch(o.label){case 0:return null==t&&(t="ENS"),[4,this.getNetwork()];case 1:(r=o.sent()).ensAddress||b.throwError("network does not support ENS",v.Logger.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name}),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.call({to:r.ensAddress,data:"0x0178b8bf"+(0,f.namehash)(e).substring(2)})];case 3:return n=o.sent(),[2,this.formatter.callAddress(n)];case 4:return o.sent(),[3,5];case 5:return[2,null]}})})},t.prototype.resolveName=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(r){switch(r.label){case 0:return[4,e];case 1:e=r.sent();try{return[2,Promise.resolve(this.formatter.address(e))]}catch(t){if((0,p.isHexString)(e))throw t}return"string"!=typeof e&&b.throwArgumentError("invalid ENS name","name",e),[4,this.getResolver(e)];case 2:return(t=r.sent())?[4,t.getAddress()]:[2,null];case 3:return[2,r.sent()]}})})},t.prototype.lookupAddress=function(e){return a(this,void 0,void 0,function(){var t,r,n,o;return s(this,function(a){switch(a.label){case 0:return[4,e];case 1:return e=a.sent(),e=this.formatter.address(e),t=e.substring(2).toLowerCase()+".addr.reverse",[4,this._getResolver(t,"lookupAddress")];case 2:return null==(r=a.sent())?[2,null]:(o=x,[4,this.call({to:r,data:"0x691f3431"+(0,f.namehash)(t).substring(2)})]);case 3:return n=o.apply(void 0,[a.sent(),0]),[4,this.resolveName(n)];case 4:return a.sent()!=e?[2,null]:[2,n]}})})},t.prototype.getAvatar=function(e){return a(this,void 0,void 0,function(){var t,r,n,o,a,i,c,u,l,d;return s(this,function(s){switch(s.label){case 0:return t=null,(0,p.isHexString)(e)?(r=this.formatter.address(e),n=r.substring(2).toLowerCase()+".addr.reverse",[4,this._getResolver(n,"getAvatar")]):[3,10];case 1:if(!(o=s.sent()))return[2,null];t=new W(this,o,n),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,t.getAvatar()];case 3:return(a=s.sent())?[2,a.url]:[3,5];case 4:if((i=s.sent()).code!==v.Logger.errors.CALL_EXCEPTION)throw i;return[3,5];case 5:return s.trys.push([5,8,,9]),u=x,[4,this.call({to:o,data:"0x691f3431"+(0,f.namehash)(n).substring(2)})];case 6:return c=u.apply(void 0,[s.sent(),0]),[4,this.getResolver(c)];case 7:return t=s.sent(),[3,9];case 8:if((l=s.sent()).code!==v.Logger.errors.CALL_EXCEPTION)throw l;return[2,null];case 9:return[3,12];case 10:return[4,this.getResolver(e)];case 11:if(!(t=s.sent()))return[2,null];s.label=12;case 12:return[4,t.getAvatar()];case 13:return null==(d=s.sent())?[2,null]:[2,d.url]}})})},t.prototype.perform=function(e,t){return b.throwError(e+" not implemented",v.Logger.errors.NOT_IMPLEMENTED,{operation:e})},t.prototype._startEvent=function(e){this.polling=this._events.filter(function(e){return e.pollable()}).length>0},t.prototype._stopEvent=function(e){this.polling=this._events.filter(function(e){return e.pollable()}).length>0},t.prototype._addEventListener=function(e,t,r){var n=new P(k(e),t,r);return this._events.push(n),this._startEvent(n),this},t.prototype.on=function(e,t){return this._addEventListener(e,t,!1)},t.prototype.once=function(e,t){return this._addEventListener(e,t,!0)},t.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=!1,a=[],s=k(e);return this._events=this._events.filter(function(e){return e.tag!==s||(setTimeout(function(){e.listener.apply(t,r)},0),o=!0,!e.once||(a.push(e),!1))}),a.forEach(function(e){t._stopEvent(e)}),o},t.prototype.listenerCount=function(e){if(!e)return this._events.length;var t=k(e);return this._events.filter(function(e){return e.tag===t}).length},t.prototype.listeners=function(e){if(null==e)return this._events.map(function(e){return e.listener});var t=k(e);return this._events.filter(function(e){return e.tag===t}).map(function(e){return e.listener})},t.prototype.off=function(e,t){var r=this;if(null==t)return this.removeAllListeners(e);var n=[],o=!1,a=k(e);return this._events=this._events.filter(function(e){return e.tag!==a||e.listener!=t||(!!o||(o=!0,n.push(e),!1))}),n.forEach(function(e){r._stopEvent(e)}),this},t.prototype.removeAllListeners=function(e){var t=this,r=[];if(null==e)r=this._events,this._events=[];else{var n=k(e);this._events=this._events.filter(function(e){return e.tag!==n||(r.push(e),!1)})}return r.forEach(function(e){t._stopEvent(e)}),this},t}(c.Provider);r.BaseProvider=V}}},{package:"@ethersproject/providers",file:"node_modules/@ethersproject/providers/lib/base-provider.js"}],[809,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.IpcProvider=void 0;r.IpcProvider=null}}},{package:"@ethersproject/providers",file:"node_modules/@ethersproject/providers/lib/browser-ipc-provider.js"}],[810,{"./_version":805,"@ethersproject/logger":798},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.WebSocket=void 0;var n=e("@ethersproject/logger"),o=e("./_version"),a=null;r.WebSocket=a;try{if(r.WebSocket=a=WebSocket,null==a)throw new Error("inject please")}catch(e){var s=new n.Logger(o.version);r.WebSocket=a=function(){s.throwError("WebSockets not supported in this environment",n.Logger.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}}}},{package:"@ethersproject/providers",file:"node_modules/@ethersproject/providers/lib/browser-ws.js"}],[811,{"./_version":805,"./url-json-rpc-provider":822,"@ethersproject/logger":798},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function i(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,i)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.CloudflareProvider=void 0;var i=e("./url-json-rpc-provider"),c=e("@ethersproject/logger"),u=e("./_version"),l=new c.Logger(u.version),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.getApiKey=function(e){return null!=e&&l.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null},t.getUrl=function(e,t){var r=null;if("homestead"===e.name)r="https://cloudflare-eth.com/";else l.throwArgumentError("unsupported network","network",arguments[0]);return r},t.prototype.perform=function(t,r){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return"getBlockNumber"!==t?[3,2]:[4,e.prototype.perform.call(this,"getBlock",{blockTag:"latest"})];case 1:return[2,n.sent().number];case 2:return[2,e.prototype.perform.call(this,t,r)]}})})},t}(i.UrlJsonRpcProvider);r.CloudflareProvider=d}}},{package:"@ethersproject/providers",file:"node_modules/@ethersproject/providers/lib/cloudflare-provider.js"}],[812,{"./_version":805,"./base-provider":808,"./formatter":814,"@ethersproject/bytes":770,"@ethersproject/logger":798,"@ethersproject/properties":804,"@ethersproject/transactions":847,"@ethersproject/web":854},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function i(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,i)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.EtherscanProvider=void 0;var i=e("@ethersproject/bytes"),c=e("@ethersproject/properties"),u=e("@ethersproject/transactions"),l=e("@ethersproject/web"),d=e("./formatter"),p=e("@ethersproject/logger"),h=e("./_version"),f=new p.Logger(h.version);function g(e){var t={};for(var r in e)if(null!=e[r]){var n=e[r];"type"===r&&0===n||(n={type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?(0,i.hexValue)((0,i.hexlify)(n)):"accessList"===r?"["+(0,u.accessListify)(n).map(function(e){return'{address:"'+e.address+'",storageKeys:["'+e.storageKeys.join('","')+'"]}'}).join(",")+"]":(0,i.hexlify)(n),t[r]=n)}return t}function m(e){if(0==e.status&&("No records found"===e.message||"No transactions found"===e.message))return e.result;if(1!=e.status||"string"!=typeof e.message||!e.message.match(/^OK/)){var t=new Error("invalid response");throw t.result=JSON.stringify(e),(e.result||"").toLowerCase().indexOf("rate limit")>=0&&(t.throttleRetry=!0),t}return e.result}function E(e){if(e&&0==e.status&&"NOTOK"==e.message&&(e.result||"").toLowerCase().indexOf("rate limit")>=0)throw(t=new Error("throttled response")).result=JSON.stringify(e),t.throttleRetry=!0,t;if("2.0"!=e.jsonrpc)throw(t=new Error("invalid response")).result=JSON.stringify(e),t;if(e.error){var t=new Error(e.error.message||"unknown error");throw e.error.code&&(t.code=e.error.code),e.error.data&&(t.data=e.error.data),t}return e.result}function _(e){if("pending"===e)throw new Error("pending not supported");return"latest"===e?e:parseInt(e.substring(2),16)}function T(e,t,r){if("call"===e&&t.code===p.Logger.errors.SERVER_ERROR){var n=t.error;if(n&&(n.message.match(/reverted/i)||n.message.match(/VM execution error/i))){var o=n.data;if(o&&(o="0x"+o.replace(/^.*0x/i,"")),(0,i.isHexString)(o))return o;f.throwError("missing revert data in call exception",p.Logger.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}var a=t.message;throw t.code===p.Logger.errors.SERVER_ERROR&&(t.error&&"string"==typeof t.error.message?a=t.error.message:"string"==typeof t.body?a=t.body:"string"==typeof t.responseText&&(a=t.responseText)),(a=(a||"").toLowerCase()).match(/insufficient funds/)&&f.throwError("insufficient funds for intrinsic transaction cost",p.Logger.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:r}),a.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&f.throwError("nonce has already been used",p.Logger.errors.NONCE_EXPIRED,{error:t,method:e,transaction:r}),a.match(/another transaction with same nonce/)&&f.throwError("replacement fee too low",p.Logger.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:r}),a.match(/execution failed due to an exception|execution reverted/)&&f.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",p.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:r}),t}var S=function(e){function t(t,r){var n=e.call(this,t)||this;return(0,c.defineReadOnly)(n,"baseUrl",n.getBaseUrl()),(0,c.defineReadOnly)(n,"apiKey",r||null),n}return o(t,e),t.prototype.getBaseUrl=function(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return f.throwArgumentError("unsupported network","network",this.network.name)},t.prototype.getUrl=function(e,t){var r=Object.keys(t).reduce(function(e,r){var n=t[r];return null!=n&&(e+="&"+r+"="+n),e},""),n=this.apiKey?"&apikey="+this.apiKey:"";return this.baseUrl+"/api?module="+e+r+n},t.prototype.getPostUrl=function(){return this.baseUrl+"/api"},t.prototype.getPostData=function(e,t){return t.module=e,t.apikey=this.apiKey,t},t.prototype.fetch=function(e,t,r){return a(this,void 0,void 0,function(){var n,o,a,i,u,p,h=this;return s(this,function(s){switch(s.label){case 0:return n=r?this.getPostUrl():this.getUrl(e,t),o=r?this.getPostData(e,t):null,a="proxy"===e?E:m,this.emit("debug",{action:"request",request:n,provider:this}),i={url:n,throttleSlotInterval:1e3,throttleCallback:function(e,t){return h.isCommunityResource()&&(0,d.showThrottleMessage)(),Promise.resolve(!0)}},u=null,o&&(i.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},u=Object.keys(o).map(function(e){return e+"="+o[e]}).join("&")),[4,(0,l.fetchJson)(i,u,a||E)];case 1:return p=s.sent(),this.emit("debug",{action:"response",request:n,response:(0,c.deepCopy)(p),provider:this}),[2,p]}})})},t.prototype.detectNetwork=function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,this.network]})})},t.prototype.perform=function(t,r){return a(this,void 0,void 0,function(){var n,o,a,i,c,u,l,d,h;return s(this,function(s){switch(s.label){case 0:switch(t){case"getBlockNumber":return[3,1];case"getGasPrice":return[3,2];case"getBalance":return[3,3];case"getTransactionCount":return[3,4];case"getCode":return[3,5];case"getStorageAt":return[3,6];case"sendTransaction":return[3,7];case"getBlock":return[3,8];case"getTransaction":return[3,9];case"getTransactionReceipt":return[3,10];case"call":return[3,11];case"estimateGas":return[3,15];case"getLogs":return[3,19];case"getEtherPrice":return[3,26]}return[3,28];case 1:return[2,this.fetch("proxy",{action:"eth_blockNumber"})];case 2:return[2,this.fetch("proxy",{action:"eth_gasPrice"})];case 3:return[2,this.fetch("account",{action:"balance",address:r.address,tag:r.blockTag})];case 4:return[2,this.fetch("proxy",{action:"eth_getTransactionCount",address:r.address,tag:r.blockTag})];case 5:return[2,this.fetch("proxy",{action:"eth_getCode",address:r.address,tag:r.blockTag})];case 6:return[2,this.fetch("proxy",{action:"eth_getStorageAt",address:r.address,position:r.position,tag:r.blockTag})];case 7:return[2,this.fetch("proxy",{action:"eth_sendRawTransaction",hex:r.signedTransaction},!0).catch(function(e){return T("sendTransaction",e,r.signedTransaction)})];case 8:if(r.blockTag)return[2,this.fetch("proxy",{action:"eth_getBlockByNumber",tag:r.blockTag,boolean:r.includeTransactions?"true":"false"})];throw new Error("getBlock by blockHash not implemented");case 9:return[2,this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:r.transactionHash})];case 10:return[2,this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:r.transactionHash})];case 11:if("latest"!==r.blockTag)throw new Error("EtherscanProvider does not support blockTag for call");(n=g(r.transaction)).module="proxy",n.action="eth_call",s.label=12;case 12:return s.trys.push([12,14,,15]),[4,this.fetch("proxy",n,!0)];case 13:return[2,s.sent()];case 14:return[2,T("call",s.sent(),r.transaction)];case 15:(n=g(r.transaction)).module="proxy",n.action="eth_estimateGas",s.label=16;case 16:return s.trys.push([16,18,,19]),[4,this.fetch("proxy",n,!0)];case 17:return[2,s.sent()];case 18:return[2,T("estimateGas",s.sent(),r.transaction)];case 19:return o={action:"getLogs"},r.filter.fromBlock&&(o.fromBlock=_(r.filter.fromBlock)),r.filter.toBlock&&(o.toBlock=_(r.filter.toBlock)),r.filter.address&&(o.address=r.filter.address),r.filter.topics&&r.filter.topics.length>0&&(r.filter.topics.length>1&&f.throwError("unsupported topic count",p.Logger.errors.UNSUPPORTED_OPERATION,{topics:r.filter.topics}),1===r.filter.topics.length&&("string"==typeof(a=r.filter.topics[0])&&66===a.length||f.throwError("unsupported topic format",p.Logger.errors.UNSUPPORTED_OPERATION,{topic0:a}),o.topic0=a)),[4,this.fetch("logs",o)];case 20:i=s.sent(),c={},u=0,s.label=21;case 21:return u<i.length?null!=(l=i[u]).blockHash?[3,24]:null!=c[l.blockNumber]?[3,23]:[4,this.getBlock(l.blockNumber)]:[3,25];case 22:(d=s.sent())&&(c[l.blockNumber]=d.hash),s.label=23;case 23:l.blockHash=c[l.blockNumber],s.label=24;case 24:return u++,[3,21];case 25:return[2,i];case 26:return"homestead"!==this.network.name?[2,0]:(h=parseFloat,[4,this.fetch("stats",{action:"ethprice"})]);case 27:return[2,h.apply(void 0,[s.sent().ethusd])];case 28:return[3,29];case 29:return[2,e.prototype.perform.call(this,t,r)]}})})},t.prototype.getHistory=function(e,t,r){return a(this,void 0,void 0,function(){var n,o,a=this;return s(this,function(s){switch(s.label){case 0:return o={action:"txlist"},[4,this.resolveName(e)];case 1:return o.address=s.sent(),o.startblock=null==t?0:t,o.endblock=null==r?99999999:r,o.sort="asc",n=o,[4,this.fetch("account",n)];case 2:return[2,s.sent().map(function(e){["contractAddress","to"].forEach(function(t){""==e[t]&&delete e[t]}),null==e.creates&&null!=e.contractAddress&&(e.creates=e.contractAddress);var t=a.formatter.transactionResponse(e);return e.timeStamp&&(t.timestamp=parseInt(e.timeStamp)),t})]}})})},t.prototype.isCommunityResource=function(){return null==this.apiKey},t}(e("./base-provider").BaseProvider);r.EtherscanProvider=S}}},{package:"@ethersproject/providers",file:"node_modules/@ethersproject/providers/lib/etherscan-provider.js"}],[813,{"./_version":805,"./base-provider":808,"./formatter":814,"@ethersproject/abstract-provider":757,"@ethersproject/bignumber":768,"@ethersproject/bytes":770,"@ethersproject/logger":798,"@ethersproject/properties":804,"@ethersproject/random":828,"@ethersproject/web":854},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function i(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,i)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.FallbackProvider=void 0;var i=e("@ethersproject/abstract-provider"),c=e("@ethersproject/bignumber"),u=e("@ethersproject/bytes"),l=e("@ethersproject/properties"),d=e("@ethersproject/random"),p=e("@ethersproject/web"),h=e("./base-provider"),f=e("./formatter"),g=e("@ethersproject/logger"),m=e("./_version"),E=new g.Logger(m.version);function _(){return(new Date).getTime()}function T(e){for(var t=null,r=0;r<e.length;r++){var n=e[r];if(null==n)return null;t?t.name===n.name&&t.chainId===n.chainId&&(t.ensAddress===n.ensAddress||null==t.ensAddress&&null==n.ensAddress)||E.throwArgumentError("provider mismatch","networks",e):t=n}return t}function S(e,t){e=e.slice().sort();var r=Math.floor(e.length/2);if(e.length%2)return e[r];var n=e[r-1],o=e[r];return null!=t&&Math.abs(n-o)>t?null:(n+o)/2}function v(e){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return JSON.stringify(e);if("string"==typeof e)return e;if(c.BigNumber.isBigNumber(e))return e.toString();if(Array.isArray(e))return JSON.stringify(e.map(function(e){return v(e)}));if("object"==typeof e){var t=Object.keys(e);return t.sort(),"{"+t.map(function(t){var r=e[t];return r="function"==typeof r?"[function]":v(r),JSON.stringify(t)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof e)}var N=1;function b(e){var t=null,r=null,n=new Promise(function(n){t=function(){r&&(clearTimeout(r),r=null),n()},r=setTimeout(t,e)});return{cancel:t,getPromise:function(){return n},wait:function(e){return n=n.then(e)}}}var A=[g.Logger.errors.CALL_EXCEPTION,g.Logger.errors.INSUFFICIENT_FUNDS,g.Logger.errors.NONCE_EXPIRED,g.Logger.errors.REPLACEMENT_UNDERPRICED,g.Logger.errors.UNPREDICTABLE_GAS_LIMIT],I=["address","args","errorArgs","errorSignature","method","transaction"];function y(e,t){var r={weight:e.weight};return Object.defineProperty(r,"provider",{get:function(){return e.provider}}),e.start&&(r.start=e.start),t&&(r.duration=t-e.start),e.done&&(e.error?r.error=e.error:r.result=e.result||null),r}function k(e,t,r){var n=v;switch(t){case"getBlockNumber":return function(t){var r=t.map(function(e){return e.result}),n=S(t.map(function(e){return e.result}),2);return null==n?undefined:(n=Math.ceil(n),r.indexOf(n+1)>=0&&n++,n>=e._highestBlockNumber&&(e._highestBlockNumber=n),e._highestBlockNumber)};case"getGasPrice":return function(e){var t=e.map(function(e){return e.result});return t.sort(),t[Math.floor(t.length/2)]};case"getEtherPrice":return function(e){return S(e.map(function(e){return e.result}))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(e){return null==e?null:((e=(0,l.shallowCopy)(e)).confirmations=-1,v(e))};break;case"getBlock":n=r.includeTransactions?function(e){return null==e?null:((e=(0,l.shallowCopy)(e)).transactions=e.transactions.map(function(e){return(e=(0,l.shallowCopy)(e)).confirmations=-1,e}),v(e))}:function(e){return null==e?null:v(e)};break;default:throw new Error("unknown method: "+t)}return function(e,t){return function(r){var n={};r.forEach(function(t){var r=e(t.result);n[r]||(n[r]={count:0,result:t.result}),n[r].count++});for(var o=Object.keys(n),a=0;a<o.length;a++){var s=n[o[a]];if(s.count>=t)return s.result}return undefined}}(n,e.quorum)}function O(e,t){return a(this,void 0,void 0,function(){var r;return s(this,function(n){return null!=(r=e.provider).blockNumber&&r.blockNumber>=t||-1===t?[2,r]:[2,(0,p.poll)(function(){return new Promise(function(n,o){setTimeout(function(){return r.blockNumber>=t?n(r):e.cancelled?n(null):n(undefined)},0)})},{oncePoll:r})]})})}var C=function(e){function t(t,r){var n=this;0===t.length&&E.throwArgumentError("missing providers","providers",t);var o=t.map(function(e,t){if(i.Provider.isProvider(e)){var r=(0,f.isCommunityResource)(e)?2e3:750;return Object.freeze({provider:e,weight:1,stallTimeout:r,priority:1})}var n=(0,l.shallowCopy)(e);null==n.priority&&(n.priority=1),null==n.stallTimeout&&(n.stallTimeout=(0,f.isCommunityResource)(e)?2e3:750),null==n.weight&&(n.weight=1);var o=n.weight;return(o%1||o>512||o<1)&&E.throwArgumentError("invalid weight; must be integer in [1, 512]","providers["+t+"].weight",o),Object.freeze(n)}),a=o.reduce(function(e,t){return e+t.weight},0);null==r?r=a/2:r>a&&E.throwArgumentError("quorum will always fail; larger than total weight","quorum",r);var s=T(o.map(function(e){return e.provider.network}));return null==s&&(s=new Promise(function(e,t){setTimeout(function(){n.detectNetwork().then(e,t)},0)})),n=e.call(this,s)||this,(0,l.defineReadOnly)(n,"providerConfigs",Object.freeze(o)),(0,l.defineReadOnly)(n,"quorum",r),n._highestBlockNumber=-1,n}return o(t,e),t.prototype.detectNetwork=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,Promise.all(this.providerConfigs.map(function(e){return e.provider.getNetwork()}))];case 1:return[2,T(e.sent())]}})})},t.prototype.perform=function(e,t){return a(this,void 0,void 0,function(){var r,n,o,i,c,p,h,f,m,T,S,v=this;return s(this,function(C){switch(C.label){case 0:return"sendTransaction"!==e?[3,2]:[4,Promise.all(this.providerConfigs.map(function(e){return e.provider.sendTransaction(t.signedTransaction).then(function(e){return e.hash},function(e){return e})}))];case 1:for(r=C.sent(),n=0;n<r.length;n++)if("string"==typeof(o=r[n]))return[2,o];throw r[0];case 2:return-1!==this._highestBlockNumber||"getBlockNumber"===e?[3,4]:[4,this.getBlockNumber()];case 3:C.sent(),C.label=4;case 4:i=k(this,e,t),(c=(0,d.shuffled)(this.providerConfigs.map(l.shallowCopy))).sort(function(e,t){return e.priority-t.priority}),p=this._highestBlockNumber,h=0,f=!0,m=function(){var r,n,o,d,m,S,k;return s(this,function(C){switch(C.label){case 0:for(r=_(),n=c.filter(function(e){return e.runner&&r-e.start<e.stallTimeout}).reduce(function(e,t){return e+t.weight},0),o=function(){var r=c[h++],o=N++;r.start=_(),r.staller=b(r.stallTimeout),r.staller.wait(function(){r.staller=null}),r.runner=function(e,t,r,n){return a(this,void 0,void 0,function(){var o,a;return s(this,function(s){switch(s.label){case 0:switch(o=e.provider,r){case"getBlockNumber":case"getGasPrice":return[3,1];case"getEtherPrice":return[3,2];case"getBalance":case"getTransactionCount":case"getCode":return[3,3];case"getStorageAt":return[3,6];case"getBlock":return[3,9];case"call":case"estimateGas":return[3,12];case"getTransaction":case"getTransactionReceipt":return[3,15];case"getLogs":return[3,16]}return[3,19];case 1:return[2,o[r]()];case 2:return o.getEtherPrice?[2,o.getEtherPrice()]:[3,19];case 3:return n.blockTag&&(0,u.isHexString)(n.blockTag)?[4,O(e,t)]:[3,5];case 4:o=s.sent(),s.label=5;case 5:return[2,o[r](n.address,n.blockTag||"latest")];case 6:return n.blockTag&&(0,u.isHexString)(n.blockTag)?[4,O(e,t)]:[3,8];case 7:o=s.sent(),s.label=8;case 8:return[2,o.getStorageAt(n.address,n.position,n.blockTag||"latest")];case 9:return n.blockTag&&(0,u.isHexString)(n.blockTag)?[4,O(e,t)]:[3,11];case 10:o=s.sent(),s.label=11;case 11:return[2,o[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash)];case 12:return n.blockTag&&(0,u.isHexString)(n.blockTag)?[4,O(e,t)]:[3,14];case 13:o=s.sent(),s.label=14;case 14:return"call"===r&&n.blockTag?[2,o[r](n.transaction,n.blockTag)]:[2,o[r](n.transaction)];case 15:return[2,o[r](n.transactionHash)];case 16:return(a=n.filter).fromBlock&&(0,u.isHexString)(a.fromBlock)||a.toBlock&&(0,u.isHexString)(a.toBlock)?[4,O(e,t)]:[3,18];case 17:o=s.sent(),s.label=18;case 18:return[2,o.getLogs(a)];case 19:return[2,E.throwError("unknown method error",g.Logger.errors.UNKNOWN_ERROR,{method:r,params:n})]}})})}(r,p,e,t).then(function(n){r.done=!0,r.result=n,v.listenerCount("debug")&&v.emit("debug",{action:"request",rid:o,backend:y(r,_()),request:{method:e,params:(0,l.deepCopy)(t)},provider:v})},function(n){r.done=!0,r.error=n,v.listenerCount("debug")&&v.emit("debug",{action:"request",rid:o,backend:y(r,_()),request:{method:e,params:(0,l.deepCopy)(t)},provider:v})}),T.listenerCount("debug")&&T.emit("debug",{action:"request",rid:o,backend:y(r,null),request:{method:e,params:(0,l.deepCopy)(t)},provider:T}),n+=r.weight};n<T.quorum&&h<c.length;)o();return d=[],c.forEach(function(e){!e.done&&e.runner&&(d.push(e.runner),e.staller&&d.push(e.staller.getPromise()))}),d.length?[4,Promise.race(d)]:[3,2];case 1:C.sent(),C.label=2;case 2:return(m=c.filter(function(e){return e.done&&null==e.error})).length>=T.quorum?(S=i(m))!==undefined?(c.forEach(function(e){e.staller&&e.staller.cancel(),e.cancelled=!0}),[2,{value:S}]):f?[3,4]:[4,b(100).getPromise()]:[3,5];case 3:C.sent(),C.label=4;case 4:f=!1,C.label=5;case 5:return k=c.reduce(function(e,t){if(!t.done||null==t.error)return e;var r=t.error.code;return A.indexOf(r)>=0&&(e[r]||(e[r]={error:t.error,weight:0}),e[r].weight+=t.weight),e},{}),Object.keys(k).forEach(function(e){var t=k[e];if(!(t.weight<v.quorum)){c.forEach(function(e){e.staller&&e.staller.cancel(),e.cancelled=!0});var r=t.error,n={};I.forEach(function(e){null!=r[e]&&(n[e]=r[e])}),E.throwError(r.reason||r.message,e,n)}}),0===c.filter(function(e){return!e.done}).length?[2,"break"]:[2]}})},T=this,C.label=5;case 5:return[5,m()];case 6:return"object"==typeof(S=C.sent())?[2,S.value]:"break"===S?[3,7]:[3,5];case 7:return c.forEach(function(e){e.staller&&e.staller.cancel(),e.cancelled=!0}),[2,E.throwError("failed to meet quorum",g.Logger.errors.SERVER_ERROR,{method:e,params:t,results:c.map(function(e){return y(e)}),provider:this})]}})})},t}(h.BaseProvider);r.FallbackProvider=C}}},{package:"@ethersproject/providers",file:"node_modules/@ethersproject/providers/lib/fallback-provider.js"}],[814,{"./_version":805,"@ethersproject/address":761,"@ethersproject/bignumber":768,"@ethersproject/bytes":770,"@ethersproject/constants":774,"@ethersproject/logger":798,"@ethersproject/properties":804,"@ethersproject/transactions":847},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.showThrottleMessage=r.isCommunityResource=r.isCommunityResourcable=r.Formatter=void 0;var n=e("@ethersproject/address"),o=e("@ethersproject/bignumber"),a=e("@ethersproject/bytes"),s=e("@ethersproject/constants"),i=e("@ethersproject/properties"),c=e("@ethersproject/transactions"),u=e("@ethersproject/logger"),l=e("./_version"),d=new u.Logger(l.version),p=function(){function e(){this.formats=this.getDefaultFormats()}return e.prototype.getDefaultFormats=function(){var t=this,r={},n=this.address.bind(this),o=this.bigNumber.bind(this),a=this.blockTag.bind(this),s=this.data.bind(this),c=this.hash.bind(this),u=this.hex.bind(this),l=this.number.bind(this),d=this.type.bind(this);return r.transaction={hash:c,type:d,accessList:e.allowNull(this.accessList.bind(this),null),blockHash:e.allowNull(c,null),blockNumber:e.allowNull(l,null),transactionIndex:e.allowNull(l,null),confirmations:e.allowNull(l,null),from:n,gasPrice:e.allowNull(o),maxPriorityFeePerGas:e.allowNull(o),maxFeePerGas:e.allowNull(o),gasLimit:o,to:e.allowNull(n,null),value:o,nonce:l,data:s,r:e.allowNull(this.uint256),s:e.allowNull(this.uint256),v:e.allowNull(l),creates:e.allowNull(n,null),raw:e.allowNull(s)},r.transactionRequest={from:e.allowNull(n),nonce:e.allowNull(l),gasLimit:e.allowNull(o),gasPrice:e.allowNull(o),maxPriorityFeePerGas:e.allowNull(o),maxFeePerGas:e.allowNull(o),to:e.allowNull(n),value:e.allowNull(o),data:e.allowNull(function(e){return t.data(e,!0)}),type:e.allowNull(l),accessList:e.allowNull(this.accessList.bind(this),null)},r.receiptLog={transactionIndex:l,blockNumber:l,transactionHash:c,address:n,topics:e.arrayOf(c),data:s,logIndex:l,blockHash:c},r.receipt={to:e.allowNull(this.address,null),from:e.allowNull(this.address,null),contractAddress:e.allowNull(n,null),transactionIndex:l,root:e.allowNull(u),gasUsed:o,logsBloom:e.allowNull(s),blockHash:c,transactionHash:c,logs:e.arrayOf(this.receiptLog.bind(this)),blockNumber:l,confirmations:e.allowNull(l,null),cumulativeGasUsed:o,effectiveGasPrice:e.allowNull(o),status:e.allowNull(l),type:d},r.block={hash:e.allowNull(c),parentHash:c,number:l,timestamp:l,nonce:e.allowNull(u),difficulty:this.difficulty.bind(this),gasLimit:o,gasUsed:o,miner:e.allowNull(n),extraData:s,transactions:e.allowNull(e.arrayOf(c)),baseFeePerGas:e.allowNull(o)},r.blockWithTransactions=(0,i.shallowCopy)(r.block),r.blockWithTransactions.transactions=e.allowNull(e.arrayOf(this.transactionResponse.bind(this))),r.filter={fromBlock:e.allowNull(a,undefined),toBlock:e.allowNull(a,undefined),blockHash:e.allowNull(c,undefined),address:e.allowNull(n,undefined),topics:e.allowNull(this.topics.bind(this),undefined)},r.filterLog={blockNumber:e.allowNull(l),blockHash:e.allowNull(c),transactionIndex:l,removed:e.allowNull(this.boolean.bind(this)),address:n,data:e.allowFalsish(s,"0x"),topics:e.arrayOf(c),transactionHash:c,logIndex:l},r},e.prototype.accessList=function(e){return(0,c.accessListify)(e||[])},e.prototype.number=function(e){return"0x"===e?0:o.BigNumber.from(e).toNumber()},e.prototype.type=function(e){return"0x"===e||null==e?0:o.BigNumber.from(e).toNumber()},e.prototype.bigNumber=function(e){return o.BigNumber.from(e)},e.prototype.boolean=function(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw new Error("invalid boolean - "+e)},e.prototype.hex=function(e,t){return"string"==typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),(0,a.isHexString)(e))?e.toLowerCase():d.throwArgumentError("invalid hash","value",e)},e.prototype.data=function(e,t){var r=this.hex(e,t);if(r.length%2!=0)throw new Error("invalid data; odd-length - "+e);return r},e.prototype.address=function(e){return(0,n.getAddress)(e)},e.prototype.callAddress=function(e){if(!(0,a.isHexString)(e,32))return null;var t=(0,n.getAddress)((0,a.hexDataSlice)(e,12));return t===s.AddressZero?null:t},e.prototype.contractAddress=function(e){return(0,n.getContractAddress)(e)},e.prototype.blockTag=function(e){if(null==e)return"latest";if("earliest"===e)return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if("number"==typeof e||(0,a.isHexString)(e))return(0,a.hexValue)(e);throw new Error("invalid blockTag")},e.prototype.hash=function(e,t){var r=this.hex(e,t);return 32!==(0,a.hexDataLength)(r)?d.throwArgumentError("invalid hash","value",e):r},e.prototype.difficulty=function(e){if(null==e)return null;var t=o.BigNumber.from(e);try{return t.toNumber()}catch(e){}return null},e.prototype.uint256=function(e){if(!(0,a.isHexString)(e))throw new Error("invalid uint256");return(0,a.hexZeroPad)(e,32)},e.prototype._block=function(t,r){null!=t.author&&null==t.miner&&(t.miner=t.author);var n=null!=t._difficulty?t._difficulty:t.difficulty,a=e.check(r,t);return a._difficulty=null==n?null:o.BigNumber.from(n),a},e.prototype.block=function(e){return this._block(e,this.formats.block)},e.prototype.blockWithTransactions=function(e){return this._block(e,this.formats.blockWithTransactions)},e.prototype.transactionRequest=function(t){return e.check(this.formats.transactionRequest,t)},e.prototype.transactionResponse=function(t){null!=t.gas&&null==t.gasLimit&&(t.gasLimit=t.gas),t.to&&o.BigNumber.from(t.to).isZero()&&(t.to="0x0000000000000000000000000000000000000000"),null!=t.input&&null==t.data&&(t.data=t.input),null==t.to&&null==t.creates&&(t.creates=this.contractAddress(t)),1!==t.type&&2!==t.type||null!=t.accessList||(t.accessList=[]);var r=e.check(this.formats.transaction,t);if(null!=t.chainId){var n=t.chainId;(0,a.isHexString)(n)&&(n=o.BigNumber.from(n).toNumber()),r.chainId=n}else{null==(n=t.networkId)&&null==r.v&&(n=t.chainId),(0,a.isHexString)(n)&&(n=o.BigNumber.from(n).toNumber()),"number"!=typeof n&&null!=r.v&&((n=(r.v-35)/2)<0&&(n=0),n=parseInt(n)),"number"!=typeof n&&(n=0),r.chainId=n}return r.blockHash&&"x"===r.blockHash.replace(/0/g,"")&&(r.blockHash=null),r},e.prototype.transaction=function(e){return(0,c.parse)(e)},e.prototype.receiptLog=function(t){return e.check(this.formats.receiptLog,t)},e.prototype.receipt=function(t){var r=e.check(this.formats.receipt,t);if(null!=r.root)if(r.root.length<=4){var n=o.BigNumber.from(r.root).toNumber();0===n||1===n?(null!=r.status&&r.status!==n&&d.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):d.throwArgumentError("invalid alt-root-status","value.root",r.root)}else 66!==r.root.length&&d.throwArgumentError("invalid root hash","value.root",r.root);return null!=r.status&&(r.byzantium=!0),r},e.prototype.topics=function(e){var t=this;return Array.isArray(e)?e.map(function(e){return t.topics(e)}):null!=e?this.hash(e,!0):null},e.prototype.filter=function(t){return e.check(this.formats.filter,t)},e.prototype.filterLog=function(t){return e.check(this.formats.filterLog,t)},e.check=function(e,t){var r={};for(var n in e)try{var o=e[n](t[n]);o!==undefined&&(r[n]=o)}catch(e){throw e.checkKey=n,e.checkValue=t[n],e}return r},e.allowNull=function(e,t){return function(r){return null==r?t:e(r)}},e.allowFalsish=function(e,t){return function(r){return r?e(r):t}},e.arrayOf=function(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");var r=[];return t.forEach(function(t){r.push(e(t))}),r}},e}();function h(e){return e&&"function"==typeof e.isCommunityResource}r.Formatter=p,r.isCommunityResourcable=h,r.isCommunityResource=function(e){return h(e)&&e.isCommunityResource()};var f=!1;r.showThrottleMessage=function(){f||(f=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}}}},{package:"@ethersproject/providers",file:"node_modules/@ethersproject/providers/lib/formatter.js"}],[8144,{"../../store/background-connection":8203},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.estimateGasFee=function(e){return(0,n.submitRequestToBackground)("estimateGasFee",[e])};var n=e("../../store/background-connection")}}},{package:"$root$",file:"ui/pages/swaps/swaps.util.gas.ts"}],[8145,{"../../../shared/constants/common":5840,"../../../shared/constants/network":5857,"../../../shared/constants/swaps":5872,"../../../shared/lib/fetch-with-cache":5933,"../../../shared/lib/swaps-utils":5957,"../../../shared/lib/transactions-controller-utils":5962,"../../../shared/modules/conversion.utils":5976,"../../../shared/modules/hexstring-utils":5984,"../../../shared/modules/swaps.utils":6007,"../../helpers/utils/confirm-tx.util":7136,"./swaps.util.gas":8144,"bignumber.js":4025},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.countDecimals=r.TOKEN_VALIDATORS=r.StxErrorTypes=void 0,r.fetchAggregatorMetadata=async function(e){const t=(0,p.getBaseApi)("aggregatorMetadata",e),r=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:_},cacheOptions:{cacheRefreshTime:m},functionName:"fetchAggregatorMetadata"}),n={};for(const e in r)(0,p.validateData)(v,r[e],t)&&(n[e]=r[e]);return n},r.fetchBlockedTokens=async function(e){const t=(0,p.getBaseApi)("blockedTokens",e);return await(0,u.default)({url:`${t}`,fetchOptions:{method:"GET",headers:_},cacheOptions:{cacheRefreshTime:m},functionName:"fetchBlockedTokens"})},r.fetchSwapsFeatureFlags=async function(){const e=a.SWAPS_API_V2_BASE_URL;return await(0,u.default)({url:`${e}/featureFlags`,fetchOptions:{method:"GET",headers:_},cacheOptions:{cacheRefreshTime:6e5},functionName:"fetchSwapsFeatureFlags"})},r.fetchSwapsGasPrices=async function(e){const t=(0,p.getBaseApi)("gasPrices",e),r=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:_},cacheOptions:{cacheRefreshTime:3e4},functionName:"fetchSwapsGasPrices"});if(!(0,p.validateData)(b,r,t))throw new Error(`${t} response is invalid`);const{SafeGasPrice:n,ProposeGasPrice:o,FastGasPrice:a}=r;return{safeLow:n,average:o,fast:a}},r.fetchToken=async function(e,t){const r=(0,p.getBaseApi)("token",t);return await(0,u.default)({url:`${r}?address=${e}`,fetchOptions:{method:"GET",headers:_},cacheOptions:{cacheRefreshTime:m},functionName:"fetchToken"})},r.fetchTokenPrice=async function(e){var t;const r=`spot-prices?tokenAddresses=${e}&vsCurrency=eth&includeMarketData=false`,n=await(0,u.default)({url:`https://price.api.cx.metamask.io/v2/chains/1/${r}`,fetchOptions:{method:"GET"},cacheOptions:{cacheRefreshTime:6e4},functionName:"fetchTokenPrice"});return null==n||null===(t=n[e])||void 0===t?void 0:t.eth},r.fetchTokens=async function(e){const t=(0,p.getBaseApi)("tokens",e),r=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:_},cacheOptions:{cacheRefreshTime:m},functionName:"fetchTokens"});return[a.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e]||null,...r.filter(r=>(0,p.validateData)(T,r,t,false)&&!((0,s.isSwapsDefaultTokenSymbol)(r.symbol,e)||(0,s.isSwapsDefaultTokenAddress)(r.address,e)))]},r.fetchTopAssets=async function(e){const t=await A(e);return t.reduce((e,t,r)=>({...e,[t.address]:{index:String(r)}}),{})},r.fetchTopAssetsList=A,r.formatSwapsValueForDisplay=k,r.getNetworkNameByChainId=r.getFeeForSmartTransaction=r.getClassNameForCharLength=void 0,r.getRenderableNetworkFeesForQuote=y,r.getSwapsLivenessForNetwork=r.getSwap1559GasFeeEstimates=void 0,r.getTransaction1559GasFeeEstimates=w,r.parseSmartTransactionsError=r.isContractAddressValid=r.getTranslatedStxErrorMessage=void 0,r.quotesToRenderableData=function({quotes:e,gasPriceTrade:t,gasPriceApprove:r,conversionRate:n,currentCurrency:a,approveGas:i,tokenConversionRates:c,chainId:u,smartTransactionEstimatedGas:l,nativeCurrencySymbol:p,multiLayerL1ApprovalFeeTotal:f}){return Object.values(e).map(e=>{const{destinationAmount:g=0,sourceAmount:m=0,sourceTokenInfo:E,destinationTokenInfo:_,slippage:T,aggType:S,aggregator:v,gasEstimateWithRefund:N,averageGas:b,fee:A,trade:O,multiLayerL1TradeFeeTotal:C}=e;let w=null;null!==C&&null!==f?w=(0,h.sumHexes)(C||"0x0",f||"0x0"):null!==C&&(w=C);const P=(0,d.calcTokenAmount)(m,E.decimals).toString(10),R=(0,d.calcTokenAmount)(g,_.decimals).toPrecision(8);let D=null,M=null,L=null,B=null;({feeInFiat:D,feeInEth:M,rawNetworkFees:L,rawEthFee:B}=y({tradeGas:N||(0,h.decimalToHex)(b||8e5),approveGas:i,gasPriceTrade:t,gasPriceApprove:r,currentCurrency:a,conversionRate:n,tradeValue:O.value,sourceSymbol:E.symbol,sourceAmount:m,chainId:u,multiLayerL1FeeTotal:w})),l&&({feeInFiat:D,feeInEth:M}=I({chainId:u,currentCurrency:a,conversionRate:n,nativeCurrencySymbol:p,feeInWeiDec:l.feeEstimate}));const x=new o.BigNumber(100-T).div(100),j=new o.BigNumber(R).times(x).toFixed(6),F=c[_.address],U=(0,s.isSwapsDefaultTokenSymbol)(_.symbol,u)?(0,d.calcTokenAmount)(g,_.decimals).minus(B,10):new o.BigNumber(F||0,10).times((0,d.calcTokenAmount)(g,_.decimals),10).minus(B,10);let H,G=T;return"AGG"===S?H="swapAggregator":"RFQ"===S?(H="swapRequestForQuotation",G=0):H="DEX"===S?"swapDecentralizedExchange":"CONTRACT"===S?"swapDirectContract":"swapUnknown",{aggId:v,amountReceiving:`${R} ${_.symbol}`,destinationTokenDecimals:_.decimals,destinationTokenSymbol:_.symbol,destinationTokenValue:k(R),destinationIconUrl:_.iconUrl,isBestQuote:e.isBestQuote,liquiditySourceKey:H,feeInEth:M,detailedNetworkFees:`${M} (${D})`,networkFees:D,quoteSource:S,rawNetworkFees:L,slippage:G,sourceTokenDecimals:E.decimals,sourceTokenSymbol:E.symbol,sourceTokenValue:P,sourceTokenIconUrl:E.iconUrl,ethValueOfTrade:U,minimumAmountReceived:j,metaMaskFee:A}})},r.showRemainingTimeInMinAndSec=void 0;var n,o=e("bignumber.js"),a=e("../../../shared/constants/swaps"),s=e("../../../shared/modules/swaps.utils"),i=e("../../../shared/constants/network"),c=e("../../helpers/utils/confirm-tx.util"),u=(n=e("../../../shared/lib/fetch-with-cache"))&&n.__esModule?n:{default:n},l=e("../../../shared/modules/hexstring-utils"),d=e("../../../shared/lib/transactions-controller-utils"),p=e("../../../shared/lib/swaps-utils"),h=e("../../../shared/modules/conversion.utils"),f=e("../../../shared/constants/common"),g=e("./swaps.util.gas");const m=3e5,E="usd",_={"X-Client-Id":a.SWAPS_CLIENT_ID},T=r.TOKEN_VALIDATORS=[{property:"address",type:"string",validator:e=>(0,l.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"symbol",type:"string",validator:e=>(0,p.truthyString)(e)&&e.length<=12},{property:"decimals",type:"string|number",validator:e=>Number(e)>=0&&Number(e)<=36}],S=T.slice(0,2),v=[{property:"color",type:"string",validator:e=>Boolean(e.match(/^#[A-Fa-f0-9]+$/u))},{property:"title",type:"string",validator:p.truthyString},{property:"icon",type:"string",validator:e=>Boolean(e.match(/^data:image/u))}],N=e=>!isNaN(e)&&e.match(/^[.0-9]+$/u)&&!isNaN(parseFloat(e)),b=[{property:"SafeGasPrice",type:"string",validator:N},{property:"ProposeGasPrice",type:"string",validator:N},{property:"FastGasPrice",type:"string",validator:N}];async function A(e){if(!Object.values(i.CHAIN_IDS).includes(e))return[];const t=(0,p.getBaseApi)("topAssets",e);return(await(0,u.default)({url:t,functionName:"fetchTopAssets",fetchOptions:{method:"GET",headers:_},cacheOptions:{cacheRefreshTime:m}})||[]).filter(e=>(0,p.validateData)(S,e,t))}const I=({chainId:e,currentCurrency:t,conversionRate:r,USDConversionRate:n,nativeCurrencySymbol:o,feeInWeiDec:s})=>{var i;const u=(0,h.decimalToHex)(s),l=(0,h.getValueFromWeiHex)({value:u,toDenomination:f.EtherDenomination.ETH,numberOfDecimals:5}),d=(0,h.getValueFromWeiHex)({value:u,toCurrency:t,conversionRate:r,numberOfDecimals:2});let p;p=t===E?d:(0,h.getValueFromWeiHex)({value:u,toCurrency:E,conversionRate:n,numberOfDecimals:2});return{rawNetworkFees:d,feeInUsd:p,feeInFiat:(0,c.formatCurrency)(d,t),feeInEth:`${l} ${o||(null===(i=a.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e])||void 0===i?void 0:i.symbol)}`,rawEthFee:l}};function y({tradeGas:e,approveGas:t,gasPriceTrade:r,gasPriceApprove:n,currentCurrency:i,conversionRate:u,USDConversionRate:l,tradeValue:p,sourceSymbol:g,sourceAmount:m,chainId:_,nativeCurrencySymbol:T,multiLayerL1FeeTotal:S}){const v=(0,d.calcGasTotal)(e,r),N=t?(0,d.calcGasTotal)(t,n):"0x0",b=(0,h.sumHexes)(v,N,S||"0x0"),A=new o.BigNumber(p,16).minus((0,s.isSwapsDefaultTokenSymbol)(g,_)?m:0,10).toString(16),I=new o.BigNumber(b,16).plus(A,16).toString(16),y=(0,h.getValueFromWeiHex)({value:I,toDenomination:f.EtherDenomination.ETH,numberOfDecimals:5}),k=(0,h.getValueFromWeiHex)({value:I,toCurrency:i,conversionRate:u,numberOfDecimals:2}),O=(0,c.formatCurrency)(k,i);let C;C=i===E?k:(0,h.getValueFromWeiHex)({value:I,toCurrency:E,conversionRate:l,numberOfDecimals:2});return{rawNetworkFees:k,feeInUsd:C,rawEthFee:y,feeInFiat:O,feeInEth:`${y} ${T||a.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[_].symbol}`,nonGasFee:A}}function k(e){let t;return t="string"==typeof e&&e.includes("...")?e:(0,d.toPrecisionWithoutTrailingZeros)(e,12),t.match(/e[+-]/u)&&(t=new o.BigNumber(t).toFixed()),t}r.getFeeForSmartTransaction=I;r.getClassNameForCharLength=(e,t)=>{let r;return r=!e||e.length<=10?"lg":e.length>10&&e.length<=13?"md":"sm",`${t}--${r}`};r.isContractAddressValid=(e,t)=>!(!e||!a.ALLOWED_CONTRACT_ADDRESSES[t])&&a.ALLOWED_CONTRACT_ADDRESSES[t].some(t=>e.toLowerCase()===t.toLowerCase());const O=e=>{switch(e){case i.CHAIN_IDS.MAINNET:return a.ETHEREUM;case i.CHAIN_IDS.BSC:return a.BSC;case i.CHAIN_IDS.POLYGON:return a.POLYGON;case i.CHAIN_IDS.GOERLI:return a.GOERLI;case i.CHAIN_IDS.AVALANCHE:return a.AVALANCHE;case i.CHAIN_IDS.OPTIMISM:return a.OPTIMISM;case i.CHAIN_IDS.ARBITRUM:return a.ARBITRUM;case i.CHAIN_IDS.ZKSYNC_ERA:return a.ZKSYNC_ERA;case i.CHAIN_IDS.LINEA_MAINNET:return a.LINEA;case i.CHAIN_IDS.BASE:return a.BASE;case i.CHAIN_IDS.SEI:return a.SEI;default:return""}};r.getNetworkNameByChainId=O;r.getSwapsLivenessForNetwork=(e,t={})=>{const r=O(e);if([i.CHAIN_IDS.LOCALHOST,i.CHAIN_IDS.GOERLI].includes(e))return{swapsFeatureIsLive:!0};if(!t[r])return{swapsFeatureIsLive:!1};return t[r].extensionActive?{swapsFeatureIsLive:!0}:{swapsFeatureIsLive:t[r].fallbackToV1}};r.countDecimals=e=>{var t;return e&&Math.floor(e)!==e&&(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0};r.showRemainingTimeInMinAndSec=e=>{if(!Number.isInteger(e))return"0:00";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`};let C=r.StxErrorTypes=function(e){return e.unavailable="unavailable",e.notEnoughFunds="not_enough_funds",e.regularTxPending="regular_tx_pending",e}({});r.getTranslatedStxErrorMessage=(e,t)=>{switch(e){case C.unavailable:case C.regularTxPending:return t("smartSwapsErrorUnavailable");case C.notEnoughFunds:return t("smartSwapsErrorNotEnoughFunds");default:return t("smartSwapsErrorUnavailable")}};r.parseSmartTransactionsError=e=>{const t=e.slice(12);return JSON.parse(t.trim())};async function w(e,t,r){const n=await(0,g.estimateGasFee)({transactionParams:e,chainId:r}),o=null==n?void 0:n.estimates,{maxFeePerGas:a}=(null==o?void 0:o.high)??{},{maxPriorityFeePerGas:s}=(null==o?void 0:o.high)??{};return{baseAndPriorityFeePerGas:s?(0,h.addHexes)(t,s):undefined,maxFeePerGas:a,maxPriorityFeePerGas:s}}r.getSwap1559GasFeeEstimates=async(e,t,r,n)=>{const o=(0,h.decGWEIToHexWEI)(r);return{tradeGasFeeEstimates:await w(e,o,n),approveGasFeeEstimates:t?await w(t,o,n):undefined,estimatedBaseFee:o}}}}},{package:"$root$",file:"ui/pages/swaps/swaps.util.ts"}],[815,{"./_version":805,"./alchemy-provider":806,"./ankr-provider":807,"./base-provider":808,"./cloudflare-provider":811,"./etherscan-provider":812,"./fallback-provider":813,"./formatter":814,"./infura-provider":816,"./ipc-provider":809,"./json-rpc-batch-provider":817,"./json-rpc-provider":818,"./nodesmith-provider":819,"./pocket-provider":820,"./quicknode-provider":821,"./url-json-rpc-provider":822,"./web3-provider":823,"./websocket-provider":824,"@ethersproject/abstract-provider":757,"@ethersproject/logger":798,"@ethersproject/networks":800},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Formatter=r.showThrottleMessage=r.isCommunityResourcable=r.isCommunityResource=r.getNetwork=r.getDefaultProvider=r.JsonRpcSigner=r.IpcProvider=r.WebSocketProvider=r.Web3Provider=r.StaticJsonRpcProvider=r.QuickNodeProvider=r.PocketProvider=r.NodesmithProvider=r.JsonRpcBatchProvider=r.JsonRpcProvider=r.InfuraWebSocketProvider=r.InfuraProvider=r.EtherscanProvider=r.CloudflareProvider=r.AnkrProvider=r.AlchemyWebSocketProvider=r.AlchemyProvider=r.FallbackProvider=r.UrlJsonRpcProvider=r.Resolver=r.BaseProvider=r.Provider=void 0;var n=e("@ethersproject/abstract-provider");Object.defineProperty(r,"Provider",{enumerable:!0,get:function(){return n.Provider}});var o=e("@ethersproject/networks");Object.defineProperty(r,"getNetwork",{enumerable:!0,get:function(){return o.getNetwork}});var a=e("./base-provider");Object.defineProperty(r,"BaseProvider",{enumerable:!0,get:function(){return a.BaseProvider}}),Object.defineProperty(r,"Resolver",{enumerable:!0,get:function(){return a.Resolver}});var s=e("./alchemy-provider");Object.defineProperty(r,"AlchemyProvider",{enumerable:!0,get:function(){return s.AlchemyProvider}}),Object.defineProperty(r,"AlchemyWebSocketProvider",{enumerable:!0,get:function(){return s.AlchemyWebSocketProvider}});var i=e("./ankr-provider");Object.defineProperty(r,"AnkrProvider",{enumerable:!0,get:function(){return i.AnkrProvider}});var c=e("./cloudflare-provider");Object.defineProperty(r,"CloudflareProvider",{enumerable:!0,get:function(){return c.CloudflareProvider}});var u=e("./etherscan-provider");Object.defineProperty(r,"EtherscanProvider",{enumerable:!0,get:function(){return u.EtherscanProvider}});var l=e("./fallback-provider");Object.defineProperty(r,"FallbackProvider",{enumerable:!0,get:function(){return l.FallbackProvider}});var d=e("./ipc-provider");Object.defineProperty(r,"IpcProvider",{enumerable:!0,get:function(){return d.IpcProvider}});var p=e("./infura-provider");Object.defineProperty(r,"InfuraProvider",{enumerable:!0,get:function(){return p.InfuraProvider}}),Object.defineProperty(r,"InfuraWebSocketProvider",{enumerable:!0,get:function(){return p.InfuraWebSocketProvider}});var h=e("./json-rpc-provider");Object.defineProperty(r,"JsonRpcProvider",{enumerable:!0,get:function(){return h.JsonRpcProvider}}),Object.defineProperty(r,"JsonRpcSigner",{enumerable:!0,get:function(){return h.JsonRpcSigner}});var f=e("./json-rpc-batch-provider");Object.defineProperty(r,"JsonRpcBatchProvider",{enumerable:!0,get:function(){return f.JsonRpcBatchProvider}});var g=e("./nodesmith-provider");Object.defineProperty(r,"NodesmithProvider",{enumerable:!0,get:function(){return g.NodesmithProvider}});var m=e("./pocket-provider");Object.defineProperty(r,"PocketProvider",{enumerable:!0,get:function(){return m.PocketProvider}});var E=e("./quicknode-provider");Object.defineProperty(r,"QuickNodeProvider",{enumerable:!0,get:function(){return E.QuickNodeProvider}});var _=e("./url-json-rpc-provider");Object.defineProperty(r,"StaticJsonRpcProvider",{enumerable:!0,get:function(){return _.StaticJsonRpcProvider}}),Object.defineProperty(r,"UrlJsonRpcProvider",{enumerable:!0,get:function(){return _.UrlJsonRpcProvider}});var T=e("./web3-provider");Object.defineProperty(r,"Web3Provider",{enumerable:!0,get:function(){return T.Web3Provider}});var S=e("./websocket-provider");Object.defineProperty(r,"WebSocketProvider",{enumerable:!0,get:function(){return S.WebSocketProvider}});var v=e("./formatter");Object.defineProperty(r,"Formatter",{enumerable:!0,get:function(){return v.Formatter}}),Object.defineProperty(r,"isCommunityResourcable",{enumerable:!0,get:function(){return v.isCommunityResourcable}}),Object.defineProperty(r,"isCommunityResource",{enumerable:!0,get:function(){return v.isCommunityResource}}),Object.defineProperty(r,"showThrottleMessage",{enumerable:!0,get:function(){return v.showThrottleMessage}});var N=e("@ethersproject/logger"),b=e("./_version"),A=new N.Logger(b.version);r.getDefaultProvider=function(e,t){if(null==e&&(e="homestead"),"string"==typeof e){var r=e.match(/^(ws|http)s?:/i);if(r)switch(r[1].toLowerCase()){case"http":case"https":return new h.JsonRpcProvider(e);case"ws":case"wss":return new S.WebSocketProvider(e);default:A.throwArgumentError("unsupported URL scheme","network",e)}}var n=(0,o.getNetwork)(e);return n&&n._defaultProvider||A.throwError("unsupported getDefaultProvider network",N.Logger.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:e}),n._defaultProvider({FallbackProvider:l.FallbackProvider,AlchemyProvider:s.AlchemyProvider,AnkrProvider:i.AnkrProvider,CloudflareProvider:c.CloudflareProvider,EtherscanProvider:u.EtherscanProvider,InfuraProvider:p.InfuraProvider,JsonRpcProvider:h.JsonRpcProvider,NodesmithProvider:g.NodesmithProvider,PocketProvider:m.PocketProvider,QuickNodeProvider:E.QuickNodeProvider,Web3Provider:T.Web3Provider,IpcProvider:d.IpcProvider},t)}}}},{package:"@ethersproject/providers",file:"node_modules/@ethersproject/providers/lib/index.js"}],[8157,{"../../shared/modules/string-utils":6006,"@metamask/keyring-api":2306,"@metamask/utils":3217,reselect:5371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getInternalAccountsObject=r.getInternalAccountsByScope=r.getInternalAccounts=r.getInternalAccountByAddress=void 0,r.getSelectedInternalAccount=p,r.hasCreatedSolanaAccount=void 0,r.isBitcoinAccount=i,r.isNonEvmAccount=function(e){return i(e)||c(e)||u(e)},r.isSelectedInternalAccountSolana=r.isSelectedInternalAccountEth=void 0,r.isSolanaAccount=c,r.isTronAccount=u;var n=e("@metamask/keyring-api"),o=e("reselect"),a=e("@metamask/utils"),s=e("../../shared/modules/string-utils");function i(e){return Boolean(e&&Object.values(n.BtcAccountType).includes(e.type))}function c(e){const{DataAccount:t}=n.SolAccountType;return Boolean(e&&e.type===t)}function u(e){const{Eoa:t}=n.TrxAccountType;return Boolean(e&&e.type===t)}const l=e=>e.metamask.internalAccounts.accounts;r.getInternalAccountsObject=l;const d=r.getInternalAccounts=(0,o.createSelector)(l,e=>Object.values(e));r.getInternalAccountByAddress=(0,o.createSelector)([d,(e,t)=>t],(e,t)=>e.find(e=>(0,s.isEqualCaseInsensitive)(e.address,t)));function p(e){const t=e.metamask.internalAccounts.selectedAccount;return e.metamask.internalAccounts.accounts[t]}r.isSelectedInternalAccountEth=(0,o.createSelector)(p,e=>{const{Eoa:t,Erc4337:r}=n.EthAccountType;return Boolean(e&&(e.type===t||e.type===r))}),r.isSelectedInternalAccountSolana=(0,o.createSelector)(p,e=>c(e)),r.hasCreatedSolanaAccount=(0,o.createSelector)(d,e=>e.some(e=>c(e))),r.getInternalAccountsByScope=(0,o.createSelector)([d,(e,t)=>t],(e,t)=>{if(!Array.isArray(e)||0===e.length)return[];let r,o;try{const e=(0,a.parseCaipChainId)(t);r=e.namespace,o=e.reference}catch{return[]}return r===a.KnownCaipNamespace.Eip155?"0"===o?e.filter(e=>Array.isArray(e.scopes)&&e.scopes.some(e=>e.startsWith(`${a.KnownCaipNamespace.Eip155}:`))):e.filter(e=>Array.isArray(e.scopes)&&(e.scopes.includes(t)||e.scopes.includes(n.EthScope.Eoa))):e.filter(e=>Array.isArray(e.scopes)&&e.scopes.includes(t))})}}},{package:"$root$",file:"ui/selectors/accounts.ts"}],[8159,{"../../shared/modules/selectors/util":5999,"./shared":8189,"@metamask/controller-utils":1494,reselect:5371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getApprovalFlows=function(e){return e.metamask.approvalFlows},r.getPendingApprovals=r.getApprovalsByOrigin=r.getApprovalRequestsByType=void 0,r.hasPendingApprovals=function(e,t,r){const n=Object.values(e.metamask.pendingApprovals).filter(({type:e})=>t.includes(e));if(r)return n.some(r);return n.length>0},r.pendingApprovalsSortedSelector=void 0,r.selectHasApprovalFlows=function(e){var t;return((null===(t=e.metamask.approvalFlows)||void 0===t?void 0:t.length)??0)>0},r.selectPendingApprovalsForNavigation=r.selectPendingApproval=void 0;var n=e("@metamask/controller-utils"),o=e("reselect"),a=e("../../shared/modules/selectors/util"),s=e("./shared");r.getApprovalRequestsByType=(e,t,r)=>{const n=Object.values(e.metamask.pendingApprovals).filter(({type:e})=>e===t);return r?n.filter(r):n};const i=r.getPendingApprovals=(0,o.createSelector)(e=>e.metamask.pendingApprovals??s.EMPTY_OBJECT,e=>Object.values(e)),c=r.pendingApprovalsSortedSelector=(0,o.createSelector)(i,e=>[...e].sort((e,t)=>e.time-t.time)),u=(r.selectPendingApprovalsForNavigation=(0,a.createDeepEqualSelector)(c,e=>e.filter((t,r)=>(!d(t)||e.findIndex(d)===r)&&(!l(t)||e.findIndex(l)===r))),(0,o.createSelector)(i,(e,t)=>t,(e,t)=>e.find(({id:e})=>e===t)));r.selectPendingApproval=(0,a.createDeepEqualSelector)(u,e=>e);function l(e){var t;const r=null===(t=e.requestData)||void 0===t||null===(t=t.asset)||void 0===t?void 0:t.tokenId;return e.type===n.ApprovalType.WatchAsset&&!r}function d(e){var t;const r=null===(t=e.requestData)||void 0===t||null===(t=t.asset)||void 0===t?void 0:t.tokenId;return e.type===n.ApprovalType.WatchAsset&&Boolean(r)}r.getApprovalsByOrigin=(e,t)=>{const r=i(e);return null==r?void 0:r.filter(e=>e.origin===t)}}}},{package:"$root$",file:"ui/selectors/approvals.ts"}],[816,{"./_version":805,"./formatter":814,"./url-json-rpc-provider":822,"./websocket-provider":824,"@ethersproject/logger":798,"@ethersproject/properties":804},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.InfuraProvider=r.InfuraWebSocketProvider=void 0;var a=e("@ethersproject/properties"),s=e("./websocket-provider"),i=e("./formatter"),c=e("@ethersproject/logger"),u=e("./_version"),l=new c.Logger(u.version),d=e("./url-json-rpc-provider"),p="84842078b09946638c03157f83405213",h=function(e){function t(t,r){var n,o=new f(t,r),s=o.connection;s.password&&l.throwError("INFURA WebSocket project secrets unsupported",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});var i=s.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");return n=e.call(this,i,t)||this,(0,a.defineReadOnly)(n,"apiKey",o.projectId),(0,a.defineReadOnly)(n,"projectId",o.projectId),(0,a.defineReadOnly)(n,"projectSecret",o.projectSecret),n}return o(t,e),t.prototype.isCommunityResource=function(){return this.projectId===p},t}(s.WebSocketProvider);r.InfuraWebSocketProvider=h;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.getWebSocketProvider=function(e,t){return new h(e,t)},t.getApiKey=function(e){var t={apiKey:p,projectId:p,projectSecret:null};return null==e||("string"==typeof e?t.projectId=e:null!=e.projectSecret?(l.assertArgument("string"==typeof e.projectId,"projectSecret requires a projectId","projectId",e.projectId),l.assertArgument("string"==typeof e.projectSecret,"invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t},t.getUrl=function(e,t){var r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"optimism-sepolia":r="optimism-sepolia.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;case"arbitrum-sepolia":r="arbitrum-sepolia.infura.io";break;default:l.throwError("unsupported network",c.Logger.errors.INVALID_ARGUMENT,{argument:"network",value:e})}var n={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:function(e,r){return t.projectId===p&&(0,i.showThrottleMessage)(),Promise.resolve(!0)}};return null!=t.projectSecret&&(n.user="",n.password=t.projectSecret),n},t.prototype.isCommunityResource=function(){return this.projectId===p},t}(d.UrlJsonRpcProvider);r.InfuraProvider=f}}},{package:"@ethersproject/providers",file:"node_modules/@ethersproject/providers/lib/infura-provider.js"}],[8161,{"../../shared/constants/gas":5846,"../../shared/modules/conversion.utils":5976,"../../shared/modules/gas.utils":5983,"../../shared/modules/selectors/networks":5995,"../ducks/metamask/metamask":7098,"../helpers/utils/confirm-tx.util":7136,"../helpers/utils/tx-helper":7167,"./custom-gas":8162,"./selectors":8188,"./transactions":8200,"@metamask/transaction-controller":3095,reselect:5371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getUse4ByteResolution=r.currentCurrencySelector=r.conversionRateSelector=void 0,r.selectIsMaxValueEnabled=function(e,t){var r;return(null===(r=e.confirmTransaction.maxValueMode)||void 0===r?void 0:r[t])??!1},r.selectMaxValueModeForTransaction=function(e,t){return N(e)[t]},r.selectTransactionAvailableBalance=function(e,t,r){var n;const o=(0,f.getMetaMaskAccounts)(e,r),a=(0,g.selectTransactionSender)(e,t);return null===(n=o[a])||void 0===n?void 0:n.balance},r.selectTransactionFeeById=function(e,t){const r=(0,g.selectTransactionMetadata)(e,t);return v(e,r??{})},r.unconfirmedTransactionsListSelector=r.unconfirmedTransactionsHashSelector=r.unconfirmedMessagesHashSelector=r.txDataSelector=r.transactionFeeSelector=r.tokenAddressSelector=void 0;var n,o=e("reselect"),a=e("@metamask/transaction-controller"),s=(n=e("../helpers/utils/tx-helper"))&&n.__esModule?n:{default:n},i=e("../helpers/utils/confirm-tx.util"),c=e("../ducks/metamask/metamask"),u=e("../../shared/constants/gas"),l=e("../../shared/modules/gas.utils"),d=e("../../shared/modules/conversion.utils"),p=e("../../shared/modules/selectors/networks"),h=e("./custom-gas"),f=e("./selectors"),g=e("./transactions");const m=e=>(0,g.getUnapprovedTransactions)(e);r.unconfirmedTransactionsListSelector=(0,o.createSelector)(m,g.unapprovedPersonalMsgsSelector,g.unapprovedDecryptMsgsSelector,g.unapprovedEncryptionPublicKeyMsgsSelector,g.unapprovedTypedMessagesSelector,(e={},t={},r={},n={},o={})=>(0,s.default)(e,t,r,n,o)||[]),r.unconfirmedTransactionsHashSelector=(0,o.createSelector)(m,g.unapprovedPersonalMsgsSelector,g.unapprovedDecryptMsgsSelector,g.unapprovedEncryptionPublicKeyMsgsSelector,g.unapprovedTypedMessagesSelector,(e={},t={},r={},n={},o={})=>({...e,...t,...r,...n,...o})),r.unconfirmedMessagesHashSelector=(0,o.createSelector)(g.unapprovedPersonalMsgsSelector,g.unapprovedDecryptMsgsSelector,g.unapprovedEncryptionPublicKeyMsgsSelector,g.unapprovedTypedMessagesSelector,(e={},t={},r={},n={})=>({...e,...t,...r,...n}));r.getUse4ByteResolution=e=>e.metamask.use4ByteResolution;const E=e=>e.metamask.currentCurrency;r.currentCurrencySelector=E;const _=e=>{var t;return null===(t=e.metamask.currencyRates[(0,p.getProviderConfig)(e).ticker])||void 0===t?void 0:t.conversionRate};r.conversionRateSelector=_;const T=e=>e.confirmTransaction.txData;r.txDataSelector=T;const S=(0,o.createSelector)(T,e=>e&&e.txParams||{}),v=(r.tokenAddressSelector=(0,o.createSelector)(S,e=>e&&e.to),function(e,t){var r,n,o,s;const p=E(e),g=_(e),m=(0,c.getNativeCurrency)(e),T=(0,c.getGasFeeEstimates)(e)||{},S=(0,c.getGasEstimateType)(e),v=(0,f.checkNetworkAndAccountSupports1559)(e),N={gasLimit:(null===(r=t.txParams)||void 0===r?void 0:r.gas)??"0x0",gasLimitNoBuffer:t.gasLimitNoBuffer};if(v){var b;const{gasPrice:e="0"}=T,r=T[t.userFeeLevel]||{};if((null===(b=t.txParams)||void 0===b?void 0:b.type)===a.TransactionEnvelopeType.legacy){var A;N.gasPrice=(null===(A=t.txParams)||void 0===A?void 0:A.gasPrice)??(0,d.decGWEIToHexWEI)(e)}else{var I,y,k,O;const{suggestedMaxPriorityFeePerGas:n,suggestedMaxFeePerGas:o}=r;N.maxFeePerGas=null===(I=t.txParams)||void 0===I||!I.maxFeePerGas||t.userFeeLevel!==u.CUSTOM_GAS_ESTIMATE&&o?(0,d.decGWEIToHexWEI)(o||e):null===(y=t.txParams)||void 0===y?void 0:y.maxFeePerGas,N.maxPriorityFeePerGas=null===(k=t.txParams)||void 0===k||!k.maxPriorityFeePerGas||t.userFeeLevel!==u.CUSTOM_GAS_ESTIMATE&&n?n&&(0,d.decGWEIToHexWEI)(n)||N.maxFeePerGas:null===(O=t.txParams)||void 0===O?void 0:O.maxPriorityFeePerGas,N.baseFeePerGas=(0,d.decGWEIToHexWEI)(T.estimatedBaseFee)}}else switch(S){case u.GasEstimateTypes.feeMarket:case u.GasEstimateTypes.none:N.gasPrice=(null===(n=t.txParams)||void 0===n?void 0:n.gasPrice)??"0x0";break;case u.GasEstimateTypes.ethGasPrice:N.gasPrice=(null===(o=t.txParams)||void 0===o?void 0:o.gasPrice)??(0,d.decGWEIToHexWEI)(T.gasPrice);break;case u.GasEstimateTypes.legacy:N.gasPrice=(null===(s=t.txParams)||void 0===s?void 0:s.gasPrice)??(0,h.getAveragePriceEstimateInHexWEI)(e)}const{txParams:{value:C="0x0"}={}}=t,w=(0,d.getValueFromWeiHex)({value:C,fromCurrency:m,toCurrency:p,conversionRate:g,numberOfDecimals:2}),P=(0,d.getValueFromWeiHex)({value:C,fromCurrency:m,toCurrency:m,conversionRate:g,numberOfDecimals:6}),R=(0,l.getMinimumGasTotalInHexWei)(N),D=(0,l.getMaximumGasTotalInHexWei)(N),M=(0,i.getTransactionFee)({value:R,fromCurrency:m,toCurrency:p,numberOfDecimals:2,conversionRate:g}),L=(0,i.getTransactionFee)({value:D,fromCurrency:m,toCurrency:p,numberOfDecimals:2,conversionRate:g}),B=(0,i.getTransactionFee)({value:R,fromCurrency:m,toCurrency:m,numberOfDecimals:6,conversionRate:g});return{hexTransactionAmount:C,fiatTransactionAmount:w,ethTransactionAmount:P,hexMinimumTransactionFee:R,fiatMinimumTransactionFee:M,hexMaximumTransactionFee:D,fiatMaximumTransactionFee:L,ethTransactionFee:B,fiatTransactionTotal:(0,i.addFiat)(M,w),ethTransactionTotal:(0,i.addEth)(B,P),hexTransactionTotal:(0,d.sumHexes)(C,R),gasEstimationObject:N}});r.transactionFeeSelector=v;const N=e=>e.confirmTransaction.maxValueMode}}},{package:"$root$",file:"ui/selectors/confirm-transaction.js"}],[8162,{"../../app/scripts/lib/util":374,"../../shared/constants/common":5840,"../../shared/constants/gas":5846,"../../shared/lib/transactions-controller-utils":5962,"../../shared/modules/Numeric":5969,"../../shared/modules/conversion.utils":5976,"../ducks/metamask/metamask":7098,"../helpers/utils/confirm-tx.util":7136,"../helpers/utils/formatters":7140,"./selectors":8188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.basicPriceEstimateToETHTotal=E,r.getAverageEstimate=g,r.getAveragePriceEstimateInHexWEI=function(e){return T(g(e))},r.getBasicGasEstimateLoadingStatus=function(e){return!1===S(e)},r.getCustomGasLimit=function(e){return e.gas.customData.limit},r.getCustomGasPrice=h,r.getDefaultActiveButtonIndex=function(e,t,r){return e.map(({priceInHexWei:e})=>e).lastIndexOf((0,n.addHexPrefix)(t||r))},r.getFastPriceEstimate=m,r.getFastPriceEstimateInHexWEI=function(e){return T(m(e)||"0x0")},r.getGasPriceInHexWei=T,r.getIsCustomNetworkGasPriceFetched=function(e){return(0,c.getGasEstimateType)(e)===i.GasEstimateTypes.ethGasPrice&&!(0,p.getIsMainnet)(e)},r.getIsGasEstimatesFetched=S,r.getNoGasPriceFetched=function(e){return(0,c.getGasEstimateType)(e)===i.GasEstimateTypes.none},r.getRenderableConvertedCurrencyFee=function(e,t,r,n){const s=E(new l.Numeric(e,10).toBase(16).toString(),t),i=(0,o.decEthToConvertedCurrency)(s,r,n);return(0,a.formatCurrency)(i,r)},r.getRenderableEthFee=function(e,t,r=9,n="ETH"){const o=E(new l.Numeric(e,10).toBase(16).toString(),t,r);return(0,s.formatETHFee)(o,n)},r.getSafeLowEstimate=f,r.isCustomPriceSafe=function(e){const t=f(e),r=h(e);if(!r)return!0;if(!t)return!1;return new l.Numeric(r,16,d.EtherDenomination.WEI).toDenomination(d.EtherDenomination.GWEI).greaterThan(t,10)},r.isCustomPriceSafeForCustomNetwork=function(e){const t=g(e),r=h(e);if(!r)return!0;if(!t)return!1;return new l.Numeric(r,16,d.EtherDenomination.WEI).toDenomination(d.EtherDenomination.GWEI).greaterThan(t,10)},r.priceEstimateToWei=_;var n=e("../../app/scripts/lib/util"),o=e("../../shared/modules/conversion.utils"),a=e("../helpers/utils/confirm-tx.util"),s=e("../helpers/utils/formatters"),i=e("../../shared/constants/gas"),c=e("../ducks/metamask/metamask"),u=e("../../shared/lib/transactions-controller-utils"),l=e("../../shared/modules/Numeric"),d=e("../../shared/constants/common"),p=e("./selectors");function h(e){return e.gas.customData.price}function f(e){const t=(0,c.getGasFeeEstimates)(e);return(0,c.getGasEstimateType)(e)===i.GasEstimateTypes.legacy?null==t?void 0:t.low:null}function g(e){const t=(0,c.getGasFeeEstimates)(e);return(0,c.getGasEstimateType)(e)===i.GasEstimateTypes.legacy?null==t?void 0:t.medium:null}function m(e){const t=(0,c.getGasFeeEstimates)(e);return(0,c.getGasEstimateType)(e)===i.GasEstimateTypes.legacy?null==t?void 0:t.high:null}function E(e,t,r=9){return new l.Numeric((0,u.calcGasTotal)(t,e),16,d.EtherDenomination.GWEI).round(r).toBase(10).toString()}function _(e){return new l.Numeric(e,16,d.EtherDenomination.GWEI).toDenomination(d.EtherDenomination.WEI).round(9).toString()}function T(e){const t=new l.Numeric(e,10).toBase(16).toString();return(0,n.addHexPrefix)(_(t))}function S(e){const t=(0,c.getGasEstimateType)(e);return!(0,c.isEIP1559Network)(e)&&t!==i.GasEstimateTypes.none}}}},{package:"$root$",file:"ui/selectors/custom-gas.js"}],[8164,{"../../shared/constants/onboarding":5860,"../../shared/modules/environment":5980,"../helpers/constants/routes":7115},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getFirstTimeFlowType=void 0,r.getFirstTimeFlowTypeRouteAfterMetaMetricsOptIn=function(e){const{firstTimeFlowType:t}=e.metamask;if(t===n.FirstTimeFlowType.create)return a.ONBOARDING_COMPLETION_ROUTE;if(t===n.FirstTimeFlowType.import)return a.ONBOARDING_COMPLETION_ROUTE;if(t===n.FirstTimeFlowType.restore)return a.ONBOARDING_REVIEW_SRP_ROUTE;if(t===n.FirstTimeFlowType.socialCreate)return a.ONBOARDING_COMPLETION_ROUTE;if(t===n.FirstTimeFlowType.socialImport)return a.ONBOARDING_DOWNLOAD_APP_ROUTE;return a.DEFAULT_ROUTE},r.getFirstTimeFlowTypeRouteAfterUnlock=function(e){const{firstTimeFlowType:t}=e.metamask;if(t===n.FirstTimeFlowType.create)return a.ONBOARDING_CREATE_PASSWORD_ROUTE;if(t===n.FirstTimeFlowType.import)return a.ONBOARDING_IMPORT_WITH_SRP_ROUTE;if(t===n.FirstTimeFlowType.restore)return a.ONBOARDING_METAMETRICS;if(t===n.FirstTimeFlowType.socialCreate)return a.ONBOARDING_DOWNLOAD_APP_ROUTE;return a.DEFAULT_ROUTE},r.getOnboardingInitiator=r.getIsSocialLoginFlow=void 0;var n=e("../../shared/constants/onboarding"),o=e("../../shared/modules/environment"),a=e("../helpers/constants/routes");r.getIsSocialLoginFlow=e=>{if(!(0,o.getIsSeedlessOnboardingFeatureEnabled)())return!1;const{firstTimeFlowType:t}=e.metamask;return t===n.FirstTimeFlowType.socialCreate||t===n.FirstTimeFlowType.socialImport};r.getFirstTimeFlowType=e=>e.metamask.firstTimeFlowType;r.getOnboardingInitiator=e=>{const{onboardingTabs:t}=e.metamask;if(!t||1!==Object.keys(t).length)return null;const r=Object.keys(t)[0];return{location:r,tabId:t[r]}}}}},{package:"$root$",file:"ui/selectors/first-time-flow.js"}],[8168,{"../pages/confirmations/selectors/confirm":7829,"./accounts":8157,"./approvals":8159,"./confirm-transaction":8161,"./custom-gas":8162,"./first-time-flow":8164,"./metametrics":8170,"./multichain-accounts":8174,"./multichain/networks":8179,"./origin-throttling":8182,"./remote-feature-flags":8185,"./seedless-onboarding":8186,"./selectors":8188,"./transactions":8200},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../pages/confirmations/selectors/confirm");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))});var o=e("./confirm-transaction");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}}))});var a=e("./custom-gas");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===a[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}}))});var s=e("./first-time-flow");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===s[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}}))});var i=e("./metametrics");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===i[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}}))});var c=e("./selectors");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===c[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}}))});var u=e("./transactions");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===u[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}}))});var l=e("./approvals");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===l[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return l[e]}}))});var d=e("./accounts");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===d[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return d[e]}}))});var p=e("./remote-feature-flags");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===p[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return p[e]}}))});var h=e("./origin-throttling");Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===h[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return h[e]}}))});var f=e("./multichain/networks");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===f[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return f[e]}}))});var g=e("./multichain-accounts");Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===g[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return g[e]}}))});var m=e("./seedless-onboarding");Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===m[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return m[e]}}))})}}},{package:"$root$",file:"ui/selectors/index.js"}],[817,{"./json-rpc-provider":818,"@ethersproject/properties":804,"@ethersproject/web":854},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.JsonRpcBatchProvider=void 0;var a=e("@ethersproject/properties"),s=e("@ethersproject/web"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.send=function(e,t){var r=this,n={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};null==this._pendingBatch&&(this._pendingBatch=[]);var o={request:n,resolve:null,reject:null},i=new Promise(function(e,t){o.resolve=e,o.reject=t});return this._pendingBatch.push(o),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(function(){var e=r._pendingBatch;r._pendingBatch=null,r._pendingBatchAggregator=null;var t=e.map(function(e){return e.request});return r.emit("debug",{action:"requestBatch",request:(0,a.deepCopy)(t),provider:r}),(0,s.fetchJson)(r.connection,JSON.stringify(t)).then(function(n){r.emit("debug",{action:"response",request:t,response:n,provider:r}),e.forEach(function(e,t){var r=n[t];if(r.error){var o=new Error(r.error.message);o.code=r.error.code,o.data=r.error.data,e.reject(o)}else e.resolve(r.result)})},function(n){r.emit("debug",{action:"response",error:n,request:t,provider:r}),e.forEach(function(e){e.reject(n)})})},10)),i},t}(e("./json-rpc-provider").JsonRpcProvider);r.JsonRpcBatchProvider=i}}},{package:"@ethersproject/providers",file:"node_modules/@ethersproject/providers/lib/json-rpc-batch-provider.js"}],[8170,{reselect:5371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.selectMatchingFragment=r.selectFragments=r.selectFragmentBySuccessEvent=r.selectFragmentById=r.getPna25Acknowledged=r.getParticipateInMetaMetrics=r.getLatestMetricsEventTimestamp=r.getIsParticipateInMetaMetricsSet=r.getDataCollectionForMarketing=void 0;var n=e("reselect");const o=e=>e.metamask.fragments;r.selectFragments=o;r.getDataCollectionForMarketing=e=>e.metamask.dataCollectionForMarketing;r.getParticipateInMetaMetrics=e=>Boolean(e.metamask.participateInMetaMetrics);r.getIsParticipateInMetaMetricsSet=e=>null!==e.metamask.participateInMetaMetrics;r.getPna25Acknowledged=e=>e.metamask.pna25Acknowledged;r.getLatestMetricsEventTimestamp=e=>e.metamask.latestNonAnonymousEventTimestamp;const a=r.selectFragmentBySuccessEvent=(0,n.createSelector)(o,(e,t)=>t,(e,t)=>t.persist?Object.values(e).find(e=>e.successEvent===t.successEvent):undefined),s=r.selectFragmentById=(0,n.createSelector)(o,(e,t)=>t,(e,t)=>t&&null!=e&&e[t]?e[t]:undefined);r.selectMatchingFragment=(0,n.createSelector)((e,t)=>a(e,t.fragmentOptions),(e,t)=>s(e,t.existingId),(e,t)=>t??e)}}},{package:"$root$",file:"ui/selectors/metametrics.js"}],[8173,{"../../../shared/lib/multichain-accounts/remote-feature-flag":5943,"../remote-feature-flags":8185,"@metamask/superstruct":3037},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getMultichainAccountsRemoteFeatureFlags=r.getIsMultichainAccountsState2Enabled=r.getIsMultichainAccountsState1Enabled=r.STATE_2_FLAG=r.STATE_1_FLAG=void 0;var n=e("@metamask/superstruct"),o=e("../remote-feature-flags"),a=e("../../../shared/lib/multichain-accounts/remote-feature-flag");const s=r.STATE_1_FLAG="enableMultichainAccounts",i=r.STATE_2_FLAG="enableMultichainAccountsState2",c=(0,n.object)({enabled:(0,n.boolean)(),featureVersion:(0,n.nullable)((0,n.string)()),minimumVersion:(0,n.nullable)((0,n.string)())}),u=(e,t)=>{try{const r=(0,o.getRemoteFeatureFlags)(e)[t];return(0,n.assert)(r,c),r}catch(e){return undefined}};r.getMultichainAccountsRemoteFeatureFlags=u;r.getIsMultichainAccountsState1Enabled=e=>{const t=u(e,s),r=u(e,i);return(0,a.isMultichainAccountsFeatureEnabled)(t,a.FEATURE_VERSION_1)||(0,a.isMultichainAccountsFeatureEnabled)(r,a.FEATURE_VERSION_2)};r.getIsMultichainAccountsState2Enabled=e=>{const t=u(e,i);return(0,a.isMultichainAccountsFeatureEnabled)(t,a.FEATURE_VERSION_2)}}}},{package:"$root$",file:"ui/selectors/multichain-accounts/feature-flags.ts"}],[8174,{"./feature-flags":8173},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./feature-flags");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))})}}},{package:"$root$",file:"ui/selectors/multichain-accounts/index.ts"}],[8177,{"../../app/scripts/lib/util":374,"../../shared/constants/multichain/assets":5855,"../../shared/constants/multichain/networks":5856,"../../shared/constants/network":5857,"../../shared/modules/Numeric":5969,"../../shared/modules/selectors/networks":5995,"../../shared/modules/selectors/util":5999,"../ducks/metamask/metamask":7098,"./accounts":8157,"./multichain/networks":8179,"./selectors":8188,"@metamask/keyring-api":2306,"@metamask/keyring-utils":2352,"@metamask/network-controller":2432,"@metamask/utils":3217,"prop-types":5157,reselect:5371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MultichainNetworkPropType=r.InternalAccountPropType=void 0,r.getImageForChainId=function(e){return{...f.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP,...l.MULTICHAIN_TOKEN_IMAGE_MAP}[e]},r.getLastSelectedSolanaAccount=r.getLastSelectedNonEvmAccount=void 0,r.getLastSelectedTronAccount=function(e){const t=(0,_.getInternalAccounts)(e).filter(e=>(0,_.isTronAccount)(e)).sort((e,t)=>(t.metadata.lastSelected??0)-(e.metadata.lastSelected??0));return t.length>0?t[0]:undefined},r.getMemoizedMultichainNetworkConfigurationsByChainId=void 0,r.getMultichainBalances=C,r.getMultichainCoinRates=void 0,r.getMultichainConversionRate=function(e,t){var r;const{conversionRates:n}=e.metamask,{chainId:o}=N(e,t),a=null===(r=(0,m.getConversionRatesForNativeAsset)({conversionRates:n,chainId:o}))||void 0===r?void 0:r.rate;return b(e,t)?(0,p.getConversionRate)(e):a},r.getMultichainCurrencyImage=I,r.getMultichainCurrentChainId=function(e){const{chainId:t}=A(e);return t},r.getMultichainCurrentCurrency=function(e){return(0,p.getCurrentCurrency)(e)},r.getMultichainCurrentNetwork=function(e,t){return A(e,t)},r.getMultichainDefaultToken=k,r.getMultichainIsBitcoin=function(e,t){const r=b(e,t),{symbol:n}=k(e,t);return!r&&"BTC"===n},r.getMultichainIsEvm=b,r.getMultichainIsMainnet=function(e,t){const r=t??(0,_.getSelectedInternalAccount)(e),n=A(e,r);if(b(e,t))return(0,T.getIsMainnet)(e);const o=l.MULTICHAIN_ACCOUNT_TYPE_TO_MAINNET[r.type];if(!o)return!1;if((0,a.isBtcTestnetAddress)(r.address))return!1;return n.chainId===o},r.getMultichainIsSolana=function(e,t){const r=b(e,t),{symbol:n}=k(e,t);return!r&&"SOL"===n},r.getMultichainIsTestnet=O,r.getMultichainIsTron=function(e,t){const r=b(e,t),{symbol:n}=k(e,t);return!r&&"TRX"===n},r.getMultichainNativeCurrency=function(e,t){return b(e,t)?(0,p.getNativeCurrency)(e):A(e,t).ticker},r.getMultichainNativeCurrencyImage=function(e,t){return I(e,t)},r.getMultichainNetwork=N,r.getMultichainNetworkConfigurationsByChainId=void 0,r.getMultichainNetworkProviders=v,r.getMultichainProviderConfig=A,r.getMultichainSelectedAccountCachedBalance=w,r.getMultichainSelectedAccountCachedBalanceIsZero=void 0,r.getMultichainShouldShowFiat=y,r.getMultichainTransactions=function(e){return e.metamask.nonEvmTransactions},r.getSelectedAccountMultichainTransactions=function(e){const t=(0,_.getSelectedInternalAccount)(e);if((0,o.isEvmAccountType)(t.type))return undefined;const r=e.metamask.nonEvmTransactions[t.id],n=A(e,t).chainId;if((0,i.isCaipChainId)(n))return null==r?void 0:r[n];return undefined},r.isChainIdMainnet=function(e){return e===f.CHAIN_IDS.MAINNET},r.makeGetMultichainShouldShowFiatByChainId=void 0;var n,o=e("@metamask/keyring-api"),a=e("@metamask/keyring-utils"),s=e("@metamask/network-controller"),i=e("@metamask/utils"),c=(n=e("prop-types"))&&n.__esModule?n:{default:n},u=e("reselect"),l=e("../../shared/constants/multichain/networks"),d=e("../../shared/modules/Numeric"),p=e("../ducks/metamask/metamask"),h=e("../../shared/constants/multichain/assets"),f=e("../../shared/constants/network"),g=e("../../shared/modules/selectors/networks"),m=e("../../app/scripts/lib/util"),E=e("../../shared/modules/selectors/util"),_=e("./accounts"),T=e("./selectors"),S=e("./multichain/networks");r.MultichainNetworkPropType=c.default.shape({nickname:c.default.string.isRequired,isEvmNetwork:c.default.bool.isRequired,chainId:c.default.string,network:c.default.oneOfType([c.default.shape({rpcUrl:c.default.string,type:c.default.string.isRequired,chainId:c.default.string.isRequired,ticker:c.default.string.isRequired,rpcPrefs:c.default.shape({blockExplorerUrl:c.default.string,imageUrl:c.default.string}),nickname:c.default.string,id:c.default.string}),c.default.shape({chainId:c.default.string.isRequired,ticker:c.default.string.isRequired,rpcPrefs:c.default.shape({blockExplorerUrl:c.default.string,imageUrl:c.default.string})})]).isRequired}),r.InternalAccountPropType=c.default.shape({id:c.default.string.isRequired,address:c.default.string.isRequired,metadata:c.default.shape({name:c.default.string.isRequired,snap:c.default.shape({id:c.default.string.isRequired,name:c.default.string,enabled:c.default.bool}),keyring:c.default.shape({type:c.default.string.isRequired}).isRequired}).isRequired,type:c.default.string.isRequired});function v(e){return Object.values(l.MULTICHAIN_PROVIDER_CONFIGS)}function N(e,t){var r;if(b(e,t)){var n;const t=(0,g.getCurrentChainId)(e),r=(0,g.getProviderConfig)(e),o=t;r.rpcPrefs={...r.rpcPrefs,imageUrl:f.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[o]};return{nickname:(null===(n=(0,g.getNetworkConfigurationsByChainId)(e)[t])||void 0===n?void 0:n.name)??r.rpcUrl,isEvmNetwork:!0,chainId:`${i.KnownCaipNamespace.Eip155}:${Number(t)}`,network:r}}const o=t??(0,_.getSelectedInternalAccount)(e),a=v(),s=e.metamask.selectedMultichainNetworkChainId;let c;if(o.scopes.length>0&&(c=a.find(e=>o.scopes.includes(e.chainId))),!c&&s&&(c=a.find(e=>e.chainId===s)),c||(c=a.find(e=>e.isAddressCompatible(o.address))),!c)throw new Error("Could not find non-EVM provider for the current configuration. This should never happen.");return{nickname:c.nickname,isEvmNetwork:!1,chainId:null===(r=c)||void 0===r?void 0:r.chainId,network:c}}function b(e,t){const r=(0,p.getCompletedOnboarding)(e),n=t??(0,T.getMaybeSelectedInternalAccount)(e);return!r||!n||(0,o.isEvmAccountType)(n.type)}function A(e,t){return N(e,t).network}function I(e,t){var r;if(b(e,t))return(0,T.getNativeCurrencyImage)(e);return null===(r=A(e,t).rpcPrefs)||void 0===r?void 0:r.imageUrl}function y(e,t,r){const n=t??(0,_.getSelectedInternalAccount)(e),o=O(e,n),a=!o,s=(0,T.getUseCurrencyRateCheck)(e);return b(e,n)?(0,T.getShouldShowFiat)(e,r):s&&a||s&&o&&(0,T.getShowFiatInTestnets)(e)}function k(e,t){var r;return{symbol:b(e,t)?(null===(r=(0,g.getProviderConfig)(e))||void 0===r?void 0:r.ticker)??"ETH":A(e,t).ticker}}function O(e,t){const r=t??(0,_.getSelectedInternalAccount)(e),n=A(e,r);return b(e,t)?f.TEST_NETWORK_IDS.includes(n.chainId):!!(0,a.isBtcTestnetAddress)(r.address)||[l.MultichainNetworks.BITCOIN_TESTNET,l.MultichainNetworks.BITCOIN_SIGNET,l.MultichainNetworks.SOLANA_DEVNET,l.MultichainNetworks.SOLANA_TESTNET,l.MultichainNetworks.TRON_NILE,l.MultichainNetworks.TRON_SHASTA].includes(n.chainId)}function C(e){return e.metamask.balances}r.makeGetMultichainShouldShowFiatByChainId=e=>(t,r)=>y(t,r,e);function w(e){return b(e)?(0,T.getSelectedAccountCachedBalance)(e):function(e,t){var r;const n=C(e),o=t??(0,_.getSelectedInternalAccount)(e),a=(0,S.getSelectedMultichainNetworkConfiguration)(e),s=(null==a?void 0:a.chainId)??e.metamask.selectedMultichainNetworkChainId,i=null===(r=h.MULTICHAIN_NETWORK_TO_ASSET_TYPES[s])||void 0===r?void 0:r[0];i||console.warn("Could not find asset type for chainId:",s);const c=null==n?void 0:n[o.id];c||console.warn("Could not find balances for account:",o);const u=null==c?void 0:c[i];return u||console.warn("Could not find balance for asset:",i),(null==u?void 0:u.amount)??0}(e)}r.getMultichainCoinRates=e=>e.metamask.rates;r.getMultichainSelectedAccountCachedBalanceIsZero=(0,u.createSelector)([b,w],(e,t)=>{const r=e?16:10;return new d.Numeric(t,r).isZero()});const P=e=>({...(0,g.getNetworkConfigurationsByChainId)(e),[l.MultichainNetworks.SOLANA]:{...l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.SOLANA],blockExplorerUrls:[],name:l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.SOLANA].nickname??"",nativeCurrency:"sol",rpcEndpoints:[{url:"",type:s.RpcEndpointType.Custom,networkClientId:""}],defaultRpcEndpointIndex:0,chainId:l.MultichainNetworks.SOLANA},[l.MultichainNetworks.BITCOIN]:{...l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.BITCOIN],blockExplorerUrls:[],name:l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.BITCOIN].nickname??"",nativeCurrency:"BTC",rpcEndpoints:[{url:"",type:s.RpcEndpointType.Custom,networkClientId:""}],defaultRpcEndpointIndex:0,chainId:l.MultichainNetworks.BITCOIN},[l.MultichainNetworks.BITCOIN_TESTNET]:{...l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.BITCOIN_TESTNET],blockExplorerUrls:[],name:l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.BITCOIN_TESTNET].nickname??"",nativeCurrency:"tBTC",rpcEndpoints:[{url:"",type:s.RpcEndpointType.Custom,networkClientId:""}],defaultRpcEndpointIndex:0,chainId:l.MultichainNetworks.BITCOIN_TESTNET},[l.MultichainNetworks.BITCOIN_SIGNET]:{...l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.BITCOIN_SIGNET],blockExplorerUrls:[],name:l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.BITCOIN_SIGNET].nickname??"",nativeCurrency:"sBTC",rpcEndpoints:[{url:"",type:s.RpcEndpointType.Custom,networkClientId:""}],defaultRpcEndpointIndex:0,chainId:l.MultichainNetworks.BITCOIN_SIGNET},[l.MultichainNetworks.TRON]:{...l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.TRON],blockExplorerUrls:[],name:l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.TRON].nickname??"",nativeCurrency:"TRX",rpcEndpoints:[{url:"",type:s.RpcEndpointType.Custom,networkClientId:""}],defaultRpcEndpointIndex:0,chainId:l.MultichainNetworks.TRON},[l.MultichainNetworks.TRON_NILE]:{...l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.TRON_NILE],blockExplorerUrls:[],name:l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.TRON_NILE].nickname??"",nativeCurrency:"TRX",rpcEndpoints:[{url:"",type:s.RpcEndpointType.Custom,networkClientId:""}],defaultRpcEndpointIndex:0,chainId:l.MultichainNetworks.TRON_NILE},[l.MultichainNetworks.TRON_SHASTA]:{...l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.TRON_SHASTA],blockExplorerUrls:[],name:l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.TRON_SHASTA].nickname??"",nativeCurrency:"TRX",rpcEndpoints:[{url:"",type:s.RpcEndpointType.Custom,networkClientId:""}],defaultRpcEndpointIndex:0,chainId:l.MultichainNetworks.TRON_SHASTA}});r.getMultichainNetworkConfigurationsByChainId=P;r.getMemoizedMultichainNetworkConfigurationsByChainId=(0,E.createDeepEqualSelector)([P],e=>e),r.getLastSelectedNonEvmAccount=(0,u.createSelector)(_.getInternalAccounts,e=>{const t=e.filter(e=>!(0,o.isEvmAccountType)(e.type)).sort((e,t)=>(t.metadata.lastSelected??0)-(e.metadata.lastSelected??0));return t.length>0?t[0]:undefined}),r.getLastSelectedSolanaAccount=(0,u.createSelector)(_.getInternalAccounts,e=>{const t=e.filter(e=>(0,_.isSolanaAccount)(e)).sort((e,t)=>(t.metadata.lastSelected??0)-(e.metadata.lastSelected??0));return t.length>0?t[0]:undefined})}}},{package:"$root$",file:"ui/selectors/multichain.ts"}],[8178,{"../../../shared/lib/multichain-feature-flags":5944,"../remote-feature-flags":8185,reselect:5371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getIsTronTestnetSupportEnabled=r.getIsTronSupportEnabled=r.getIsSolanaTestnetSupportEnabled=r.getIsSolanaSupportEnabled=r.getIsBitcoinTestnetSupportEnabled=r.getIsBitcoinSupportEnabled=void 0;var n=e("reselect"),o=e("../../../shared/lib/multichain-feature-flags"),a=e("../remote-feature-flags");r.getIsBitcoinSupportEnabled=(0,n.createSelector)(a.getRemoteFeatureFlags,({bitcoinAccounts:e})=>{let t=!1;return t=(0,o.isMultichainFeatureEnabled)(e),t}),r.getIsSolanaSupportEnabled=(0,n.createSelector)(a.getRemoteFeatureFlags,({solanaAccounts:e})=>(0,o.isMultichainFeatureEnabled)(e)),r.getIsTronSupportEnabled=(0,n.createSelector)(a.getRemoteFeatureFlags,({tronAccounts:e})=>{let t=!1;return t=(0,o.isMultichainFeatureEnabled)(e),t}),r.getIsSolanaTestnetSupportEnabled=(0,n.createSelector)(a.getRemoteFeatureFlags,({solanaTestnetsEnabled:e})=>Boolean(e)),r.getIsBitcoinTestnetSupportEnabled=(0,n.createSelector)(a.getRemoteFeatureFlags,({bitcoinTestnetsEnabled:e})=>Boolean(e)),r.getIsTronTestnetSupportEnabled=(0,n.createSelector)(a.getRemoteFeatureFlags,({tronTestnetsEnabled:e})=>Boolean(e))}}},{package:"$root$",file:"ui/selectors/multichain/feature-flags.ts"}],[8179,{"../../../shared/constants/network":5857,"../../../shared/lib/network-utils":5949,"../../../shared/modules/selectors/multichain":5994,"../../../shared/modules/selectors/networks":5995,"../../../shared/modules/selectors/util":5999,"../accounts":8157,"./feature-flags":8178,"@metamask/keyring-api":2306,"@metamask/multichain-network-controller":2412,"@metamask/network-controller":2432,"@metamask/utils":3217,reselect:5371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.selectFirstUnavailableEvmNetwork=r.selectAnyEnabledNetworksAreAvailable=r.getSelectedMultichainNetworkConfiguration=r.getSelectedMultichainNetworkChainId=r.getNonEvmMultichainNetworkConfigurationsByChainId=r.getNetworksWithActivity=r.getMultichainNetworkConfigurationsByChainId=r.getIsNonEvmNetworksEnabled=r.getIsEvmMultichainNetworkSelected=r.getEvmMultichainNetworkConfigurations=r.getEnabledNetworksByNamespace=r.getEnabledNetworkClientIds=r.getEnabledChainIds=r.getAllMultichainNetworkConfigurations=r.getAllEnabledNetworksForAllNamespaces=void 0;var n=e("@metamask/multichain-network-controller"),o=e("@metamask/network-controller"),a=e("@metamask/keyring-api"),s=e("@metamask/utils"),i=e("reselect"),c=e("../../../shared/modules/selectors/networks"),u=e("../../../shared/modules/selectors/util"),l=e("../../../shared/modules/selectors/multichain"),d=e("../../../shared/lib/network-utils"),p=e("../../../shared/constants/network"),h=e("../accounts"),f=e("./feature-flags");const g=r.getIsNonEvmNetworksEnabled=(0,i.createSelector)(f.getIsBitcoinSupportEnabled,f.getIsSolanaSupportEnabled,f.getIsTronSupportEnabled,h.getInternalAccounts,(e,t,r,n)=>{if(e&&t&&r)return{bitcoinEnabled:!0,solanaEnabled:!0,tronEnabled:!0};let o=e,s=t,i=r;for(const{scopes:e}of n)if(null!=e&&e.includes(a.BtcScope.Mainnet||a.BtcScope.Testnet||a.BtcScope.Signet)&&(o=!0),null!=e&&e.includes(a.SolScope.Mainnet)&&(s=!0),null!=e&&e.includes(a.TrxScope.Mainnet)&&(i=!0),o&&s&&i)break;return{bitcoinEnabled:o,solanaEnabled:s,tronEnabled:i}}),m=r.getNonEvmMultichainNetworkConfigurationsByChainId=(0,u.createDeepEqualSelector)(e=>e.metamask.multichainNetworkConfigurationsByChainId,g,f.getIsSolanaTestnetSupportEnabled,f.getIsBitcoinTestnetSupportEnabled,f.getIsTronTestnetSupportEnabled,(e,t,r,n,o)=>{const s={},{bitcoinEnabled:i,solanaEnabled:c,tronEnabled:u}=t;return i&&e&&e[a.BtcScope.Mainnet]&&(s[a.BtcScope.Mainnet]=e[a.BtcScope.Mainnet]),i&&n&&e&&(e[a.BtcScope.Testnet]&&(s[a.BtcScope.Testnet]=e[a.BtcScope.Testnet]),e[a.BtcScope.Signet]&&(s[a.BtcScope.Signet]=e[a.BtcScope.Signet])),c&&e&&e[a.SolScope.Mainnet]&&(s[a.SolScope.Mainnet]=e[a.SolScope.Mainnet]),c&&r&&e&&e[a.SolScope.Devnet]&&(s[a.SolScope.Devnet]=e[a.SolScope.Devnet]),u&&e&&e[a.TrxScope.Mainnet]&&(s[a.TrxScope.Mainnet]=e[a.TrxScope.Mainnet]),u&&o&&e&&e[a.TrxScope.Nile]&&e[a.TrxScope.Shasta]&&(s[a.TrxScope.Nile]=e[a.TrxScope.Nile],s[a.TrxScope.Shasta]=e[a.TrxScope.Shasta]),s}),E=r.getEvmMultichainNetworkConfigurations=(0,i.createSelector)(c.getNetworkConfigurationsByChainId,e=>{const t={};for(const[,r]of Object.entries(e))t[(0,n.toEvmCaipChainId)(r.chainId)]={...(0,n.toMultichainNetworkConfiguration)(r),name:r.name||r.rpcEndpoints[r.defaultRpcEndpointIndex].url};return t}),_=r.getAllMultichainNetworkConfigurations=(0,i.createSelector)(m,E,(e,t)=>({...e,...t})),T=(r.getMultichainNetworkConfigurationsByChainId=(0,i.createSelector)(_,c.getNetworkConfigurationsByChainId,(e,t)=>[e,t]),e=>e.metamask.isEvmSelected);r.getIsEvmMultichainNetworkSelected=T;const S=e=>{if(T(e)){const t=(0,c.getProviderConfig)(e);return(0,n.toEvmCaipChainId)(t.chainId)}return e.metamask.selectedMultichainNetworkChainId};r.getSelectedMultichainNetworkChainId=S;r.getSelectedMultichainNetworkConfiguration=(0,i.createSelector)(S,_,(e,t)=>t[e]);r.getNetworksWithActivity=e=>e.metamask.networksWithTransactionActivity;r.getEnabledNetworksByNamespace=(0,i.createSelector)(l.getEnabledNetworks,S,(e,t)=>{const{namespace:r}=(0,s.parseCaipChainId)(t),n=e[r]??{};return Object.fromEntries(Object.entries(n).filter(([,e])=>!0===e))}),r.getAllEnabledNetworksForAllNamespaces=(0,i.createSelector)(l.getEnabledNetworks,e=>Object.values(e).flatMap(e=>Object.entries(e).filter(([,e])=>e).map(([e])=>e))),r.getEnabledChainIds=(0,i.createSelector)(c.getNetworkConfigurationsByChainId,l.getEnabledNetworks,S,(e,t,r)=>{const{namespace:n}=(0,s.parseCaipChainId)(r),o=t[n]||{};return Object.keys(e).filter(e=>o[e])}),r.getEnabledNetworkClientIds=(0,i.createSelector)(c.getNetworkConfigurationsByChainId,l.getEnabledNetworks,S,(e,t,r)=>{const{namespace:n}=(0,s.parseCaipChainId)(r),o=t[n]||{};return Object.entries(e).reduce((e,[t,r])=>(o[t]&&e.push(r.rpcEndpoints[r.defaultRpcEndpointIndex].networkClientId),e),[])}),r.selectAnyEnabledNetworksAreAvailable=(0,i.createSelector)(l.getEnabledNetworks,c.selectDefaultNetworkClientIdsByChainId,c.getNetworksMetadata,(e,t,r)=>Object.entries(e).reduce((e,[n,a])=>{if(n===s.KnownCaipNamespace.Eip155){const e=Object.entries(a).filter(([e,t])=>t).map(([e,t])=>e).map(e=>t[e]);return 0===e.length||e.some(e=>{var t;return(null===(t=r[e])||void 0===t?void 0:t.status)===o.NetworkStatus.Available})}return e},!0)),r.selectFirstUnavailableEvmNetwork=(0,i.createSelector)(l.getEnabledNetworks,c.getNetworkConfigurationsByChainId,c.getNetworksMetadata,(e,t,r)=>{const n=e[s.KnownCaipNamespace.Eip155]??{},a=Object.entries(n).filter(([,e])=>e).map(([e])=>e);for(const e of a){const n=t[e];if(n){const{rpcEndpoints:t,defaultRpcEndpointIndex:a,name:s}=n,i=t[a];if(i){const n=r[i.networkClientId];if(n!==undefined&&n.status!==o.NetworkStatus.Available){const r=(0,d.getIsMetaMaskInfuraEndpointUrl)(i.url,p.infuraProjectId??"");let n;return r||(n=t.findIndex((e,t)=>t!==a&&(0,d.getIsMetaMaskInfuraEndpointUrl)(e.url,p.infuraProjectId??"")),-1===n&&(n=undefined)),{networkClientId:i.networkClientId,chainId:e,networkName:s,isInfuraEndpoint:r,infuraEndpointIndex:n}}}}}return null})}}},{package:"$root$",file:"ui/selectors/multichain/networks.ts"}],[818,{"./_version":805,"./base-provider":808,"@ethersproject/abstract-signer":759,"@ethersproject/bignumber":768,"@ethersproject/bytes":770,"@ethersproject/hash":783,"@ethersproject/logger":798,"@ethersproject/properties":804,"@ethersproject/strings":844,"@ethersproject/transactions":847,"@ethersproject/web":854},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function i(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,i)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.JsonRpcProvider=r.JsonRpcSigner=void 0;var i=e("@ethersproject/abstract-signer"),c=e("@ethersproject/bignumber"),u=e("@ethersproject/bytes"),l=e("@ethersproject/hash"),d=e("@ethersproject/properties"),p=e("@ethersproject/strings"),h=e("@ethersproject/transactions"),f=e("@ethersproject/web"),g=e("@ethersproject/logger"),m=e("./_version"),E=new g.Logger(m.version),_=e("./base-provider"),T=["call","estimateGas"];function S(e,t){if(null==e)return null;if("string"==typeof e.message&&e.message.match("reverted")){var r=(0,u.isHexString)(e.data)?e.data:null;if(!t||r)return{message:e.message,data:r}}if("object"==typeof e){for(var n in e){var o=S(e[n],t);if(o)return o}return null}if("string"==typeof e)try{return S(JSON.parse(e),t)}catch(e){}return null}function v(e,t,r){var n=r.transaction||r.signedTransaction;if("call"===e){var o;if(o=S(t,!0))return o.data;E.throwError("missing revert data in call exception; Transaction reverted without a reason string",g.Logger.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:t})}"estimateGas"===e&&(null==(o=S(t.body,!1))&&(o=S(t,!1)),o&&E.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",g.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{reason:o.message,method:e,transaction:n,error:t}));var a=t.message;throw t.code===g.Logger.errors.SERVER_ERROR&&t.error&&"string"==typeof t.error.message?a=t.error.message:"string"==typeof t.body?a=t.body:"string"==typeof t.responseText&&(a=t.responseText),(a=(a||"").toLowerCase()).match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&E.throwError("insufficient funds for intrinsic transaction cost",g.Logger.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:n}),a.match(/nonce (is )?too low/i)&&E.throwError("nonce has already been used",g.Logger.errors.NONCE_EXPIRED,{error:t,method:e,transaction:n}),a.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&E.throwError("replacement fee too low",g.Logger.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:n}),a.match(/only replay-protected/i)&&E.throwError("legacy pre-eip-155 transactions not supported",g.Logger.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:n}),T.indexOf(e)>=0&&a.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&E.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",g.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:n}),t}function N(e){return new Promise(function(t){setTimeout(t,e)})}function b(e){if(e.error){var t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function A(e){return e?e.toLowerCase():e}var I={},y=function(e){function t(t,r,n){var o=e.call(this)||this;if(t!==I)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");return(0,d.defineReadOnly)(o,"provider",r),null==n&&(n=0),"string"==typeof n?((0,d.defineReadOnly)(o,"_address",o.provider.formatter.address(n)),(0,d.defineReadOnly)(o,"_index",null)):"number"==typeof n?((0,d.defineReadOnly)(o,"_index",n),(0,d.defineReadOnly)(o,"_address",null)):E.throwArgumentError("invalid address or index","addressOrIndex",n),o}return o(t,e),t.prototype.connect=function(e){return E.throwError("cannot alter JSON-RPC Signer connection",g.Logger.errors.UNSUPPORTED_OPERATION,{operation:"connect"})},t.prototype.connectUnchecked=function(){return new k(I,this.provider,this._address||this._index)},t.prototype.getAddress=function(){var e=this;return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(function(t){return t.length<=e._index&&E.throwError("unknown account #"+e._index,g.Logger.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),e.provider.formatter.address(t[e._index])})},t.prototype.sendUncheckedTransaction=function(e){var t=this;e=(0,d.shallowCopy)(e);var r=this.getAddress().then(function(e){return e&&(e=e.toLowerCase()),e});if(null==e.gasLimit){var n=(0,d.shallowCopy)(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return null!=e.to&&(e.to=Promise.resolve(e.to).then(function(e){return a(t,void 0,void 0,function(){var t;return s(this,function(r){switch(r.label){case 0:return null==e?[2,null]:[4,this.provider.resolveName(e)];case 1:return null==(t=r.sent())&&E.throwArgumentError("provided ENS name resolves to null","tx.to",e),[2,t]}})})})),(0,d.resolveProperties)({tx:(0,d.resolveProperties)(e),sender:r}).then(function(r){var n=r.tx,o=r.sender;null!=n.from?n.from.toLowerCase()!==o&&E.throwArgumentError("from address mismatch","transaction",e):n.from=o;var a=t.provider.constructor.hexlifyTransaction(n,{from:!0});return t.provider.send("eth_sendTransaction",[a]).then(function(e){return e},function(e){return"string"==typeof e.message&&e.message.match(/user denied/i)&&E.throwError("user rejected transaction",g.Logger.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),v("sendTransaction",e,a)})})},t.prototype.signTransaction=function(e){return E.throwError("signing transactions is unsupported",g.Logger.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})},t.prototype.sendTransaction=function(e){return a(this,void 0,void 0,function(){var t,r,n,o=this;return s(this,function(i){switch(i.label){case 0:return[4,this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval)];case 1:return t=i.sent(),[4,this.sendUncheckedTransaction(e)];case 2:r=i.sent(),i.label=3;case 3:return i.trys.push([3,5,,6]),[4,(0,f.poll)(function(){return a(o,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return[4,this.provider.getTransaction(r)];case 1:return null===(e=n.sent())?[2,undefined]:[2,this.provider._wrapTransaction(e,r,t)]}})})},{oncePoll:this.provider})];case 4:return[2,i.sent()];case 5:throw(n=i.sent()).transactionHash=r,n;case 6:return[2]}})})},t.prototype.signMessage=function(e){return a(this,void 0,void 0,function(){var t,r,n;return s(this,function(o){switch(o.label){case 0:return t="string"==typeof e?(0,p.toUtf8Bytes)(e):e,[4,this.getAddress()];case 1:r=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.provider.send("personal_sign",[(0,u.hexlify)(t),r.toLowerCase()])];case 3:return[2,o.sent()];case 4:throw"string"==typeof(n=o.sent()).message&&n.message.match(/user denied/i)&&E.throwError("user rejected signing",g.Logger.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),n;case 5:return[2]}})})},t.prototype._legacySignMessage=function(e){return a(this,void 0,void 0,function(){var t,r,n;return s(this,function(o){switch(o.label){case 0:return t="string"==typeof e?(0,p.toUtf8Bytes)(e):e,[4,this.getAddress()];case 1:r=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.provider.send("eth_sign",[r.toLowerCase(),(0,u.hexlify)(t)])];case 3:return[2,o.sent()];case 4:throw"string"==typeof(n=o.sent()).message&&n.message.match(/user denied/i)&&E.throwError("user rejected signing",g.Logger.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),n;case 5:return[2]}})})},t.prototype._signTypedData=function(e,t,r){return a(this,void 0,void 0,function(){var n,o,a,i=this;return s(this,function(s){switch(s.label){case 0:return[4,l._TypedDataEncoder.resolveNames(e,t,r,function(e){return i.provider.resolveName(e)})];case 1:return n=s.sent(),[4,this.getAddress()];case 2:o=s.sent(),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,this.provider.send("eth_signTypedData_v4",[o.toLowerCase(),JSON.stringify(l._TypedDataEncoder.getPayload(n.domain,t,n.value))])];case 4:return[2,s.sent()];case 5:throw"string"==typeof(a=s.sent()).message&&a.message.match(/user denied/i)&&E.throwError("user rejected signing",g.Logger.errors.ACTION_REJECTED,{action:"_signTypedData",from:o,messageData:{domain:n.domain,types:t,value:n.value}}),a;case 6:return[2]}})})},t.prototype.unlock=function(e){return a(this,void 0,void 0,function(){var t,r;return s(this,function(n){switch(n.label){case 0:return t=this.provider,[4,this.getAddress()];case 1:return r=n.sent(),[2,t.send("personal_unlockAccount",[r.toLowerCase(),e,null])]}})})},t}(i.Signer);r.JsonRpcSigner=y;var k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.sendTransaction=function(e){var t=this;return this.sendUncheckedTransaction(e).then(function(e){return{hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:function(r){return t.provider.waitForTransaction(e,r)}}})},t}(y),O={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0},C=function(e){function t(t,r){var n=this,o=r;return null==o&&(o=new Promise(function(e,t){setTimeout(function(){n.detectNetwork().then(function(t){e(t)},function(e){t(e)})},0)})),n=e.call(this,o)||this,t||(t=(0,d.getStatic)(n.constructor,"defaultUrl")()),"string"==typeof t?(0,d.defineReadOnly)(n,"connection",Object.freeze({url:t})):(0,d.defineReadOnly)(n,"connection",Object.freeze((0,d.shallowCopy)(t))),n._nextId=42,n}return o(t,e),Object.defineProperty(t.prototype,"_cache",{get:function(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache},enumerable:!1,configurable:!0}),t.defaultUrl=function(){return"http://localhost:8545"},t.prototype.detectNetwork=function(){var e=this;return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(function(){e._cache.detectNetwork=null},0)),this._cache.detectNetwork},t.prototype._uncachedDetectNetwork=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(r){switch(r.label){case 0:return[4,N(0)];case 1:r.sent(),e=null,r.label=2;case 2:return r.trys.push([2,4,,9]),[4,this.send("eth_chainId",[])];case 3:return e=r.sent(),[3,9];case 4:r.sent(),r.label=5;case 5:return r.trys.push([5,7,,8]),[4,this.send("net_version",[])];case 6:return e=r.sent(),[3,8];case 7:return r.sent(),[3,8];case 8:return[3,9];case 9:if(null!=e){t=(0,d.getStatic)(this.constructor,"getNetwork");try{return[2,t(c.BigNumber.from(e).toNumber())]}catch(t){return[2,E.throwError("could not detect network",g.Logger.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t})]}}return[2,E.throwError("could not detect network",g.Logger.errors.NETWORK_ERROR,{event:"noNetwork"})]}})})},t.prototype.getSigner=function(e){return new y(I,this,e)},t.prototype.getUncheckedSigner=function(e){return this.getSigner(e).connectUnchecked()},t.prototype.listAccounts=function(){var e=this;return this.send("eth_accounts",[]).then(function(t){return t.map(function(t){return e.formatter.address(t)})})},t.prototype.send=function(e,t){var r=this,n={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:(0,d.deepCopy)(n),provider:this});var o=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(o&&this._cache[e])return this._cache[e];var a=(0,f.fetchJson)(this.connection,JSON.stringify(n),b).then(function(e){return r.emit("debug",{action:"response",request:n,response:e,provider:r}),e},function(e){throw r.emit("debug",{action:"response",error:e,request:n,provider:r}),e});return o&&(this._cache[e]=a,setTimeout(function(){r._cache[e]=null},0)),a},t.prototype.prepareRequest=function(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[A(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[A(t.address),t.blockTag]];case"getCode":return["eth_getCode",[A(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[A(t.address),(0,u.hexZeroPad)(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[(0,d.getStatic)(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[(0,d.getStatic)(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=A(t.filter.address)),["eth_getLogs",[t.filter]]}return null},t.prototype.perform=function(e,t){return a(this,void 0,void 0,function(){var r,n,o,a;return s(this,function(s){switch(s.label){case 0:return"call"!==e&&"estimateGas"!==e?[3,2]:(r=t.transaction)&&null!=r.type&&c.BigNumber.from(r.type).isZero()?null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas?[3,2]:[4,this.getFeeData()]:[3,2];case 1:null==(n=s.sent()).maxFeePerGas&&null==n.maxPriorityFeePerGas&&((t=(0,d.shallowCopy)(t)).transaction=(0,d.shallowCopy)(r),delete t.transaction.type),s.label=2;case 2:null==(o=this.prepareRequest(e,t))&&E.throwError(e+" not implemented",g.Logger.errors.NOT_IMPLEMENTED,{operation:e}),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,this.send(o[0],o[1])];case 4:return[2,s.sent()];case 5:return a=s.sent(),[2,v(e,a,t)];case 6:return[2]}})})},t.prototype._startEvent=function(t){"pending"===t.tag&&this._startPending(),e.prototype._startEvent.call(this,t)},t.prototype._startPending=function(){if(null==this._pendingFilter){var e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){return function n(){e.send("eth_getFilterChanges",[r]).then(function(r){if(e._pendingFilter!=t)return null;var n=Promise.resolve();return r.forEach(function(t){e._emitted["t:"+t.toLowerCase()]="pending",n=n.then(function(){return e.getTransaction(t).then(function(t){return e.emit("pending",t),null})})}),n.then(function(){return N(1e3)})}).then(function(){if(e._pendingFilter==t)return setTimeout(function(){n()},0),null;e.send("eth_uninstallFilter",[r])}).catch(function(e){})}(),r}).catch(function(e){})}},t.prototype._stopEvent=function(t){"pending"===t.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),e.prototype._stopEvent.call(this,t)},t.hexlifyTransaction=function(e,t){var r=(0,d.shallowCopy)(O);if(t)for(var n in t)t[n]&&(r[n]=!0);(0,d.checkProperties)(e,r);var o={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(t){if(null!=e[t]){var r=(0,u.hexValue)(c.BigNumber.from(e[t]));"gasLimit"===t&&(t="gas"),o[t]=r}}),["from","to","data"].forEach(function(t){null!=e[t]&&(o[t]=(0,u.hexlify)(e[t]))}),e.accessList&&(o.accessList=(0,h.accessListify)(e.accessList)),o},t}(_.BaseProvider);r.JsonRpcProvider=C}}},{package:"@ethersproject/providers",file:"node_modules/@ethersproject/providers/lib/json-rpc-provider.js"}],[8182,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.selectThrottledOrigins=void 0;r.selectThrottledOrigins=e=>e.metamask.throttledOrigins}}},{package:"$root$",file:"ui/selectors/origin-throttling.ts"}],[8185,{"../../shared/lib/manifestFlags":5941,"lodash/merge":4902,reselect:5371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getRemoteFeatureFlags=void 0;var n,o=(n=e("lodash/merge"))&&n.__esModule?n:{default:n},a=e("reselect"),s=e("../../shared/lib/manifestFlags");r.getRemoteFeatureFlags=(0,a.createSelector)(()=>(0,s.getManifestFlags)().remoteFeatureFlags,e=>e.metamask.remoteFeatureFlags,(e,t)=>(0,o.default)({},t,e))}}},{package:"$root$",file:"ui/selectors/remote-feature-flags.ts"}],[8186,{"./social-sync":8187},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./social-sync");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))})}}},{package:"$root$",file:"ui/selectors/seedless-onboarding/index.ts"}],[8187,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e.metamask.authConnection}function o(e){return e.metamask.socialLoginEmail}Object.defineProperty(r,"__esModule",{value:!0}),r.getIsSocialLoginUserAuthenticated=function(e){const t=Boolean(n(e)),r=Boolean(o(e));return e.metamask.isSeedlessOnboardingUserAuthenticated&&t&&r},r.getSocialLoginEmail=o,r.getSocialLoginType=n}}},{package:"$root$",file:"ui/selectors/seedless-onboarding/social-sync.ts"}],[8188,{"../../app/scripts/lib/util":374,"../../shared/constants/app":5837,"../../shared/constants/bridge":5839,"../../shared/constants/hardware-wallets":5847,"../../shared/constants/keyring":5849,"../../shared/constants/labels":5850,"../../shared/constants/multichain/assets":5855,"../../shared/constants/multichain/networks":5856,"../../shared/constants/network":5857,"../../shared/constants/swaps":5872,"../../shared/constants/terms":5873,"../../shared/constants/time":5874,"../../shared/constants/tokens":5875,"../../shared/constants/transaction":5876,"../../shared/modules/conversion.utils":5976,"../../shared/modules/hexstring-utils":5984,"../../shared/modules/selectors/multichain":5994,"../../shared/modules/selectors/networks":5995,"../../shared/modules/selectors/selector-creators":5996,"../../shared/modules/selectors/util":5999,"../../shared/modules/string-utils":6006,"../../shared/modules/transaction.utils":6008,"../ducks/app/app":7083,"../ducks/metamask/metamask":7098,"../helpers/constants/design-system":7110,"../helpers/utils/snaps":7159,"../helpers/utils/token-cache-utils":7162,"../helpers/utils/util":7168,"../pages/confirmations/confirmation/templates":7675,"./accounts":8157,"./approvals":8159,"./multichain":8177,"./multichain/feature-flags":8178,"./multichain/networks":8179,"./remote-feature-flags":8185,"./shared":8189,"./subscription":8197,"./transactions":8200,"@metamask/bridge-controller":1414,"@metamask/chain-agnostic-permission":1465,"@metamask/controller-utils":1494,"@metamask/eth-qr-keyring":1981,"@metamask/keyring-api":2306,"@metamask/keyring-controller":2316,"@metamask/name-controller":2420,"@metamask/network-controller":2432,"@metamask/permission-controller":2534,"@metamask/snaps-rpc-methods":2831,"@metamask/snaps-utils":3004,"@metamask/transaction-controller":3095,"@metamask/utils":3217,lodash:4901,"punycode/punycode.js":5218,reselect:5371,semver:5649},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.accountSupportsSmartTx=function(e){const t=ce(e);return Boolean("snap"!==t)},r.accountsWithSendEtherInfoSelector=Re,r.activeTabHasPermissions=function(e){var t;const{activeTab:r,metamask:n}=e,{subjects:o={}}=n;return Boolean(Object.keys((null===(t=o[r.origin])||void 0===t?void 0:t.permissions)||{}).length>0)},r.checkIfMethodIsEnabled=function(e,t){const r=(0,ee.getSelectedInternalAccount)(e);return Boolean(r.methods.includes(t))},r.checkNetworkAndAccountSupports1559=function(e,t){return(0,U.isEIP1559Network)(e,t)},r.checkNetworkOrAccountNotSupports1559=function(e){return(0,U.isNotEIP1559Network)(e)},r.doesAddressRequireLedgerHidConnection=function(e,t){const r=(0,U.isAddressLedger)(e,t),n=(0,U.getLedgerTransportType)(e)===O.LedgerTransportTypes.webhid,o=(0,H.getLedgerWebHidConnectedStatus)(e)!==O.WebHIDConnectedStatuses.connected,a=(0,H.getLedgerTransportStatus)(e)!==O.HardwareTransportStates.verified;return r&&n&&(o||a)},r.getAccountName=function(e,t){const r=e.find(e=>(0,G.isEqualCaseInsensitive)(e.address,t));return r&&""!==r.metadata.name?r.metadata.name:""},r.getAccountToConnectToActiveTab=function(e){const t=(0,ee.getSelectedInternalAccount)(e),r=qt(e),{metamask:{internalAccounts:{accounts:n}}}=e,o=Object.keys(n).length;if(r.length>0&&r.length!==o&&!r.includes(t.address))return ge(e,t.id);return undefined},r.getAccountType=ce,r.getAccountTypeForKeyring=ue,r.getAccountsWithLabels=void 0,r.getActiveQrCodeScanRequest=ae,r.getAddressBook=function(e){const t=(0,N.getCurrentChainId)(e);if(!e.metamask.addressBook[t])return[];return Object.values(e.metamask.addressBook[t])},r.getAddressBookEntry=Pe,r.getAddressBookEntryOrAccountName=function(e,t){const r=Pe(e,t);if(r&&""!==r.name)return r.name;const n=(0,ee.getInternalAccounts)(e).find(e=>(0,G.isEqualCaseInsensitive)(e.address,t));return(null==n?void 0:n.metadata.name)||t},r.getAddressConnectedSubjectMap=function(e){const t=Jt(e),r=$t(e),n={};return Object.keys(r).forEach(e=>{const{iconUrl:o,name:a}=t[e]||{};r[e].forEach(t=>{const r=a||e;n[t]=n[t]?{...n[t],[e]:{iconUrl:o,name:r}}:{[e]:{iconUrl:o,name:r}}})}),n},r.getAddressSecurityAlertResponse=function(e,t){var r;if(!t)return undefined;return null===(r=e.metamask.addressSecurityAlertResponses)||void 0===r?void 0:r[t]},r.getAdvancedGasFeeValues=function(e){return e.metamask.advancedGasFee[(0,N.getCurrentChainId)(e)]},r.getAdvancedInlineGasShown=function(e){return Boolean(e.metamask.featureFlags.advancedInlineGas)},r.getAllAccountsOnNetworkAreEmpty=function(e){const t=de(e)??{},r=Object.values(t).every(e=>"0x0"===e||"0x00"===e),n=0===Te(e);return r&&n},r.getAllConnectedAccounts=r.getAllChainsToPoll=void 0,r.getAllDetectedTokens=function(e){return e.metamask.allDetectedTokens},r.getAllDetectedTokensForSelectedAddress=function(e){if(!(0,U.getCompletedOnboarding)(e))return{};const{address:t}=(0,ee.getSelectedInternalAccount)(e);return Object.entries(e.metamask.allDetectedTokens||{}).reduce((e,[r,n])=>{const o=n[t];return o&&(e[r]=o.map(e=>({...e,chainId:r}))),e},{})},r.getAllDomains=Oe,r.getAllEnabledNetworks=void 0,r.getAllPermittedAccounts=Wt,r.getAllPermittedAccountsForCurrentTab=Yt,r.getAllPermittedAccountsForSelectedTab=function(e,t){return Wt(e,t)},r.getAllPermittedChainsForSelectedTab=function(e,t){return Kt(e,t).filter(e=>{try{const{namespace:t}=(0,T.parseCaipChainId)(e);return t!==T.KnownCaipNamespace.Wallet}catch(e){return!1}})},r.getAllPermittedScopes=Kt,r.getAllSnapAvailableUpdates=void 0,r.getAllTokens=ke,r.getAnySnapUpdateAvailable=void 0,r.getAppActiveTab=nt,r.getAppIsLoading=function(e){return e.appState.isLoading},r.getBlockExplorerLinkText=function(e,t=!1){const r=Lt(e),n=rt(e);let o={firstPart:"addBlockExplorer",secondPart:""};n.blockExplorerUrl?o=t?{firstPart:"blockExplorerView",secondPart:(0,M.getURLHostName)(n.blockExplorerUrl)}:{firstPart:"viewinExplorer",secondPart:"blockExplorerAccountAction"}:!1===r&&(o=t?{firstPart:"etherscanViewOn",secondPart:""}:{firstPart:"viewOnEtherscan",secondPart:"blockExplorerAccountAction"});return o},r.getChainIdsToPoll=void 0,r.getCompleteAddressBook=we,r.getConnectedSubjectsForAllAddresses=r.getConnectedSitesListWithNetworkInfo=r.getConnectedSitesList=r.getConfirmationExchangeRates=void 0,r.getConnectedSubjectsForSelectedAddress=function(e){const t=(0,ee.getSelectedInternalAccount)(e),r=Ut(e),n=Jt(e),o=[];return Object.entries(r).forEach(([e,r])=>{if(!Xt(r).includes(t.address))return;const{extensionId:a,name:s,iconUrl:i}=n[e]||{};o.push({extensionId:a,origin:e,name:s,iconUrl:i})}),o},r.getCrossChainMetaMaskCachedBalances=function(e){const t=e.metamask.accountsByChainId;return Object.keys(t).reduce((e,r)=>(e[r]=Object.keys(t[r]).reduce((e,n)=>(e[n.toLowerCase()]=t[r][n].balance,e),{}),e),{})},r.getCrossChainTokenExchangeRates=void 0,r.getCurrencyRates=st,r.getCurrentAccountWithSendEtherInfo=De,r.getCurrentEthBalance=function(e){var t;return null===(t=De(e))||void 0===t?void 0:t.balance},r.getCurrentKeyring=se,r.getCurrentNetwork=void 0,r.getCustomNonceValue=function(e){return String(e.appState.customNonceValue)},r.getCustomTokenAmount=function(e){return e.appState.customTokenAmount},r.getDefaultHomeActiveTabName=function(e){return e.metamask.defaultHomeActiveTabName},r.getDetectedTokensInCurrentNetwork=function(e){var t;const r=(0,N.getCurrentChainId)(e),{address:n}=(0,ee.getSelectedInternalAccount)(e);return null===(t=e.metamask.allDetectedTokens)||void 0===t||null===(t=t[r])||void 0===t?void 0:t[n]},r.getEditedNetwork=function(e){return e.appState.editedNetwork},Object.defineProperty(r,"getEnabledNetworks",{enumerable:!0,get:function(){return b.getEnabledNetworks}}),r.getEnabledSnaps=void 0,r.getEnsResolutionByAddress=function(e,t){if(e.metamask.ensResolutionsByAddress[t]){const r=e.metamask.ensResolutionsByAddress[t];return(0,o.toUnicode)(r)}const r=Pe(e,t)||(0,ee.getInternalAccountByAddress)(e,t);return(null==r?void 0:r.name)||""},r.getEthereumAddressNames=function(e){var t;return(null===(t=e.metamask.names)||void 0===t?void 0:t[d.NameType.ETHEREUM_ADDRESS])||{}},r.getEvmInternalAccounts=void 0,r.getExternalServicesOnboardingToggleState=function(e){return e.appState.externalServicesOnboardingToggleState},r.getFeatureFlags=function(e){return e.metamask.featureFlags},r.getFeatureNotificationsEnabled=function(e){const{featureNotificationsEnabled:t=!1}=Ue(e);return t},r.getFirstPermissionRequest=function(e){const t=nr(e);return t&&t[0]?t[0]:null},r.getFirstSnapInstallOrUpdateRequest=function(e){var t;return(null===(t=rr(e))||void 0===t?void 0:t[0])??null},r.getFullTxData=void 0,r.getGasFeesSponsoredNetworkEnabled=function(e){const{gasFeesSponsoredNetwork:t}=(0,A.getRemoteFeatureFlags)(e);return t},r.getHDEntropyIndex=function(e){const t=fe(e),r=Se(e);let n=r.filter(e=>e.type===C.KeyringType.hdKeyTree).findIndex(e=>e.accounts.includes(t));if(-1===n){const t=(0,ee.getSelectedInternalAccount)(e);if(t){const{entropySource:e}=t.options;n=r.findIndex(({metadata:t})=>t.id===e)}}return-1===n?undefined:n},r.getHardwareWalletType=function(e){const t=se(e);return ie(e)?t.type:undefined},r.getHasAnyEvmNetworkEnabled=function(e){const t=(0,b.getEnabledNetworks)(e)[T.KnownCaipNamespace.Eip155]??{};return Object.values(t).some(e=>!0===e)},r.getHdKeyringOfSelectedAccountOrPrimaryKeyring=r.getHdKeyringIndexByIdOrDefault=void 0,r.getHiddenAccountsList=Ot,r.getInterfaceContent=r.getInterface=r.getInsightSnaps=r.getInsightSnapIds=r.getHideSnapBranding=void 0,r.getInternalAccount=ge,r.getInternalAccountsSortedByKeyring=void 0,r.getIpfsGateway=function(e){return e.metamask.ipfsGateway},r.getIsAccessedFromDappConnectedSitePopover=function(e){return e.appState.isAccessedFromDappConnectedSitePopover},r.getIsAddSnapAccountEnabled=function(e){return e.metamask.addSnapAccountEnabled},r.getIsAddingNewNetwork=function(e){return e.appState.isAddingNewNetwork},Object.defineProperty(r,"getIsBitcoinSupportEnabled",{enumerable:!0,get:function(){return I.getIsBitcoinSupportEnabled}}),Object.defineProperty(r,"getIsBitcoinTestnetSupportEnabled",{enumerable:!0,get:function(){return I.getIsBitcoinTestnetSupportEnabled}}),r.getIsBridgeChain=function(e,t){const r=(0,ee.getSelectedInternalAccount)(e),{chainId:n,isEvmNetwork:o}=(0,te.getMultichainNetwork)(e,r);let a=n;o&&(a=(0,N.getCurrentChainId)(e));const s=t??a;return R.ALLOWED_BRIDGE_CHAIN_IDS.includes(s)},r.getIsBridgeEnabled=void 0,r.getIsCustomNetwork=Lt,r.getIsDefiPositionsEnabled=function(e){const{assetsDefiPositionsEnabled:t}=(0,A.getRemoteFeatureFlags)(e);return Boolean(t)},r.getIsDeviceOffline=function(e){return"offline"===e.metamask.connectivityStatus},r.getIsDynamicTokenListAvailable=Rt,r.getIsLineaMainnet=function(e){return(0,N.getCurrentChainId)(e)===k.CHAIN_IDS.LINEA_MAINNET},r.getIsMainnet=je,r.getIsMultiRpcOnboarding=function(e){return e.appState.isMultiRpcOnboarding},r.getIsNewSettingsEnabled=function(e){const{settingsRedesign:t}=(0,A.getRemoteFeatureFlags)(e);return Boolean(t)},r.getIsNonStandardEthChain=function(e){return!(je(e)||Fe(e))},r.getIsRpcFailoverEnabled=void 0,r.getIsSecurityAlertsEnabled=function(e){return e.metamask.securityAlertsEnabled},r.getIsSigningQRHardwareTransaction=function(e){const t=ae(e);return t&&t.type===S.QrScanRequestType.SIGN},Object.defineProperty(r,"getIsSolanaSupportEnabled",{enumerable:!0,get:function(){return I.getIsSolanaSupportEnabled}}),Object.defineProperty(r,"getIsSolanaTestnetSupportEnabled",{enumerable:!0,get:function(){return I.getIsSolanaTestnetSupportEnabled}}),r.getIsSwapsChain=function(e,t){const r=(0,N.getCurrentChainId)(e),n=t??r;return P.ALLOWED_PROD_SWAPS_CHAIN_IDS.includes(n)},r.getIsTestnet=Fe,r.getIsTokenDetectionInactiveOnMainnet=Dt,r.getIsTokenDetectionSupported=function(e){const t=Pt(e),r=Rt(e);return t&&r},r.getIsTokenNetworkFilterEqualCurrentNetwork=Ge,Object.defineProperty(r,"getIsTronSupportEnabled",{enumerable:!0,get:function(){return I.getIsTronSupportEnabled}}),Object.defineProperty(r,"getIsTronTestnetSupportEnabled",{enumerable:!0,get:function(){return I.getIsTronTestnetSupportEnabled}}),r.getIsWatchEthereumAccountEnabled=function(e){return e.metamask.watchEthereumAccountEnabled},r.getIstokenDetectionInactiveOnNonMainnetSupportedNetwork=function(e){const t=Pt(e),r=je(e);return Rt(e)&&!t&&!r},r.getKeyringSnapAccounts=r.getKeyringOfSelectedAccount=void 0,r.getKeyringSnapRemovalResult=function(e){return e.appState.keyringRemovalSnapModal},r.getKnownMethodData=function(e,t){const{knownMethodData:r,use4ByteResolution:n}=e.metamask;if(!n||!(0,Y.hasTransactionData)(t))return null;const o=(0,y.addHexPrefix)(t).slice(0,10);if(o.length<10)return null;return(null==r?void 0:r[o])??null},r.getLastConnectedInfo=function(e){const{permissionHistory:t={}}=e.metamask;return Object.keys(t).reduce((e,r)=>(t[r].eth_accounts&&(e[r]=JSON.parse(JSON.stringify(t[r].eth_accounts))),e),{})},r.getLastUpdatedFromVersion=function(e){return e.metamask.lastUpdatedFromVersion},r.getLastViewedUserSurvey=function(e){return e.metamask.lastViewedUserSurvey},r.getLocale=Tt,r.getManageInstitutionalWallets=function(e){return e.metamask.manageInstitutionalWallets},r.getMarketData=void 0,r.getMaybeSelectedInternalAccount=function(e){var t,r;const n=null===(t=e.metamask.internalAccounts)||void 0===t?void 0:t.selectedAccount;return n?null===(r=e.metamask.internalAccounts)||void 0===r?void 0:r.accounts[n]:undefined},r.getMetaMaskCachedBalances=r.getMetaMaskAccountsOrdered=r.getMetaMaskAccountsConnected=r.getMetaMaskAccounts=r.getMetaMaskAccountBalances=r.getMemoizedUnapprovedTemplatedConfirmations=r.getMemoizedUnapprovedConfirmations=r.getMemoizedTargetSubjectMetadata=r.getMemoizedMetadataContract=r.getMemoizedInterfaces=r.getMemoizedInterfaceContent=r.getMemoizedInterface=r.getMemoizedCurrentChainId=void 0,r.getMetaMaskHdKeyrings=ve,r.getMetaMaskKeyrings=Se,r.getMetaMetricsDataDeletionId=function(e){return e.metamask.metaMetricsDataDeletionId},r.getMetaMetricsDataDeletionStatus=function(e){return e.metamask.metaMetricsDataDeletionStatus},r.getMetaMetricsDataDeletionTimestamp=function(e){return e.metamask.metaMetricsDataDeletionTimestamp},r.getMetaMetricsId=function(e){const{metaMetricsId:t}=e.metamask;return t},r.getMetadataContractName=void 0,r.getModalTypeForShieldEntryModal=function(e){var t;return null===(t=e.appState.shieldEntryModal)||void 0===t?void 0:t.modalType},r.getNameLookupSnapsIds=r.getNameLookupSnaps=r.getMultipleTargetsSubjectMetadata=void 0,r.getNameSources=function(e){return e.metamask.nameSources||{}},r.getNames=function(e){return e.metamask.names||{}},r.getNativeCurrencyForChain=ct,r.getNativeCurrencyImage=function(e){const t=(0,N.getCurrentChainId)(e);return k.CHAIN_ID_TOKEN_IMAGE_MAP[t]},r.getNativeTokenCachedBalanceByChainIdSelector=void 0,r.getNativeTokenInfo=Ae,r.getNetworkConfigurationIdByChainId=r.getNetworkClientIdsToPoll=void 0,r.getNetworkConnectionBanner=function(e){return e.metamask.networkConnectionBanner},r.getNetworkDiscoverButtonEnabled=function(e){const{neNetworkDiscoverButton:t}=(0,A.getRemoteFeatureFlags)(e);return t},r.getNetworkIdentifier=function(e){const{type:t,nickname:r,rpcUrl:n}=(0,N.getProviderConfig)(e);return r||n||t},r.getNetworkToAutomaticallySwitchTo=function(e){const t=Ct(e),r=ot(e);if((0,y.getEnvironmentType)()===F.ENVIRONMENT_TYPE_POPUP&&(0,U.getIsUnlocked)(e)&&r&&0===t){const t=Oe(e)[r],n=wt(e);if(t&&n.id!==t)return t}return null},r.getNetworksTabSelectedNetworkConfigurationId=function(e){return e.appState.selectedNetworkConfigurationId},r.getNewNetworkAdded=function(e){return e.appState.newNetworkAddedName},r.getNewNftAddedMessage=function(e){return e.appState.newNftAddedMessage},r.getNewTokensImported=function(e){return e.appState.newTokensImported},r.getNewTokensImportedError=function(e){return e.appState.newTokensImportedError},r.getNextSuggestedNonce=function(e){return Number(e.appState.nextNonce)},r.getNftIsStillFetchingIndication=function(e){return e.appState.isNftStillFetchingIndication},r.getNumberOfAllUnapprovedTransactionsAndMessages=r.getNotifySnaps=void 0,r.getNumberOfTokens=Te,r.getOnboardedInThisUISession=function(e){return e.appState.onboardedInThisUISession},r.getOnboardingDate=function(e){return e.metamask.onboardingDate},r.getOpenSeaEnabled=function(e){return Boolean(e.metamask.openSeaEnabled)},r.getOrderedConnectedAccountsForActiveTab=void 0,r.getOrderedConnectedAccountsForConnectedDapp=tr,r.getOrderedNetworksList=function(e){return e.metamask.orderedNetworkList},r.getOriginOfCurrentTab=ot,r.getPendingShieldCohort=function(e){return e.metamask.pendingShieldCohort},r.getPendingShieldCohortTxType=function(e){return e.metamask.pendingShieldCohortTxType},r.getPendingTokens=void 0,r.getPermissionSubjects=Ut,r.getPermissionSubjectsDeepEqual=void 0,r.getPermissions=function(e,t){var r;return null===(r=Ut(e)[t])||void 0===r?void 0:r.permissions},r.getPermissionsForActiveTab=function(e){var t;const{metamask:r}=e,{subjects:n={}}=r,o=ot(e),a=(null===(t=n[o])||void 0===t?void 0:t.permissions)??{};return Object.keys(a).map(e=>({key:e,value:a[e]}))},r.getPermissionsRequests=nr,r.getPermittedAccountsByOrigin=$t,r.getPermittedEVMAccounts=Ht,r.getPermittedEVMAccountsForCurrentTab=qt,r.getPermittedEVMAccountsForSelectedTab=Vt,r.getPermittedEVMChains=Gt,r.getPermittedEVMChainsByOrigin=function(e){const t=Ut(e);return Object.keys(t).reduce((e,r)=>{const n=Qt(zt(t[r]));return n.length>0&&(e[r]=n),e},{})},r.getPermittedEVMChainsForSelectedTab=function(e,t){return Gt(e,t)},r.getPinnedAccountsList=kt,r.getPreferences=Ue,r.getPreinstalledSnaps=void 0,r.getPrivacyMode=function(e){const{privacyMode:t}=Ue(e);return Boolean(t)},r.getRemoveNftMessage=function(e){return e.appState.removeNftMessage},r.getRequestState=function(e,t){var r;return null===(r=e.metamask.pendingApprovals[t])||void 0===r?void 0:r.requestState},r.getRequestType=function(e,t){var r;return null===(r=e.metamask.pendingApprovals[t])||void 0===r?void 0:r.type},r.getRequestingNetworkInfo=function(e,t){let r=t===undefined?[]:t;"string"==typeof r&&(r=[r]);const n=r.flat();return Object.values((0,N.getNetworkConfigurationsByChainId)(e)).filter(e=>n.includes(e.chainId))},r.getRpcPrefsForCurrentProvider=rt,r.getSelectedAccount=void 0,r.getSelectedAccountCachedBalance=ye,r.getSelectedAccountNativeTokenCachedBalanceByChainId=Ne,r.getSelectedAccountTokensAcrossChains=function(e){const t={},{address:r}=Ee(e)??{};if(!r)return t;const{allTokens:n}=e.metamask,o=Ne(e);return new Set([...Object.keys(n||{}),...Object.keys(o||{})]).forEach(a=>{t[a]||(t[a]=[]),n[a]&&r&&r in n[a]&&n[a][r]&&n[a][r].forEach(e=>{const r={...e,chainId:a,isNative:!1};t[a].push(r)});const s=o[a];if(s){const r=Ae(e.metamask.networkConfigurationsByChainId,a);t[a].push({...r,address:"",balance:s,chainId:a,isNative:!0})}}),t},r.getSelectedAddress=fe,r.getSelectedEvmInternalAccount=void 0,r.getSelectedInternalAccountWithBalance=function(e){const t=(0,ee.getSelectedInternalAccount)(e),r=le(e)[t.address];return{...t,balance:r?r.balance:"0x0"}},r.getSelectedNetwork=r.getSelectedKeyringByIdOrDefault=void 0,r.getSendInputCurrencySwitched=function({appState:e}){return e.sendInputCurrencySwitched},r.getSettingsPageSnapsIds=r.getSettingsPageSnaps=void 0,r.getShieldEntryModalTriggeringCohort=function(e){var t;return null===(t=e.appState.shieldEntryModal)||void 0===t?void 0:t.triggeringCohort},r.getShouldHideZeroBalanceTokens=function(e){const{hideZeroBalanceTokens:t}=Ue(e);return t},r.getShouldShowFiat=function(e,t){let r,n;if(t){var o,a;r=t;const s=k.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[t]??k.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP_NETWORK_COLLISION[t]??(null===(o=Me(e,t))||void 0===o?void 0:o.nativeCurrency);n=null===(a=st(e))||void 0===a||null===(a=a[s])||void 0===a?void 0:a.conversionRate}else r=(0,N.getCurrentChainId)(e),n=(0,U.getConversionRate)(e);const s=k.TEST_NETWORK_IDS.includes(r),{showFiatInTestnets:i}=Ue(e),c=jt(e),u=Boolean(c&&n);if(s)return i&&u;return u},r.getShouldSubmitEventsForShieldEntryModal=function(e){var t;if((0,oe.getHasShieldEntryModalShownOnce)(e))return!1;return Boolean(null===(t=e.appState.shieldEntryModal)||void 0===t?void 0:t.shouldSubmitEvents)},r.getShowAccountBanner=function(e){return e.metamask.showAccountBanner},r.getShowBasicFunctionalityModal=function(e){return e.appState.showBasicFunctionalityModal},r.getShowBetaHeader=function(e){return e.metamask.showBetaHeader},r.getShowDataDeletionErrorModal=function(e){return e.appState.showDataDeletionErrorModal},r.getShowDeleteMetaMetricsDataModal=function(e){return e.appState.showDeleteMetaMetricsDataModal},r.getShowDownloadMobileAppSlide=function(e){return e.metamask.showDownloadMobileAppSlide},r.getShowExtensionInFullSizeView=function(e){const{showExtensionInFullSizeView:t}=Ue(e);return Boolean(t)},r.getShowFiatInTestnets=function(e){const{showFiatInTestnets:t}=Ue(e);return t},r.getShowNetworkBanner=function(e){return e.metamask.showNetworkBanner},r.getShowOutdatedBrowserWarning=function(e){const{outdatedBrowserWarningLastShown:t}=e.metamask;if(!t)return!0;return(new Date).getTime()-t>=2*x.DAY},r.getShowPermissionsTour=function(e){return e.metamask.showPermissionsTour},r.getShowPermittedNetworkToastOpen=function(e){return e.appState.showPermittedNetworkToastOpen},r.getShowRecoveryPhraseReminder=function(e){const{recoveryPhraseReminderLastShown:t,recoveryPhraseReminderHasBeenShown:r}=e.metamask,n=(new Date).getTime(),o=r?90*x.DAY:2*x.DAY;return n-t>=o},r.getShowShieldEntryModal=function(e){const{show:t,hasUserInteractedWithModal:r}=e.appState.shieldEntryModal||{};return Boolean(t)&&!r},r.getShowTermsOfUse=function(e){const{termsOfUseLastAgreed:t}=e.metamask;if(!t)return!0;return new Date(t).getTime()<new Date(j.TERMS_OF_USE_LAST_UPDATED).getTime()},r.getShowTestNetworks=He,r.getShowUpdateModal=function(e){var t;const{metamask:{isUpdateAvailable:r,updateModalLastDismissedAt:n,lastUpdatedAt:o}}=e,a=(0,A.getRemoteFeatureFlags)(e),s=u.default.valid(u.default.coerce(null===(t=global.platform)||void 0===t?void 0:t.getVersion())),i=u.default.valid(u.default.coerce(a.extensionUpdatePromptMinimumVersion)),c=!(!s||!i)&&u.default.lt(s,i),l=Date.now(),d=864e5,p=!n||l-n>d,h=!o||l-o>d;return c&&r&&p&&h},r.getShowWhatsNewPopup=function(e){return e.appState.showWhatsNewPopup},r.getSignatureInsightSnaps=r.getSignatureInsightSnapIds=void 0,r.getSlides=function(e){return e.metamask.slides||[]},r.getSnapInsights=r.getSnap=void 0,r.getSnapInstallOrUpdateRequests=rr,r.getSnapMetadata=r.getSnapLatestVersion=void 0,r.getSnapRegistry=function(e){const{snapRegistryList:t}=e.metamask;return t},r.getSnapRegistryData=void 0,r.getSnaps=_t,r.getSnapsInstallPrivacyWarningShown=function(e){const{snapsInstallPrivacyWarningShown:t}=e.metamask;if(t===undefined||null===t)return!1;return t},r.getSnapsList=function(e){const t=_t(e);return Object.entries(t).filter(([e,t])=>t.status!==i.SnapStatus.Installing&&(!t.preinstalled||!1===t.hidden)).map(([t,r])=>{const n=Ke(e,null==r?void 0:r.id);return{key:t,id:r.id,iconUrl:null==n?void 0:n.iconUrl,subjectType:null==n?void 0:n.subjectType,packageName:(0,i.stripSnapPrefix)(r.id),name:vt(e,r.id).name}})},r.getSnapsMetadata=void 0,r.getSortedAnnouncementsToShow=function(e){const t=Object.values(e.metamask.announcements),r={},n=t.filter(e=>!e.isShown&&r[e.id]);return n.sort((e,t)=>new Date(t.date)-new Date(e.date))},r.getSubjectMetadata=Jt,r.getSubjectMetadataDeepEqual=void 0,r.getSubjectsWithPermission=function(e,t){const r=Ut(e),n=[];return Object.entries(r).forEach(([r,{permissions:o}])=>{if(o[t]){const{extensionId:t,name:o,iconUrl:a}=Ke(e,r)||{};n.push({extensionId:t,origin:r,name:o,iconUrl:a})}}),n},r.getSubjectsWithSnapPermission=function(e,t){const r=Ut(e);return Object.entries(r).filter(([e,{permissions:r}])=>{var n;return null===(n=r[g.WALLET_SNAP_PERMISSION_KEY])||void 0===n?void 0:n.caveats[0].value[t]}).map(([t,r])=>{const{extensionId:n,name:o,iconUrl:a}=Ke(e,t)||{};return{extensionId:n,origin:t,name:o,iconUrl:a}})},r.getSuggestedNfts=function(e){var t;return(null===(t=Be(e))||void 0===t?void 0:t.filter(({requestData:e,type:t})=>{var r;return t===s.ApprovalType.WatchAsset&&(null==e||null===(r=e.asset)||void 0===r?void 0:r.tokenId)!==undefined}))||[]},r.getSuggestedTokens=function(e){var t;return(null===(t=Be(e))||void 0===t?void 0:t.filter(({type:e,requestData:t})=>{var r;return e===s.ApprovalType.WatchAsset&&(null==t||null===(r=t.asset)||void 0===r?void 0:r.tokenId)===undefined}))||[]},r.getSwapsDefaultToken=function(e,t=null){const r=Ce(e),n=null==r?void 0:r.balance,o=(0,N.getCurrentChainId)(e),a=t??o;return{...P.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[a],chainId:a,balance:(0,W.hexToDecimal)(n),string:(0,W.getValueFromWeiHex)({value:n,numberOfDecimals:4,toDenomination:"ETH"})}},r.getTargetAccount=function(e,t){return he(e)[t]},r.getTargetAccountWithSendEtherInfo=function(e,t){const r=Re(e);return(0,M.getAccountByAddress)(r,t)},r.getTargetSubjectMetadata=Ke,r.getTestNetworkBackgroundColor=function(e){const t=(0,N.getProviderConfig)(e).ticker;switch(!0){case null==t?void 0:t.includes(k.GOERLI_DISPLAY_NAME):return K.BackgroundColor.goerli;case null==t?void 0:t.includes(k.SEPOLIA_DISPLAY_NAME):return K.BackgroundColor.sepolia;default:return undefined}},r.getTheme=function(e){return e.metamask.theme},r.getTokenNetworkFilter=r.getTokenList=r.getTokenExchangeRates=r.getTokenDetectionSupportNetworkByChainId=r.getThirdPartyNotifySnaps=void 0,r.getTokenScanCache=Mt,r.getTokensMarketData=r.getTokensAcrossChainsByAccountAddressSelector=r.getTokenSortConfig=r.getTokenScanResultsForAddresses=void 0,r.getTotalUnapprovedCount=function(e){return e.metamask.pendingApprovalCount??0},r.getTxData=r.getTransaction=void 0,r.getUSDConversionRate=function(e){var t;return null===(t=e.metamask.currencyRates[(0,N.getProviderConfig)(e).ticker])||void 0===t?void 0:t.usdConversionRate},r.getUnapprovedConfirmations=r.getUSDConversionRateByChainId=void 0,r.getUnapprovedTemplatedConfirmations=xe,r.getUnapprovedTransaction=void 0,r.getUnapprovedTxCount=function(e){const t=(0,Q.getUnapprovedTransactions)(e);return Object.keys(t).length},r.getUnconnectedAccounts=function(e,t){const r=Ie(e),n=tr(e,t);return r.filter(e=>!n.some(t=>t.address===e.address))},r.getUpdatedAndSortedAccountsWithCaipAccountId=r.getUpdatedAndSortedAccounts=void 0,r.getUrlScanCacheResult=function(e,t){var r;if(!t)return undefined;return null===(r=e.metamask.urlScanCache)||void 0===r?void 0:r[t]},r.getUseBlockie=function(e){return Boolean(e.metamask.useBlockie)},r.getUseCurrencyRateCheck=jt,r.getUseExternalNameSources=function(e){return e.metamask.useExternalNameSources},r.getUseExternalServices=at,r.getUseNftDetection=function(e){return Boolean(e.metamask.useNftDetection)},r.getUsePhishDetect=function(e){return e.metamask.usePhishDetect},r.getUseSafeChainsListValidation=void 0,r.getUseTokenDetection=Pt,r.getUseTransactionSimulations=function(e){return Boolean(e.metamask.useTransactionSimulations)},r.getWatchedToken=void 0,r.getWeb3ShimUsageStateForOrigin=function(e,t){return e.metamask.web3ShimUsageOrigins[t]},r.getsnapsAddSnapAccountModalDismissed=function(e){const{snapsAddSnapAccountModalDismissed:t}=e.metamask;return t},r.isAccountConnectedToCurrentTab=void 0,r.isBalanceCached=function(e){var t;const{address:r}=(0,ee.getSelectedInternalAccount)(e),n=null===(t=le(e))||void 0===t||null===(t=t[r])||void 0===t?void 0:t.balance,o=ye(e);return Boolean(!n&&o)},r.isCurrentProviderCustom=function(e){const t=(0,N.getProviderConfig)(e);return t.type===k.NETWORK_TYPES.RPC&&!Object.values(k.CHAIN_IDS).includes(t.chainId)},r.isHardwareWallet=ie,r.selectERC20TokensByChain=r.selectERC20Tokens=r.selectDefaultRpcEndpointByChainId=r.selectConversionRateByChainId=r.selectAllTokensFlat=r.rawStateSelector=void 0,r.selectHasBridgeQuotes=function(e){return Boolean(Object.values(e.metamask.quotes||{}).length)},r.selectNonZeroUnusedApprovalsAllowList=r.selectNftsByChainId=r.selectNetworkIdentifierByChainId=r.selectNetworkConfigurationByChainId=r.selectIsNetworkMenuOpen=r.selectInstalledSnaps=r.selectInstalledNonPreinstalledSnaps=void 0;var n,o=e("punycode/punycode.js"),a=e("@metamask/permission-controller"),s=e("@metamask/controller-utils"),i=e("@metamask/snaps-utils"),c=e("lodash"),u=(n=e("semver"))&&n.__esModule?n:{default:n},l=e("reselect"),d=e("@metamask/name-controller"),p=e("@metamask/transaction-controller"),h=e("@metamask/keyring-api"),f=e("@metamask/network-controller"),g=e("@metamask/snaps-rpc-methods"),m=e("@metamask/chain-agnostic-permission"),E=e("@metamask/keyring-controller"),_=e("@metamask/bridge-controller"),T=e("@metamask/utils"),S=e("@metamask/eth-qr-keyring"),v=e("../helpers/utils/token-cache-utils"),N=e("../../shared/modules/selectors/networks"),b=e("../../shared/modules/selectors/multichain"),A=e("./remote-feature-flags"),I=e("./multichain/feature-flags"),y=e("../../app/scripts/lib/util"),k=e("../../shared/constants/network"),O=e("../../shared/constants/hardware-wallets"),C=e("../../shared/constants/keyring"),w=e("../../shared/constants/labels"),P=e("../../shared/constants/swaps"),R=e("../../shared/constants/bridge"),D=e("../../shared/constants/transaction"),M=e("../helpers/utils/util"),L=e("../pages/confirmations/confirmation/templates"),B=e("../../shared/constants/tokens"),x=e("../../shared/constants/time"),j=e("../../shared/constants/terms"),F=e("../../shared/constants/app"),U=e("../ducks/metamask/metamask"),H=e("../ducks/app/app"),G=e("../../shared/modules/string-utils"),W=e("../../shared/modules/conversion.utils"),K=e("../helpers/constants/design-system"),q=e("../../shared/constants/multichain/assets"),V=e("../../shared/constants/multichain/networks"),Y=e("../../shared/modules/transaction.utils"),$=e("../../shared/modules/hexstring-utils"),J=e("../../shared/modules/selectors/util"),z=e("../../shared/modules/selectors/selector-creators"),X=e("../helpers/utils/snaps"),Z=e("./shared"),Q=e("./transactions"),ee=e("./accounts"),te=e("./multichain"),re=e("./multichain/networks"),ne=e("./approvals"),oe=e("./subscription");r.getConfirmationExchangeRates=e=>e.appState.confirmationExchangeRates;function ae(e){return e.metamask.activeQrCodeScanRequest}function se(e){var t;const r=(0,ee.getSelectedInternalAccount)(e);return r?null===(t=r.metadata)||void 0===t?void 0:t.keyring:null}function ie(e){var t;const r=se(e);return Boolean(null==r||null===(t=r.type)||void 0===t?void 0:t.includes("Hardware"))}function ce(e){return ue(se(e))}function ue(e){if(!e)return"";const{type:t}=e;switch(t){case C.KeyringType.trezor:case C.KeyringType.oneKey:case C.KeyringType.ledger:case C.KeyringType.lattice:case C.KeyringType.qr:return"hardware";case C.KeyringType.imported:return"imported";case C.KeyringType.snap:return"snap";default:return"default"}}r.getPendingTokens=e=>e.appState.pendingTokens;const le=r.getMetaMaskAccountBalances=(0,l.createSelector)(e=>e.metamask.accountsByChainId,N.getCurrentChainId,(e,t)=>{const r=(null==e?void 0:e[t])??{};return 0===Object.keys(r).length?Z.EMPTY_OBJECT:Object.entries(r).reduce((e,[t,r])=>(e[t.toLowerCase()]=r,e),{})}),de=r.getMetaMaskCachedBalances=(0,l.createSelector)(e=>e.metamask.accountsByChainId,b.getEnabledNetworks,N.getCurrentChainId,(e,t)=>t,(e,t,r,n)=>{const o=(null==t?void 0:t.eip155)??{},a=Object.keys(o).filter(e=>Boolean(o[e]));if(1===a.length){const t=a[0];return 0===Object.keys((null==e?void 0:e[t])??{}).length?Z.EMPTY_OBJECT:Object.entries(e[t]).reduce((e,[t,r])=>(e[t.toLowerCase()]=r.balance,e),{})}const s=n??r;return 0===Object.keys((null==e?void 0:e[s])??{}).length?Z.EMPTY_OBJECT:Object.entries(e[s]).reduce((e,[t,r])=>(e[t.toLowerCase()]=r.balance,e),{})}),pe=(0,z.createParameterizedShallowEqualSelector)(10),he=r.getMetaMaskAccounts=pe(ee.getInternalAccounts,le,de,te.getMultichainBalances,N.getCurrentChainId,(e,t)=>t,(e,t,r,n,o,a)=>e.reduce((e,s)=>{let i=s;if(a===undefined||o===a){if((0,h.isEvmAccountType)(s.type))null!=t&&t[s.address]&&(i={...i,...t[s.address]});else{var c;const e=Object.values(V.MULTICHAIN_PROVIDER_CONFIGS).find(e=>s.scopes.some(t=>t===e.chainId));i={...i,balance:(null==n||null===(c=n[s.id])||void 0===c||null===(c=c[q.MULTICHAIN_NETWORK_TO_ASSET_TYPES[e.chainId]])||void 0===c?void 0:c.amount)??"0"}}null!==i.balance&&i.balance!==undefined||(i={...i,balance:(r&&r[s.address])??"0x0"})}else i={...i,balance:(r&&r[s.address])??"0x0"};return e[s.address]=i,e},{}));function fe(e){var t;return null===(t=(0,ee.getSelectedInternalAccount)(e))||void 0===t?void 0:t.address}function ge(e,t){return e.metamask.internalAccounts.accounts[t]}const me=r.getEvmInternalAccounts=(0,l.createSelector)(ee.getInternalAccounts,e=>e.filter(e=>(0,h.isEvmAccountType)(e.type))),Ee=r.getSelectedEvmInternalAccount=(0,l.createSelector)(me,e=>{const[t]=(0,M.sortSelectedInternalAccounts)(e);return t}),_e=r.getInternalAccountsSortedByKeyring=(0,l.createSelector)(Se,he,(e,t)=>{const r="thirdPartySnaps",n=Object.values(t).reduce((e,t)=>{var n;if((null===(n=t.metadata)||void 0===n||null===(n=n.keyring)||void 0===n?void 0:n.type)===E.KeyringTypes.snap){const{entropySource:n=r}=t.options||{};e[n]||(e[n]=[]),e[n].push(t)}return e},{});return e.reduce((e,o)=>{const a=o.accounts.map(e=>t[e]);if(o.type===E.KeyringTypes.hd){const t=n[o.metadata.id]||[];return e.push(...a,...t),e}if(o.type===E.KeyringTypes.snap){const t=(n[r]||[]).filter(t=>!e.some(e=>e.id===t.id));return e.push(...t),e}return e.push(...a),e},[])});function Te(e){const{tokens:t}=e.metamask;return t?t.length:0}function Se(e){return e.metamask.keyrings}function ve(e){return e.metamask.keyrings.filter(e=>e.type===E.KeyringTypes.hd)}function Ne(e){const{accountsByChainId:t}=e.metamask,{address:r}=Ee(e),n=(0,$.toChecksumHexAddress)(r),o={};for(const[e,r]of Object.entries(t||{}))r[n]&&(o[e]=r[n].balance);return o}const be=r.getNativeTokenCachedBalanceByChainIdSelector=(0,l.createSelector)(e=>e.metamask.accountsByChainId,(e,t)=>t,(e,t)=>{const r=(0,$.toChecksumHexAddress)(t),n={};for(const[t,o]of Object.entries(e||{}))o[r]&&(n[t]=o[r].balance);return n});r.getTokensAcrossChainsByAccountAddressSelector=(0,l.createSelector)([e=>e.metamask.allTokens,e=>e.metamask.networkConfigurationsByChainId,(e,t)=>be(e,t),(e,t)=>t],(e,t,r,n)=>{const o={};return new Set([...Object.keys(e||{}),...Object.keys(r||{})]).forEach(a=>{var s;o[a]||(o[a]=[]),null!==(s=e[a])&&void 0!==s&&s[n]&&e[a][n].forEach(e=>{const t={...e,chainId:a,isNative:!1};o[a].push(t)});const i=r[a];if(i){const e=Ae(t,a);o[a].push({...e,address:"",balance:i,chainId:a,isNative:!0,image:ct(a)})}}),o});function Ae(e,t){const r=null==e?void 0:e[t];if(r){return{symbol:r.nativeCurrency||D.AssetType.native,decimals:18,name:r.name||"Native Token"}}const n=k.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[t],o=k.NETWORK_TO_NAME_MAP[t];return n&&o?{symbol:n,decimals:18,name:o}:{symbol:D.AssetType.native,decimals:18,name:"Native Token"}}const Ie=r.getMetaMaskAccountsOrdered=(0,l.createSelector)(_e,he,(e,t)=>e.map(e=>({...e,...null!=e&&e.address&&t[e.address]||{}})));r.getMetaMaskAccountsConnected=(0,l.createSelector)(Ie,e=>e.map(({address:e})=>e.toLowerCase()));function ye(e){const t=de(e),{address:r}=(0,ee.getSelectedInternalAccount)(e);return null==t?void 0:t[r]}function ke(e){return e.metamask.allTokens}r.selectAllTokensFlat=(0,l.createSelector)(ke,e=>Object.values(e).reduce((e,t)=>{const r=Object.values(t);return e.concat(...r)},[]));function Oe(e){return e.metamask.domains}const Ce=r.getSelectedAccount=(0,l.createSelector)(he,ee.getSelectedInternalAccount,(e,t)=>t?{...t,...e[t.address]}:undefined);r.getWatchedToken=e=>(0,l.createSelector)([Ce,ke],(t,r)=>{var n;const{chainId:o}=e;return null==r||null===(n=r[o])||void 0===n||null===(n=n[t.address])||void 0===n?void 0:n.find(t=>(0,$.toChecksumHexAddress)(t.address)===(0,$.toChecksumHexAddress)(e.txParams.to))});r.getTokenExchangeRates=(0,l.createSelector)(e=>(0,N.getCurrentChainId)(e),e=>e.metamask.marketData,(e,t)=>{const r=(null==t?void 0:t[e])??{};return Object.entries(r).reduce((e,[t,r])=>(e[t]=(null==r?void 0:r.price)??null,e),{})});r.getCrossChainTokenExchangeRates=e=>{const t=e.metamask.marketData??{};return Object.keys(t).reduce((e,r)=>(e[r]=Object.keys(t[r]).reduce((e,n)=>{var o;return e[n]=null===(o=t[r][n])||void 0===o?void 0:o.price,e},{}),e),{})};r.getTokensMarketData=e=>{var t;const r=(0,N.getCurrentChainId)(e);return null===(t=e.metamask.marketData)||void 0===t?void 0:t[r]};function we(e){const t=e.metamask.addressBook;return Object.entries(t).filter(([e,t])=>"*"!==e).map(([e,t])=>Object.values(t).map(t=>({...t,chainId:e}))).flat()}function Pe(e,t){return we(e).find(e=>(0,G.isEqualCaseInsensitive)(e.address,t))}function Re(e){const t=he(e),r=(0,ee.getInternalAccounts)(e);return Object.values(r).map(e=>({...e,...t[e.address]}))}r.getMarketData=e=>e.metamask.marketData;r.getAccountsWithLabels=(0,l.createSelector)(Ie,e=>e.map(e=>{const{address:t,metadata:{name:r},balance:n}=e;return{...e,addressLabel:`${r.length<w.TRUNCATED_NAME_CHAR_LIMIT?r:`${r.slice(0,w.TRUNCATED_NAME_CHAR_LIMIT-1)}...`} (${(0,M.shortenAddress)(t)})`,label:r,balance:n}}));function De(e){const{address:t}=(0,ee.getSelectedInternalAccount)(e),r=Re(e);return(0,M.getAccountByAddress)(r,t)}r.getNetworkConfigurationIdByChainId=(0,J.createDeepEqualSelector)(e=>e.metamask.networkConfigurationsByChainId,e=>Object.entries(e).reduce((e,[t,r])=>{const n=r.rpcEndpoints[r.defaultRpcEndpointIndex];return e[t]=n.networkClientId,e},{}));const Me=r.selectNetworkConfigurationByChainId=(0,l.createSelector)(N.getNetworkConfigurationsByChainId,(e,t)=>t,(e,t)=>e[t]),Le=r.selectDefaultRpcEndpointByChainId=(0,l.createSelector)(Me,e=>{if(!e)return undefined;const{defaultRpcEndpointIndex:t,rpcEndpoints:r}=e;return r[t]});r.getIsRpcFailoverEnabled=(0,l.createSelector)(A.getRemoteFeatureFlags,e=>e.walletFrameworkRpcFailoverEnabled??!1),r.selectConversionRateByChainId=(0,l.createSelector)(Me,e=>e,(e,t)=>{var r;if(!e)return undefined;const{nativeCurrency:n}=e;return null===(r=t.metamask.currencyRates[n])||void 0===r?void 0:r.conversionRate}),r.selectNftsByChainId=(0,l.createSelector)(ee.getSelectedInternalAccount,e=>e.metamask.allNfts,(e,t)=>t,(e,t,r)=>{var n;return(null==t||null===(n=t[e.address])||void 0===n?void 0:n[r])??Z.EMPTY_ARRAY}),r.selectNetworkIdentifierByChainId=(0,l.createSelector)(Me,Le,(e,t)=>{const{name:r}=e??{},{url:n,networkClientId:o}=t??{};return r||n||o});const Be=r.getUnapprovedConfirmations=(0,J.createDeepEqualSelector)(e=>e.metamask.pendingApprovals||{},e=>Object.values(e));function xe(e){return Be(e).filter(e=>L.TEMPLATED_CONFIRMATION_APPROVAL_TYPES.includes(e.type))}function je(e){return(0,N.getCurrentChainId)(e)===k.CHAIN_IDS.MAINNET}function Fe(e){const t=(0,N.getCurrentChainId)(e);return k.TEST_CHAINS.includes(t)}function Ue({metamask:e}){return e.preferences??{}}function He(e){const{showTestNetworks:t}=Ue(e);return Boolean(t)}r.getTokenSortConfig=(0,J.createDeepEqualSelector)(Ue,({tokenSortConfig:e})=>e),r.getTokenNetworkFilter=(0,J.createDeepEqualSelector)(N.getCurrentChainId,Ue,re.getIsEvmMultichainNetworkSelected,re.getSelectedMultichainNetworkChainId,(e,{tokenNetworkFilter:t},r,n)=>r?k.FEATURED_NETWORK_CHAIN_IDS.includes(e)?Object.entries(t||{}).reduce((e,[t,r])=>(k.FEATURED_NETWORK_CHAIN_IDS.includes(t)&&(e[t]=r),e),{}):{[e]:!0}:{[n]:!0});function Ge(e){const t=(0,N.getCurrentChainId)(e),r=(0,b.getEnabledNetworks)(e),n=(0,re.getSelectedMultichainNetworkChainId)(e),{namespace:o}=(0,T.parseCaipChainId)(n),a=(null==r?void 0:r[o])??{};return 1===Object.keys(a).length&&Object.keys(a)[0]===t}const We=(0,c.memoize)(e=>`data:image/svg+xml;utf8,${encodeURIComponent(e)}`);function Ke(e,t){const r=Jt(e)[t];if((null==r?void 0:r.subjectType)===a.SubjectType.Snap){const{svgIcon:e,...t}=r;return{...t,iconUrl:e?We(e):null}}return r}const qe=e=>e;r.rawStateSelector=qe;const Ve=(e,t)=>t,Ye=e=>e.metamask.snaps;r.selectInstalledSnaps=Ye;const $e=r.selectInstalledNonPreinstalledSnaps=(0,l.createSelector)([Ye],e=>Object.values(e).filter(e=>!e.preinstalled));r.selectIsNetworkMenuOpen=e=>e.appState.isNetworkMenuOpen;const Je=r.getSnapRegistryData=(0,l.createSelector)([e=>{var t;return null===(t=e.metamask.database)||void 0===t?void 0:t.verifiedSnaps},Ve],(e,t)=>e?e[t]:null),ze=r.getSnapLatestVersion=(0,l.createSelector)([Je],e=>e?Object.keys(e.versions).reduce((e,t)=>u.default.gt(t,e)?t:e,"0.0.0"):null),Xe=r.getAllSnapAvailableUpdates=(0,l.createSelector)([$e,qe],(e,t)=>{const r=new Map;return e.forEach(e=>{const n=ze(t,e.id);r.set(e.id,!!n&&u.default.gt(n,e.version))}),r}),Ze=(r.getAnySnapUpdateAvailable=(0,l.createSelector)([Xe],e=>[...e.values()].some(e=>!0===e)),r.getHideSnapBranding=(0,J.createDeepEqualSelector)([Ye,Ve],(e,t)=>{var r;return null===(r=e[t])||void 0===r?void 0:r.hideSnapBranding}),r.getMemoizedTargetSubjectMetadata=(0,J.createDeepEqualSelector)(Ke,e=>e),r.getMemoizedUnapprovedConfirmations=(0,J.createDeepEqualSelector)(Be,e=>e),r.getMemoizedUnapprovedTemplatedConfirmations=(0,J.createDeepEqualSelector)(xe,e=>e),(e,t)=>t),Qe=r.getMemoizedInterfaces=(0,J.createDeepEqualSelector)(e=>e.metamask.interfaces,e=>e),et=r.getInterface=(0,l.createSelector)([Qe,Ze],(e,t)=>e[t]),tt=(r.getMemoizedInterface=(0,J.createDeepEqualSelector)(et,e=>e),r.getInterfaceContent=(0,l.createSelector)([Qe,Ze],(e,t)=>{var r;return null===(r=e[t])||void 0===r?void 0:r.content}));r.getMemoizedInterfaceContent=(0,J.createDeepEqualSelector)(tt,e=>e),r.getMultipleTargetsSubjectMetadata=(0,J.createDeepEqualSelector)([qe,(e,t)=>t],(e,t)=>Object.keys(t??{}).reduce((t,r)=>(t[r]=Ke(e,r),t),{}));function rt(e){const{rpcPrefs:t}=(0,N.getProviderConfig)(e);return t}function nt(e){var t;return null==e||null===(t=e.metamask)||void 0===t?void 0:t.appActiveTab}function ot(e){if((0,y.getEnvironmentType)()===F.ENVIRONMENT_TYPE_SIDEPANEL){const t=nt(e);return null==t?void 0:t.origin}return e.activeTab.origin}function at(e){return e.metamask.useExternalServices}function st(e){return e.metamask.currencyRates}r.getUSDConversionRateByChainId=e=>(0,l.createSelector)(st,t=>Me(t,e),(e,t)=>{var r;if(!t)return undefined;const{nativeCurrency:n}=t;return null===(r=e[n])||void 0===r?void 0:r.usdConversionRate});const it=(0,J.createDeepEqualSelector)([e=>(0,A.getRemoteFeatureFlags)(e).bridgeConfig],e=>(0,_.selectBridgeFeatureFlags)({remoteFeatureFlags:{bridgeConfig:e}}));r.getIsBridgeEnabled=(0,l.createSelector)([it,at],(e,t)=>(t&&(null==e?void 0:e.support))??!1);function ct(e){return k.CHAIN_ID_TOKEN_IMAGE_MAP[e]??undefined}r.selectERC20TokensByChain=(0,J.createDeepEqualSelector)(e=>e.metamask.tokensChainsCache,e=>e);const ut=r.selectERC20Tokens=(0,J.createDeepEqualSelector)(N.getCurrentChainId,e=>e.metamask.tokensChainsCache,(e,t)=>{var r;return(null==t||null===(r=t[e])||void 0===r?void 0:r.data)||{}}),lt=r.getTokenList=(0,l.createSelector)(ut,Dt,(e,t)=>t?B.STATIC_MAINNET_TOKEN_LIST:e),dt=r.getMemoizedMetadataContract=(0,l.createSelector)((e,t)=>lt(e),(e,t)=>t,(e,t)=>e[null==t?void 0:t.toLowerCase()]),pt=(r.getMetadataContractName=(0,l.createSelector)(dt,e=>(null==e?void 0:e.name)??""),e=>e.confirmTransaction.txData);r.getTxData=pt;const ht=r.getUnapprovedTransaction=(0,J.createDeepEqualSelector)(e=>(0,Q.getUnapprovedTransactions)(e),(e,t)=>t,(e,t)=>Object.values(e).find(({id:e})=>e===t)),ft=r.getTransaction=(0,J.createDeepEqualSelector)(Q.getCurrentNetworkTransactions,(e,t)=>t,(e,t)=>e.find(({id:e})=>e===t)||Z.EMPTY_OBJECT),gt=(r.getFullTxData=(0,J.createDeepEqualSelector)(pt,(e,t,r)=>r===p.TransactionStatus.unapproved?ht(e,t)??{}:ft(e,t),(e,t,r,n,o)=>({customTxParamsData:n,hexTransactionAmount:o}),(e,t,{customTxParamsData:r,hexTransactionAmount:n})=>{let o={...e,...t};return t&&t.simulationFails&&(o.simulationFails={...t.simulationFails}),r&&(o={...o,txParams:{...o.txParams,data:r}}),n&&(o={...o,txParams:{...o.txParams,value:n}}),o}),r.getConnectedSubjectsForAllAddresses=(0,J.createDeepEqualSelector)(Ut,Jt,(e,t)=>{const r={};return Object.entries(e).forEach(([e,n])=>{Xt(n).forEach(n=>{r[n]||(r[n]=[]);const o=t[e];r[n].push({origin:e,...o})})}),r})),mt=r.getAllConnectedAccounts=(0,J.createDeepEqualSelector)(gt,e=>Object.keys(e)),Et=r.getConnectedSitesList=(0,J.createDeepEqualSelector)(gt,ee.getInternalAccounts,mt,(e,t,r)=>{const n={};return r.forEach(r=>{e[r].forEach(e=>{const o=e.origin,a=t.find(e=>(0,G.isEqualCaseInsensitive)(e.address,r));n[o]?(n[o].addresses.push(r),n[o].addressToNameMap[r]=(null==a?void 0:a.metadata.name)||""):n[o]={...e,addresses:[r],addressToNameMap:{[r]:(null==a?void 0:a.metadata.name)||""}}})}),n});r.getMemoizedCurrentChainId=(0,J.createDeepEqualSelector)(N.getCurrentChainId,e=>e);function _t(e){return e.metamask.snaps}function Tt(e){return e.metamask.currentLocale}r.getSnap=(0,J.createDeepEqualSelector)(_t,(e,t)=>t,(e,t)=>e[t]);const St=r.getSnapsMetadata=(0,J.createDeepEqualSelector)(Tt,_t,(e,t)=>Object.values(t).reduce((t,r)=>{const n=r.id,o=r.localizationFiles?(0,i.getLocalizedSnapManifest)(r.manifest,e,r.localizationFiles):r.manifest;return t[n]={name:o.proposedName,description:o.description,hidden:r.hidden},t},{})),vt=r.getSnapMetadata=(0,J.createDeepEqualSelector)(St,(e,t)=>t,(e,t)=>e[t]??{name:t?(0,i.stripSnapPrefix)(t):null}),Nt=r.getEnabledSnaps=(0,J.createDeepEqualSelector)(_t,e=>Object.values(e).reduce((e,t)=>(t.enabled&&(e[t.id]=t),e),{})),bt=(r.getPreinstalledSnaps=(0,J.createDeepEqualSelector)(_t,e=>Object.values(e).reduce((e,t)=>(t.preinstalled&&(e[t.id]=t),e),{})),r.getInsightSnaps=(0,J.createDeepEqualSelector)(Nt,Ut,(e,t)=>Object.values(e).filter(({id:e})=>{var r;return null===(r=t[e])||void 0===r?void 0:r.permissions["endowment:transaction-insight"]}))),At=r.getSettingsPageSnaps=(0,J.createDeepEqualSelector)(Nt,Ut,(e,t)=>Object.values(e).filter(({id:e,preinstalled:r})=>{var n;return(null===(n=t[e])||void 0===n?void 0:n.permissions[g.SnapEndowments.SettingsPage])&&r&&!(0,X.isSnapIgnoredInProd)(e)})),It=r.getSignatureInsightSnaps=(0,J.createDeepEqualSelector)(Nt,Ut,(e,t)=>Object.values(e).filter(({id:e})=>{var r;return null===(r=t[e])||void 0===r?void 0:r.permissions["endowment:signature-insight"]})),yt=(r.getSignatureInsightSnapIds=(0,J.createDeepEqualSelector)(It,e=>e.map(e=>e.id)),r.getInsightSnapIds=(0,J.createDeepEqualSelector)(bt,e=>e.map(e=>e.id)),r.getNameLookupSnapsIds=(0,J.createDeepEqualSelector)(Nt,Ut,(e,t)=>Object.values(e).filter(({id:e})=>{var r;return null===(r=t[e])||void 0===r?void 0:r.permissions["endowment:name-lookup"]}).map(e=>e.id)),r.getNameLookupSnaps=(0,J.createDeepEqualSelector)(Nt,Ut,(e,t)=>Object.values(e).filter(({id:e})=>{var r;return null===(r=t[e])||void 0===r?void 0:r.permissions["endowment:name-lookup"]}).map(e=>{var r;return{id:e.id,permission:null===(r=t[e.id])||void 0===r?void 0:r.permissions["endowment:name-lookup"]}})),r.getSettingsPageSnapsIds=(0,J.createDeepEqualSelector)(At,e=>e.map(e=>e.id)),r.getNotifySnaps=(0,J.createDeepEqualSelector)(Nt,Ut,(e,t)=>Object.values(e).filter(({id:e})=>{var r;return null===(r=t[e])||void 0===r?void 0:r.permissions.snap_notify})));r.getThirdPartyNotifySnaps=(0,J.createDeepEqualSelector)(yt,e=>e.filter(e=>!e.preinstalled));r.getSnapInsights=(0,J.createDeepEqualSelector)(function(e){return e.metamask.insights},(e,t)=>t,(e,t)=>null==e?void 0:e[t]);function kt(e){return e.metamask.pinnedAccountList}function Ot(e){return e.metamask.hiddenAccountList}const Ct=r.getNumberOfAllUnapprovedTransactionsAndMessages=(0,l.createSelector)([Q.getUnapprovedTransactions,e=>e.metamask.unapprovedDecryptMsgs,e=>e.metamask.unapprovedPersonalMsgs,e=>e.metamask.unapprovedEncryptionPublicKeyMsgs,e=>e.metamask.unapprovedTypedMessages],(e,t,r,n,o)=>Object.keys(e??{}).length+Object.keys(t??{}).length+Object.keys(r??{}).length+Object.keys(n??{}).length+Object.keys(o??{}).length),wt=r.getCurrentNetwork=(0,J.createDeepEqualSelector)(N.getNetworkConfigurationsByChainId,N.getCurrentChainId,(e,t)=>{var r;const n=e[t],o=n.rpcEndpoints[n.defaultRpcEndpointIndex],a=null===(r=n.blockExplorerUrls)||void 0===r?void 0:r[n.defaultBlockExplorerUrlIndex];return{chainId:n.chainId,id:o.networkClientId,nickname:n.name,rpcUrl:o.url,ticker:n.nativeCurrency,blockExplorerUrl:a,rpcPrefs:{blockExplorerUrl:a,imageUrl:k.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[n.chainId]},...o.type===f.RpcEndpointType.Infura&&{providerType:o.networkClientId}}});r.getSelectedNetwork=(0,J.createDeepEqualSelector)(N.getSelectedNetworkClientId,N.getNetworkConfigurationsByChainId,(e,t)=>{if(e===undefined)throw new Error("No network is selected");const r=Object.values(t).find(t=>t.rpcEndpoints.some(t=>t.networkClientId===e));if(r===undefined)throw new Error("Could not find network configuration for selected network client");return{configuration:r,clientId:e}}),r.getConnectedSitesListWithNetworkInfo=(0,J.createDeepEqualSelector)(Et,Oe,N.getNetworkConfigurationsByChainId,wt,(e,t,r,n)=>(Object.keys(e).forEach(o=>{const a=Object.values(r).find(e=>e.rpcEndpoints.some(e=>e.networkClientId===t[o]));e[o].networkIconUrl=k.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[null==a?void 0:a.chainId]||"",e[o].networkName=(null==a?void 0:a.name)||(null==n?void 0:n.nickname)||""}),e));function Pt(e){return Boolean(e.metamask.useTokenDetection)}r.getAllEnabledNetworks=(0,J.createDeepEqualSelector)(N.getNetworkConfigurationsByChainId,He,(e,t)=>Object.entries(e).reduce((e,[r,n])=>(!t&&k.TEST_CHAINS.includes(r)||(e[r]=n),e),{})),r.getAllChainsToPoll=(0,J.createDeepEqualSelector)(N.getNetworkConfigurationsByChainId,N.getCurrentChainId,(e,t)=>Object.keys(e).filter(e=>e===t||k.FEATURED_NETWORK_CHAIN_IDS.includes(e))),r.getChainIdsToPoll=(0,J.createDeepEqualSelector)(N.getNetworkConfigurationsByChainId,N.getCurrentChainId,Ge,(e,t,r)=>r?[t]:Object.keys(e).filter(e=>e===t||k.FEATURED_NETWORK_CHAIN_IDS.includes(e))),r.getNetworkClientIdsToPoll=(0,J.createDeepEqualSelector)(N.getNetworkConfigurationsByChainId,N.getCurrentChainId,Ge,(e,t,r)=>{if(r){const r=e[t];return[r.rpcEndpoints[r.defaultRpcEndpointIndex].networkClientId]}return Object.entries(e).reduce((e,[r,n])=>((r===t||k.FEATURED_NETWORK_CHAIN_IDS.includes(r))&&e.push(n.rpcEndpoints[n.defaultRpcEndpointIndex].networkClientId),e),[])});function Rt(e){const t=(0,N.getCurrentChainId)(e);return[k.CHAIN_IDS.MAINNET,k.CHAIN_IDS.BSC,k.CHAIN_IDS.POLYGON,k.CHAIN_IDS.AVALANCHE,k.CHAIN_IDS.LINEA_GOERLI,k.CHAIN_IDS.LINEA_SEPOLIA,k.CHAIN_IDS.LINEA_MAINNET,k.CHAIN_IDS.ARBITRUM,k.CHAIN_IDS.OPTIMISM,k.CHAIN_IDS.BASE,k.CHAIN_IDS.ZKSYNC_ERA,k.CHAIN_IDS.CRONOS,k.CHAIN_IDS.CELO,k.CHAIN_IDS.GNOSIS,k.CHAIN_IDS.FANTOM,k.CHAIN_IDS.POLYGON_ZKEVM,k.CHAIN_IDS.MOONBEAM,k.CHAIN_IDS.MOONRIVER,k.CHAIN_IDS.SEI,k.CHAIN_IDS.MONAD].includes(t)}function Dt(e){const t=je(e);return!Pt(e)&&t}function Mt(e){return e.metamask.tokenScanCache}r.getTokenDetectionSupportNetworkByChainId=e=>{switch((0,N.getCurrentChainId)(e)){case k.CHAIN_IDS.MAINNET:return k.MAINNET_DISPLAY_NAME;case k.CHAIN_IDS.BSC:return k.BSC_DISPLAY_NAME;case k.CHAIN_IDS.POLYGON:return k.POLYGON_DISPLAY_NAME;case k.CHAIN_IDS.AVALANCHE:return k.AVALANCHE_DISPLAY_NAME;case k.CHAIN_IDS.LINEA_GOERLI:return k.LINEA_GOERLI_DISPLAY_NAME;case k.CHAIN_IDS.LINEA_SEPOLIA:return k.LINEA_SEPOLIA_DISPLAY_NAME;case k.CHAIN_IDS.LINEA_MAINNET:return k.LINEA_MAINNET_DISPLAY_NAME;case k.CHAIN_IDS.ARBITRUM:return k.ARBITRUM_DISPLAY_NAME;case k.CHAIN_IDS.OPTIMISM:return k.OPTIMISM_DISPLAY_NAME;case k.CHAIN_IDS.BASE:return k.BASE_DISPLAY_NAME;case k.CHAIN_IDS.ZKSYNC_ERA:return k.ZK_SYNC_ERA_DISPLAY_NAME;case k.CHAIN_IDS.CRONOS:return k.CRONOS_DISPLAY_NAME;case k.CHAIN_IDS.CELO:return k.CELO_DISPLAY_NAME;case k.CHAIN_IDS.GNOSIS:return k.GNOSIS_DISPLAY_NAME;case k.CHAIN_IDS.FANTOM:return k.FANTOM_DISPLAY_NAME;case k.CHAIN_IDS.POLYGON_ZKEVM:return k.POLYGON_ZKEVM_DISPLAY_NAME;case k.CHAIN_IDS.MOONBEAM:return k.MOONBEAM_DISPLAY_NAME;case k.CHAIN_IDS.MOONRIVER:return k.MOONRIVER_DISPLAY_NAME;default:return""}};r.getTokenScanResultsForAddresses=(0,J.createDeepEqualSelector)(Mt,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(!t||!r||!Array.isArray(r))return{};const n={};return r.forEach(r=>{if(r){const o=(0,v.generateTokenCacheKey)(t,r);null!=e&&e[o]&&(n[o]=e[o])}}),n});function Lt(e){const t=(0,N.getCurrentChainId)(e);return!k.CHAIN_ID_TO_RPC_URL_MAP[t]}const Bt=r.getOrderedConnectedAccountsForActiveTab=(0,J.createDeepEqualSelector)(ot,e=>e.metamask.permissionHistory,Ie,Yt,(e,t,r,n)=>{var o;const a=(null===(o=t[e])||void 0===o||null===(o=o.eth_accounts)||void 0===o?void 0:o.accounts)||{},s=n.map(e=>{const{address:t}=(0,T.parseCaipAccountId)(e);return t});return r.filter(e=>s.includes(e.address)).map(e=>({...e,metadata:{...e.metadata,lastActive:null==a?void 0:a[e.address]}})).sort(({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e)}),xt=r.getUpdatedAndSortedAccounts=(0,l.createSelector)(Ie,kt,Ot,Bt,(e,t,r,n)=>{const o=new Map;n.forEach(e=>{e.metadata&&o.set(e.id,{connections:!0,lastSelected:e.metadata.lastSelected})});const a=e.map(e=>{const t=o.get(e.id);return t?{...e,...t}:e}),s=a.filter(e=>e.connections&&e.lastSelected),i=s.length>0?s.reduce((e,t)=>e.lastSelected>t.lastSelected?e:t):null,c=a.map(e=>({...e,pinned:Boolean(t.includes(e.address)),hidden:Boolean(r.includes(e.address)),active:Boolean(i&&e.id===i.id)}));return[...null==t?void 0:t.map(e=>c.find(t=>t.address===e)).filter(e=>Boolean(e&&t.includes(e.address)&&!(null!=r&&r.includes(e.address)))),...c.filter(e=>!t.includes(e.address)&&!r.includes(e.address)),...c.filter(e=>r.includes(e.address))]});r.getUpdatedAndSortedAccountsWithCaipAccountId=(0,J.createDeepEqualSelector)(xt,e=>e.map(e=>{const{namespace:t,reference:r}=(0,T.parseCaipChainId)(e.scopes[0]);return{...e,caipAccountId:`${t}:${r}:${e.address}`}}));function jt(e){return Boolean(e.metamask.useCurrencyRateCheck)}r.getUseSafeChainsListValidation=e=>e.metamask.useSafeChainsListValidation;r.getKeyringSnapAccounts=(0,l.createSelector)(ee.getInternalAccounts,e=>e.filter(e=>{const{keyring:t}=e.metadata;return t.type===C.KeyringType.snap})),r.getSelectedKeyringByIdOrDefault=(0,l.createSelector)(Se,(e,t)=>t,(e,t)=>e.find(e=>e.metadata.id===t)??e[0]),r.getHdKeyringIndexByIdOrDefault=(0,l.createSelector)(ve,(e,t)=>t,(e,t)=>e.findIndex(e=>e.metadata.id===t)??0);const Ft=r.getKeyringOfSelectedAccount=(0,l.createSelector)(ee.getSelectedInternalAccount,Se,(e,t)=>t.find(t=>t.accounts.some(t=>(0,G.isEqualCaseInsensitive)(t,e.address))));r.getHdKeyringOfSelectedAccountOrPrimaryKeyring=(0,l.createSelector)(Ft,ve,(e,t)=>e.type===E.KeyringTypes.hd?e:t[0]),r.getPermissionSubjectsDeepEqual=(0,J.createDeepEqualSelector)(e=>e.metamask.subjects||{},e=>e),r.getSubjectMetadataDeepEqual=(0,J.createDeepEqualSelector)(e=>e.metamask.subjectMetadata,e=>e);function Ut(e){return e.metamask.subjects||{}}function Ht(e,t){return Zt(zt(er(e,t)))}function Gt(e,t){return Qt(zt(er(e,t)))}function Wt(e,t){const r=zt(er(e,t)),n=(0,m.getCaip25CaveatFromPermission)(r);return n?(0,m.getCaipAccountIdsFromCaip25CaveatValue)(n.value):[]}function Kt(e,t){const r=zt(er(e,t));return r?(0,m.getAllScopesFromPermission)(r):[]}function qt(e){return Ht(e,ot(e))}function Vt(e,t){return Ht(e,t)}function Yt(e){return Wt(e,ot(e))}function $t(e){const t=Ut(e);return Object.keys(t).reduce((e,r)=>{const n=Xt(t[r]);return n.length>0&&(e[r]=n),e},{})}function Jt(e){return e.metamask.subjectMetadata}r.isAccountConnectedToCurrentTab=(0,J.createDeepEqualSelector)(qt,(e,t)=>t,(e,t)=>e.some(e=>e===t));function zt(e={}){var t;return null===(t=e.permissions)||void 0===t?void 0:t[m.Caip25EndowmentPermissionName]}function Xt(e){return Zt(zt(e))}function Zt(e){if(!e)return[];const t=(0,m.getCaip25CaveatFromPermission)(e);return t?(0,m.getEthAccounts)(t.value):[]}function Qt(e){if(!e)return[];const t=(0,m.getCaip25CaveatFromPermission)(e);return t?(0,m.getPermittedEthChainIds)(t.value):[]}function er(e,t){var r;return t&&(null===(r=e.metamask.subjects)||void 0===r?void 0:r[t])}function tr(e,t){var r;const{metamask:{permissionHistory:n}}=e,o=null===(r=n[t.origin])||void 0===r||null===(r=r.eth_accounts)||void 0===r?void 0:r.accounts,a=Ie(e),s=Vt(e,t);return a.filter(e=>s.includes(e.address)).filter(e=>(0,h.isEvmAccountType)(e.type)).map(e=>({...e,metadata:{...e.metadata,lastActive:null==o?void 0:o[e.address]}})).sort(({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e)}function rr(e){return Object.values(e.metamask.pendingApprovals).filter(({type:e})=>"wallet_installSnap"===e||"wallet_updateSnap"===e||"wallet_installSnapResult"===e).map(({requestData:e})=>e)}function nr(e){var t;return null===(t=(0,ne.getApprovalRequestsByType)(e,s.ApprovalType.WalletRequestPermissions))||void 0===t?void 0:t.map(({requestData:e})=>e)}r.selectNonZeroUnusedApprovalsAllowList=(0,l.createSelector)(A.getRemoteFeatureFlags,e=>(null==e?void 0:e.nonZeroUnusedApprovals)??Z.EMPTY_ARRAY)}}},{package:"$root$",file:"ui/selectors/selectors.js"}],[8189,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EMPTY_OBJECT=r.EMPTY_ARRAY=void 0;r.EMPTY_ARRAY=Object.freeze([]),r.EMPTY_OBJECT=Object.freeze({})}}},{package:"$root$",file:"ui/selectors/shared.ts"}],[819,{"./_version":805,"./url-json-rpc-provider":822,"@ethersproject/logger":798},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.NodesmithProvider=void 0;var a=e("./url-json-rpc-provider"),s=e("@ethersproject/logger"),i=e("./_version"),c=new s.Logger(i.version),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.getApiKey=function(e){return e&&"string"!=typeof e&&c.throwArgumentError("invalid apiKey","apiKey",e),e||"ETHERS_JS_SHARED"},t.getUrl=function(e,t){c.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");var r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:c.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t},t}(a.UrlJsonRpcProvider);r.NodesmithProvider=u}}},{package:"@ethersproject/providers",file:"node_modules/@ethersproject/providers/lib/nodesmith-provider.js"}],[8197,{"./subscription":8198},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./subscription");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))})}}},{package:"$root$",file:"ui/selectors/subscription/index.ts"}],[8198,{"../../../shared/lib/shield":5954,"@metamask/subscription-controller":3033},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getHasShieldEntryModalShownOnce=function(e){var t;const r=null===(t=e.metamask)||void 0===t?void 0:t.showShieldEntryModalOnce;return Boolean(null!==r&&r!==undefined)},r.getHasSubscribedToShield=function(e){const t=(0,o.getShieldSubscription)(e.metamask.subscriptions),r=e.metamask.lastSubscription&&(0,o.getShieldSubscription)(e.metamask.lastSubscription);return Boolean(t)||Boolean(r)},r.getIsActiveShieldSubscription=function(e){return(0,o.getIsShieldSubscriptionActive)(e.metamask.subscriptions)},r.getLastUsedShieldSubscriptionPaymentDetails=function(e){var t;return null===(t=e.metamask.lastSelectedPaymentMethod)||void 0===t?void 0:t[n.PRODUCT_TYPES.SHIELD]},r.getLatestShieldSubscription=function(e){const{subscriptions:t,lastSubscription:r}=e.metamask,n=(0,o.getShieldSubscription)(t);if(r&&!n)return(0,o.getShieldSubscription)(r);return n},r.getSubscriptionPricing=function(e){return e.metamask.pricing},r.getUserSubscriptions=function(e){return{customerId:e.metamask.customerId,subscriptions:e.metamask.subscriptions,trialedProducts:e.metamask.trialedProducts,lastSubscription:e.metamask.lastSubscription}};var n=e("@metamask/subscription-controller"),o=e("../../../shared/lib/shield")}}},{package:"$root$",file:"ui/selectors/subscription/subscription.ts"}],[820,{"./_version":805,"./url-json-rpc-provider":822,"@ethersproject/logger":798},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.PocketProvider=void 0;var a=e("@ethersproject/logger"),s=e("./_version"),i=new a.Logger(s.version),c=e("./url-json-rpc-provider"),u="62e1ad51b37b8e00394bda3b",l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.getApiKey=function(e){var t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return null==e?t.applicationId=u:"string"==typeof e?t.applicationId=e:null!=e.applicationSecretKey?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:i.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t},t.getUrl=function(e,t){var r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:i.throwError("unsupported network",a.Logger.errors.INVALID_ARGUMENT,{argument:"network",value:e})}var n={headers:{},url:"https://"+r+"/v1/lb/"+t.applicationId};return null!=t.applicationSecretKey&&(n.user="",n.password=t.applicationSecretKey),n},t.prototype.isCommunityResource=function(){return this.applicationId===u},t}(c.UrlJsonRpcProvider);r.PocketProvider=l}}},{package:"@ethersproject/providers",file:"node_modules/@ethersproject/providers/lib/pocket-provider.js"}],[8200,{"../../shared/constants/transaction":5876,"../../shared/modules/conversion.utils":5976,"../../shared/modules/selectors/networks":5995,"../../shared/modules/selectors/selector-creators":5996,"../../shared/modules/selectors/util":5999,"../helpers/constants/transactions":7121,"../helpers/utils/tx-helper":7167,"./accounts":8157,"./approvals":8159,"./shared":8189,"@metamask/controller-utils":1494,"@metamask/smart-transactions-controller":2743,"@metamask/transaction-controller":3095,reselect:5371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.groupAndSortTransactionsByNonce=r.getUnapprovedTransactions=r.getTransactionsByChainId=r.getTransactions=r.getCurrentNetworkTransactions=r.getApprovedAndSignedTransactions=void 0,r.hasTransactionPendingApprovals=function(e){return(0,m.getApprovalRequestsByType)(e,o.ApprovalType.Transaction).length>0||(0,m.hasPendingApprovals)(e,U)},r.nonceSortedTransactionsSelectorAllChains=r.nonceSortedTransactionsSelector=r.nonceSortedPendingTransactionsSelectorAllChains=r.nonceSortedPendingTransactionsSelector=r.nonceSortedCompletedTransactionsSelectorAllChains=r.nonceSortedCompletedTransactionsSelector=r.incomingTxListSelectorAllChains=r.incomingTxListSelector=void 0,r.selectTransactionMetadata=H,r.unapprovedTypedMessagesSelector=r.unapprovedPersonalMsgsSelector=r.unapprovedMessagesSelector=r.unapprovedEncryptionPublicKeyMsgsSelector=r.unapprovedDecryptMsgsSelector=r.transactionsSelectorAllChains=r.transactionsSelector=r.transactionSubSelectorAllChains=r.transactionSubSelector=r.submittedPendingTransactionsSelector=r.smartTransactionsListSelector=r.selectedAddressTxListSelectorAllChain=r.selectedAddressTxListSelector=r.selectTransactionSender=void 0;var n,o=e("@metamask/controller-utils"),a=e("reselect"),s=e("@metamask/transaction-controller"),i=e("@metamask/smart-transactions-controller"),c=e("../helpers/constants/transactions"),u=(n=e("../helpers/utils/tx-helper"))&&n.__esModule?n:{default:n},l=e("../../shared/constants/transaction"),d=e("../../shared/modules/conversion.utils"),p=e("../../shared/modules/selectors/networks"),h=e("../../shared/modules/selectors/util"),f=e("../../shared/modules/selectors/selector-creators"),g=e("./accounts"),m=e("./approvals"),E=e("./shared");const _=r.getTransactions=(0,a.createSelector)(e=>{var t;return null===(t=e.metamask)||void 0===t?void 0:t.transactions},e=>null!=e&&e.length?[...e].sort((e,t)=>e.time-t.time):E.EMPTY_ARRAY),T=(r.getUnapprovedTransactions=(0,f.createShallowEqualInputAndResultSelector)(_,function(e){if(null==e||!e.length)return E.EMPTY_OBJECT;const t={};for(const r of e)r.status===s.TransactionStatus.unapproved&&(t[r.id]=r);return Object.keys(t).length>0?t:E.EMPTY_OBJECT}),(0,f.createParameterizedShallowEqualSelector)(10)),S=r.getTransactionsByChainId=T(_,(e,t)=>t,(e,t)=>e.length&&t?e.filter(e=>e.chainId===t):E.EMPTY_ARRAY),v=e=>{const t=function(e){try{return(0,p.getProviderConfig)(e)}catch{return null}}(e);return null!=t&&t.chainId?S(e,t.chainId):E.EMPTY_ARRAY};r.getCurrentNetworkTransactions=v;const N=r.incomingTxListSelectorAllChains=(0,h.createDeepEqualSelector)(e=>{const t=_(e),{address:r}=(0,g.getSelectedInternalAccount)(e);return t.filter(e=>e.type===s.TransactionType.incoming&&e.txParams.to===r)},e=>e),b=(r.getApprovedAndSignedTransactions=(0,h.createDeepEqualSelector)(e=>_(e).filter(e=>[s.TransactionStatus.approved,s.TransactionStatus.signed].includes(e.status)),e=>e),r.incomingTxListSelector=(0,h.createDeepEqualSelector)(e=>{const t=v(e),{address:r}=(0,g.getSelectedInternalAccount)(e);return t.filter(e=>e.type===s.TransactionType.incoming&&e.txParams.to===r)},e=>e)),A=e=>e.metamask.unapprovedPersonalMsgs;r.unapprovedPersonalMsgsSelector=A;const I=e=>e.metamask.unapprovedDecryptMsgs;r.unapprovedDecryptMsgsSelector=I;const y=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs;r.unapprovedEncryptionPublicKeyMsgsSelector=y;const k=e=>e.metamask.unapprovedTypedMessages;r.unapprovedTypedMessagesSelector=k;const O=r.smartTransactionsListSelector=(0,a.createSelector)(g.getSelectedInternalAccount,e=>{var t;return null===(t=e.metamask.smartTransactionsState)||void 0===t?void 0:t.smartTransactions},p.getCurrentChainId,(e,t,r)=>{const n=[i.SmartTransactionStatuses.PENDING,i.SmartTransactionStatuses.UNKNOWN,i.SmartTransactionStatuses.RESOLVED,i.SmartTransactionStatuses.CANCELLED],o=null==e?void 0:e.address,a=null==t?void 0:t[r];return null!=a&&a.length?a.filter(e=>{var t;return(null===(t=e.txParams)||void 0===t?void 0:t.from)===o&&!e.confirmed&&(e.status===i.SmartTransactionStatuses.PENDING||(e.type===s.TransactionType.swap||e.type===s.TransactionType.swapApproval)&&n.includes(e.status))}).map(e=>{var t;return{...e,isSmartTransaction:!0,status:null!==(t=e.status)&&void 0!==t&&t.startsWith("cancelled")?l.SmartTransactionStatus.cancelled:e.status}}):E.EMPTY_ARRAY}),C=r.selectedAddressTxListSelectorAllChain=(0,a.createSelector)(g.getSelectedInternalAccount,_,O,(e,t=[],r=[])=>t.filter(({txParams:t})=>t.from===e.address).filter(({type:e})=>!c.EXCLUDED_TRANSACTION_TYPES.has(e)).concat(r)),w=r.selectedAddressTxListSelector=(0,a.createSelector)(g.getSelectedInternalAccount,v,O,(e,t=[],r=[])=>t.filter(({txParams:t})=>t.from===e.address).filter(({type:e})=>!c.EXCLUDED_TRANSACTION_TYPES.has(e)).concat(r)),P=r.unapprovedMessagesSelector=(0,a.createSelector)(A,I,y,k,p.getCurrentChainId,(e={},t={},r={},n={},o)=>(0,u.default)({},e,t,r,n,o)||[]),R=r.transactionSubSelectorAllChains=(0,a.createSelector)(P,N,(e=[],t=[])=>e.concat(t)),D=r.transactionSubSelector=(0,a.createSelector)(P,b,(e=[],t=[])=>e.concat(t)),M=r.transactionsSelector=(0,a.createSelector)(D,w,(e=[],t=[])=>[...t.concat(e)].sort((e,t)=>t.time-e.time)),L=r.transactionsSelectorAllChains=(0,a.createSelector)(R,C,(e=[],t=[])=>[...t.concat(e)].sort((e,t)=>t.time-e.time)),B=(e,t)=>{const{primaryTransaction:{time:r}={}}=t;let n=e.length;for(let t=0;t<e.length;t++){const o=e[t],{primaryTransaction:{time:a}={}}=o;if(a>r){n=t;break}}e.splice(n,0,t)},x=e=>{const t=[],r=[],n=[],o={},a=[s.TransactionType.cancel,s.TransactionType.retry];e.forEach(e=>{const{networkClientId:i,txParams:{nonce:u}={},status:l,type:p,time:h,txReceipt:f}=e,g=`${u}-${i}`;if(void 0===u||p===s.TransactionType.incoming){const n={transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:!1,hasCancelled:!1,nonce:u};p===s.TransactionType.incoming?r.push(n):B(t,n)}else if(g in o){var m,E;const t=o[g];((e,t)=>{const{time:r}=t;let n=e.length;for(let t=0;t<e.length;t++)if(e[t].time>r){n=t;break}e.splice(n,0,t)})(t.transactions,e);const{primaryTransaction:{time:r=0}={},initialTransaction:{time:n=0}={}}=t,i={isOnChainFailure:"0x0"===(null==f?void 0:f.status),isEphemeral:l===s.TransactionStatus.failed&&"0x0"!==(null==f?void 0:f.status),isRetryOrCancel:a.includes(p),occurredAfterPrimary:h>r,hasPriorityStatus:l in c.PRIORITY_STATUS_HASH,isConfirmed:l===s.TransactionStatus.confirmed,occurredBeforeInitial:h<n,isValidRetry:p===s.TransactionType.retry&&(l in c.PRIORITY_STATUS_HASH||l===s.TransactionStatus.dropped),isValidCancel:p===s.TransactionType.cancel&&(l in c.PRIORITY_STATUS_HASH||l===s.TransactionStatus.dropped),eligibleForInitial:!a.includes(p)&&l!==s.TransactionStatus.failed,shouldBePrimary:l===s.TransactionStatus.confirmed||"0x0"===(null==f?void 0:f.status)},u={isEphemeral:t.primaryTransaction.status===s.TransactionStatus.failed&&"0x0"!==(null===(m=t.primaryTransaction)||void 0===m||null===(m=m.txReceipt)||void 0===m?void 0:m.status)},d={isEphemeral:t.initialTransaction.status===s.TransactionStatus.failed&&"0x0"!==(null===(E=t.initialTransaction.txReceipt)||void 0===E?void 0:E.status)};(i.shouldBePrimary||u.isEphemeral||i.occurredAfterPrimary&&i.hasPriorityStatus)&&(t.primaryTransaction=e),(i.occurredBeforeInitial&&i.eligibleForInitial||d.isEphemeral&&i.eligibleForInitial)&&(t.initialTransaction=e),i.isValidRetry&&(t.hasRetried=!0),i.isValidCancel&&(t.hasCancelled=!0)}else o[g]={nonce:u,transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:p===s.TransactionType.retry&&(l in c.PRIORITY_STATUS_HASH||l===s.TransactionStatus.dropped),hasCancelled:p===s.TransactionType.cancel&&(l in c.PRIORITY_STATUS_HASH||l===s.TransactionStatus.dropped)},((e,t)=>{let r=e.length;for(let n=0;n<e.length;n++){const o=e[n];if(Number((0,d.hexToDecimal)(o.split("-")[0]))>Number((0,d.hexToDecimal)(t.split("-")[0]))){r=n;break}}e.splice(r,0,t)})(n,g)});const i=n.map(e=>o[e]);return((e,t)=>{t.forEach(t=>{B(e,t)})})(i,r),t.concat(i).map(e=>{var t;if(a.includes(null===(t=e.initialTransaction)||void 0===t?void 0:t.type)){const t=e.transactions.find(e=>!a.includes(e.type));if(t)return{...e,initialTransaction:t}}return e})};r.groupAndSortTransactionsByNonce=x;const j=r.nonceSortedTransactionsSelector=(0,a.createSelector)(M,(e=[])=>x(e)),F=r.nonceSortedTransactionsSelectorAllChains=(0,a.createSelector)(L,(e=[])=>x(e)),U=(r.nonceSortedPendingTransactionsSelectorAllChains=(0,a.createSelector)(F,(e=[])=>e.filter(({primaryTransaction:e})=>e.status in c.PENDING_STATUS_HASH)),r.nonceSortedCompletedTransactionsSelectorAllChains=(0,a.createSelector)(F,(e=[])=>e.filter(({primaryTransaction:e})=>!(e.status in c.PENDING_STATUS_HASH)).reverse()),r.nonceSortedPendingTransactionsSelector=(0,a.createSelector)(j,(e=[])=>e.filter(({primaryTransaction:e})=>e.status in c.PENDING_STATUS_HASH)),r.nonceSortedCompletedTransactionsSelector=(0,a.createSelector)(j,(e=[])=>e.filter(({primaryTransaction:e})=>!(e.status in c.PENDING_STATUS_HASH)).reverse()),r.submittedPendingTransactionsSelector=(0,a.createSelector)(M,(e=[])=>e.filter(e=>e.status===s.TransactionStatus.submitted)),[o.ApprovalType.EthDecrypt,o.ApprovalType.EthGetEncryptionPublicKey,o.ApprovalType.EthSignTypedData,o.ApprovalType.PersonalSign]);function H(e,t){return e.metamask.transactions.find(e=>e.id===t)}r.selectTransactionSender=(0,a.createSelector)((e,t)=>H(e,t),e=>{var t;return null==e||null===(t=e.txParams)||void 0===t?void 0:t.from})}}},{package:"$root$",file:"ui/selectors/transactions.js"}],[8201,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TOGGLE_CURRENCY_INPUT_SWITCH=r.SHOW_SETTINGS_PAGE_ERROR=r.SHOW_SEND_TOKEN_PAGE=r.SHOW_PRIVATE_KEY=r.SHOW_PERMITTED_NETWORK_TOAST_OPEN=r.SHOW_PERMITTED_NETWORK_TOAST_CLOSE=r.SHOW_NFT_STILL_FETCHING_INDICATION=r.SHOW_NFT_DETECTION_ENABLEMENT_TOAST=r.SHOW_LOADING=r.SHOW_KEYRING_SNAP_REMOVAL_RESULT=r.SHOW_IPFS_MODAL_OPEN=r.SHOW_IPFS_MODAL_CLOSE=r.SHOW_CONF_TX_PAGE=r.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN=r.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE=r.SHOW_ACCOUNTS_PAGE=r.SET_WEBHID_CONNECTED_STATUS=r.SET_SMART_TRANSACTIONS_ERROR=r.SET_SLIDES=r.SET_SHOW_SUPPORT_DATA_CONSENT_MODAL=r.SET_SHOW_PASSWORD_CHANGE_TOAST=r.SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE=r.SET_SHOW_NEW_SRP_ADDED_TOAST=r.SET_SHOW_INFURA_SWITCH_TOAST=r.SET_SHOW_COPY_ADDRESS_TOAST=r.SET_SHOW_CLAIM_SUBMIT_TOAST=r.SET_SHIELD_ENTRY_MODAL_STATUS=r.SET_SELECTED_NETWORK_CONFIGURATION_ID=r.SET_SELECTED_NETWORKS_FOR_DAPP_CONNECTIONS=r.SET_SELECTED_ACCOUNTS_FOR_DAPP_CONNECTIONS=r.SET_REQUEST_ACCOUNT_TABS=r.SET_REMOVE_NFT_MESSAGE=r.SET_PENDING_TOKENS=r.SET_PARTICIPATE_IN_METAMETRICS=r.SET_OPEN_METAMASK_TAB_IDS=r.SET_NEXT_NONCE=r.SET_NEW_TOKENS_IMPORTED_ERROR=r.SET_NEW_TOKENS_IMPORTED=r.SET_NEW_NFT_ADDED_MESSAGE=r.SET_NEW_NETWORK_ADDED=r.SET_LEDGER_TRANSPORT_STATUS=r.SET_HARDWARE_WALLET_DEFAULT_HD_PATH=r.SET_FIRST_TIME_FLOW_TYPE=r.SET_EDIT_NETWORK=r.SET_DATA_COLLECTION_FOR_MARKETING=r.SET_CUSTOM_TOKEN_AMOUNT=r.SET_CURRENT_LOCALE=r.SET_CONFIRMATION_EXCHANGE_RATES=r.SET_ACCOUNT_LABEL=r.SELECTED_ADDRESS_CHANGED=r.SELECTED_ACCOUNT_CHANGED=r.RESET_SOCIAL_LOGIN_ONBOARDING=r.RESET_ONBOARDING=r.QR_CODE_DETECTED=r.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON=r.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF=r.ONBOARDED_IN_THIS_UI_SESSION=r.NETWORK_DROPDOWN_OPEN=r.NETWORK_DROPDOWN_CLOSE=r.MODAL_OPEN=r.MODAL_CLOSE=r.LOCK_METAMASK=r.LOADING_METHOD_DATA_STARTED=r.LOADING_METHOD_DATA_FINISHED=r.IMPORT_TOKENS_POPOVER_OPEN=r.IMPORT_TOKENS_POPOVER_CLOSE=r.IMPORT_NFTS_MODAL_OPEN=r.IMPORT_NFTS_MODAL_CLOSE=r.HIDE_WHATS_NEW_POPUP=r.HIDE_WARNING=r.HIDE_SETTINGS_PAGE_ERROR=r.HIDE_NFT_STILL_FETCHING_INDICATION=r.HIDE_LOADING=r.HIDE_KEYRING_SNAP_REMOVAL_RESULT=r.GO_HOME=r.GAS_FEE_ESTIMATES_UPDATED=r.DISPLAY_WARNING=r.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE=r.DEPRECATED_NETWORK_POPOVER_OPEN=r.DEPRECATED_NETWORK_POPOVER_CLOSE=r.DELETE_METAMETRICS_DATA_MODAL_OPEN=r.DELETE_METAMETRICS_DATA_MODAL_CLOSE=r.DATA_DELETION_ERROR_MODAL_OPEN=r.DATA_DELETION_ERROR_MODAL_CLOSE=r.CONNECT_ACCOUNTS_MODAL_OPEN=r.CONNECT_ACCOUNTS_MODAL_CLOSE=r.COMPLETE_ONBOARDING_WITH_SIDEPANEL=r.COMPLETE_ONBOARDING=r.COMPLETED_TX=r.CLOSE_WELCOME_SCREEN=r.CLOSE_NETWORK_MENU=r.CLEAR_SWAP_AND_SEND_STATE=r.CLEAR_PENDING_TOKENS=r.CLEAR_ACCOUNT_DETAILS=r.CHAIN_CHANGED=r.CAPTURE_SINGLE_EXCEPTION=r.ALERT_OPEN=r.ALERT_CLOSE=r.ADDRESS_BOOK_UPDATED=r.ACCOUNT_CHANGED=void 0,r.UPDATE_TRANSACTION_PARAMS=r.UPDATE_METAMASK_STATE=r.UPDATE_CUSTOM_NONCE=r.UNLOCK_SUCCEEDED=r.UNLOCK_IN_PROGRESS=r.UNLOCK_FAILED=r.TRANSACTION_ERROR=r.TOKEN_SORT_CRITERIA=r.TOGGLE_NETWORK_MENU=r.TOGGLE_GAS_LOADING_ANIMATION=void 0;r.GO_HOME="GO_HOME",r.MODAL_OPEN="UI_MODAL_OPEN",r.MODAL_CLOSE="UI_MODAL_CLOSE",r.SET_CONFIRMATION_EXCHANGE_RATES="SET_CONFIRMATION_EXCHANGE_RATES",r.ALERT_OPEN="UI_ALERT_OPEN",r.ALERT_CLOSE="UI_ALERT_CLOSE",r.QR_CODE_DETECTED="UI_QR_CODE_DETECTED",r.NETWORK_DROPDOWN_OPEN="UI_NETWORK_DROPDOWN_OPEN",r.NETWORK_DROPDOWN_CLOSE="UI_NETWORK_DROPDOWN_CLOSE",r.IMPORT_NFTS_MODAL_OPEN="UI_IMPORT_NFTS_MODAL_OPEN",r.IMPORT_NFTS_MODAL_CLOSE="UI_IMPORT_NFTS_MODAL_CLOSE",r.SHOW_IPFS_MODAL_OPEN="UI_IPFS_MODAL_OPEN",r.SHOW_PERMITTED_NETWORK_TOAST_OPEN="UI_PERMITTED_NETWORK_TOAST_OPEN",r.SHOW_PERMITTED_NETWORK_TOAST_CLOSE="UI_PERMITTED_NETWORK_TOAST_CLOSE",r.SHOW_IPFS_MODAL_CLOSE="UI_IPFS_MODAL_CLOSE",r.IMPORT_TOKENS_POPOVER_OPEN="UI_IMPORT_TOKENS_POPOVER_OPEN",r.IMPORT_TOKENS_POPOVER_CLOSE="UI_IMPORT_TOKENS_POPOVER_CLOSE",r.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN="SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN",r.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE="SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE",r.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON="ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON",r.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF="ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF",r.UPDATE_METAMASK_STATE="UPDATE_METAMASK_STATE",r.SELECTED_ADDRESS_CHANGED="SELECTED_ADDRESS_CHANGED",r.SELECTED_ACCOUNT_CHANGED="SELECTED_ACCOUNT_CHANGED",r.ACCOUNT_CHANGED="ACCOUNT_CHANGED",r.CHAIN_CHANGED="CHAIN_CHANGED",r.ADDRESS_BOOK_UPDATED="ADDRESS_BOOK_UPDATED",r.GAS_FEE_ESTIMATES_UPDATED="GAS_FEE_ESTIMATES_UPDATED",r.CLOSE_WELCOME_SCREEN="CLOSE_WELCOME_SCREEN",r.CLEAR_SWAP_AND_SEND_STATE="CLEAR_SWAP_AND_SEND_STATE",r.UNLOCK_IN_PROGRESS="UNLOCK_IN_PROGRESS",r.UNLOCK_FAILED="UNLOCK_FAILED",r.UNLOCK_SUCCEEDED="UNLOCK_SUCCEEDED",r.LOCK_METAMASK="LOCK_METAMASK",r.DISPLAY_WARNING="DISPLAY_WARNING",r.HIDE_WARNING="HIDE_WARNING",r.SHOW_SETTINGS_PAGE_ERROR="SHOW_SETTINGS_PAGE_ERROR",r.HIDE_SETTINGS_PAGE_ERROR="HIDE_SETTINGS_PAGE_ERROR",r.CAPTURE_SINGLE_EXCEPTION="CAPTURE_SINGLE_EXCEPTION",r.SHOW_ACCOUNTS_PAGE="SHOW_ACCOUNTS_PAGE",r.SHOW_CONF_TX_PAGE="SHOW_CONF_TX_PAGE",r.SHOW_SEND_TOKEN_PAGE="SHOW_SEND_TOKEN_PAGE",r.SHOW_PRIVATE_KEY="SHOW_PRIVATE_KEY",r.SET_ACCOUNT_LABEL="SET_ACCOUNT_LABEL",r.CLEAR_ACCOUNT_DETAILS="CLEAR_ACCOUNT_DETAILS",r.COMPLETED_TX="COMPLETED_TX",r.TRANSACTION_ERROR="TRANSACTION_ERROR",r.UPDATE_TRANSACTION_PARAMS="UPDATE_TRANSACTION_PARAMS",r.SET_NEXT_NONCE="SET_NEXT_NONCE",r.SET_HARDWARE_WALLET_DEFAULT_HD_PATH="SET_HARDWARE_WALLET_DEFAULT_HD_PATH",r.SHOW_LOADING="SHOW_LOADING_INDICATION",r.HIDE_LOADING="HIDE_LOADING_INDICATION",r.SHOW_NFT_STILL_FETCHING_INDICATION="SHOW_NFT_STILL_FETCHING_INDICATION",r.HIDE_NFT_STILL_FETCHING_INDICATION="HIDE_NFT_STILL_FETCHING_INDICATION",r.SHOW_NFT_DETECTION_ENABLEMENT_TOAST="SHOW_NFT_DETECTION_ENABLEMENT_TOAST",r.TOGGLE_NETWORK_MENU="TOGGLE_NETWORK_MENU",r.CLOSE_NETWORK_MENU="CLOSE_NETWORK_MENU",r.SET_SELECTED_ACCOUNTS_FOR_DAPP_CONNECTIONS="SET_SELECTED_ACCOUNTS_FOR_DAPP_CONNECTIONS",r.SET_SELECTED_NETWORKS_FOR_DAPP_CONNECTIONS="SET_SELECTED_NETWORKS_FOR_DAPP_CONNECTIONS",r.DEPRECATED_NETWORK_POPOVER_OPEN="DEPRECATED_NETWORK_POPOVER_OPEN",r.DEPRECATED_NETWORK_POPOVER_CLOSE="DEPRECATED_NETWORK_POPOVER_CLOSE",r.UPDATE_CUSTOM_NONCE="UPDATE_CUSTOM_NONCE",r.SET_PARTICIPATE_IN_METAMETRICS="SET_PARTICIPATE_IN_METAMETRICS",r.SET_DATA_COLLECTION_FOR_MARKETING="SET_DATA_COLLECTION_FOR_MARKETING",r.DELETE_METAMETRICS_DATA_MODAL_OPEN="DELETE_METAMETRICS_DATA_MODAL_OPEN",r.DELETE_METAMETRICS_DATA_MODAL_CLOSE="DELETE_METAMETRICS_DATA_MODAL_CLOSE",r.DATA_DELETION_ERROR_MODAL_OPEN="DELETE_METAMETRICS_DATA_ERROR_MODAL_OPEN",r.DATA_DELETION_ERROR_MODAL_CLOSE="DELETE_METAMETRICS_DATA_ERROR_MODAL_CLOSE",r.SET_CURRENT_LOCALE="SET_CURRENT_LOCALE",r.COMPLETE_ONBOARDING="COMPLETE_ONBOARDING",r.COMPLETE_ONBOARDING_WITH_SIDEPANEL="COMPLETE_ONBOARDING_WITH_SIDEPANEL",r.RESET_ONBOARDING="RESET_ONBOARDING",r.ONBOARDED_IN_THIS_UI_SESSION="ONBOARDED_IN_THIS_UI_SESSION",r.RESET_SOCIAL_LOGIN_ONBOARDING="RESET_SOCIAL_LOGIN_ONBOARDING",r.SET_WEBHID_CONNECTED_STATUS="SET_WEBHID_CONNECTED_STATUS",r.SET_LEDGER_TRANSPORT_STATUS="SET_LEDGER_TRANSPORT_STATUS",r.SET_PENDING_TOKENS="SET_PENDING_TOKENS",r.CLEAR_PENDING_TOKENS="CLEAR_PENDING_TOKENS",r.SET_FIRST_TIME_FLOW_TYPE="SET_FIRST_TIME_FLOW_TYPE",r.SET_SELECTED_NETWORK_CONFIGURATION_ID="SET_SELECTED_NETWORK_CONFIGURATION_ID",r.SET_NEW_NETWORK_ADDED="SET_NEW_NETWORK_ADDED",r.SET_EDIT_NETWORK="SET_EDIT_NETWORK",r.SET_NEW_NFT_ADDED_MESSAGE="SET_NEW_NFT_ADDED_MESSAGE",r.SET_REMOVE_NFT_MESSAGE="SET_REMOVE_NFT_MESSAGE",r.LOADING_METHOD_DATA_STARTED="LOADING_METHOD_DATA_STARTED",r.LOADING_METHOD_DATA_FINISHED="LOADING_METHOD_DATA_FINISHED",r.SET_REQUEST_ACCOUNT_TABS="SET_REQUEST_ACCOUNT_TABS",r.SET_OPEN_METAMASK_TAB_IDS="SET_OPEN_METAMASK_TAB_IDS",r.HIDE_WHATS_NEW_POPUP="HIDE_WHATS_NEW_POPUP",r.TOGGLE_GAS_LOADING_ANIMATION="TOGGLE_GAS_LOADING_ANIMATION",r.SET_SMART_TRANSACTIONS_ERROR="SET_SMART_TRANSACTIONS_ERROR",r.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE="DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE",r.TOGGLE_CURRENCY_INPUT_SWITCH="TOGGLE_CURRENCY_INPUT_SWITCH",r.SET_NEW_TOKENS_IMPORTED="SET_NEW_TOKENS_IMPORTED",r.SET_NEW_TOKENS_IMPORTED_ERROR="SET_NEW_TOKENS_IMPORTED_ERROR",r.SET_CUSTOM_TOKEN_AMOUNT="SET_CUSTOM_TOKEN_AMOUNT",r.CONNECT_ACCOUNTS_MODAL_OPEN="UI_CONNECT_ACCOUNTS_MODAL_OPEN",r.CONNECT_ACCOUNTS_MODAL_CLOSE="UI_CONNECT_ACCOUNTS_MODAL_CLOSE",r.SHOW_KEYRING_SNAP_REMOVAL_RESULT="SHOW_KEYRING_SNAP_REMOVAL_RESULT",r.HIDE_KEYRING_SNAP_REMOVAL_RESULT="HIDE_KEYRING_SNAP_REMOVAL_RESULT",r.SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE="SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE",r.TOKEN_SORT_CRITERIA="TOKEN_SORT_CRITERIA",r.SET_SLIDES="SET_SLIDES",r.SET_SHOW_NEW_SRP_ADDED_TOAST="SET_SHOW_NEW_SRP_ADDED_TOAST",r.SET_SHOW_PASSWORD_CHANGE_TOAST="SET_SHOW_PASSWORD_CHANGE_TOAST",r.SET_SHOW_COPY_ADDRESS_TOAST="SET_SHOW_COPY_ADDRESS_TOAST",r.SET_SHOW_CLAIM_SUBMIT_TOAST="SET_SHOW_CLAIM_SUBMIT_TOAST",r.SET_SHOW_INFURA_SWITCH_TOAST="SET_SHOW_INFURA_SWITCH_TOAST",r.SET_SHOW_SUPPORT_DATA_CONSENT_MODAL="SET_SHOW_SUPPORT_DATA_CONSENT_MODAL",r.SET_SHIELD_ENTRY_MODAL_STATUS="SET_SHIELD_ENTRY_MODAL_STATUS"}}},{package:"$root$",file:"ui/store/actionConstants.ts"}]],[],{});