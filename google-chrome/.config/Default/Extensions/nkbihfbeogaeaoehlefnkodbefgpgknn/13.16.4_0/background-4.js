LavaPack.loadBundle([[375,{"../../shared/constants/app":5837,"../../shared/constants/bridge":5839,"../../shared/constants/hardware-wallets":5847,"../../shared/constants/keyring":5849,"../../shared/constants/metametrics":5853,"../../shared/constants/multichain/networks":5856,"../../shared/constants/network":5857,"../../shared/constants/onboarding":5860,"../../shared/constants/permissions":5861,"../../shared/constants/time":5874,"../../shared/constants/tokens":5875,"../../shared/constants/transaction":5876,"../../shared/lib/accounts":5881,"../../shared/lib/accounts/bitcoin-wallet-snap":5880,"../../shared/lib/accounts/solana-wallet-snap":5884,"../../shared/lib/accounts/tron-wallet-snap":5885,"../../shared/lib/delegation/delegation":5924,"../../shared/lib/eip7702-support-utils":5929,"../../shared/lib/eip7702-utils":5930,"../../shared/lib/fetch-with-cache":5933,"../../shared/lib/metamask-controller-utils":5942,"../../shared/lib/multichain-accounts/remote-feature-flag":5943,"../../shared/lib/sentry":5953,"../../shared/lib/shield":5954,"../../shared/lib/snaps/snaps":5955,"../../shared/lib/storage-helpers":5956,"../../shared/lib/token-util":5959,"../../shared/lib/trace":5960,"../../shared/lib/transactions-controller-utils":5962,"../../shared/lib/translate":5965,"../../shared/modules/environment":5980,"../../shared/modules/error":5981,"../../shared/modules/hexstring-utils":5984,"../../shared/modules/mv3.utils":5987,"../../shared/modules/network.utils":5988,"../../shared/modules/selectors":5993,"../../shared/modules/selectors/multichain":5994,"../../shared/modules/selectors/networks":5995,"../../shared/modules/shield":6002,"../../shared/modules/string-utils":6006,"../../shared/modules/transaction.utils":6008,"./constants/stream":14,"./controller-init/account-order-controller-init":15,"./controller-init/account-tracker-controller-init":16,"./controller-init/accounts-controller-init":17,"./controller-init/accounts/account-tree-controller-init":18,"./controller-init/accounts/snap-keyring-builder-init":19,"./controller-init/alert-controller-init":20,"./controller-init/announcement-controller-init":21,"./controller-init/app-metadata-controller-init":22,"./controller-init/app-state-controller-init":23,"./controller-init/assets":25,"./controller-init/assets/network-enablement-controller-init":26,"./controller-init/bridge-controller-init":31,"./controller-init/bridge-status-controller-init":32,"./controller-init/claims":35,"./controller-init/confirmations/address-book-controller-init":36,"./controller-init/confirmations/approval-controller-init":37,"./controller-init/confirmations/decrypt-message-controller-init":38,"./controller-init/confirmations/decrypt-message-manager-init":39,"./controller-init/confirmations/encryption-public-key-controller-init":40,"./controller-init/confirmations/encryption-public-key-message-manager-init":41,"./controller-init/confirmations/ens-controller-init":42,"./controller-init/confirmations/gas-fee-controller-init":43,"./controller-init/confirmations/name-controller-init":44,"./controller-init/confirmations/ppom-controller-init":45,"./controller-init/confirmations/signature-controller-init":46,"./controller-init/confirmations/transaction-controller-init":47,"./controller-init/confirmations/user-operation-controller-init":48,"./controller-init/connectivity":50,"./controller-init/core-backend":53,"./controller-init/currency-rate-controller-init":54,"./controller-init/defi-positions/defi-positions-controller-init":55,"./controller-init/delegation/delegation-controller-init":56,"./controller-init/error-reporting-service-init":57,"./controller-init/gator-permissions/gator-permissions-controller-init":58,"./controller-init/identity/authentication-controller-init":59,"./controller-init/identity/user-storage-controller-init":60,"./controller-init/institutional-snap/institutional-snap-controller-init":62,"./controller-init/keyring-controller-init":63,"./controller-init/logging-controller-init":64,"./controller-init/metametrics-controller-init":169,"./controller-init/metametrics-data-deletion-controller-init":170,"./controller-init/multichain":171,"./controller-init/multichain/multichain-account-service-init":172,"./controller-init/network-controller-init":179,"./controller-init/notifications/notification-services-controller-init":180,"./controller-init/notifications/notification-services-push-controller-init":181,"./controller-init/onboarding-controller-init":182,"./controller-init/permission-controller-init":183,"./controller-init/permission-log-controller-init":184,"./controller-init/phishing-controller-init":185,"./controller-init/preferences-controller-init":186,"./controller-init/profile-metrics-controller-init":187,"./controller-init/profile-metrics-service-init":188,"./controller-init/rates-controller-init":189,"./controller-init/remote-feature-flag-controller-init":190,"./controller-init/rewards-controller-init":191,"./controller-init/rewards-data-service-init":192,"./controller-init/seedless-onboarding":193,"./controller-init/selected-network-controller-init":196,"./controller-init/shield/shield-controller-init":197,"./controller-init/smart-transactions/smart-transactions-controller-init":198,"./controller-init/snaps":201,"./controller-init/storage-service-init":210,"./controller-init/subject-metadata-controller-init":211,"./controller-init/subscription":212,"./controller-init/swaps-controller-init":215,"./controller-init/token-balances-controller-init":216,"./controller-init/token-detection-controller-init":217,"./controller-init/token-list-controller-init":218,"./controller-init/tokens-controller-init":219,"./controller-init/transaction-pay-controller-init":220,"./controller-init/utils":222,"./controllers/permissions":239,"./controllers/preferences-controller":243,"./detect-multiple-instances":254,"./lib/AccountIdentitiesPetnamesBridge":257,"./lib/AddressBookPetnamesBridge":258,"./lib/ComposableObservableStore":259,"./lib/PatchStore":261,"./lib/WalletFundsObtainedMonitor":263,"./lib/approval/utils":265,"./lib/backup":266,"./lib/createDefiReferralMiddleware":267,"./lib/createDupeReqFilterStream":268,"./lib/createEvmMethodsToNonEvmAccountReqFilterMiddleware":269,"./lib/createLoggerMiddleware":270,"./lib/createMainFrameOriginMiddleware":271,"./lib/createMetaRPCHandler":272,"./lib/createMetamaskMiddleware":273,"./lib/createOnboardingMiddleware":274,"./lib/createOriginMiddleware":275,"./lib/createOriginThrottlingMiddleware":276,"./lib/createRPCMethodTrackingMiddleware":277,"./lib/createTabIdMiddleware":278,"./lib/createTracingMiddleware":279,"./lib/dapp-swap/dapp-swap-middleware":280,"./lib/forwardRequestToSnap":290,"./lib/messenger":293,"./lib/open-update-tab-and-reload":304,"./lib/ppom/ppom-middleware":307,"./lib/ppom/ppom-util":308,"./lib/rpc-method-middleware":327,"./lib/rpcBlockingMiddleware":328,"./lib/signature/util":334,"./lib/snap-keyring":336,"./lib/snap-keyring/keyring-snaps-permissions":337,"./lib/state-utils":346,"./lib/stream-utils":353,"./lib/transaction/containers/util":355,"./lib/transaction/decode/util":361,"./lib/transaction/metrics":365,"./lib/transaction/sentinel-api":366,"./lib/transaction/transaction-relay":367,"./lib/transaction/util":368,"./lib/trust-signals/trust-signals-middleware":370,"./lib/util":374,"@ethersproject/abi":754,"@metamask/approval-controller":1295,"@metamask/bridge-controller":1414,"@metamask/bridge-status-controller":1452,"@metamask/chain-agnostic-permission":1465,"@metamask/controller-utils":1494,"@metamask/eip-5792-middleware":1886,"@metamask/eip-7702-internal-rpc-middleware":1893,"@metamask/eth-json-rpc-filters":1934,"@metamask/eth-json-rpc-filters/subscriptionManager":1936,"@metamask/eth-json-rpc-middleware":1952,"@metamask/eth-ledger-bridge-keyring":1972,"@metamask/eth-qr-keyring":1981,"@metamask/eth-sig-util":2081,"@metamask/eth-trezor-keyring":2169,"@metamask/json-rpc-engine":2222,"@metamask/json-rpc-middleware-stream":2235,"@metamask/keyring-api":2306,"@metamask/keyring-controller":2316,"@metamask/messenger":2371,"@metamask/metamask-eth-abis":2376,"@metamask/multichain-api-middleware":2401,"@metamask/notification-services-controller/notification-services":2453,"@metamask/obs-store":2512,"@metamask/obs-store/dist/asStream":2511,"@metamask/permission-controller":2534,"@metamask/rpc-errors":2698,"@metamask/scure-bip39/dist/wordlists/english":2702,"@metamask/seedless-onboarding-controller":2718,"@metamask/selected-network-controller":2723,"@metamask/snaps-rpc-methods":2831,"@metamask/snaps-utils":3004,"@metamask/subscription-controller":3033,"@metamask/transaction-controller":3095,"@metamask/utils":3217,"await-semaphore":4012,buffer:4137,"eth-chainlist":4337,"eth-lattice-keyring":4342,events:4433,lodash:4901,loglevel:4909,nanoid:5100,"readable-stream":5339,"webextension-polyfill":5825},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.METAMASK_CONTROLLER_EVENTS=void 0;var n=Kr(e("events")),i=e("readable-stream"),o=Kr(e("webextension-polyfill")),s=e("@metamask/json-rpc-engine"),a=e("@metamask/json-rpc-middleware-stream"),l=e("@metamask/obs-store"),c=e("@metamask/obs-store/dist/asStream"),u=e("@metamask/eth-json-rpc-middleware"),d=e("lodash"),h=e("@metamask/keyring-controller"),p=Kr(e("@metamask/eth-json-rpc-filters")),f=Kr(e("@metamask/eth-json-rpc-filters/subscriptionManager")),g=e("@metamask/rpc-errors"),m=e("await-semaphore"),b=Kr(e("loglevel")),v=e("@metamask/eth-trezor-keyring"),y=e("@metamask/eth-ledger-bridge-keyring"),w=Kr(e("eth-lattice-keyring")),C=e("eth-chainlist"),S=e("@metamask/eth-qr-keyring"),k=e("nanoid"),P=e("@metamask/approval-controller"),T=e("@metamask/messenger"),E=e("@metamask/permission-controller"),A=e("@metamask/selected-network-controller"),M=e("@metamask/snaps-rpc-methods"),_=e("@metamask/controller-utils"),I=e("@metamask/scure-bip39/dist/wordlists/english"),N=e("@metamask/bridge-controller"),O=e("@metamask/transaction-controller"),R=e("@ethersproject/abi"),j=e("@metamask/metamask-eth-abis"),F=e("@metamask/keyring-api"),D=e("@metamask/utils"),x=e("@metamask/eth-sig-util"),B=e("@metamask/notification-services-controller/notification-services"),L=e("@metamask/multichain-api-middleware"),U=e("@metamask/eip-5792-middleware"),$=e("@metamask/eip-7702-internal-rpc-middleware"),K=e("@metamask/chain-agnostic-permission"),q=e("@metamask/bridge-status-controller"),H=e("@metamask/seedless-onboarding-controller"),V=e("@metamask/subscription-controller"),G=e("@metamask/snaps-utils"),W=e("../../shared/lib/eip7702-support-utils"),z=e("../../shared/lib/eip7702-utils"),Q=e("../../shared/lib/multichain-accounts/remote-feature-flag"),J=e("../../shared/lib/sentry"),Y=e("../../shared/constants/transaction"),X=e("../../shared/constants/network"),Z=e("../../shared/constants/hardware-wallets"),ee=e("../../shared/constants/keyring"),te=e("../../shared/constants/permissions"),re=e("../../shared/constants/time"),ne=e("../../shared/constants/app"),ie=e("../../shared/constants/metametrics"),oe=e("../../shared/lib/storage-helpers"),se=e("../../shared/lib/token-util"),ae=e("../../shared/modules/string-utils"),le=e("../../shared/modules/transaction.utils"),ce=e("../../shared/constants/tokens"),ue=e("../../shared/lib/metamask-controller-utils"),de=e("../../shared/modules/mv3.utils"),he=e("../../shared/modules/network.utils"),pe=e("../../shared/modules/selectors"),fe=e("../../shared/lib/transactions-controller-utils"),ge=e("../../shared/modules/selectors/networks"),me=e("../../shared/modules/selectors/multichain"),be=e("../../shared/lib/trace"),ve=Kr(e("../../shared/lib/fetch-with-cache")),ye=e("../../shared/constants/multichain/networks"),we=e("../../shared/constants/bridge"),Ce=e("../../shared/lib/accounts"),Se=e("../../shared/lib/accounts/bitcoin-wallet-snap"),ke=e("../../shared/lib/accounts/solana-wallet-snap"),Pe=e("../../shared/lib/accounts/tron-wallet-snap"),Te=e("../../shared/constants/onboarding"),Ee=e("../../shared/lib/translate"),Ae=e("../../shared/modules/environment"),Me=e("../../shared/lib/snaps/snaps"),_e=e("../../shared/modules/hexstring-utils"),Ie=e("../../shared/modules/shield"),Ne=e("../../shared/lib/shield"),Oe=e("../../shared/modules/error"),Re=e("./lib/transaction/metrics"),je=e("./lib/snap-keyring/keyring-snaps-permissions"),Fe=e("./lib/AddressBookPetnamesBridge"),De=e("./lib/AccountIdentitiesPetnamesBridge"),xe=e("./lib/WalletFundsObtainedMonitor"),Be=e("./lib/ppom/ppom-middleware"),Le=e("./lib/dapp-swap/dapp-swap-middleware"),Ue=e("./lib/trust-signals/trust-signals-middleware"),$e=e("./detect-multiple-instances"),Ke=Kr(e("./lib/ComposableObservableStore")),qe=Kr(e("./lib/createDupeReqFilterStream")),He=Kr(e("./lib/createLoggerMiddleware")),Ve=e("./lib/rpc-method-middleware"),Ge=Kr(e("./lib/createOriginMiddleware")),We=Kr(e("./lib/rpcBlockingMiddleware")),ze=Kr(e("./lib/createMainFrameOriginMiddleware")),Qe=Kr(e("./lib/createTabIdMiddleware")),Je=Kr(e("./lib/createOnboardingMiddleware")),Ye=e("./lib/stream-utils"),Xe=e("./controllers/preferences-controller"),Ze=Kr(e("./lib/backup")),et=Kr(e("./lib/createMetaRPCHandler")),tt=e("./lib/util"),rt=Kr(e("./lib/createMetamaskMiddleware")),nt=e("./lib/createDefiReferralMiddleware"),it=e("./controllers/permissions"),ot=Kr(e("./lib/createRPCMethodTrackingMiddleware")),st=e("./lib/snap-keyring"),at=e("./lib/transaction/util"),lt=e("./lib/signature/util"),ct=e("./constants/stream"),ut=e("./lib/ppom/ppom-util"),dt=Kr(e("./lib/createEvmMethodsToNonEvmAccountReqFilterMiddleware")),ht=e("./lib/transaction/decode/util"),pt=Kr(e("./lib/createTracingMiddleware")),ft=Kr(e("./lib/createOriginThrottlingMiddleware")),gt=e("./lib/PatchStore"),mt=e("./lib/state-utils"),bt=e("./lib/approval/utils"),vt=e("./controller-init/institutional-snap/institutional-snap-controller-init"),yt=e("./controller-init/multichain"),wt=e("./controller-init/assets"),Ct=e("./controller-init/confirmations/transaction-controller-init"),St=e("./controller-init/transaction-pay-controller-init"),kt=e("./controller-init/confirmations/ppom-controller-init"),Pt=e("./controller-init/smart-transactions/smart-transactions-controller-init"),Tt=e("./controller-init/utils"),Et=e("./controller-init/snaps"),At=e("./controller-init/core-backend"),Mt=e("./controller-init/identity/authentication-controller-init"),_t=e("./controller-init/identity/user-storage-controller-init"),It=e("./controller-init/defi-positions/defi-positions-controller-init"),Nt=e("./controller-init/notifications/notification-services-controller-init"),Ot=e("./controller-init/notifications/notification-services-push-controller-init"),Rt=e("./controller-init/delegation/delegation-controller-init"),jt=e("./lib/transaction/transaction-relay"),Ft=e("./lib/open-update-tab-and-reload"),Dt=e("./controller-init/accounts/account-tree-controller-init"),xt=e("./controller-init/multichain/multichain-account-service-init"),Bt=e("./controller-init/seedless-onboarding"),Lt=e("./lib/transaction/containers/util"),Ut=e("./lib/transaction/sentinel-api"),$t=e("./controller-init/shield/shield-controller-init"),Kt=e("./controller-init/gator-permissions/gator-permissions-controller-init"),qt=e("./lib/forwardRequestToSnap"),Ht=e("./controller-init/metametrics-controller-init"),Vt=e("./controller-init/token-list-controller-init"),Gt=e("./controller-init/token-detection-controller-init"),Wt=e("./controller-init/tokens-controller-init"),zt=e("./controller-init/token-balances-controller-init"),Qt=e("./controller-init/rates-controller-init"),Jt=e("./controller-init/currency-rate-controller-init"),Yt=e("./controller-init/confirmations/ens-controller-init"),Xt=e("./controller-init/confirmations/name-controller-init"),Zt=e("./controller-init/confirmations/gas-fee-controller-init"),er=e("./controller-init/selected-network-controller-init"),tr=e("./controller-init/subscription"),rr=e("./controller-init/connectivity"),nr=e("./controller-init/account-tracker-controller-init"),ir=e("./controller-init/onboarding-controller-init"),or=e("./controller-init/remote-feature-flag-controller-init"),sr=e("./controller-init/swaps-controller-init"),ar=e("./controller-init/bridge-controller-init"),lr=e("./controller-init/bridge-status-controller-init"),cr=e("./controller-init/preferences-controller-init"),ur=e("./controller-init/app-state-controller-init"),dr=e("./controller-init/permission-controller-init"),hr=e("./controller-init/subject-metadata-controller-init"),pr=e("./controller-init/assets/network-enablement-controller-init"),fr=e("./controller-init/keyring-controller-init"),gr=e("./controller-init/accounts/snap-keyring-builder-init"),mr=e("./controller-init/permission-log-controller-init"),br=e("./controller-init/network-controller-init"),vr=e("./controller-init/announcement-controller-init"),yr=e("./controller-init/account-order-controller-init"),wr=e("./controller-init/accounts-controller-init"),Cr=e("./controller-init/phishing-controller-init"),Sr=e("./controller-init/alert-controller-init"),kr=e("./controller-init/metametrics-data-deletion-controller-init"),Pr=e("./controller-init/logging-controller-init"),Tr=e("./controller-init/app-metadata-controller-init"),Er=e("./controller-init/error-reporting-service-init"),Ar=e("./controller-init/storage-service-init"),Mr=e("./controller-init/confirmations/approval-controller-init"),_r=e("./controller-init/confirmations/address-book-controller-init"),Ir=e("./controller-init/confirmations/decrypt-message-manager-init"),Nr=e("./controller-init/confirmations/decrypt-message-controller-init"),Or=e("./controller-init/confirmations/encryption-public-key-controller-init"),Rr=e("./controller-init/confirmations/encryption-public-key-message-manager-init"),jr=e("./controller-init/confirmations/signature-controller-init"),Fr=e("./controller-init/confirmations/user-operation-controller-init"),Dr=e("./controller-init/rewards-data-service-init"),xr=e("./controller-init/rewards-controller-init"),Br=e("./lib/messenger"),Lr=e("./controller-init/claims"),Ur=e("./controller-init/profile-metrics-controller-init"),$r=e("./controller-init/profile-metrics-service-init");function Kr(e){return e&&e.__esModule?e:{default:e}}function qr(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(qr=function(e){return e?r:t})(e)}function Hr(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function Vr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gr(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}r.METAMASK_CONTROLLER_EVENTS={UPDATE_BADGE:"updateBadge",DECRYPT_MESSAGE_MANAGER_UPDATE_BADGE:"DecryptMessageManager:updateBadge",ENCRYPTION_PUBLIC_KEY_MANAGER_UPDATE_BADGE:"EncryptionPublicKeyManager:updateBadge",APPROVAL_STATE_CHANGE:"ApprovalController:stateChange",APP_STATE_UNLOCK_CHANGE:"AppStateController:unlockChange",METAMASK_NOTIFICATIONS_LIST_UPDATED:"NotificationServicesController:notificationsListUpdated",METAMASK_NOTIFICATIONS_MARK_AS_READ:"NotificationServicesController:markNotificationsAsRead"};const Wr="eip-1193",zr="caip-multichain";var Qr=new WeakSet;class Jr extends n.default{constructor(e){super(),Hr(this,Qr),Vr(this,"handleWatchAssetRequest",({asset:e,type:t,origin:r,networkClientId:n})=>{switch(t){case _.ERC20:return this.tokensController.watchAsset({asset:e,type:t,networkClientId:n});case _.ERC721:case _.ERC1155:return this.nftController.watchNft(e,t,r,n);default:throw new Error(`Asset type ${t} not supported`)}}),Vr(this,"removePermissionsFor",e=>{try{this.permissionController.revokePermissions(e)}catch(e){if(!(e instanceof E.PermissionsRequestNotFoundError))throw e}}),Vr(this,"updateCaveat",(e,t,r,n)=>{try{this.controllerMessenger.call("PermissionController:updateCaveat",e,t,r,n)}catch(e){if(!(e instanceof E.PermissionsRequestNotFoundError))throw e}}),Vr(this,"updateNetworksList",e=>{try{this.networkOrderController.updateNetworksList(e)}catch(e){throw b.default.error(e.message),e}}),Vr(this,"updateAccountsList",e=>{try{this.accountOrderController.updateAccountsList(e)}catch(e){throw b.default.error(e.message),e}}),Vr(this,"setEnabledNetworks",async e=>{try{this.networkEnablementController.enableNetwork(e)}catch(e){throw b.default.error(e.message),e}await this.lookupSelectedNetworks()}),Vr(this,"setEnabledAllPopularNetworks",async()=>{try{this.networkEnablementController.enableAllPopularNetworks()}catch(e){throw b.default.error(e.message),e}await this.lookupSelectedNetworks()}),Vr(this,"updateHiddenAccountsList",e=>{try{this.accountOrderController.updateHiddenAccountsList(e)}catch(e){throw b.default.error(e.message),e}}),Vr(this,"rejectPermissionsRequest",e=>{try{this.permissionController.rejectPermissionsRequest(e)}catch(e){if(!(e instanceof E.PermissionsRequestNotFoundError))throw e}}),Vr(this,"acceptPermissionsRequest",e=>{try{this.permissionController.acceptPermissionsRequest(e)}catch(e){if(!(e instanceof E.PermissionsRequestNotFoundError))throw e}}),Vr(this,"resolvePendingApproval",async(e,t,r)=>{try{await this.approvalController.accept(e,t,r)}catch(e){if(!(e instanceof P.ApprovalRequestNotFoundError))throw e}}),Vr(this,"rejectPendingApproval",(e,t)=>{try{this.approvalController.reject(e,new g.JsonRpcError(t.code,t.message,t.data))}catch(e){if(!(e instanceof P.ApprovalRequestNotFoundError))throw e}});const{isFirstMetaMaskControllerSetup:t,controllerMessenger:r=(0,Br.getRootMessenger)()}=e;this.defaultMaxListeners=20,this.sendUpdate=(0,d.debounce)(this.privateSendUpdate.bind(this),200*re.MILLISECOND),this.opts=e,this.requestSafeReload=e.requestSafeReload??(()=>Promise.resolve()),this.extension=e.browser,this.platform=e.platform,this.notificationManager=e.notificationManager;const n=e.initState||{},i="13.16.4";this.recordFirstTimeInfo(n),this.featureFlags=e.featureFlags,this.activeControllerConnections=0,this.offscreenPromise=e.offscreenPromise??Promise.resolve(),this.getRequestAccountTabIds=e.getRequestAccountTabIds,this.getOpenMetamaskTabsIds=e.getOpenMetamaskTabsIds,this.initializeChainlist(),this.controllerMessenger=r,this.currentMigrationVersion=e.currentMigrationVersion,this.store=new Ke.default({state:n,controllerMessenger:this.controllerMessenger,persist:!0}),this.connections={},this.createVaultMutex=new m.Mutex,this.seedlessOperationMutex=new m.Mutex,this.extension.runtime.onInstalled.addListener(e=>{e.reason}),this.multichainSubscriptionManager=new L.MultichainSubscriptionManager({getNetworkClientById:this.controllerMessenger.call.bind(this.controllerMessenger,"NetworkController:getNetworkClientById"),findNetworkClientIdByChainId:this.controllerMessenger.call.bind(this.controllerMessenger,"NetworkController:findNetworkClientIdByChainId")}),this.multichainMiddlewareManager=new L.MultichainMiddlewareManager,this.deprecatedNetworkVersions={},this.on("controllerConnectionChanged",e=>{const{completedOnboarding:t}=this.onboardingController.state;e>0&&t?this.triggerNetworkrequests():this.stopNetworkRequests()}),this.on("controllerConnectionChanged",e=>{const{completedOnboarding:t}=this.onboardingController.state;e>0&&t&&this.appStateController.state.canTrackWalletFundsObtained&&this.walletFundsObtainedMonitor.setupMonitoring()});const o={ApprovalController:Mr.ApprovalControllerInit,LoggingController:Pr.LoggingControllerInit,ErrorReportingService:Er.ErrorReportingServiceInit,StorageService:Ar.StorageServiceInit,AppMetadataController:Tr.AppMetadataControllerInit,PreferencesController:cr.PreferencesControllerInit,SnapKeyringBuilder:gr.SnapKeyringBuilderInit,KeyringController:fr.KeyringControllerInit,AccountsController:wr.AccountsControllerInit,AddressBookController:_r.AddressBookControllerInit,AlertController:Sr.AlertControllerInit,DecryptMessageManager:Ir.DecryptMessageManagerInit,DecryptMessageController:Nr.DecryptMessageControllerInit,EncryptionPublicKeyManager:Rr.EncryptionPublicKeyManagerInit,EncryptionPublicKeyController:Or.EncryptionPublicKeyControllerInit,SignatureController:jr.SignatureControllerInit,PermissionController:dr.PermissionControllerInit,PermissionLogController:mr.PermissionLogControllerInit,SubjectMetadataController:hr.SubjectMetadataControllerInit,AppStateController:ur.AppStateControllerInit,OnboardingController:ir.OnboardingControllerInit,RemoteFeatureFlagController:or.RemoteFeatureFlagControllerInit,NetworkController:br.NetworkControllerInit,MetaMetricsController:Ht.MetaMetricsControllerInit,MetaMetricsDataDeletionController:kr.MetaMetricsDataDeletionControllerInit,GasFeeController:Zt.GasFeeControllerInit,UserOperationController:Fr.UserOperationControllerInit,ExecutionService:Et.ExecutionServiceInit,InstitutionalSnapController:vt.InstitutionalSnapControllerInit,RateLimitController:Et.RateLimitControllerInit,SnapsRegistry:Et.SnapsRegistryInit,CronjobController:Et.CronjobControllerInit,SelectedNetworkController:er.SelectedNetworkControllerInit,SnapController:Et.SnapControllerInit,SnapInsightsController:Et.SnapInsightsControllerInit,SnapInterfaceController:Et.SnapInterfaceControllerInit,WebSocketService:Et.WebSocketServiceInit,BackendWebSocketService:At.BackendWebSocketServiceInit,AccountActivityService:At.AccountActivityServiceInit,PPOMController:kt.PPOMControllerInit,PhishingController:Cr.PhishingControllerInit,AccountTrackerController:nr.AccountTrackerControllerInit,TransactionController:Ct.TransactionControllerInit,TransactionPayController:St.TransactionPayControllerInit,SmartTransactionsController:Pt.SmartTransactionsControllerInit,SwapsController:sr.SwapsControllerInit,BridgeController:ar.BridgeControllerInit,BridgeStatusController:lr.BridgeStatusControllerInit,NftController:wt.NftControllerInit,AssetsContractController:wt.AssetsContractControllerInit,NftDetectionController:wt.NftDetectionControllerInit,CurrencyRateController:Jt.CurrencyRateControllerInit,RatesController:Qt.RatesControllerInit,TokenListController:Vt.TokenListControllerInit,TokenDetectionController:Gt.TokenDetectionControllerInit,TokensController:Wt.TokensControllerInit,TokenBalancesController:zt.TokenBalancesControllerInit,TokenRatesController:wt.TokenRatesControllerInit,AccountOrderController:yr.AccountOrderControllerInit,AccountTreeController:Dt.AccountTreeControllerInit,MultichainAssetsController:yt.MultichainAssetsControllerInit,MultichainAssetsRatesController:yt.MultichainAssetsRatesControllerInit,MultichainBalancesController:yt.MultichainBalancesControllerInit,MultichainTransactionsController:yt.MultichainTransactionsControllerInit,MultichainAccountService:xt.MultichainAccountServiceInit,MultichainRouter:Et.MultichainRouterInit,MultichainNetworkController:yt.MultichainNetworkControllerInit,AuthenticationController:Mt.AuthenticationControllerInit,UserStorageController:_t.UserStorageControllerInit,NotificationServicesController:Nt.NotificationServicesControllerInit,NotificationServicesPushController:Ot.NotificationServicesPushControllerInit,DeFiPositionsController:It.DeFiPositionsControllerInit,DelegationController:Rt.DelegationControllerInit,OAuthService:Bt.OAuthServiceInit,SeedlessOnboardingController:Bt.SeedlessOnboardingControllerInit,SubscriptionController:tr.SubscriptionControllerInit,SubscriptionService:tr.SubscriptionServiceInit,ConnectivityController:rr.ConnectivityControllerInit,NetworkOrderController:wt.NetworkOrderControllerInit,ShieldController:$t.ShieldControllerInit,ClaimsController:Lr.ClaimsControllerInit,ClaimsService:Lr.ClaimsServiceInit,GatorPermissionsController:Kt.GatorPermissionsControllerInit,SnapsNameProvider:Et.SnapsNameProviderInit,EnsController:Yt.EnsControllerInit,NameController:Xt.NameControllerInit,NetworkEnablementController:pr.NetworkEnablementControllerInit,AnnouncementController:vr.AnnouncementControllerInit,RewardsDataService:Dr.RewardsDataServiceInit,RewardsController:xr.RewardsControllerInit,ProfileMetricsController:Ur.ProfileMetricsControllerInit,ProfileMetricsService:$r.ProfileMetricsServiceInit},{controllerApi:a,controllerMemState:l,controllerPersistedState:c,controllersByName:u}=Gr(Qr,this,en).call(this,{initFunctions:o,initState:n});this.controllerApi=a,this.controllerMemState=l,this.controllerPersistedState=c,this.controllersByName=u,this.approvalController=u.ApprovalController,this.loggingController=u.LoggingController,this.appMetadataController=u.AppMetadataController,this.preferencesController=u.PreferencesController,this.keyringController=u.KeyringController,this.accountsController=u.AccountsController,this.addressBookController=u.AddressBookController,this.alertController=u.AlertController,this.decryptMessageController=u.DecryptMessageController,this.encryptionPublicKeyController=u.EncryptionPublicKeyController,this.signatureController=u.SignatureController,this.permissionController=u.PermissionController,this.permissionLogController=u.PermissionLogController,this.subjectMetadataController=u.SubjectMetadataController,this.appStateController=u.AppStateController,this.networkController=u.NetworkController,this.metaMetricsController=u.MetaMetricsController,this.metaMetricsDataDeletionController=u.MetaMetricsDataDeletionController,this.remoteFeatureFlagController=u.RemoteFeatureFlagController,this.gasFeeController=u.GasFeeController,this.userOperationController=u.UserOperationController,this.cronjobController=u.CronjobController,this.rateLimitController=u.RateLimitController,this.selectedNetworkController=u.SelectedNetworkController,this.snapController=u.SnapController,this.snapInsightsController=u.SnapInsightsController,this.snapInterfaceController=u.SnapInterfaceController,this.snapsRegistry=u.SnapsRegistry,this.ppomController=u.PPOMController,this.phishingController=u.PhishingController,this.onboardingController=u.OnboardingController,this.accountTrackerController=u.AccountTrackerController,this.txController=u.TransactionController,this.smartTransactionsController=u.SmartTransactionsController,this.swapsController=u.SwapsController,this.bridgeController=u.BridgeController,this.bridgeStatusController=u.BridgeStatusController,this.backendWebSocketService=u.BackendWebSocketService,this.accountActivityService=u.AccountActivityService,this.nftController=u.NftController,this.nftDetectionController=u.NftDetectionController,this.assetsContractController=u.AssetsContractController,this.multichainAssetsController=u.MultichainAssetsController,this.multichainBalancesController=u.MultichainBalancesController,this.multichainTransactionsController=u.MultichainTransactionsController,this.multichainAssetsRatesController=u.MultichainAssetsRatesController,this.multichainAccountService=u.MultichainAccountService,this.tokenBalancesController=u.TokenBalancesController,this.tokenListController=u.TokenListController,this.tokenDetectionController=u.TokenDetectionController,this.tokensController=u.TokensController,this.tokenRatesController=u.TokenRatesController,this.currencyRateController=u.CurrencyRateController,this.multichainNetworkController=u.MultichainNetworkController,this.multichainRatesController=u.RatesController,this.authenticationController=u.AuthenticationController,this.userStorageController=u.UserStorageController,this.delegationController=u.DelegationController,this.notificationServicesController=u.NotificationServicesController,this.notificationServicesPushController=u.NotificationServicesPushController,this.deFiPositionsController=u.DeFiPositionsController,this.accountTreeController=u.AccountTreeController,this.oauthService=u.OAuthService,this.subscriptionService=u.SubscriptionService,this.seedlessOnboardingController=u.SeedlessOnboardingController,this.subscriptionController=u.SubscriptionController,this.networkOrderController=u.NetworkOrderController,this.networkEnablementController=u.NetworkEnablementController,this.shieldController=u.ShieldController,this.gatorPermissionsController=u.GatorPermissionsController,this.ensController=u.EnsController,this.nameController=u.NameController,this.announcementController=u.AnnouncementController,this.accountOrderController=u.AccountOrderController,this.rewardsController=u.RewardsController,this.claimsController=u.ClaimsController,this.claimsService=u.ClaimsService,this.profileMetricsController=u.ProfileMetricsController,this.backup=new Ze.default({preferencesController:this.preferencesController,addressBookController:this.addressBookController,accountsController:this.accountsController,networkController:this.networkController,trackMetaMetricsEvent:this.controllerMessenger.call.bind(this.controllerMessenger,"MetaMetricsController:trackEvent")}),this.provider=this.networkController.getProviderAndBlockTracker().provider,this.blockTracker=this.networkController.getProviderAndBlockTracker().blockTracker,this.on("update",e=>{this.metaMetricsController.handleMetaMaskStateUpdate(e)}),this.controllerMessenger.subscribe("KeyringController:unlock",()=>this._onUnlock()),this.controllerMessenger.subscribe("KeyringController:lock",()=>this._onLock()),this.controllerMessenger.subscribe("SubscriptionController:stateChange",e=>{const{useExternalServices:t}=this.preferencesController.state;if(!t)return;(0,Ne.getIsShieldSubscriptionActive)(e.subscriptions)?(this.claimsController.fetchClaimsConfigurations().catch(e=>{b.default.error("Error fetching claims configurations",e)}),(0,Ie.updatePreferencesAndMetricsForShieldSubscription)(this.metaMetricsController,this.preferencesController),this.shieldController.start()):this.shieldController.stop()});const h=new T.Messenger({namespace:"PetnamesBridge",parent:this.controllerMessenger});this.controllerMessenger.delegate({messenger:h,events:["NameController:stateChange","AccountsController:stateChange","AddressBookController:stateChange"],actions:["AccountsController:listAccounts"]}),new Fe.AddressBookPetnamesBridge({addressBookController:this.addressBookController,nameController:this.nameController,messenger:h}).init(),new De.AccountIdentitiesPetnamesBridge({nameController:this.nameController,messenger:h}).init();const p=new T.Messenger({namespace:"WalletFundsObtainedMonitor",parent:this.controllerMessenger});this.controllerMessenger.delegate({messenger:p,events:["NotificationServicesController:notificationsListUpdated"],actions:["MetaMetricsController:trackEvent","AppStateController:setCanTrackWalletFundsObtained","OnboardingController:getState","NotificationServicesController:getState","TokenBalancesController:getState","MultichainBalancesController:getState"]}),this.walletFundsObtainedMonitor=new xe.WalletFundsObtainedMonitor({messenger:p}),this.getSecurityAlertsConfig=async e=>(0,Ie.getShieldGatewayConfig)(()=>this.controllerMessenger.call("AuthenticationController:getBearerToken"),()=>this.controllerMessenger.call("SubscriptionController:getSubscriptionByProduct",V.PRODUCT_TYPES.SHIELD),e),this.notificationServicesController.init(),this.snapController.init(),this.cronjobController.init(),this.controllerMessenger.subscribe("TransactionController:transactionStatusUpdated",({transactionMeta:e})=>{this._onFinishedTransaction(e)}),this.controllerMessenger.subscribe("TransactionController:transactionSubmitted",({transactionMeta:e})=>{this.subscriptionService.handlePostTransaction(e).catch(e=>{console.error("Error onShieldSubscriptionApprovalTransaction",e)})}),this.controllerMessenger.subscribe("OnboardingController:stateChange",(0,tt.previousValueComparator)(async(e,t)=>{const{completedOnboarding:r}=e,{completedOnboarding:n,firstTimeFlowType:i}=t;if(!r&&n){const{address:e}=this.accountsController.getSelectedAccount();this.isMultichainAccountsFeatureState2Enabled()&&(await this.getSnapKeyring(),await this.accountTreeController.syncWithUserStorageAtLeastOnce()),i===Te.FirstTimeFlowType.socialImport?await this._importAccountsWithBalances():this.isMultichainAccountsFeatureState2Enabled()?await this.discoverAndCreateAccounts():await this._addAccountsWithBalance(),this.postOnboardingInitialization(),this.triggerNetworkrequests(),await this.tokenDetectionController.detectTokens({selectedAddress:e})}},this.onboardingController.state));const f=({origin:e})=>{if(e===ne.ORIGIN_METAMASK){const e=this.accountsController.getSelectedAccount().address;return e?[e]:[]}return this.getPermittedAccounts(e)};this.eip5792Middleware=(0,s.createScaffoldMiddleware)({wallet_getCapabilities:(0,s.createAsyncMiddleware)(async(e,t)=>(0,U.walletGetCapabilities)(e,t,{getAccounts:f,getCapabilities:U.getCapabilities.bind(null,{getDismissSmartAccountSuggestionEnabled:()=>this.preferencesController.state.preferences.dismissSmartAccountSuggestionEnabled,getIsSmartTransaction:e=>(0,pe.getIsSmartTransaction)(this._getMetaMaskState(),e),isAtomicBatchSupported:this.txController.isAtomicBatchSupported.bind(this.txController),isRelaySupported:jt.isRelaySupported,getSendBundleSupportedChains:Ut.getSendBundleSupportedChains,isAuxiliaryFundsSupported:e=>we.ALLOWED_BRIDGE_CHAIN_IDS.includes(e)},this.controllerMessenger)})),wallet_sendCalls:(0,s.createAsyncMiddleware)(async(e,t)=>await(0,U.walletSendCalls)(e,t,{getAccounts:f,processSendCalls:U.processSendCalls.bind(null,{addTransaction:this.txController.addTransaction.bind(this.txController),addTransactionBatch:this.txController.addTransactionBatch.bind(this.txController),getDismissSmartAccountSuggestionEnabled:()=>this.preferencesController.state.preferences.dismissSmartAccountSuggestionEnabled,isAtomicBatchSupported:this.txController.isAtomicBatchSupported.bind(this.txController),validateSecurity:(e,t,r)=>(0,ut.validateRequestWithPPOM)({chainId:r,ppomController:this.ppomController,request:t,securityAlertId:e,updateSecurityAlertResponse:this.updateSecurityAlertResponse.bind(this),getSecurityAlertsConfig:this.getSecurityAlertsConfig.bind(this)}),isAuxiliaryFundsSupported:e=>we.ALLOWED_BRIDGE_CHAIN_IDS.includes(e)},this.controllerMessenger)})),wallet_getCallsStatus:(0,s.createAsyncMiddleware)(async(e,t)=>(0,U.walletGetCallsStatus)(e,t,{getCallsStatus:U.getCallsStatus.bind(null,this.controllerMessenger)}))});const v={isBlocked:!1},y=(0,We.default)({state:v,allowedOrigins:["npm:@metamask/gator-permissions-snap","npm:@metamask/permissions-kernel-snap"],errorMessage:"Cannot process requests while a wallet_requestExecutionPermissions request is in process"});this.eip7715BlockingMiddleware=y,this.eip7702Middleware=(0,s.createScaffoldMiddleware)({wallet_upgradeAccount:(0,s.createAsyncMiddleware)(async(e,t)=>{await(0,$.walletUpgradeAccount)(e,t,{upgradeAccount:this.upgradeAccount.bind(this),getCurrentChainIdForDomain:this.getCurrentChainIdForDomain.bind(this),isEip7702Supported:this.isEip7702Supported.bind(this),getPermittedAccountsForOrigin:async()=>f({origin:e.origin})})}),wallet_getAccountUpgradeStatus:(0,s.createAsyncMiddleware)(async(e,t)=>{await(0,$.walletGetAccountUpgradeStatus)(e,t,{getCurrentChainIdForDomain:this.getCurrentChainIdForDomain.bind(this),getCode:this.getCode.bind(this),getSelectedNetworkClientIdForChain:this.getSelectedNetworkClientIdForChain.bind(this),getPermittedAccountsForOrigin:async()=>f({origin:e.origin}),isEip7702Supported:this.isEip7702Supported.bind(this)})})}),this.metamaskMiddleware=(0,rt.default)({static:{eth_syncing:!1,web3_clientVersion:`MetaMask/v${i}`},version:i,getAccounts:e=>f({origin:e}),processTransaction:(e,t,r)=>(0,at.addDappTransaction)(this.getAddTransactionRequest({transactionParams:e,dappRequest:t,requestContext:r})),processTypedMessage:(...e)=>(0,lt.addTypedMessage)({signatureController:this.signatureController,signatureParams:e}),processTypedMessageV3:(...e)=>(0,lt.addTypedMessage)({signatureController:this.signatureController,signatureParams:e}),processTypedMessageV4:(...e)=>(0,lt.addTypedMessage)({signatureController:this.signatureController,signatureParams:e}),processPersonalMessage:(...e)=>(0,lt.addPersonalMessage)({signatureController:this.signatureController,signatureParams:e}),processEncryptionPublicKey:this.encryptionPublicKeyController.newRequestEncryptionPublicKey.bind(this.encryptionPublicKeyController),processDecryptMessage:this.decryptMessageController.newRequestDecryptMessage.bind(this.decryptMessageController),getPendingNonce:this.getPendingNonce.bind(this),getPendingTransactionByHash:e=>this.txController.state.transactions.find(t=>t.hash===e&&t.status===O.TransactionStatus.submitted),processRequestExecutionPermissions:async(e,t,r)=>{const n=(0,Ae.getEnabledAdvancedPermissions)();if(!e||0===e.length)throw g.rpcErrors.methodNotSupported("No permission type provided");for(const t of e){var i;const e=null==t||null===(i=t.permission)||void 0===i?void 0:i.type;if(!n.includes(e))throw g.rpcErrors.methodNotSupported(`Permission type '${e??"unknown"}' is not enabled`)}return(0,qt.forwardRequestToSnap)({snapId:"npm:@metamask/permissions-kernel-snap",handleRequest:this.handleSnapRequest.bind(this),onBeforeRequest:()=>{v.isBlocked=!0},onAfterRequest:()=>{v.isBlocked=!1}},e,t,r)},processGetSupportedExecutionPermissions:async(e,t)=>{const r=(0,Ae.getEnabledAdvancedPermissions)(),n=await(0,qt.forwardRequestToSnap)({snapId:"npm:@metamask/permissions-kernel-snap",handleRequest:this.handleSnapRequest.bind(this)},[],e,t);return n&&"object"==typeof n?Object.fromEntries(Object.entries(n).filter(([e])=>r.includes(e))):n},processGetGrantedExecutionPermissions:async(e,t)=>(0,qt.forwardRequestToSnap)({snapId:"npm:@metamask/permissions-kernel-snap",handleRequest:this.handleSnapRequest.bind(this)},[],e,t)}),this.on("update",e=>this._onStateUpdate(e));const w={AccountTracker:this.accountTrackerController,TokenRatesController:this.tokenRatesController,DecryptMessageController:this.decryptMessageController,EncryptionPublicKeyController:this.encryptionPublicKeyController,SignatureController:this.signatureController,SwapsController:this.swapsController,BridgeController:this.bridgeController,BridgeStatusController:this.bridgeStatusController,EnsController:this.ensController,ApprovalController:this.approvalController};this.store.updateStructure({AccountsController:this.accountsController,AppStateController:this.appStateController,AppMetadataController:this.appMetadataController,KeyringController:this.keyringController,PreferencesController:this.preferencesController,MetaMetricsController:this.metaMetricsController,MetaMetricsDataDeletionController:this.metaMetricsDataDeletionController,AddressBookController:this.addressBookController,CurrencyController:this.currencyRateController,MultichainNetworkController:this.multichainNetworkController,NetworkController:this.networkController,AlertController:this.alertController,OnboardingController:this.onboardingController,SeedlessOnboardingController:this.seedlessOnboardingController,PermissionController:this.permissionController,PermissionLogController:this.permissionLogController,SubjectMetadataController:this.subjectMetadataController,AnnouncementController:this.announcementController,NetworkOrderController:this.networkOrderController,NetworkEnablementController:this.networkEnablementController,AccountOrderController:this.accountOrderController,GasFeeController:this.gasFeeController,GatorPermissionsController:this.gatorPermissionsController,TokenListController:this.tokenListController,TokensController:this.tokensController,TokenBalancesController:this.tokenBalancesController,SmartTransactionsController:this.smartTransactionsController,NftController:this.nftController,PhishingController:this.phishingController,SelectedNetworkController:this.selectedNetworkController,LoggingController:this.loggingController,MultichainRatesController:this.multichainRatesController,NameController:this.nameController,UserOperationController:this.userOperationController,AuthenticationController:this.authenticationController,UserStorageController:this.userStorageController,NotificationServicesController:this.notificationServicesController,NotificationServicesPushController:this.notificationServicesPushController,RemoteFeatureFlagController:this.remoteFeatureFlagController,DeFiPositionsController:this.deFiPositionsController,ProfileMetricsController:this.profileMetricsController,...w,...c}),this.memStore=new Ke.default({config:{AccountsController:this.accountsController,AppStateController:this.appStateController,AppMetadataController:this.appMetadataController,MultichainAssetsController:this.multichainAssetsController,MultichainBalancesController:this.multichainBalancesController,MultichainTransactionsController:this.multichainTransactionsController,MultichainAssetsRatesController:this.multichainAssetsRatesController,TokenRatesController:this.tokenRatesController,MultichainNetworkController:this.multichainNetworkController,NetworkController:this.networkController,KeyringController:this.keyringController,PreferencesController:this.preferencesController,MetaMetricsController:this.metaMetricsController,MetaMetricsDataDeletionController:this.metaMetricsDataDeletionController,AddressBookController:this.addressBookController,CurrencyController:this.currencyRateController,AlertController:this.alertController,OnboardingController:this.onboardingController,SeedlessOnboardingController:this.seedlessOnboardingController,SubscriptionController:this.subscriptionController,PermissionController:this.permissionController,PermissionLogController:this.permissionLogController,SubjectMetadataController:this.subjectMetadataController,AnnouncementController:this.announcementController,NetworkOrderController:this.networkOrderController,NetworkEnablementController:this.networkEnablementController,AccountOrderController:this.accountOrderController,GasFeeController:this.gasFeeController,TokenListController:this.tokenListController,TokensController:this.tokensController,TokenBalancesController:this.tokenBalancesController,SmartTransactionsController:this.smartTransactionsController,NftController:this.nftController,SelectedNetworkController:this.selectedNetworkController,LoggingController:this.loggingController,MultichainRatesController:this.multichainRatesController,SnapController:this.snapController,CronjobController:this.cronjobController,SnapsRegistry:this.snapsRegistry,SnapInterfaceController:this.snapInterfaceController,SnapInsightsController:this.snapInsightsController,NameController:this.nameController,UserOperationController:this.userOperationController,AuthenticationController:this.authenticationController,UserStorageController:this.userStorageController,NotificationServicesController:this.notificationServicesController,NotificationServicesPushController:this.notificationServicesPushController,RemoteFeatureFlagController:this.remoteFeatureFlagController,DeFiPositionsController:this.deFiPositionsController,PhishingController:this.phishingController,ShieldController:this.shieldController,ClaimsController:this.claimsController,ClaimsService:this.claimsService,ProfileMetricsController:this.profileMetricsController,...w,...l},controllerMessenger:this.controllerMessenger});const C=[this.decryptMessageController.resetState.bind(this.decryptMessageController),this.encryptionPublicKeyController.resetState.bind(this.encryptionPublicKeyController),this.signatureController.resetState.bind(this.signatureController),this.swapsController.resetState.bind(this.swapsController),this.bridgeController.resetState.bind(this.bridgeController),this.ensController.resetState.bind(this.ensController),this.approvalController.clear.bind(this.approvalController)];de.isManifestV3?!0===t&&(this.resetStates(C),this.extension.storage.session.set({isFirstMetaMaskControllerSetup:!1})):this.resetStates(C);!this.isUnlocked()&&this.onboardingController.state.completedOnboarding,this._startUISync(),this.extension.runtime.getPlatformInfo().then(({os:e})=>{this.appStateController.setBrowserEnvironment(e,this.extension.runtime.getBrowserInfo===undefined?"chrome":"firefox")}),this.setupControllerEventSubscriptions(),this.setupMultichainDataAndSubscriptions(),this.publicConfigStore=this.createPublicConfigStore(),this.extension.runtime.onMessageExternal.addListener($e.onMessageReceived),(0,$e.checkForMultipleVersionsRunning)(),this.onboardingController.state.completedOnboarding&&this.postOnboardingInitialization()}getCurrentChainIdForDomain(e){const t=this.selectedNetworkController.getNetworkClientIdForDomain(e),r=this.networkController.getNetworkConfigurationByNetworkClientId(t);return r?r.chainId:(b.default.warn(`No network configuration found for clientId: ${t}`),undefined)}getSelectedNetworkClientIdForChain(e){const t=this.networkController.getNetworkConfigurationByChainId(e);if(!t)return null;const{rpcEndpoints:r,defaultRpcEndpointIndex:n}=t;return!r||n===undefined||n<0||n>=r.length?null:r[n].networkClientId}getInfuraFeatureFlags(){(0,ve.default)({url:"https://bridge.api.cx.metamask.io/featureFlags",cacheRefreshTime:20*re.MINUTE}).then(this.onFeatureFlagResponseReceived).catch(e=>{b.default.warn("Feature flag endpoint is unreachable",e)})}onFeatureFlagResponseReceived(e){const{multiChainAssets:t={}}=e,{pollInterval:r}=t;r>0&&this.tokenBalancesController.setIntervalLength(r*re.SECOND)}isMultichainAccountsFeatureState2Enabled(){var e;const t=null===(e=this.remoteFeatureFlagController)||void 0===e||null===(e=e.state)||void 0===e||null===(e=e.remoteFeatureFlags)||void 0===e?void 0:e.enableMultichainAccountsState2;return(0,Q.isMultichainAccountsFeatureEnabled)(t,Q.FEATURE_VERSION_2)}postOnboardingInitialization(){const{usePhishDetect:e}=this.preferencesController.state;e&&this.phishingController.maybeUpdateState(),((0,tt.getBooleanFlag)("true")||Object.values(this.snapController.state.snaps).some(e=>!e.preinstalled))&&this.snapController.updateRegistry().catch(e=>{e.message.includes("The Snaps platform requires basic functionality to be used.")||console.error(e)})}async lookupSelectedNetworks(){const e=(0,me.selectAllEnabledNetworkClientIds)(this._getMetaMaskState());await Promise.allSettled([this.networkController.lookupNetwork(),...e.map(async e=>await this.networkController.lookupNetwork(e))])}triggerNetworkrequests(){this.tokenDetectionController.enable(),this.getInfuraFeatureFlags(),(0,F.isEvmAccountType)(this.accountsController.getSelectedMultichainAccount().type)||this.multichainRatesController.start()}stopNetworkRequests(){this.txController.stopIncomingTransactionPolling(),this.tokenDetectionController.disable(),this.multichainRatesController.stop()}resetStates(e){e.forEach(e=>{try{e()}catch(e){console.error(e)}})}async getSnapKeyring(){let[e]=this.keyringController.getKeyringsByType(ee.KeyringType.snap);return e||(await this.keyringController.addNewKeyring(ee.KeyringType.snap),[e]=this.keyringController.getKeyringsByType(ee.KeyringType.snap)),e}getSnapKeyringIfAvailable(){if(this.keyringController.isUnlocked()){const[e]=this.keyringController.getKeyringsByType(ee.KeyringType.snap);return e}return undefined}async forwardSelectedAccountGroupToSnapKeyring(e,t){if(e&&t){const r=this.accountTreeController.getAccountGroupObject(t);if(r){r.accounts.some(e=>{const t=this.accountsController.getAccount(e);return Boolean(t)&&!(0,F.isEvmAccountType)(t.type)})&&await e.setSelectedAccounts(r.accounts)}}}trackInsightSnapView(e){this.metaMetricsController.trackEvent({event:ie.MetaMetricsEventName.InsightSnapViewed,category:ie.MetaMetricsEventCategory.Snaps,properties:{snap_id:e}})}_getSnapMetadata(e){var t;return null===(t=this.snapsRegistry.state.database)||void 0===t||null===(t=t.verifiedSnaps)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.metadata}async handleSnapRequest(e){return await this.controllerMessenger.call("SnapController:handleRequest",e)}setupControllerEventSubscriptions(){let e;const t={};ye.NON_EVM_ACCOUNT_CHANGED_CONFIGS.forEach(({network:e})=>{try{var r;t[e]=null===(r=this.accountsController.getSelectedMultichainAccount(e))||void 0===r?void 0:r.address}catch(t){const r=new Error(`Failed to get selected multichain account for network: ${e}`,{cause:t});(0,J.captureException)(r)}}),this.controllerMessenger.subscribe("PreferencesController:stateChange",(0,tt.previousValueComparator)(async(e,t)=>{const{currentLocale:r}=t;await(0,Ee.updateCurrentLocale)(r)},this.preferencesController.state)),this.controllerMessenger.subscribe(`${this.accountsController.name}:selectedAccountChange`,async t=>{t.address&&t.address!==e&&(e=t.address,await this._onAccountChange(t.address))}),this.controllerMessenger.subscribe("BridgeStatusController:destinationTransactionCompleted",e=>{const{chain:t}=(0,D.parseCaipAssetType)(e);if(t.namespace===D.KnownCaipNamespace.Eip155){const e=(0,_.toHex)(null==t?void 0:t.reference);e&&this.tokenDetectionController.detectTokens({chainIds:[e]}).catch(e=>{b.default.error("Error detecting tokens",{err:e})})}}),this.controllerMessenger.subscribe(`${this.permissionController.name}:stateChange`,async(e,t)=>{const r=(0,it.diffMap)(e,t);for(const[e,t]of r.entries())this._notifyAccountsChange(e,t)},it.getPermittedAccountsByOrigin),this.controllerMessenger.subscribe(`${this.permissionController.name}:stateChange`,async(e,t)=>{const r=(0,it.getChangedAuthorizations)(e,t),n=(0,it.getRemovedAuthorizations)(e,t);for(const[e,t]of n.entries()){const r=(0,K.getSessionScopes)(t,{getNonEvmSupportedMethods:this.getNonEvmSupportedMethods.bind(this)});Object.entries(r).forEach(([t,r])=>{r.notifications.includes("eth_subscription")&&r.methods.includes("eth_subscribe")&&this.removeMultichainApiEthSubscriptionMiddleware({scope:t,origin:e})})}for(const[e,t]of r.entries()){const r=(0,K.getSessionScopes)(t,{getNonEvmSupportedMethods:this.getNonEvmSupportedMethods.bind(this)});Object.entries(r).forEach(([t,r])=>{r.notifications.includes("eth_subscription")&&r.methods.includes("eth_subscribe")?Object.values(this.connections[e]??{}).forEach(({tabId:r})=>{this.addMultichainApiEthSubscriptionMiddleware({scope:t,origin:e,tabId:r})}):this.removeMultichainApiEthSubscriptionMiddleware({scope:t,origin:e})}),this._notifyAuthorizationChange(e,t)}},it.getAuthorizedScopesByOrigin),this.controllerMessenger.subscribe(`${this.permissionController.name}:stateChange`,async(e,t)=>{const r=(0,d.uniq)([...t.keys(),...e.keys()]);ye.NON_EVM_ACCOUNT_CHANGED_CONFIGS.forEach(({chains:n,notificationProperty:i,network:o})=>{r.forEach(r=>{var s,a;const l=t.get(r),c=e.get(r);if(!(Boolean(null==l||null===(s=l.sessionProperties)||void 0===s?void 0:s[i])||Boolean(null==c||null===(a=c.sessionProperties)||void 0===a?void 0:a[i])))return;const u=this._getSelectedMultichainAccountAddress(l,n),d=this._getSelectedMultichainAccountAddress(c,n);u!==d&&this._notifyMultichainAccountChange(r,d?[d]:[],o)})})},it.getAuthorizedScopesByOrigin),this.controllerMessenger.subscribe(`${this.accountTreeController.name}:selectedAccountGroupChange`,e=>{this.forwardSelectedAccountGroupToSnapKeyring(this.getSnapKeyringIfAvailable(),e),ye.NON_EVM_ACCOUNT_CHANGED_CONFIGS.forEach(({network:e,accountType:r,notificationProperty:n,chains:i})=>{const[o]=this.accountTreeController.getAccountsFromSelectedAccountGroup({scopes:[e],type:r}),s=t[e];if(!o||o.type!==r||o.address===s)return;t[e]=o.address;const a=(0,it.getOriginsWithSessionProperty)(this.permissionController.state,n),l=(0,it.getPermittedAccountsForScopesByOrigin)(this.permissionController.state,i);for(const[t,r]of l.entries()){r.map(e=>{const{address:t}=(0,D.parseCaipAccountId)(e);return t}).includes(o.address)&&a[t]&&this._notifyMultichainAccountChange(t,[o.address],e)}})}),this.controllerMessenger.subscribe(`${this.multichainAccountService.name}:multichainAccountGroupUpdated`,e=>{this.accountTreeController.getSelectedAccountGroup()===e.id&&this.forwardSelectedAccountGroupToSnapKeyring(this.getSnapKeyringIfAvailable(),e.id)}),this.controllerMessenger.subscribe(`${this.permissionController.name}:stateChange`,async(e,t)=>{const r=(0,it.diffMap)(e,t);for(const[e,t]of r.entries()){const r=this.selectedNetworkController.getNetworkClientIdForDomain(e),n=this.networkController.getNetworkConfigurationByNetworkClientId(r);if(!n){b.default.warn(`No network configuration found for clientId: ${r}`);continue}const{chainId:i}=n;if(t.length>0&&!t.includes(i)){const r=this.networkController.findNetworkClientIdByChainId(t[0]);(0,G.isSnapId)(e)||this.networkController.setActiveNetwork(r),this.selectedNetworkController.setNetworkClientIdForDomain(e,r)}}},it.getPermittedChainsByOrigin),this.controllerMessenger.subscribe("NetworkController:networkRemoved",({chainId:e})=>{const t=(0,D.toCaipChainId)("eip155",(0,D.hexToBigInt)(e).toString(10));this.removeAllScopePermissions(t)}),this.controllerMessenger.subscribe(`${this.snapController.name}:snapInstallStarted`,(e,t,r)=>{var n;const i=null===(n=this._getSnapMetadata(e))||void 0===n?void 0:n.category;this.metaMetricsController.trackEvent({event:r?ie.MetaMetricsEventName.SnapUpdateStarted:ie.MetaMetricsEventName.SnapInstallStarted,category:ie.MetaMetricsEventCategory.Snaps,properties:{snap_id:e,origin:t,snap_category:i}})}),this.controllerMessenger.subscribe(`${this.snapController.name}:snapInstallFailed`,(e,t,r,n)=>{var i;const o=n.includes("User rejected the request."),s=r?ie.MetaMetricsEventName.SnapUpdateFailed:ie.MetaMetricsEventName.SnapInstallFailed,a=r?ie.MetaMetricsEventName.SnapUpdateRejected:ie.MetaMetricsEventName.SnapInstallRejected,l=null===(i=this._getSnapMetadata(e))||void 0===i?void 0:i.category;this.metaMetricsController.trackEvent({event:o?a:s,category:ie.MetaMetricsEventCategory.Snaps,properties:{snap_id:e,origin:t,snap_category:l}})}),this.controllerMessenger.subscribe(`${this.snapController.name}:snapInstalled`,(e,t,r)=>{var n;if(r)return;const i=e.id,o=null===(n=this._getSnapMetadata(i))||void 0===n?void 0:n.category;this.metaMetricsController.trackEvent({event:ie.MetaMetricsEventName.SnapInstalled,category:ie.MetaMetricsEventCategory.Snaps,properties:{snap_id:i,version:e.version,origin:t,snap_category:o}})}),this.controllerMessenger.subscribe(`${this.snapController.name}:snapUpdated`,(e,t,r,n)=>{var i;if(n)return;const o=e.id,s=null===(i=this._getSnapMetadata(o))||void 0===i?void 0:i.category;this.metaMetricsController.trackEvent({event:ie.MetaMetricsEventName.SnapUpdated,category:ie.MetaMetricsEventCategory.Snaps,properties:{snap_id:o,old_version:t,new_version:e.version,origin:r,snap_category:s}})}),this.controllerMessenger.subscribe(`${this.snapController.name}:snapTerminated`,e=>{const t=Object.values(this.approvalController.state.pendingApprovals).filter(t=>t.origin===e.id&&t.type.startsWith(te.RestrictedMethods.snap_dialog));for(const e of t)this.approvalController.reject(e.id,new Error("Snap was terminated."))}),this.controllerMessenger.subscribe(`${this.snapController.name}:snapUninstalled`,e=>{var t;const r=this.notificationServicesController.getNotificationsByType(B.TRIGGER_TYPES.SNAP).filter(t=>t.data.origin===e.id).map(e=>e.id);this.notificationServicesController.deleteNotificationsById(r);const n=e.id,i=null===(t=this._getSnapMetadata(n))||void 0===t?void 0:t.category;this.metaMetricsController.trackEvent({event:ie.MetaMetricsEventName.SnapUninstalled,category:ie.MetaMetricsEventCategory.Snaps,properties:{snap_id:n,version:e.version,snap_category:i}})})}setupMultichainDataAndSubscriptions(){this.controllerMessenger.subscribe("AccountsController:selectedAccountChange",e=>{0===this.activeControllerConnections||(0,F.isEvmAccountType)(e.type)?this.multichainRatesController.stop():this.multichainRatesController.start()}),this.controllerMessenger.subscribe("CurrencyRateController:stateChange",({currentCurrency:e})=>{e!==this.multichainRatesController.state.fiatCurrency&&this.multichainRatesController.setFiatCurrency(e)})}addMultichainApiEthSubscriptionMiddleware({scope:e,origin:t,tabId:r}){const n=this.multichainSubscriptionManager.subscribe({scope:e,origin:t,tabId:r});this.multichainMiddlewareManager.addMiddleware({scope:e,origin:t,tabId:r,middleware:n.middleware})}removeMultichainApiEthSubscriptionMiddleware({scope:e,origin:t}){this.multichainMiddlewareManager.removeMiddlewareByScopeAndOrigin(e,t),this.multichainSubscriptionManager.unsubscribeByScopeAndOrigin(e,t)}createPublicConfigStore(){const e=new l.ObservableStore,t=async({isUnlocked:e})=>{const{chainId:t,networkVersion:r,isConnected:n}=await this.getProviderNetworkState();return{isUnlocked:e,chainId:t,networkVersion:n?r:"loading"}},r=async r=>{var n;(null===(n=r.networksMetadata[r.selectedNetworkClientId])||void 0===n?void 0:n.status)===X.NetworkStatus.Available&&e.putState(await t(r))};return this.on("update",r),r(this.getState()),e}async getProviderState(e,{isInitializingStreamProvider:t=!1}={}){const r=await this.getProviderNetworkState({origin:e,isInitializingStreamProvider:t}),n={};if(de.isManifestV3){var i;const{chrome:e}=globalThis;n.extensionId=null==e||null===(i=e.runtime)||void 0===i?void 0:i.id}return{isUnlocked:!0,accounts:this.getPermittedAccounts(e),...n,...r}}async getProviderNetworkState({origin:e=A.METAMASK_DOMAIN,isInitializingStreamProvider:t=!1}={}){const r=this.controllerMessenger.call("SelectedNetworkController:getNetworkClientIdForDomain",e),n=this.controllerMessenger.call("NetworkController:getNetworkClientById",r),{chainId:i}=n.configuration,{completedOnboarding:o}=this.onboardingController.state;let s=this.deprecatedNetworkVersions[r];if(s===undefined&&o&&!t){try{const e=await n.provider.request({method:"net_version"});s=(0,he.convertNetworkId)(e)}catch(e){console.error(e),s=null}this.deprecatedNetworkVersions[r]=s}const a=this.networkController.state.networksMetadata[r];return{chainId:i,networkVersion:s??"loading",isConnected:(null==a?void 0:a.status)===X.NetworkStatus.Available}}getState(){const{vault:e}=this.keyringController.state,t=Boolean(e),r=this.memStore.getFlatState();return{isInitialized:t,...(0,mt.sanitizeUIState)(r)}}async _addNetworkAndSetActive(e){var t;const r=await this.networkController.addNetwork(e),{networkClientId:n}=(null==r||null===(t=r.rpcEndpoints)||void 0===t?void 0:t[r.defaultRpcEndpointIndex])??{};return await this.networkController.setActiveNetwork(n),r}getApi(){const{accountsController:e,addressBookController:t,alertController:r,appStateController:n,nftController:i,nftDetectionController:o,currencyRateController:s,tokenBalancesController:a,tokenDetectionController:l,ensController:c,tokenListController:u,gasFeeController:d,gatorPermissionsController:h,metaMetricsController:p,networkController:f,multichainNetworkController:g,announcementController:m,onboardingController:b,permissionController:v,preferencesController:y,tokensController:w,smartTransactionsController:C,txController:S,backup:k,approvalController:P,phishingController:T,tokenRatesController:E,authenticationController:A,userStorageController:M,notificationServicesController:_,notificationServicesPushController:I,deFiPositionsController:O,multichainAssetsRatesController:R}=this;return{getState:this.getState.bind(this),setCurrentCurrency:s.setCurrentCurrency.bind(s),setUseBlockie:y.setUseBlockie.bind(y),setAvatarType:e=>y.setPreference("avatarType",e),setUsePhishDetect:y.setUsePhishDetect.bind(y),setUseMultiAccountBalanceChecker:y.setUseMultiAccountBalanceChecker.bind(y),setUseSafeChainsListValidation:y.setUseSafeChainsListValidation.bind(y),setUseTokenDetection:y.setUseTokenDetection.bind(y),setUseNftDetection:y.setUseNftDetection.bind(y),setUse4ByteResolution:y.setUse4ByteResolution.bind(y),setUseCurrencyRateCheck:y.setUseCurrencyRateCheck.bind(y),setOpenSeaEnabled:y.setOpenSeaEnabled.bind(y),getProviderConfig:()=>(0,ge.getProviderConfig)({metamask:this.networkController.state}),grantPermissionsIncremental:this.permissionController.grantPermissionsIncremental.bind(this.permissionController),grantPermissions:this.permissionController.grantPermissions.bind(this.permissionController),setSecurityAlertsEnabled:y.setSecurityAlertsEnabled.bind(y),setAddSnapAccountEnabled:y.setAddSnapAccountEnabled.bind(y),setUseExternalNameSources:y.setUseExternalNameSources.bind(y),setUseTransactionSimulations:y.setUseTransactionSimulations.bind(y),setIpfsGateway:y.setIpfsGateway.bind(y),setIsIpfsGatewayEnabled:y.setIsIpfsGatewayEnabled.bind(y),setUseAddressBarEnsResolution:y.setUseAddressBarEnsResolution.bind(y),setParticipateInMetaMetrics:p.setParticipateInMetaMetrics.bind(p),setDataCollectionForMarketing:p.setDataCollectionForMarketing.bind(p),setMarketingCampaignCookieId:p.setMarketingCampaignCookieId.bind(p),setCurrentLocale:y.setCurrentLocale.bind(y),setServiceWorkerKeepAlivePreference:y.setServiceWorkerKeepAlivePreference.bind(y),markPasswordForgotten:this.markPasswordForgotten.bind(this),unMarkPasswordForgotten:this.unMarkPasswordForgotten.bind(this),getRequestAccountTabIds:this.getRequestAccountTabIds,getOpenMetamaskTabsIds:this.getOpenMetamaskTabsIds,markNotificationPopupAsAutomaticallyClosed:()=>this.notificationManager.markAsAutomaticallyClosed(),getCode:this.getCode.bind(this),addNewAccount:this.addNewAccount.bind(this),getSeedPhrase:this.getSeedPhrase.bind(this),resetAccount:this.resetAccount.bind(this),removeAccount:this.removeAccount.bind(this),importAccountWithStrategy:this.importAccountWithStrategy.bind(this),getNextAvailableAccountName:e.getNextAvailableAccountName.bind(e),getAccountsBySnapId:e=>(0,st.getAccountsBySnapId)(this.getSnapKeyring.bind(this),e),checkIsSeedlessPasswordOutdated:this.checkIsSeedlessPasswordOutdated.bind(this),syncPasswordAndUnlockWallet:this.syncPasswordAndUnlockWallet.bind(this),subscriptionsStartPolling:this.subscriptionController.startPolling.bind(this.subscriptionController),getSubscriptionsEligibilities:this.subscriptionController.getSubscriptionsEligibilities.bind(this.subscriptionController),assignUserToCohort:this.subscriptionController.assignUserToCohort.bind(this.subscriptionController),getSubscriptions:this.subscriptionController.getSubscriptions.bind(this.subscriptionController),getSubscriptionPricing:this.subscriptionController.getPricing.bind(this.subscriptionController),cacheLastSelectedPaymentMethod:this.subscriptionController.cacheLastSelectedPaymentMethod.bind(this.subscriptionController),getSubscriptionCryptoApprovalAmount:this.subscriptionController.getCryptoApproveTransactionParams.bind(this.subscriptionController),cancelSubscription:this.subscriptionController.cancelSubscription.bind(this.subscriptionController),unCancelSubscription:this.subscriptionController.unCancelSubscription.bind(this.subscriptionController),getSubscriptionBillingPortalUrl:this.subscriptionController.getBillingPortalUrl.bind(this.subscriptionController),startSubscriptionWithCard:this.subscriptionService.startSubscriptionWithCard.bind(this.subscriptionService),updateSubscriptionCardPaymentMethod:this.subscriptionService.updateSubscriptionCardPaymentMethod.bind(this.subscriptionService),updateSubscriptionCryptoPaymentMethod:this.subscriptionService.updateSubscriptionCryptoPaymentMethod.bind(this.subscriptionService),submitSubscriptionUserEvents:this.subscriptionController.submitUserEvent.bind(this.subscriptionController),linkRewardToShieldSubscription:this.subscriptionService.linkRewardToExistingSubscription.bind(this.subscriptionService),getRewardsCandidateSubscriptionId:this.rewardsController.getCandidateSubscriptionId.bind(this.rewardsController),getRewardsSeasonMetadata:this.rewardsController.getSeasonMetadata.bind(this.rewardsController),getRewardsSeasonStatus:this.rewardsController.getSeasonStatus.bind(this.rewardsController),getRewardsHasAccountOptedIn:this.rewardsController.getHasAccountOptedIn.bind(this.rewardsController),estimateRewardsPoints:this.rewardsController.estimatePoints.bind(this.rewardsController),validateRewardsReferralCode:this.rewardsController.validateReferralCode.bind(this.rewardsController),getRewardsGeoMetadata:this.rewardsController.getRewardsGeoMetadata.bind(this.rewardsController),rewardsOptIn:this.rewardsController.optIn.bind(this.rewardsController),rewardsIsOptInSupported:this.rewardsController.isOptInSupported.bind(this.rewardsController),rewardsGetOptInStatus:this.rewardsController.getOptInStatus.bind(this.rewardsController),rewardsLinkAccountsToSubscriptionCandidate:this.rewardsController.linkAccountsToSubscriptionCandidate.bind(this.rewardsController),getSubmitClaimConfig:this.claimsController.getSubmitClaimConfig.bind(this.claimsController),generateClaimSignature:this.claimsController.generateClaimSignature.bind(this.claimsController),getClaims:this.claimsController.getClaims.bind(this.claimsController),saveClaimDraft:this.claimsController.saveOrUpdateClaimDraft.bind(this.claimsController),getClaimDrafts:this.claimsController.getClaimDrafts.bind(this.claimsController),deleteClaimDraft:this.claimsController.deleteClaimDraft.bind(this.claimsController),deleteAllClaimDrafts:this.claimsController.deleteAllClaimDrafts.bind(this.claimsController),connectHardware:this.connectHardware.bind(this),forgetDevice:this.forgetDevice.bind(this),checkHardwareStatus:this.checkHardwareStatus.bind(this),unlockHardwareWalletAccount:this.unlockHardwareWalletAccount.bind(this),attemptLedgerTransportCreation:this.attemptLedgerTransportCreation.bind(this),getAppNameAndVersion:this.getAppNameAndVersion.bind(this),completeQrCodeScan:n.completeQrCodeScan.bind(n),cancelQrCodeScan:n.cancelQrCodeScan.bind(n),submitPassword:this.submitPassword.bind(this),verifyPassword:this.verifyPassword.bind(this),setActiveNetwork:async e=>await this.multichainNetworkController.setActiveNetwork(e),findNetworkClientIdByChainId:this.networkController.findNetworkClientIdByChainId.bind(this.networkController),getNetworksWithTransactionActivityByAccounts:this.multichainNetworkController.getNetworksWithTransactionActivityByAccounts.bind(this.multichainNetworkController),setActiveNetworkConfigurationId:e=>{this.networkController.setActiveNetwork(e)},setNetworkClientIdForDomain:(e,t)=>this.selectedNetworkController.setNetworkClientIdForDomain(e,t),rollbackToPreviousProvider:f.rollbackToPreviousProvider.bind(f),addNetwork:this._addNetworkAndSetActive.bind(this),updateNetwork:this.networkController.updateNetwork.bind(this.networkController),removeNetwork:this.multichainNetworkController.removeNetwork.bind(this.multichainNetworkController),getCurrentNetworkEIP1559Compatibility:this.networkController.getEIP1559Compatibility.bind(this.networkController),getNetworkConfigurationByNetworkClientId:this.networkController.getNetworkConfigurationByNetworkClientId.bind(this.networkController),setSelectedAddress:e=>{const t=this.accountsController.getAccountByAddress(e);if(!t)throw new Error(`No account found for address: ${e}`);this.accountsController.setSelectedAccount(t.id)},toggleExternalServices:this.toggleExternalServices.bind(this),addToken:w.addToken.bind(w),updateTokenType:w.updateTokenType.bind(w),setFeatureFlag:y.setFeatureFlag.bind(y),setPreference:y.setPreference.bind(y),addKnownMethodData:y.addKnownMethodData.bind(y),setDismissSeedBackUpReminder:y.setDismissSeedBackUpReminder.bind(y),setOverrideContentSecurityPolicyHeader:y.setOverrideContentSecurityPolicyHeader.bind(y),setAdvancedGasFee:y.setAdvancedGasFee.bind(y),setTheme:y.setTheme.bind(y),setSnapsAddSnapAccountModalDismissed:y.setSnapsAddSnapAccountModalDismissed.bind(y),setManageInstitutionalWallets:y.setManageInstitutionalWallets.bind(y),setSelectedInternalAccount:e=>{this.accountsController.getAccount(e)&&this.accountsController.setSelectedAccount(e)},setAccountName:e.setAccountName.bind(e),setAccountLabel:(e,t)=>{const r=this.accountsController.getAccountByAddress(e);if(r===undefined)throw new Error(`No account found for address: ${e}`);this.accountsController.setAccountName(r.id,t)},setSelectedMultichainAccount:e=>{this.accountTreeController.setSelectedAccountGroup(e)},setAccountGroupName:(e,t)=>{this.accountTreeController.setAccountGroupName(e,t)},setAccountGroupPinned:this.accountTreeController.setAccountGroupPinned.bind(this.accountTreeController),setAccountGroupHidden:this.accountTreeController.setAccountGroupHidden.bind(this.accountTreeController),syncAccountTreeWithUserStorage:async()=>{await this.getSnapKeyring(),await this.accountTreeController.syncWithUserStorage()},createNextMultichainAccountGroup:async e=>{await this.multichainAccountService.createNextMultichainAccountGroup({entropySource:e})},alignMultichainWallets:async()=>{this.multichainAccountService&&await this.multichainAccountService.alignWallets()},getTokenStandardAndDetails:this.getTokenStandardAndDetails.bind(this),getTokenSymbol:this.getTokenSymbol.bind(this),getTokenStandardAndDetailsByChain:this.getTokenStandardAndDetailsByChain.bind(this),getERC1155BalanceOf:this.assetsContractController.getERC1155BalanceOf.bind(this.assetsContractController),addNft:i.addNft.bind(i),addNftVerifyOwnership:i.addNftVerifyOwnership.bind(i),removeAndIgnoreNft:i.removeAndIgnoreNft.bind(i),removeNft:i.removeNft.bind(i),checkAndUpdateAllNftsOwnershipStatus:i.checkAndUpdateAllNftsOwnershipStatus.bind(i),checkAndUpdateSingleNftOwnershipStatus:i.checkAndUpdateSingleNftOwnershipStatus.bind(i),getNFTContractInfo:i.getNFTContractInfo.bind(i),isNftOwner:i.isNftOwner.bind(i),setAddressBook:t.set.bind(t),removeFromAddressBook:t.delete.bind(t),setLastActiveTime:n.setLastActiveTime.bind(n),setCurrentExtensionPopupId:n.setCurrentExtensionPopupId.bind(n),setBrowserEnvironment:n.setBrowserEnvironment.bind(n),setDefaultHomeActiveTabName:n.setDefaultHomeActiveTabName.bind(n),setConnectedStatusPopoverHasBeenShown:n.setConnectedStatusPopoverHasBeenShown.bind(n),setRecoveryPhraseReminderHasBeenShown:n.setRecoveryPhraseReminderHasBeenShown.bind(n),setRecoveryPhraseReminderLastShown:n.setRecoveryPhraseReminderLastShown.bind(n),setTermsOfUseLastAgreed:n.setTermsOfUseLastAgreed.bind(n),setSurveyLinkLastClickedOrClosed:n.setSurveyLinkLastClickedOrClosed.bind(n),setOnboardingDate:n.setOnboardingDate.bind(n),setLastViewedUserSurvey:n.setLastViewedUserSurvey.bind(n),setRampCardClosed:n.setRampCardClosed.bind(n),setNewPrivacyPolicyToastClickedOrClosed:n.setNewPrivacyPolicyToastClickedOrClosed.bind(n),setNewPrivacyPolicyToastShownDate:n.setNewPrivacyPolicyToastShownDate.bind(n),setSnapsInstallPrivacyWarningShownStatus:n.setSnapsInstallPrivacyWarningShownStatus.bind(n),setOutdatedBrowserWarningLastShown:n.setOutdatedBrowserWarningLastShown.bind(n),setIsUpdateAvailable:n.setIsUpdateAvailable.bind(n),setUpdateModalLastDismissedAt:n.setUpdateModalLastDismissedAt.bind(n),setLastUpdatedAt:n.setLastUpdatedAt.bind(n),setShowTestnetMessageInDropdown:n.setShowTestnetMessageInDropdown.bind(n),setShowBetaHeader:n.setShowBetaHeader.bind(n),setShowPermissionsTour:n.setShowPermissionsTour.bind(n),setShowAccountBanner:n.setShowAccountBanner.bind(n),setProductTour:n.setProductTour.bind(n),setShowNetworkBanner:n.setShowNetworkBanner.bind(n),updateNftDropDownState:n.updateNftDropDownState.bind(n),getLastInteractedConfirmationInfo:n.getLastInteractedConfirmationInfo.bind(n),deleteDappSwapComparisonData:n.deleteDappSwapComparisonData.bind(n),setLastInteractedConfirmationInfo:n.setLastInteractedConfirmationInfo.bind(n),updateSlides:n.updateSlides.bind(n),removeSlide:n.removeSlide.bind(n),setEnableEnforcedSimulations:n.setEnableEnforcedSimulations.bind(n),setEnableEnforcedSimulationsForTransaction:n.setEnableEnforcedSimulationsForTransaction.bind(n),setEnforcedSimulationsSlippageForTransaction:n.setEnforcedSimulationsSlippageForTransaction.bind(n),setHasShownMultichainAccountsIntroModal:n.setHasShownMultichainAccountsIntroModal.bind(n),updateNetworkConnectionBanner:n.updateNetworkConnectionBanner.bind(n),setShowShieldEntryModalOnce:n.setShowShieldEntryModalOnce.bind(n),setPendingShieldCohort:n.setPendingShieldCohort.bind(n),setShieldPausedToastLastClickedOrClosed:n.setShieldPausedToastLastClickedOrClosed.bind(n),setShieldEndingToastLastClickedOrClosed:n.setShieldEndingToastLastClickedOrClosed.bind(n),setPna25Acknowledged:n.setPna25Acknowledged.bind(n),setAppActiveTab:n.setAppActiveTab.bind(n),setDefaultSubscriptionPaymentOptions:n.setDefaultSubscriptionPaymentOptions.bind(n),setShieldSubscriptionMetricsProps:n.setShieldSubscriptionMetricsProps.bind(n),tryReverseResolveAddress:c.reverseResolveAddress.bind(c),startOAuthLogin:this.oauthService.startOAuthLogin.bind(this.oauthService),setMarketingConsent:this.oauthService.setMarketingConsent.bind(this.oauthService),getMarketingConsent:this.oauthService.getMarketingConsent.bind(this.oauthService),preloadToprfNodeDetails:this.seedlessOnboardingController.preloadToprfNodeDetails.bind(this.seedlessOnboardingController),authenticate:this.seedlessOnboardingController.authenticate.bind(this.seedlessOnboardingController),resetOAuthLoginState:this.seedlessOnboardingController.clearState.bind(this.seedlessOnboardingController),createSeedPhraseBackup:this.createSeedPhraseBackup.bind(this),storeKeyringEncryptionKey:this.seedlessOnboardingController.storeKeyringEncryptionKey.bind(this.seedlessOnboardingController),restoreSocialBackupAndGetSeedPhrase:this.restoreSocialBackupAndGetSeedPhrase.bind(this),syncSeedPhrases:this.syncSeedPhrases.bind(this),changePassword:this.changePassword.bind(this),getIsSeedlessOnboardingUserAuthenticated:this.seedlessOnboardingController.getIsUserAuthenticated.bind(this.seedlessOnboardingController),fetchAndUpdateGatorPermissions:h.fetchAndUpdateGatorPermissions.bind(h),addPendingRevocation:h.addPendingRevocation.bind(h),submitDirectRevocation:h.submitDirectRevocation.bind(h),checkDelegationDisabled:this.checkDelegationDisabled.bind(this),setLocked:this.setLocked.bind(this),createNewVaultAndKeychain:this.createNewVaultAndKeychain.bind(this),createNewVaultAndRestore:this.createNewVaultAndRestore.bind(this),generateNewMnemonicAndAddToVault:this.generateNewMnemonicAndAddToVault.bind(this),importMnemonicToVault:this.importMnemonicToVault.bind(this),exportAccount:this.exportAccount.bind(this),updateTransaction:S.updateTransaction.bind(S),approveTransactionsWithSameNonce:S.approveTransactionsWithSameNonce.bind(S),createCancelTransaction:this.createCancelTransaction.bind(this),createSpeedUpTransaction:this.createSpeedUpTransaction.bind(this),estimateGas:this.estimateGas.bind(this),estimateGasFee:S.estimateGasFee.bind(S),getNextNonce:this.getNextNonce.bind(this),addTransaction:(e,t)=>(0,at.addTransaction)(this.getAddTransactionRequest({transactionParams:e,transactionOptions:t,waitForSubmit:!1})),addTransactionAndWaitForPublish:(e,t)=>(0,at.addTransaction)(this.getAddTransactionRequest({transactionParams:e,transactionOptions:t,waitForSubmit:!0})),createTransactionEventFragment:Re.createTransactionEventFragmentWithTxId.bind(null,this.getTransactionMetricsRequest()),setTransactionActive:S.setTransactionActive.bind(S),decryptMessage:this.decryptMessageController.decryptMessage.bind(this.decryptMessageController),decryptMessageInline:this.decryptMessageController.decryptMessageInline.bind(this.decryptMessageController),cancelDecryptMessage:this.decryptMessageController.cancelDecryptMessage.bind(this.decryptMessageController),encryptionPublicKey:this.encryptionPublicKeyController.encryptionPublicKey.bind(this.encryptionPublicKeyController),cancelEncryptionPublicKey:this.encryptionPublicKeyController.cancelEncryptionPublicKey.bind(this.encryptionPublicKeyController),setSeedPhraseBackedUp:b.setSeedPhraseBackedUp.bind(b),completeOnboarding:b.completeOnboarding.bind(b),setFirstTimeFlowType:b.setFirstTimeFlowType.bind(b),setAlertEnabledness:r.setAlertEnabledness.bind(r),setUnconnectedAccountAlertShown:r.setUnconnectedAccountAlertShown.bind(r),setWeb3ShimUsageAlertDismissed:r.setWeb3ShimUsageAlertDismissed.bind(r),removePermissionsFor:this.removePermissionsFor,approvePermissionsRequest:this.acceptPermissionsRequest,rejectPermissionsRequest:this.rejectPermissionsRequest,...(0,it.getPermissionBackgroundApiMethods)({permissionController:v,approvalController:P,accountsController:e,networkController:f,multichainNetworkController:g}),disableSnap:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:disable"),enableSnap:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:enable"),updateSnap:(e,t)=>(this.controllerMessenger.call("SnapController:install",e,t),null),removeSnap:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:remove"),handleSnapRequest:this.handleSnapRequest.bind(this),revokeDynamicSnapPermissions:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:revokeDynamicPermissions"),disconnectOriginFromSnap:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:disconnectOrigin"),updateNetworksList:this.updateNetworksList.bind(this),updateAccountsList:this.updateAccountsList.bind(this),setEnabledNetworks:this.setEnabledNetworks.bind(this),setEnabledAllPopularNetworks:this.setEnabledAllPopularNetworks.bind(this),updateHiddenAccountsList:this.updateHiddenAccountsList.bind(this),getPhishingResult:async e=>(await T.maybeUpdateState(),T.test(e)),deleteInterface:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapInterfaceController:deleteInterface"),updateInterfaceState:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapInterfaceController:updateInterfaceState"),fetchAndSetQuotes:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:fetchAndSetQuotes"),setSelectedQuoteAggId:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSelectedQuoteAggId"),resetSwapsState:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:resetSwapsState"),setSwapsTokens:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsTokens"),clearSwapsQuotes:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:clearSwapsQuotes"),setApproveTxId:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setApproveTxId"),setTradeTxId:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setTradeTxId"),setSwapsTxGasPrice:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsTxGasPrice"),setSwapsTxGasLimit:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsTxGasLimit"),setSwapsTxMaxFeePerGas:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsTxMaxFeePerGas"),setSwapsTxMaxFeePriorityPerGas:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsTxMaxFeePriorityPerGas"),safeRefetchQuotes:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:safeRefetchQuotes"),stopPollingForQuotes:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:stopPollingForQuotes"),setBackgroundSwapRouteState:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setBackgroundSwapRouteState"),resetPostFetchState:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:resetPostFetchState"),setSwapsErrorKey:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsErrorKey"),setInitialGasEstimate:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setInitialGasEstimate"),setCustomApproveTxData:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setCustomApproveTxData"),setSwapsLiveness:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsLiveness"),setSwapsFeatureFlags:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsFeatureFlags"),setSwapsUserFeeLevel:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsUserFeeLevel"),setSwapsQuotesPollingLimitEnabled:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsQuotesPollingLimitEnabled"),[N.BridgeBackgroundAction.RESET_STATE]:this.controllerMessenger.call.bind(this.controllerMessenger,`${N.BRIDGE_CONTROLLER_NAME}:${N.BridgeBackgroundAction.RESET_STATE}`),[N.BridgeUserAction.UPDATE_QUOTE_PARAMS]:this.controllerMessenger.call.bind(this.controllerMessenger,`${N.BRIDGE_CONTROLLER_NAME}:${N.BridgeUserAction.UPDATE_QUOTE_PARAMS}`),[N.BridgeBackgroundAction.TRACK_METAMETRICS_EVENT]:this.controllerMessenger.call.bind(this.controllerMessenger,`${N.BRIDGE_CONTROLLER_NAME}:${N.BridgeBackgroundAction.TRACK_METAMETRICS_EVENT}`),[N.BridgeBackgroundAction.FETCH_QUOTES]:this.controllerMessenger.call.bind(this.controllerMessenger,`${N.BRIDGE_CONTROLLER_NAME}:${N.BridgeBackgroundAction.FETCH_QUOTES}`),[q.BridgeStatusAction.SUBMIT_TX]:this.controllerMessenger.call.bind(this.controllerMessenger,`${q.BRIDGE_STATUS_CONTROLLER_NAME}:${q.BridgeStatusAction.SUBMIT_TX}`),fetchSmartTransactionFees:C.getFees.bind(C),clearSmartTransactionFees:C.clearFees.bind(C),submitSignedTransactions:C.submitSignedTransactions.bind(C),cancelSmartTransaction:C.cancelSmartTransaction.bind(C),fetchSmartTransactionsLiveness:C.fetchLiveness.bind(C),updateSmartTransaction:C.updateSmartTransaction.bind(C),setStatusRefreshInterval:C.setStatusRefreshInterval.bind(C),trackMetaMetricsEvent:p.trackEvent.bind(p),trackMetaMetricsPage:p.trackPage.bind(p),createEventFragment:p.createEventFragment.bind(p),updateEventFragment:p.updateEventFragment.bind(p),finalizeEventFragment:p.finalizeEventFragment.bind(p),trackInsightSnapView:this.trackInsightSnapView.bind(this),updateMetaMetricsTraits:p.updateTraits.bind(p),addEventBeforeMetricsOptIn:p.addEventBeforeMetricsOptIn.bind(p),bufferedTrace:p.bufferedTrace.bind(p),bufferedEndTrace:p.bufferedEndTrace.bind(p),rejectAllPendingApprovals:this.rejectAllPendingApprovals.bind(this),rejectPendingApproval:this.rejectPendingApproval,requestUserApproval:P.addAndShowApprovalRequest.bind(P),resolvePendingApproval:this.resolvePendingApproval,resetViewedNotifications:m.resetViewed.bind(m),updateViewedNotifications:m.updateViewed.bind(m),currencyRateStartPolling:s.startPolling.bind(s),currencyRateStopPollingByPollingToken:s.stopPollingByPollingToken.bind(s),multichainAssetsRatesStartPolling:R.startPolling.bind(R),multichainAssetsRatesStopPollingByPollingToken:R.stopPollingByPollingToken.bind(R),tokenRatesStartPolling:E.startPolling.bind(E),tokenRatesStopPollingByPollingToken:E.stopPollingByPollingToken.bind(E),tokenDetectionStartPolling:l.startPolling.bind(l),tokenDetectionStopPollingByPollingToken:l.stopPollingByPollingToken.bind(l),tokenListStartPolling:u.startPolling.bind(u),tokenListStopPollingByPollingToken:u.stopPollingByPollingToken.bind(u),tokenBalancesStartPolling:a.startPolling.bind(a),tokenBalancesStopPollingByPollingToken:a.stopPollingByPollingToken.bind(a),updateBalances:a.updateBalances.bind(a),deFiStartPolling:O.startPolling.bind(O),deFiStopPolling:O.stopPollingByPollingToken.bind(O),gasFeeStartPolling:d.startPolling.bind(d),gasFeeStopPollingByPollingToken:d.stopPollingByPollingToken.bind(d),getGasFeeTimeEstimate:d.getTimeEstimate.bind(d),addPollingTokenToAppState:n.addPollingToken.bind(n),removePollingTokenFromAppState:n.removePollingToken.bind(n),updateThrottledOriginState:n.updateThrottledOriginState.bind(n),backupUserData:k.backupUserData.bind(k),restoreUserData:k.restoreUserData.bind(k),detectTokens:l.detectTokens.bind(l),fetchHistoricalPricesForAsset:(...e)=>this.multichainAssetsRatesController.fetchHistoricalPricesForAsset(...e),detectNfts:o.detectNfts.bind(o),addDetectedTokens:w.addDetectedTokens.bind(w),addImportedTokens:w.addTokens.bind(w),ignoreTokens:w.ignoreTokens.bind(w),getBalancesInSingleCall:(...e)=>this.assetsContractController.getBalancesInSingleCall(...e),performSignIn:A.performSignIn.bind(A),performSignOut:A.performSignOut.bind(A),getUserProfileLineage:A.getUserProfileLineage.bind(A),getBearerToken:A.getBearerToken.bind(A),setIsBackupAndSyncFeatureEnabled:M.setIsBackupAndSyncFeatureEnabled.bind(M),deleteAccountSyncingDataFromUserStorage:M.performDeleteStorageAllFeatureEntries.bind(M),syncContactsWithUserStorage:M.syncContactsWithUserStorage.bind(M),checkAccountsPresence:_.checkAccountsPresence.bind(_),createOnChainTriggers:_.createOnChainTriggers.bind(_),disableAccounts:_.disableAccounts.bind(_),enableAccounts:_.enableAccounts.bind(_),fetchAndUpdateMetamaskNotifications:_.fetchAndUpdateMetamaskNotifications.bind(_),deleteNotificationsById:_.deleteNotificationsById.bind(_),getNotificationsByType:_.getNotificationsByType.bind(_),markMetamaskNotificationsAsRead:_.markMetamaskNotificationsAsRead.bind(_),setFeatureAnnouncementsEnabled:_.setFeatureAnnouncementsEnabled.bind(_),enablePushNotifications:I.enablePushNotifications.bind(I),disablePushNotifications:I.disablePushNotifications.bind(I),enableMetamaskNotifications:_.enableMetamaskNotifications.bind(_),disableMetamaskNotifications:_.disableNotificationServices.bind(_),throwTestError:this.throwTestError.bind(this),captureTestError:this.captureTestError.bind(this),updateProposedNames:this.nameController.updateProposedNames.bind(this.nameController),setName:this.nameController.setName.bind(this.nameController),createSnapAccount:async(e,t,r)=>{const n=await this.getSnapKeyring();return await n.createAccount(e,t,r)},multichainAddAssets:(e,t)=>this.multichainAssetsController.addAssets(e,t),multichainIgnoreAssets:(e,t)=>this.multichainAssetsController.ignoreAssets(e,t),multichainUpdateBalance:e=>this.multichainBalancesController.updateBalance(e),multichainUpdateTransactions:e=>this.multichainTransactionsController.updateTransactionsForAccount(e),decodeTransactionData:e=>(0,ht.decodeTransactionData)({...e,provider:this.provider}),createMetaMetricsDataDeletionTask:this.metaMetricsDataDeletionController.createMetaMetricsDataDeletionTask.bind(this.metaMetricsDataDeletionController),updateDataDeletionTaskStatus:this.metaMetricsDataDeletionController.updateDataDeletionTaskStatus.bind(this.metaMetricsDataDeletionController),endTrace:be.endTrace,isRelaySupported:jt.isRelaySupported,isSendBundleSupported:Ut.isSendBundleSupported,openUpdateTabAndReload:()=>(0,Ft.openUpdateTabAndReload)(this.requestSafeReload.bind(this)),requestSafeReload:this.requestSafeReload.bind(this),applyTransactionContainersExisting:(e,t)=>(0,Lt.applyTransactionContainersExisting)({containerTypes:t,messenger:this.controllerMessenger,transactionId:e,updateEditableParams:this.txController.updateEditableParams.bind(this.txController)}),lookupSelectedNetworks:this.lookupSelectedNetworks.bind(this),resetWallet:this.resetWallet.bind(this)}}rejectOriginPendingApprovals(e){(0,bt.rejectOriginApprovals)({approvalController:this.approvalController,deleteInterface:e=>this.controllerMessenger.call("SnapInterfaceController:deleteInterface",e),origin:e})}async resetWallet(){this.seedlessOnboardingController.clearState(),this.onboardingController.resetOnboarding(),this.appStateController.setIsWalletResetInProgress(!0)}async exportAccount(e,t){return await this.verifyPassword(t),this.keyringController.exportAccount(t,e)}async getTokenStandardAndDetails(e,t,r){var n,i,o,s;const a=Gr(Qr,this,Xr).call(this),{tokensChainsCache:l}=this.tokenListController.state,c=(null==l||null===(n=l[a])||void 0===n?void 0:n.data)||{},{allTokens:u}=this.tokensController.state,d=(null==u||null===(i=u[a])||void 0===i?void 0:i[t])||[],h={...ce.STATIC_MAINNET_TOKEN_LIST[null==e?void 0:e.toLowerCase()]||{},...c[null==e?void 0:e.toLowerCase()]||{},...d.find(({address:t})=>(0,ae.isEqualCaseInsensitive)(t,e))||{}},p=(0,ae.isEqualCaseInsensitive)(h.standard,Y.TokenStandard.ERC20)||!0===h.erc20,f=!(r||(0,ae.isEqualCaseInsensitive)(h.standard,Y.TokenStandard.ERC1155)||(0,ae.isEqualCaseInsensitive)(h.standard,Y.TokenStandard.ERC721)||h.erc721),g=h.decimals!==undefined&&h.symbol;let m;if(p||f&&g)try{const r=t?await(0,se.fetchTokenBalance)(e,t,this.provider):undefined;m={address:e,balance:r,standard:Y.TokenStandard.ERC20,decimals:h.decimals,symbol:h.symbol}}catch(e){b.default.warn(`Failed to get token balance. Error: ${e}`)}if(m===undefined)try{m=await this.assetsContractController.getTokenStandardAndDetails(e,t,r)}catch(e){b.default.warn(`Failed to get token standard and details. Error: ${e}`)}if(m){if((0,ae.isEqualCaseInsensitive)(m.standard,Y.TokenStandard.ERC1155))try{const n=await(0,se.fetchERC1155Balance)(e,t,r,this.provider),i=null!=n&&n._hex?parseInt(n._hex,16).toString():null;m={...m,balance:i}}catch(e){b.default.warn("Failed to get token balance. Error:",e)}}return{...m,decimals:null===(o=m)||void 0===o||null===(o=o.decimals)||void 0===o?void 0:o.toString(10),balance:null===(s=m)||void 0===s||null===(s=s.balance)||void 0===s?void 0:s.toString(10)}}async getTokenStandardAndDetailsByChain(e,t,r,n){var i,o,s,a;const{tokensChainsCache:l}=this.tokenListController.state,c=(null==l||null===(i=l[n])||void 0===i?void 0:i.data)||{},{allTokens:u}=this.tokensController.state,d=this.accountsController.getSelectedAccount(),h=(null==u||null===(o=u[n])||void 0===o?void 0:o[d.address])||[];let p={};n===X.CHAIN_IDS.MAINNET&&(p=ce.STATIC_MAINNET_TOKEN_LIST[null==e?void 0:e.toLowerCase()]||{});const f=c[null==e?void 0:e.toLowerCase()]||{},g=h.find(({address:t})=>(0,ae.isEqualCaseInsensitive)(t,e))||{},m={...p,...f,...g},v=(0,ae.isEqualCaseInsensitive)(m.standard,Y.TokenStandard.ERC20)||!0===m.erc20,y=!(r||(0,ae.isEqualCaseInsensitive)(m.standard,Y.TokenStandard.ERC1155)||(0,ae.isEqualCaseInsensitive)(m.standard,Y.TokenStandard.ERC721)||m.erc721),w=m.decimals!==undefined&&m.symbol;let C;if(v||y&&w)try{let r=0;Gr(Qr,this,Xr).call(this)===n&&(r=await(0,se.fetchTokenBalance)(e,t,this.provider)),C={address:e,balance:r,standard:Y.TokenStandard.ERC20,decimals:m.decimals,symbol:m.symbol}}catch(e){b.default.warn(`Failed to get token balance. Error: ${e}`)}if(C===undefined)try{var S,k;const i=null===(S=this.networkController)||void 0===S||null===(S=S.state)||void 0===S||null===(S=S.networkConfigurationsByChainId)||void 0===S||null===(S=S[n])||void 0===S||null===(S=S.rpcEndpoints[null===(k=this.networkController)||void 0===k||null===(k=k.state)||void 0===k||null===(k=k.networkConfigurationsByChainId)||void 0===k||null===(k=k[n])||void 0===k?void 0:k.defaultRpcEndpointIndex])||void 0===S?void 0:S.networkClientId;C=await this.assetsContractController.getTokenStandardAndDetails(e,t,r,i)}catch(e){b.default.warn(`Failed to get token standard and details. Error: ${e}`)}if(C){if((0,ae.isEqualCaseInsensitive)(C.standard,Y.TokenStandard.ERC1155))try{const n=await(0,se.fetchERC1155Balance)(e,t,r,this.provider),i=null!=n&&n._hex?parseInt(n._hex,16).toString():null;C={...C,balance:i}}catch(e){b.default.warn("Failed to get token balance. Error:",e)}}return{...C,decimals:null===(s=C)||void 0===s||null===(s=s.decimals)||void 0===s?void 0:s.toString(10),balance:null===(a=C)||void 0===a||null===(a=a.balance)||void 0===a?void 0:a.toString(10)}}async getTokenSymbol(e){try{const t=await this.assetsContractController.getTokenStandardAndDetails(e);return null==t?void 0:t.symbol}catch(e){return null}}async createSeedPhraseBackup(e,r,n){let i=!1;try{var o,s;null===(o=(s=this.metaMetricsController).bufferedTrace)||void 0===o||o.call(s,{name:be.TraceName.OnboardingCreateKeyAndBackupSrp,op:be.TraceOperation.OnboardingSecurityOp});const a=t.from(r),l=this._convertMnemonicToWordlistIndices(a);await this.seedlessOnboardingController.createToprfKeyAndBackupSeedPhrase(e,l,n),i=!0,await this.syncKeyringEncryptionKey()}catch(e){var a,l;throw null===(a=this.controllerMessenger)||void 0===a||null===(l=a.captureException)||void 0===l||l.call(a,(0,Oe.createSentryError)(be.TraceName.OnboardingCreateKeyAndBackupSrpError,e)),b.default.error("[createSeedPhraseBackup] error",e),e}finally{var c,u;null===(c=(u=this.metaMetricsController).bufferedEndTrace)||void 0===c||c.call(u,{name:be.TraceName.OnboardingCreateKeyAndBackupSrp,data:{success:i}})}}async fetchAllSecretData(e){let t=!1;try{var r,n;null===(r=(n=this.metaMetricsController).bufferedTrace)||void 0===r||r.call(n,{name:be.TraceName.OnboardingFetchSrps,op:be.TraceOperation.OnboardingSecurityOp});const i=await this.seedlessOnboardingController.fetchAllSecretData(e);return t=!0,i}catch(e){throw b.default.error("error while fetching all seed phrases",e),e}finally{var i,o;null===(i=(o=this.metaMetricsController).bufferedEndTrace)||void 0===i||i.call(o,{name:be.TraceName.OnboardingFetchSrps,data:{success:t}})}}async syncPasswordAndUnlockWallet(e){const t=this.onboardingController.getIsSocialLoginFlow();let r=!1;if(t)try{r=await this.seedlessOnboardingController.checkIsPasswordOutdated({skipCache:!1})}catch(e){b.default.error("error while checking if password is outdated",e)}if(!t||!r)return await this.submitPassword(e),void(t&&this.seedlessOnboardingController.renewRefreshToken(e).catch(e=>{b.default.error("error while revoking seedless refresh token",e)}).finally(()=>{this.seedlessOnboardingController.revokePendingRefreshTokens().catch(e=>{b.default.error("error while revoking pending refresh tokens",e)})}));const n=await this.seedlessOperationMutex.acquire();try{const t=await this.keyringController.verifyPassword(e).then(()=>!0).catch(e=>{if(e.message.includes("Incorrect password"))return!1;throw b.default.error("error while verifying keyring password",e.message),e});await this.seedlessOnboardingController.submitGlobalPassword({globalPassword:e,maxKeyChainLength:20}).catch(e=>{if(b.default.error(`error while submitting global password: ${e.message}`),e instanceof H.RecoveryError){if((null==e?void 0:e.message)===H.SeedlessOnboardingControllerErrorMessage.IncorrectPassword&&t)throw new Error(H.SeedlessOnboardingControllerErrorMessage.OutdatedPassword);throw new g.JsonRpcError(-32603,e.message,e.data)}throw e});const r=await this.seedlessOnboardingController.loadKeyringEncryptionKey();await this.submitEncryptionKey(r);let n=!1;try{var i,o;await this.seedlessOnboardingController.syncLatestGlobalPassword({globalPassword:e}),null===(i=(o=this.metaMetricsController).bufferedTrace)||void 0===i||i.call(o,{name:be.TraceName.OnboardingResetPassword,op:be.TraceOperation.OnboardingSecurityOp}),await this.keyringController.changePassword(e),n=!0,await this.syncKeyringEncryptionKey(),await this.seedlessOnboardingController.checkIsPasswordOutdated({skipCache:!0}),this.seedlessOnboardingController.renewRefreshToken(e).catch(e=>{b.default.error("error while revoking seedless refresh token",e)}).finally(()=>{this.seedlessOnboardingController.revokePendingRefreshTokens().catch(e=>{b.default.error("error while revoking pending refresh tokens",e)})})}catch(e){var s,a;throw null===(s=this.controllerMessenger)||void 0===s||null===(a=s.captureException)||void 0===a||a.call(s,(0,Oe.createSentryError)(be.TraceName.OnboardingResetPasswordError,e)),await this.setLocked({skipSeedlessOperationLock:!0}),e}finally{var l,c;null===(l=(c=this.metaMetricsController).bufferedEndTrace)||void 0===l||l.call(c,{name:be.TraceName.OnboardingResetPassword,data:{success:n}})}}finally{n()}}async syncKeyringEncryptionKey(){const e=await this.keyringController.exportEncryptionKey();await this.seedlessOnboardingController.storeKeyringEncryptionKey(e)}async checkIsSeedlessPasswordOutdated(e=!1){try{const t=this.onboardingController.getIsSocialLoginFlow(),{completedOnboarding:r}=this.onboardingController.state;if(!t||!r)return!1;return await this.seedlessOnboardingController.checkIsPasswordOutdated({skipCache:e})}catch(e){var t,r;throw null===(t=this.controllerMessenger)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,(0,Oe.createSentryError)("Failed to check if seedless password is outdated",e)),e}}async syncSeedPhrases(){try{if(!this.onboardingController.getIsSocialLoginFlow())throw new Error("Syncing seed phrases is only available for social login flow");const[e,...r]=await this.fetchAllSecretData();if(!e)throw new Error("No root SRP found");for(const e of r){if(!this.seedlessOnboardingController.getSecretDataBackupState(e.data,e.type)){if(e.type===H.SecretType.PrivateKey){await this.importAccountWithStrategy("privateKey",[(0,D.bytesToHex)(e.data)],{shouldCreateSocialBackup:!1,shouldSelectAccount:!1});continue}const r=this._convertEnglishWordlistIndicesToCodepoints(e.data),n=t.from(r).toString("utf8");await this.importMnemonicToVault(n,{shouldCreateSocialBackup:!1,shouldSelectAccount:!1,shouldImportSolanaAccount:!0})}}}catch(t){var e,r;throw b.default.error("error while syncing seed phrases",t),null===(e=this.controllerMessenger)||void 0===e||null===(r=e.captureException)||void 0===r||r.call(e,(0,Oe.createSentryError)("Error while syncing seed phrases",t)),t}}async addNewSeedPhraseBackup(e,r,n=!0){const i=t.from(e,"utf8"),o=this._convertMnemonicToWordlistIndices(i);if(n){const e=await this.seedlessOperationMutex.acquire();let t=!1;try{var s,a;null===(s=(a=this.metaMetricsController).bufferedTrace)||void 0===s||s.call(a,{name:be.TraceName.OnboardingAddSrp,op:be.TraceOperation.OnboardingSecurityOp}),await this.seedlessOnboardingController.addNewSecretData(o,H.SecretType.Mnemonic,{keyringId:r}),t=!0}catch(e){var l,c;throw null===(l=this.controllerMessenger)||void 0===l||null===(c=l.captureException)||void 0===c||c.call(l,(0,Oe.createSentryError)(be.TraceName.OnboardingAddSrpError,e)),e}finally{var u,d;null===(u=(d=this.metaMetricsController).bufferedEndTrace)||void 0===u||u.call(d,{name:be.TraceName.OnboardingAddSrp,data:{success:t}}),e()}}else this.seedlessOnboardingController.updateBackupMetadataState({keyringId:r,data:o,type:H.SecretType.Mnemonic})}async changePassword(e,t){const r=await this.seedlessOperationMutex.acquire(),n=this.onboardingController.getIsSocialLoginFlow();try{if(await this.keyringController.changePassword(e),n)try{await this.seedlessOnboardingController.changePassword(e,t);const r=await this.keyringController.exportEncryptionKey();await this.seedlessOnboardingController.storeKeyringEncryptionKey(r)}catch(e){var i,o;b.default.error("error while changing seedless-onboarding password",e),b.default.error("reverting keyring password change"),await this.keyringController.changePassword(t);const r=await this.keyringController.exportEncryptionKey();throw await this.seedlessOnboardingController.storeKeyringEncryptionKey(r),null===(i=this.controllerMessenger)||void 0===i||null===(o=i.captureException)||void 0===o||o.call(i,(0,Oe.createSentryError)("error while changing password for social login flow",e)),e}}catch(e){throw b.default.error("error while changing password",e),e}finally{r()}}async createNewVaultAndKeychain(e){const t=await this.createVaultMutex.acquire(),r=this.appStateController.getIsWalletResetInProgress();try{r&&(this.permissionController.clearState(),await this.snapController.clearState(),this.accountTreeController.clearState(),this.accountOrderController.updateHiddenAccountsList([]),this.txController.clearUnapprovedTransactions()),await this.keyringController.createNewVaultAndKeychain(e),this.appStateController.setIsWalletResetInProgress(!1);const t=this.keyringController.state.keyrings[0];return await this.accountsController.updateAccounts(),this.accountTreeController.reinit(),await this.forwardSelectedAccountGroupToSnapKeyring(await this.getSnapKeyring(),this.accountTreeController.getSelectedAccountGroup()),t}finally{t()}}getDiscoveryCountByProvider(e){const t={Bitcoin:0,Solana:0,Tron:0},r=Object.values(F.SolAccountType),n=Object.values(F.BtcAccountType),i=Object.values(F.TrxAccountType);for(const o of e)r.includes(o.type)&&(t.Solana+=1),n.includes(o.type)&&(t.Bitcoin+=1),i.includes(o.type)&&(t.Tron+=1);return t}async discoverAndCreateAccounts(e){(0,be.trace)({name:be.TraceName.DiscoverAccounts,op:be.TraceOperation.AccountDiscover});try{var t;const r=e||(null===(t=this.keyringController.state.keyrings[0])||void 0===t?void 0:t.metadata.id);if(!r)throw new Error("No keyring id to discover accounts for");await this.getSnapKeyring();const n=this.controllerMessenger.call("MultichainAccountService:getMultichainAccountWallet",{entropySource:r}),i=await n.discoverAccounts();return this.getDiscoveryCountByProvider(i)}catch(e){return b.default.warn(`Failed to add accounts with balance. ${e}`),{Bitcoin:0,Solana:0,Tron:0}}finally{(0,be.endTrace)({name:be.TraceName.DiscoverAccounts})}}async importMnemonicToVault(e,r={shouldCreateSocialBackup:!0,shouldSelectAccount:!0,shouldImportSolanaAccount:!0}){const{shouldCreateSocialBackup:n,shouldSelectAccount:i,shouldImportSolanaAccount:o}=r,s=await this.createVaultMutex.acquire();try{if(this.keyringController.getKeyringsByType(h.KeyringTypes.hd).some(r=>t.from(this._convertEnglishWordlistIndicesToCodepoints(r.mnemonic)).toString("utf8")===e))throw new Error("This Secret Recovery Phrase has already been imported.");const{id:r}=await this.keyringController.addNewKeyring(h.KeyringTypes.hd,{mnemonic:e,numberOfAccounts:1}),[s]=await this.keyringController.withKeyring({id:r},async({keyring:e})=>e.getAccounts());if(this.onboardingController.getIsSocialLoginFlow())try{await this.addNewSeedPhraseBackup(e,r,n)}catch(e){throw await this.keyringController.removeAccount(s),e}if(i){const e=this.accountsController.getAccountByAddress(s);this.accountsController.setSelectedAccount(e.id)}(async()=>{var e,t;let n;this.isMultichainAccountsFeatureState2Enabled()&&await this.accountTreeController.syncWithUserStorage(),n=this.isMultichainAccountsFeatureState2Enabled()&&o?await this.discoverAndCreateAccounts(r):await this._addAccountsWithBalance(r,o);const i=this.getHDEntropyIndex();this.metaMetricsController.trackEvent({event:ie.MetaMetricsEventName.ImportSecretRecoveryPhrase,properties:{status:"completed",hd_entropy_index:i,number_of_solana_accounts_discovered:null===(e=n)||void 0===e?void 0:e.Solana,number_of_bitcoin_accounts_discovered:null===(t=n)||void 0===t?void 0:t.Bitcoin}})})()}finally{s()}}async restoreSeedPhrasesToVault(e){if(!this.onboardingController.getIsSocialLoginFlow())return;const r=!1,n=!1;for(const i of e){if(this.seedlessOnboardingController.getSecretDataBackupState(i.data,i.type))continue;if(i.type===H.SecretType.PrivateKey){await this.importAccountWithStrategy("privateKey",[(0,D.bytesToHex)(i.data)],{shouldCreateSocialBackup:r,shouldSelectAccount:n});continue}const e=this._convertEnglishWordlistIndicesToCodepoints(i.data),o=t.from(e).toString("utf8");await this.importMnemonicToVault(o,{shouldCreateSocialBackup:r,shouldSelectAccount:n,shouldImportSolanaAccount:false})}}async restoreSocialBackupAndGetSeedPhrase(e){try{const[r,...n]=await this.fetchAllSecretData(e),i=this._convertEnglishWordlistIndicesToCodepoints(r.data),o=t.from(i).toString("utf8"),s=Array.from(t.from(o,"utf8").values());return await this.createNewVaultAndRestore(e,s),n.length>0&&await this.restoreSeedPhrasesToVault(n),o}catch(e){var r,n;if(e instanceof H.RecoveryError)throw new g.JsonRpcError(-32603,e.message,e.data);throw null===(r=this.controllerMessenger)||void 0===r||null===(n=r.captureException)||void 0===n||n.call(r,(0,Oe.createSentryError)("Failed to restore social backup and get seed phrase",e)),e}}async generateNewMnemonicAndAddToVault(){const e=await this.createVaultMutex.acquire();try{const{id:e}=await this.keyringController.addNewKeyring(h.KeyringTypes.hd),[t]=await this.keyringController.withKeyring({id:e},async({keyring:e})=>e.getAccounts()),r=this.accountsController.getAccountByAddress(t);return this.accountsController.setSelectedAccount(r.id),t}finally{e()}}async createNewVaultAndRestore(e,r){const n=await this.createVaultMutex.acquire();try{const{completedOnboarding:n}=this.onboardingController.state,i=t.from(r);this.permissionController.clearState(),await this.snapController.clearState(),this.accountTreeController.clearState(),this.accountOrderController.updateHiddenAccountsList([]),this.txController.clearUnapprovedTransactions(),n&&this.tokenDetectionController.enable();const o=this._convertMnemonicToWordlistIndices(i);if(await this.keyringController.createNewVaultAndRestore(e,o),this.appStateController.setIsWalletResetInProgress(!1),await this.accountsController.updateAccounts(),await this.multichainAccountService.init(),this.accountTreeController.reinit(),await this.forwardSelectedAccountGroupToSnapKeyring(await this.getSnapKeyring(),this.accountTreeController.getSelectedAccountGroup()),n){const{useExternalServices:e}=this.preferencesController.state;this.isMultichainAccountsFeatureState2Enabled()&&e?(await this.getSnapKeyring(),await this.accountTreeController.syncWithUserStorageAtLeastOnce(),await this.discoverAndCreateAccounts()):await this._addAccountsWithBalance()}if((0,Ae.getIsSeedlessOnboardingFeatureEnabled)()){if(this.onboardingController.getIsSocialLoginFlow()){const e=this.keyringController.state.keyrings[0].metadata.id;this.seedlessOnboardingController.updateBackupMetadataState({keyringId:e,data:o,type:H.SecretType.Mnemonic}),await this.syncKeyringEncryptionKey()}}}finally{n()}}async _getMultichainWalletSnapClient(e){const t=await this.getSnapKeyring(),r=this.controllerMessenger;return new Ce.MultichainWalletSnapClient(e,t,r)}async _addAccountsWithBalance(e,t=!0){(0,be.trace)({name:be.TraceName.DiscoverAccounts,op:be.TraceOperation.AccountDiscover});try{const i=Gr(Qr,this,Xr).call(this),o=e?{id:e}:{type:h.KeyringTypes.hd},{accounts:s,entropySource:a}=await this.keyringController.withKeyring(o,async({keyring:e,metadata:t})=>({accounts:await e.getAccounts(),entropySource:t.id}));let l=s[s.length-1];(0,be.trace)({name:be.TraceName.EvmDiscoverAccounts,op:be.TraceOperation.AccountDiscover});try{for(let e=s.length;;e++){if("0x0"===await this.getBalance(l,this.provider)){var r,n;await this.tokenDetectionController.detectTokens({chainIds:[i],selectedAddress:l});const t=null===(r=this.tokensController.state.allTokens)||void 0===r||null===(r=r[i])||void 0===r?void 0:r[l],o=null===(n=this.tokensController.state.allDetectedTokens)||void 0===n||null===(n=n[i])||void 0===n?void 0:n[l];if(0===((null==t?void 0:t.length)??0)&&0===((null==o?void 0:o.length)??0)){1!==e&&await this.removeAccount(l);break}}l=await this.keyringController.withKeyring(o,async({keyring:e})=>{const[t]=await e.addAccounts(1);return t})}}finally{(0,be.endTrace)({name:be.TraceName.EvmDiscoverAccounts,op:be.TraceOperation.AccountDiscover})}const c={Bitcoin:0,Solana:0,Tron:0},u=await this._getMultichainWalletSnapClient(Se.BITCOIN_WALLET_SNAP_ID),d=F.BtcScope.Mainnet,p=await u.discoverAccounts(a,d);if(c.Bitcoin=p.length,0===p.length&&await this._addSnapAccount(a,u,{scope:d,synchronize:!1}),t){const e=await this._getMultichainWalletSnapClient(ke.SOLANA_WALLET_SNAP_ID),t=F.SolScope.Mainnet,r=await e.discoverAccounts(a,t);c.Solana=r.length,0===r.length&&await this._addSnapAccount(a,e,{scope:t})}const f=await this._getMultichainWalletSnapClient(Pe.TRON_WALLET_SNAP_ID),g=F.TrxScope.Mainnet,m=await f.discoverAccounts(a,g);return c.Tron=m.length,0===m.length&&await this._addSnapAccount(a,f,{scope:g}),c}catch(e){return b.default.warn(`Failed to add accounts with balance. Error: ${e}`),{Bitcoin:0,Solana:0,Tron:0}}finally{(0,be.endTrace)({name:be.TraceName.DiscoverAccounts,op:be.TraceOperation.AccountDiscover})}}async _importAccountsWithBalances(){const{keyrings:e}=this.keyringController.state;for(const{metadata:t}of e){await this.keyringController.withKeyring({id:t.id},async({keyring:e})=>e.type===h.KeyringTypes.hd)&&(this.isMultichainAccountsFeatureState2Enabled()?(await this.getSnapKeyring(),await this.accountTreeController.syncWithUserStorageAtLeastOnce(),await this.discoverAndCreateAccounts(t.id)):await this._addAccountsWithBalance(t.id,true))}}async _addSnapAccount(e,t,r={}){let n=e;try{if(!n){n=await this.keyringController.withKeyring({type:h.KeyringTypes.hd},async({metadata:e})=>e.id)}return await t.createAccount({...r,entropySource:n},{displayConfirmation:!1,displayAccountNameSuggestion:!1,setSelectedAccount:!1})}catch(e){return b.default.warn(`Failed to add Snap account. Error: ${e}`),(0,J.captureException)(e),null}}_convertMnemonicToWordlistIndices(e){const t=e.toString().split(" ").map(e=>I.wordlist.indexOf(e));return new Uint8Array(new Uint16Array(t).buffer)}_convertEnglishWordlistIndicesToCodepoints(e){return t.from(Array.from(new Uint16Array(e.buffer)).map(e=>I.wordlist[e]).join(" "))}async getBalance(e,t){const r=this.accountTrackerController.state.accountsByChainId[Gr(Qr,this,Xr).call(this)],n=null==r?void 0:r[(0,_e.toChecksumHexAddress)(e)];if(n&&n.balance)return n.balance;try{return await t.request({method:"eth_getBalance",params:[e,"latest"]})||"0x0"}catch(e){throw b.default.error(e),e}}async submitPassword(e){await this.submitPasswordOrEncryptionKey({password:e})}async submitEncryptionKey(e){await this.submitPasswordOrEncryptionKey({encryptionKey:e})}async submitPasswordOrEncryptionKey({password:e,encryptionKey:t}){const r=this.onboardingController.getIsSocialLoginFlow();await this.offscreenPromise,t?await this.keyringController.submitEncryptionKey(t):(await this.keyringController.submitPassword(e),r&&await this.seedlessOnboardingController.submitPassword(e));try{await this.blockTracker.checkForLatestBlock()}catch(e){b.default.error("Error while unlocking extension.",e)}if(await this.accountsController.updateAccounts(),await this.multichainAccountService.init(),this.accountTreeController.init(),this.forwardSelectedAccountGroupToSnapKeyring(await this.getSnapKeyring(),this.accountTreeController.getSelectedAccountGroup()),this.isMultichainAccountsFeatureState2Enabled()){(async()=>{await this.multichainAccountService.resyncAccounts(),await this.multichainAccountService.alignWallets()})()}}async _loginUser(e){try{await this.submitPassword(e)}finally{this._startUISync()}}_startUISync(){this.emit("startUISync"),this.startUISync=!0,this.memStore.subscribe(this.sendUpdate.bind(this))}async submitEncryptionKeyFromSessionStorage(){try{const{loginToken:e,loginSalt:t}=await this.extension.storage.session.get(["loginToken","loginSalt"]);if(e&&t){const{vault:r}=this.keyringController.state;if(JSON.parse(r).salt!==t)return console.warn("submitEncryptionKey: Stored salt and vault salt do not match"),void await this.clearLoginArtifacts();await this.keyringController.submitEncryptionKey(e,t)}}catch(e){throw await this.clearLoginArtifacts(),e}}async clearLoginArtifacts(){await this.extension.storage.session.remove(["loginToken","loginSalt"])}async verifyPassword(e){await this.keyringController.verifyPassword(e)}getPrimaryKeyringMnemonic(){const[e]=this.keyringController.getKeyringsByType(ee.KeyringType.hdKeyTree);if(!e.mnemonic)throw new Error("Primary keyring mnemonic unavailable.");return e.mnemonic}getPrimaryKeyringMnemonicSeed(){const[e]=this.keyringController.getKeyringsByType(ee.KeyringType.hdKeyTree);if(!e.seed)throw new Error("Primary keyring mnemonic unavailable.");return e.seed}async attemptLedgerTransportCreation(){return await Gr(Qr,this,Yr).call(this,{name:Z.HardwareDeviceNames.ledger},async e=>await e.attemptMakeApp())}async getAppNameAndVersion(){return await Gr(Qr,this,Yr).call(this,{name:Z.HardwareDeviceNames.ledger},async e=>await e.getAppNameAndVersion())}async connectHardware(e,t,r){return Gr(Qr,this,Yr).call(this,{name:e,hdPath:r},async e=>{let r=[];switch(t){case-1:r=await e.getPreviousPage();break;case 1:r=await e.getNextPage();break;default:r=await e.getFirstPage()}return r})}async checkHardwareStatus(e,t){return Gr(Qr,this,Yr).call(this,{name:e,hdPath:t},async e=>e.isUnlocked())}async getHardwareTypeForMetric(e){return await this.keyringController.withKeyring({address:e},({keyring:e})=>Z.KEYRING_DEVICE_PROPERTY_MAP[e.type])}async forgetDevice(e){return Gr(Qr,this,Yr).call(this,{name:e},async e=>{for(const t of await e.getAccounts())this._onAccountRemoved(t);return e.forgetDevice(),!0})}async getAccountType(e){const t=await this.keyringController.getAccountKeyringType(e);switch(t){case ee.KeyringType.trezor:case ee.KeyringType.oneKey:case ee.KeyringType.lattice:case ee.KeyringType.qr:case ee.KeyringType.ledger:return Z.KEYRING_DEVICE_PROPERTY_MAP[t];case ee.KeyringType.imported:return"imported";case ee.KeyringType.snap:return"snap";default:return"MetaMask"}}async getDeviceModel(e){return this.keyringController.withKeyring({address:e},async({keyring:e})=>{switch(e.type){case ee.KeyringType.trezor:case ee.KeyringType.oneKey:return e.getModel();case ee.KeyringType.qr:return e.getName();case ee.KeyringType.ledger:return Z.HardwareDeviceNames.ledger;case ee.KeyringType.lattice:return Z.HardwareDeviceNames.lattice;default:return undefined}})}getAccountLabel(e,t,r){return`${e[0].toUpperCase()}${e.slice(1)} ${parseInt(t,10)+1} ${r||""}`.trim()}async unlockHardwareWalletAccount(e,t,r,n){const{address:i}=await Gr(Qr,this,Yr).call(this,{name:t,hdPath:r},async r=>{r.setAccountToUnlock(e);const[i]=await r.addAccounts(1);return{address:(0,x.normalize)(i),label:this.getAccountLabel(t===Z.HardwareDeviceNames.qr?r.getName():t,e,n)}});this.preferencesController.setSelectedAddress(i);const o=this.accountsController.listAccounts(),{identities:s}=this.preferencesController.state;return{unlockedAccount:i,identities:s,accounts:o}}async addNewAccount(e,t){const r=await this.keyringController.getAccounts(),n=t?{id:t}:{type:h.KeyringTypes.hd},i=await this.keyringController.withKeyring(n,async({keyring:t})=>{if(t.type!==h.KeyringTypes.hd)throw new Error("Cannot add account to non-HD keyring");const n=await t.getAccounts();if(e&&e!==n.length){if(e>n.length)throw new Error("Account out of sequence");const t=n[e];if(!t)throw new Error(`Can't find account at index ${e}`);return t}const[i]=await t.addAccounts(1);if(r.includes(i))throw await t.removeAccount(i),new Error(`Cannot add duplicate ${i} account`);return i});return r.includes(i)||this.preferencesController.setSelectedAddress(i),i}async getSeedPhrase(e,t){return this._convertEnglishWordlistIndicesToCodepoints(await this.keyringController.exportSeedPhrase(e,t))}async resetAccount(){const e=this.accountsController.getSelectedAccount().address,t=Gr(Qr,this,Xr).call(this);return this.txController.wipeTransactions({address:e,chainId:t}),this.smartTransactionsController.wipeSmartTransactions({address:e,ignoreNetwork:!1}),this.bridgeStatusController.wipeBridgeStatus({address:e,ignoreNetwork:!1}),this.networkController.resetConnection(),e}captureKeyringTypesWithMissingIdentities(e=[],t=[]){const r=t.filter(t=>!e.some(e=>e.address.toLowerCase()===t.toLowerCase())).map(e=>this.keyringController.getAccountKeyringType(e)),n=e.length,i=this.accountTrackerController.state.accountsByChainId[Gr(Qr,this,Xr).call(this)],o=Object.keys(i||{}).length;(0,J.captureException)(new Error(`Attempt to get permission specifications failed because their were ${t.length} accounts, but ${n} identities, and the ${r} keyrings included accounts with missing identities. Meanwhile, there are ${o} accounts in the account tracker.`))}sortEvmAccountsByLastSelected(e){const t=this.accountsController.listAccounts();return this.sortAddressesWithInternalAccounts(e,t)}sortMultichainAccountsByLastSelected(e){const t=e=>{var t;const r=this.accountsController.getAccountByAddress(e);if(!r)return undefined;const n=this.multichainAccountService.getAccountContext(r.id);return null==n||null===(t=n.group)||void 0===t||null===(t=t.get({scopes:[F.EthScope.Eoa]}))||void 0===t?void 0:t.metadata.lastSelected};return e.sort((e,r)=>(t(r)??0)-(t(e)??0))}sortAddressesWithInternalAccounts(e,t){return e.sort((r,n)=>{const i=t.find(e=>e.address.toLowerCase()===r.toLowerCase()),o=t.find(e=>e.address.toLowerCase()===n.toLowerCase());if(!i)throw this.captureKeyringTypesWithMissingIdentities(t,e),new Error(`Missing identity for address: "${r}".`);if(!o)throw this.captureKeyringTypesWithMissingIdentities(t,e),new Error(`Missing identity for address: "${n}".`);return i.metadata.lastSelected===o.metadata.lastSelected?0:i.metadata.lastSelected===undefined?1:o.metadata.lastSelected===undefined?-1:o.metadata.lastSelected-i.metadata.lastSelected})}getPermittedAccounts(e){let t;try{t=this.permissionController.getCaveat(e,K.Caip25EndowmentPermissionName,K.Caip25CaveatType)}catch(e){if(e instanceof E.PermissionDoesNotExistError)return[];throw e}const r=(0,K.getEthAccounts)(t.value);return this.sortEvmAccountsByLastSelected(r)}async handleDefiReferral(e,t,r){var n;if(!(null===(n=this.remoteFeatureFlagController)||void 0===n||null===(n=n.state)||void 0===n||null===(n=n.remoteFeatureFlags)||void 0===n||null===(n=n.extensionUxDefiReferralPartners)||void 0===n?void 0:n[e.id]))return;const i=this.getPermittedAccounts(e.origin);if(0===i.length)return;if(this.approvalController.has({origin:e.origin,type:e.approvalType}))return;const o=i[0],s=this.preferencesController.state.referrals[e.id],a=s[o],l=Object.keys(s).filter(e=>s[e]===Xe.ReferralStatus.Declined),c=a===undefined,u=a===Xe.ReferralStatus.Approved;if(c)try{this.metaMetricsController.trackEvent({event:ie.MetaMetricsEventName.ReferralViewed,category:ie.MetaMetricsEventCategory.Referrals,properties:{url:e.origin,trigger_type:r}});const n=await this.approvalController.add({origin:e.origin,type:e.approvalType,requestData:{selectedAddress:o},shouldShowRequest:r===nt.ReferralTriggerType.NewConnection});null!=n&&n.approved?(this._handleDefiReferralApprovedAccount(e,o,i,l),await this._handleDefiReferralRedirect(e,t,o)):this.preferencesController.addReferralDeclinedAccount(e.id,o),this.metaMetricsController.trackEvent({event:ie.MetaMetricsEventName.ReferralConfirmButtonClicked,category:ie.MetaMetricsEventCategory.Referrals,properties:{opt_in:Boolean(null==n?void 0:n.approved),url:e.origin}})}catch(e){if(e.code===g.errorCodes.provider.userRejectedRequest)return;throw e}u&&await this._handleDefiReferralRedirect(e,t,o)}async _handleDefiReferralRedirect(e,t,r){await this._updateDefiReferralUrl(e,t),this.preferencesController.addReferralPassedAccount(e.id,r)}_handleDefiReferralApprovedAccount(e,t,r,n){0===n.length?this.preferencesController.setAccountsReferralApproved(e.id,r):(this.preferencesController.addReferralApprovedAccount(e.id,t),r.forEach(t=>{n.includes(t)&&this.preferencesController.removeReferralDeclinedAccount(e.id,t)}))}async _updateDefiReferralUrl(e,t){try{const{url:r}=await o.default.tabs.get(t),{search:n}=new URL(r||""),i=`${e.referralUrl}${n}`;await o.default.tabs.update(t,{url:i})}catch(t){b.default.error(`Failed to update URL to ${e.name} referral page: `,t)}}removeAllScopePermissions(e){this.permissionController.updatePermissionsByCaveat(K.Caip25CaveatType,t=>K.Caip25CaveatMutators[K.Caip25CaveatType].removeScope(t,e))}removeAllAccountPermissions(e){this.permissionController.updatePermissionsByCaveat(K.Caip25CaveatType,t=>K.Caip25CaveatMutators[K.Caip25CaveatType].removeAccount(t,e))}async removeAccount(e){return this._onAccountRemoved(e),await this.keyringController.removeAccount(e),e}async importAccountWithStrategy(e,t,r={shouldCreateSocialBackup:!0,shouldSelectAccount:!0}){const{shouldCreateSocialBackup:n,shouldSelectAccount:i}=r,o=await this.keyringController.importAccountWithStrategy(e,t);if(this.onboardingController.getIsSocialLoginFlow()){const{id:e,privateKey:t}=await this.keyringController.withKeyring({address:o},async({keyring:e,metadata:t})=>{const r=await e.exportAccount(o);return{id:t.id,privateKey:r}});try{await this.addNewPrivateKeyBackup(t,e,n)}catch(e){throw await this.keyringController.removeAccount(o),e}}i&&this.preferencesController.setSelectedAddress(o)}async addNewPrivateKeyBackup(e,t,r=!0){const n=(0,D.hexToBytes)((0,D.add0x)(e));if(r){const e=await this.seedlessOperationMutex.acquire();try{await this.seedlessOnboardingController.addNewSecretData(n,H.SecretType.PrivateKey,{keyringId:t})}catch(e){throw b.default.error("Error adding new private key backup",e),e}finally{e()}}else this.seedlessOnboardingController.updateBackupMetadataState({keyringId:t,data:n,type:H.SecretType.PrivateKey})}async requestPermissionApproval(e,t,r={}){const n=(0,k.nanoid)();return this.approvalController.addAndShowApprovalRequest({id:n,origin:e,requestData:{metadata:{id:n,origin:e},permissions:t,...r},type:E.MethodNames.RequestPermissions})}async requestApprovalPermittedChainsPermission(e,t){const r=(0,K.setPermittedEthChainIds)({requiredScopes:{},optionalScopes:{},sessionProperties:{},isMultichainOrigin:!1},[t]);await this.permissionController.requestPermissionsIncremental({origin:e},{[K.Caip25EndowmentPermissionName]:{caveats:[{type:K.Caip25CaveatType,value:r}]}})}getNonEvmSupportedMethods(e){return this.controllerMessenger.call("MultichainRouter:getSupportedMethods",e)}notifyNonEVMAccountChangedForCurrentAccount(e){let t;try{t=this.permissionController.getCaveat(e,K.Caip25EndowmentPermissionName,K.Caip25CaveatType)}catch{}if(!t)return;const r=(0,K.getSessionScopes)(t.value,{getNonEvmSupportedMethods:this.getNonEvmSupportedMethods.bind(this)});ye.NON_EVM_ACCOUNT_CHANGED_CONFIGS.forEach(({network:n,chains:i,notificationProperty:o})=>{var s;if(!(null===(s=t.value.sessionProperties)||void 0===s?void 0:s[o]))return;const a=i.map(e=>r[e]).filter(e=>e!==undefined);if(0===a.length)return;const l=new Set(a.flatMap(e=>e.accounts)),c=Array.from(l).map(e=>{const{address:t}=(0,D.parseCaipAccountId)(e);return t}),[u]=this.sortMultichainAccountsByLastSelected(c);u&&this._notifyMultichainAccountChange(e,[u],n)})}getAddTransactionRequest({transactionParams:e,transactionOptions:t,dappRequest:r,requestContext:n,...i}){var o;const s=(null==n?void 0:n.get("networkClientId"))??(null==t?void 0:t.networkClientId),{chainId:a}=this.networkController.getNetworkConfigurationByNetworkClientId(s);return{internalAccounts:this.accountsController.listAccounts(),dappRequest:r,requestContext:n,networkClientId:s,selectedAccount:this.accountsController.getAccountByAddress(e.from),transactionController:this.txController,transactionOptions:t,transactionParams:e,userOperationController:this.userOperationController,chainId:a,ppomController:this.ppomController,securityAlertsEnabled:null===(o=this.preferencesController.state)||void 0===o?void 0:o.securityAlertsEnabled,updateSecurityAlertResponse:this.updateSecurityAlertResponse.bind(this),getSecurityAlertResponse:this.appStateController.getAddressSecurityAlertResponse.bind(this.appStateController),addSecurityAlertResponse:this.appStateController.addAddressSecurityAlertResponse.bind(this.appStateController),getSecurityAlertsConfig:this.getSecurityAlertsConfig.bind(this),...i}}async createCancelTransaction(e,t,r){await this.txController.stopTransaction(e,t,r);return this.getState()}async createSpeedUpTransaction(e,t,r){await this.txController.speedUpTransaction(e,t,r);return this.getState()}async estimateGas(e){return new Promise((t,r)=>{this.provider.request({method:"eth_estimateGas",params:[e]}).then(e=>t(e.toString(16))).catch(e=>r(e))})}async updateSecurityAlertResponse(e,t,r){return await(0,ut.updateSecurityAlertResponse)({appStateController:this.appStateController,messenger:this.controllerMessenger,method:e,securityAlertId:t,securityAlertResponse:r,signatureController:this.signatureController,transactionController:this.txController})}getHDEntropyIndex(){const e=this.accountsController.getSelectedAccount(),t=this.keyringController.state.keyrings.filter(e=>e.type===h.KeyringTypes.hd).findIndex(t=>t.accounts.includes(e.address));return-1===t?undefined:t}markPasswordForgotten(){this.preferencesController.setPasswordForgotten(!0),this.sendUpdate()}unMarkPasswordForgotten(){this.preferencesController.setPasswordForgotten(!1),this.sendUpdate()}setupUntrustedCommunicationEip1193({connectionStream:e,sender:t,subjectType:r}){if(t.url&&this.onboardingController.state.completedOnboarding&&this.preferencesController.state.usePhishDetect){const{hostname:r}=new URL(t.url);this.phishingController.maybeUpdateState();const n=this.phishingController.test(t.url);if(null!=n&&n.result)return this.sendPhishingWarning(e,r),void this.metaMetricsController.trackEvent({event:ie.MetaMetricsEventName.PhishingPageDisplayed,category:ie.MetaMetricsEventCategory.Phishing,properties:{url:r}})}let n;n=r||(t.id&&t.id!==this.extension.runtime.id?E.SubjectType.Extension:E.SubjectType.Website);const i=(0,Ye.setupMultiplex)(e);i.ignoreStream(ct.METAMASK_CAIP_MULTICHAIN_PROVIDER),this.setupProviderConnectionEip1193(i.createStream(ct.METAMASK_EIP_1193_PROVIDER),t,n),t.url&&this.setupPublicConfig(i.createStream("publicConfig"))}setupUntrustedCommunicationCaip({connectionStream:e,sender:t,subjectType:r}){let n;n=r||(t.id&&t.id!==this.extension.runtime.id?E.SubjectType.Extension:E.SubjectType.Website),this.setupProviderConnectionCaip(e,t,n)}setupTrustedCommunication(e,t){const r=(0,Ye.setupMultiplex)(e);this.setupControllerConnection(r.createStream("controller")),this.setupProviderConnectionEip1193(r.createStream("provider"),t,E.SubjectType.Internal)}setupPhishingCommunication({connectionStream:e}){const{usePhishDetect:t}=this.preferencesController.state;if(!t)return;const r=(0,Ye.setupMultiplex)(e).createStream("metamask-phishing-safelist");r.on("data",(0,et.default)({safelistPhishingDomain:this.safelistPhishingDomain.bind(this),backToSafetyPhishingWarning:this.backToSafetyPhishingWarning.bind(this)},r))}setUpCookieHandlerCommunication({connectionStream:e}){const{metaMetricsId:t,dataCollectionForMarketing:r,participateInMetaMetrics:n}=this.metaMetricsController.state;if(t&&r&&n){const t=(0,Ye.setupMultiplex)(e).createStream(ct.METAMASK_COOKIE_HANDLER);t.on("data",(0,et.default)({getCookieFromMarketingPage:this.getCookieFromMarketingPage.bind(this)},t))}}getCookieFromMarketingPage(e){const{ga_client_id:t}=e;this.metaMetricsController.setMarketingCampaignCookieId(t)}sendPhishingWarning(e,t){(0,Ye.setupMultiplex)(e).createStream("phishing").write({hostname:t})}setupControllerConnection(e){const t=new gt.PatchStore(this.memStore);let r=!1;const n=()=>{if(!(0,Ye.isStreamWritable)(e)||!r)return;const n=t.flushPendingPatches();e.write({jsonrpc:"2.0",method:"sendUpdate",params:[n]})},o={...this.getApi(),...this.controllerApi,startPatches:()=>{r=!0,n()},getStatePatches:()=>t.flushPendingPatches()};this.on("update",n),this.activeControllerConnections+=1,this.emit("controllerConnectionChanged",this.activeControllerConnections),e.on("data",(0,et.default)(o,e));const s=()=>{(0,Ye.isStreamWritable)(e)&&e.write({jsonrpc:"2.0",method:"startUISync"})};this.startUISync?s():this.once("startUISync",s);const a=()=>{e.mmFinished||(this.activeControllerConnections-=1,this.emit("controllerConnectionChanged",this.activeControllerConnections),e.mmFinished=!0,this.removeListener("update",n),t.destroy())};e.mmFinished=!1,(0,i.finished)(e,a),e.once("close",a),e.once("end",a)}setupProviderConnectionEip1193(e,t,r){let n,o;n=r===E.SubjectType.Internal?ne.ORIGIN_METAMASK:r===E.SubjectType.Snap?t.snapId:new URL(t.url).origin,t.id&&t.id!==this.extension.runtime.id&&this.subjectMetadataController.addSubjectMetadata({origin:n,extensionId:t.id,subjectType:E.SubjectType.Extension}),t.tab&&t.tab.id&&(o=t.tab.id);let s=n;t.tab&&t.tab.url&&(s=new URL(t.tab.url).origin);const l=this.setupProviderEngineEip1193({origin:n,sender:t,subjectType:r,tabId:o,mainFrameOrigin:s}),c=(0,qe.default)(),u=(0,a.createEngineStream)({engine:l}),d=this.addConnection(n,{tabId:o,apiType:Wr,engine:l});(0,i.pipeline)(e,c,u,e,e=>{var t;l.destroy(),d&&this.removeConnection(n,d),!e||null!==(t=e.message)&&void 0!==t&&t.match("Premature close")||b.default.error(e)}),r!==E.SubjectType.Internal&&this._notifyChainChangeForConnection({engine:l},n)}setupProviderConnectionCaip(e,t,r){let n,o;n=r===E.SubjectType.Internal?ne.ORIGIN_METAMASK:r===E.SubjectType.Snap?t.snapId:new URL(t.url).origin,t.id&&t.id!==this.extension.runtime.id&&this.subjectMetadataController.addSubjectMetadata({origin:n,extensionId:t.id,subjectType:E.SubjectType.Extension}),t.tab&&t.tab.id&&(o=t.tab.id);const s=this.setupProviderEngineCaip({origin:n,sender:t,subjectType:r,tabId:o}),l=(0,qe.default)(),c=(0,a.createEngineStream)({engine:s}),u=this.addConnection(n,{tabId:o,apiType:zr,engine:s});setTimeout(()=>this.notifyNonEVMAccountChangedForCurrentAccount(n),500),(0,i.pipeline)(e,l,c,e,e=>{var t;s.destroy(),u&&this.removeConnection(n,u),!e||null!==(t=e.message)&&void 0!==t&&t.match("Premature close")||b.default.error(e)})}setupCommonMiddlewareHooks(e){return{addSubjectMetadata:this.subjectMetadataController.addSubjectMetadata.bind(this.subjectMetadataController),getProviderState:this.getProviderState.bind(this),handleWatchAssetRequest:this.handleWatchAssetRequest.bind(this),requestUserApproval:this.approvalController.addAndShowApprovalRequest.bind(this.approvalController),getCaveat:({target:t,caveatType:r})=>{try{return this.permissionController.getCaveat(e,t,r)}catch(e){if(!(e instanceof E.PermissionDoesNotExistError))throw e}return undefined},requestPermittedChainsPermissionIncrementalForOrigin:t=>(0,K.requestPermittedChainsPermissionIncremental)({...t,origin:e,hooks:{requestPermissionsIncremental:this.permissionController.requestPermissionsIncremental.bind(this.permissionController),grantPermissionsIncremental:this.permissionController.grantPermissionsIncremental.bind(this.permissionController)}}),addNetwork:this._addNetworkAndSetActive.bind(this),updateNetwork:this.networkController.updateNetwork.bind(this.networkController),setActiveNetwork:async t=>{this.permissionController.hasPermission(e,K.Caip25EndowmentPermissionName)?this.selectedNetworkController.setNetworkClientIdForDomain(e,t):await this.networkController.setActiveNetwork(t)},getNetworkConfigurationByChainId:this.networkController.getNetworkConfigurationByChainId.bind(this.networkController),setTokenNetworkFilter:e=>{const{tokenNetworkFilter:t}=this.preferencesController.getPreferences();e&&1===Object.keys(t).length&&this.preferencesController.setPreference("tokenNetworkFilter",{[e]:!0})},setEnabledNetworks:e=>{this.networkEnablementController.enableNetwork(e)},getEnabledNetworks:e=>this.networkEnablementController.state.enabledNetworkMap[e]||{},getCurrentChainIdForDomain:this.getCurrentChainIdForDomain.bind(this),getWeb3ShimUsageState:this.alertController.getWeb3ShimUsageState.bind(this.alertController),setWeb3ShimUsageRecorded:this.alertController.setWeb3ShimUsageRecorded.bind(this.alertController),rejectApprovalRequestsForOrigin:()=>this.rejectOriginPendingApprovals(e)}}setupProviderEngineEip1193({origin:e,subjectType:t,sender:r,tabId:n,mainFrameOrigin:i}){var o;const a=new s.JsonRpcEngine;a.push((0,Ge.default)({origin:e})),i&&a.push((0,ze.default)({mainFrameOrigin:i})),a.push((0,A.createSelectedNetworkMiddleware)(this.controllerMessenger));const l=this.selectedNetworkController.getProviderAndBlockTracker(e),c=(0,p.default)(l),d=(0,f.default)(l);d.events.on("notification",e=>a.emit("notification",e)),n&&a.push((0,Qe.default)({tabId:n})),a.push((0,He.default)({origin:e})),a.push(this.permissionLogController.createMiddleware()),a.push((0,pt.default)()),a.push((0,ft.default)({getThrottledOriginState:this.appStateController.getThrottledOriginState.bind(this.appStateController),updateThrottledOriginState:this.appStateController.updateThrottledOriginState.bind(this.appStateController)})),a.push(this.eip7715BlockingMiddleware),a.push((0,Be.createPPOMMiddleware)(this.ppomController,this.preferencesController,this.networkController,this.appStateController,this.accountsController,this.updateSecurityAlertResponse.bind(this),this.getSecurityAlertsConfig.bind(this))),a.push((0,Le.createDappSwapMiddleware)({fetchQuotes:this.controllerMessenger.call.bind(this.controllerMessenger,`${N.BRIDGE_CONTROLLER_NAME}:${N.BridgeBackgroundAction.FETCH_QUOTES}`),setDappSwapComparisonData:this.appStateController.setDappSwapComparisonData.bind(this.appStateController),getNetworkConfigurationByNetworkClientId:this.networkController.getNetworkConfigurationByNetworkClientId.bind(this.networkController),dappSwapMetricsFlag:null===(o=this.remoteFeatureFlagController)||void 0===o||null===(o=o.state)||void 0===o||null===(o=o.remoteFeatureFlags)||void 0===o?void 0:o.dappSwapMetrics})),a.push((0,Ue.createTrustSignalsMiddleware)(this.networkController,this.appStateController,this.phishingController,this.preferencesController,this.getPermittedAccounts.bind(this)));const g=new T.Messenger({namespace:"SnapAndHardwareMessenger",parent:this.controllerMessenger});this.controllerMessenger.delegate({messenger:g,actions:["KeyringController:getKeyringForAccount","KeyringController:getState","SnapController:get","AccountsController:getSelectedAccount"]}),a.push((0,ot.default)({getAccountType:this.getAccountType.bind(this),getDeviceModel:this.getDeviceModel.bind(this),getHDEntropyIndex:this.getHDEntropyIndex.bind(this),getHardwareTypeForMetric:this.getHardwareTypeForMetric.bind(this),snapAndHardwareMessenger:g,appStateController:this.appStateController,metaMetricsController:this.metaMetricsController})),a.push((0,Ve.createUnsupportedMethodMiddleware)()),t===E.SubjectType.Snap&&(0,Me.isSnapPreinstalled)(e)&&a.push((0,M.createPreinstalledSnapsMiddleware)({getPermissions:this.permissionController.getPermissions.bind(this.permissionController,e),getAllEvmAccounts:()=>this.controllerMessenger.call("AccountsController:listAccounts").map(e=>e.address),grantPermissions:t=>this.controllerMessenger.call("PermissionController:grantPermissions",{approvedPermissions:t,subject:{origin:e}})})),a.push((0,Ve.createEthAccountsMethodMiddleware)({getAccounts:this.getPermittedAccounts.bind(this,e)})),t!==E.SubjectType.Internal&&(a.push(this.permissionController.createPermissionMiddleware({origin:e})),a.push((0,nt.createDefiReferralMiddleware)((e,t,r)=>this.handleDefiReferral(e,t,r)))),t===E.SubjectType.Website&&a.push((0,Je.default)({location:r.url,registerOnboarding:this.onboardingController.registerOnboarding}));const m=new T.Messenger({namespace:"EvmMethodsToNonEvmAccountFilterMessenger",parent:this.controllerMessenger});return this.controllerMessenger.delegate({messenger:m,actions:["AccountsController:getSelectedAccount"]}),a.push((0,dt.default)({messenger:m})),a.push((0,Ve.createEip1193MethodMiddleware)({subjectType:t,...this.setupCommonMiddlewareHooks(e),metamaskState:this.getState(),sendMetrics:this.metaMetricsController.trackEvent.bind(this.metaMetricsController),getAccounts:this.getPermittedAccounts.bind(this,e),getCaip25PermissionFromLegacyPermissionsForOrigin:e=>(0,K.getCaip25PermissionFromLegacyPermissions)(e),getPermissionsForOrigin:this.permissionController.getPermissions.bind(this.permissionController,e),requestPermissionsForOrigin:t=>this.permissionController.requestPermissions({origin:e},t,{metadata:{isEip1193Request:!0}}),revokePermissionsForOrigin:t=>{try{this.permissionController.revokePermissions({[e]:t})}catch(e){console.log(e)}},updateCaveat:this.permissionController.updateCaveat.bind(this.permissionController,e),hasApprovalRequestsForOrigin:()=>this.approvalController.has({origin:e})})),a.push((0,M.createSnapsMethodMiddleware)(t===E.SubjectType.Snap,{clearSnapState:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:clearSnapState",e),getUnlockPromise:this.controllerMessenger.call.bind(this.controllerMessenger,"AppStateController:getUnlockPromise"),getSnaps:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:getPermitted",e),requestPermissions:async t=>await this.permissionController.requestPermissions({origin:e},t),getPermissions:this.permissionController.getPermissions.bind(this.permissionController,e),getSnapFile:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:getFile",e),getSnapState:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:getSnapState",e),updateSnapState:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:updateSnapState",e),installSnaps:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:install",e),invokeSnap:this.permissionController.executeRestrictedMethod.bind(this.permissionController,e,te.RestrictedMethods.wallet_snap),getIsLocked:()=>{const{isUnlocked:e}=this.controllerMessenger.call("KeyringController:getState");return!e},getIsActive:()=>{const{isUnlocked:e}=this.controllerMessenger.call("KeyringController:getState");return Boolean(this._isClientOpen&&e)},getVersion:()=>"13.16.4",getInterfaceState:(...t)=>this.controllerMessenger.call("SnapInterfaceController:getInterface",e,...t).state,getInterfaceContext:(...t)=>this.controllerMessenger.call("SnapInterfaceController:getInterface",e,...t).context,createInterface:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapInterfaceController:createInterface",e),updateInterface:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapInterfaceController:updateInterface",e),resolveInterface:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapInterfaceController:resolveInterface",e),getSnap:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:get"),trackError:e=>{var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r?void 0:r.call(t,e)},trackEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController),getAllSnaps:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:getAll"),openWebSocket:this.controllerMessenger.call.bind(this.controllerMessenger,"WebSocketService:open",e),closeWebSocket:this.controllerMessenger.call.bind(this.controllerMessenger,"WebSocketService:close",e),getWebSockets:this.controllerMessenger.call.bind(this.controllerMessenger,"WebSocketService:getAll",e),sendWebSocketMessage:this.controllerMessenger.call.bind(this.controllerMessenger,"WebSocketService:sendMessage",e),getCurrencyRate:e=>{const t=this.multichainRatesController.state.rates[e],{fiatCurrency:r}=this.multichainRatesController.state;return t?{...t,currency:r}:undefined},getEntropySources:()=>this.controllerMessenger.call("KeyringController:getState").keyrings.map((e,t)=>e.type===h.KeyringTypes.hd?{id:e.metadata.id,name:e.metadata.name,type:"mnemonic",primary:0===t}:null).filter(Boolean),hasPermission:this.permissionController.hasPermission.bind(this.permissionController,e),scheduleBackgroundEvent:t=>this.controllerMessenger.call("CronjobController:schedule",{...t,snapId:e}),cancelBackgroundEvent:this.controllerMessenger.call.bind(this.controllerMessenger,"CronjobController:cancel",e),getBackgroundEvents:this.controllerMessenger.call.bind(this.controllerMessenger,"CronjobController:get",e),getNetworkConfigurationByChainId:this.controllerMessenger.call.bind(this.controllerMessenger,"NetworkController:getNetworkConfigurationByChainId"),getNetworkClientById:this.controllerMessenger.call.bind(this.controllerMessenger,"NetworkController:getNetworkClientById"),startTrace:e=>{const{_isStandaloneSpan:t,...r}=(0,be.trace)(e);return r},endTrace:be.endTrace,handleSnapRpcRequest:t=>this.handleSnapRequest({...t,origin:e}),getAllowedKeyringMethods:(0,je.keyringSnapPermissionsBuilder)(this.subjectMetadataController,e)})),a.push(c),a.push(d.middleware),a.push(this.metamaskMiddleware),a.push(this.eip5792Middleware),t===E.SubjectType.Snap&&(0,Me.isSnapPreinstalled)(e)&&a.push(this.eip7702Middleware),a.push((0,u.providerAsMiddleware)(l.provider)),a}setupProviderEngineCaip({origin:e,sender:t,subjectType:r,tabId:n}){const i=new s.JsonRpcEngine;i.push((0,Ge.default)({origin:e})),n&&i.push((0,Qe.default)({tabId:n})),i.push((0,He.default)({origin:e})),i.push((e,t,r,n)=>[ne.MESSAGE_TYPE.WALLET_CREATE_SESSION,ne.MESSAGE_TYPE.WALLET_INVOKE_METHOD,ne.MESSAGE_TYPE.WALLET_GET_SESSION,ne.MESSAGE_TYPE.WALLET_REVOKE_SESSION].includes(e.method)?r():n(g.rpcErrors.methodNotFound({data:{method:e.method}})));const o=new T.Messenger({namespace:"SnapAndHardwareMessenger",parent:this.controllerMessenger});this.controllerMessenger.delegate({messenger:o,actions:["KeyringController:getKeyringForAccount","KeyringController:getState","SnapController:get","AccountsController:getSelectedAccount"]}),i.push((0,ot.default)({getAccountType:this.getAccountType.bind(this),getDeviceModel:this.getDeviceModel.bind(this),getHDEntropyIndex:this.getHDEntropyIndex.bind(this),getHardwareTypeForMetric:this.getHardwareTypeForMetric.bind(this),snapAndHardwareMessenger:o,appStateController:this.appStateController,metaMetricsController:this.metaMetricsController})),i.push(L.multichainMethodCallValidatorMiddleware);const a=(0,Ve.makeMethodMiddlewareMaker)([L.walletRevokeSession,L.walletGetSession,L.walletInvokeMethod,L.walletCreateSession]);i.push(a({findNetworkClientIdByChainId:this.networkController.findNetworkClientIdByChainId.bind(this.networkController),listAccounts:this.accountsController.listAccounts.bind(this.accountsController),requestPermissionsForOrigin:(t,r={})=>this.permissionController.requestPermissions({origin:e},t,r),getCaveatForOrigin:this.permissionController.getCaveat.bind(this.permissionController,e),updateCaveat:this.permissionController.updateCaveat.bind(this.permissionController,e),getSelectedNetworkClientId:()=>this.networkController.state.selectedNetworkClientId,revokePermissionForOrigin:this.permissionController.revokePermission.bind(this.permissionController,e),getNonEvmSupportedMethods:this.getNonEvmSupportedMethods.bind(this),isNonEvmScopeSupported:this.controllerMessenger.call.bind(this.controllerMessenger,"MultichainRouter:isSupportedScope"),handleNonEvmRequestForOrigin:t=>this.controllerMessenger.call("MultichainRouter:handleRequest",{...t,origin:e}),getNonEvmAccountAddresses:this.controllerMessenger.call.bind(this.controllerMessenger,"MultichainRouter:getSupportedAccounts"),trackSessionCreatedEvent:e=>this.metaMetricsController.trackEvent({event:ie.MetaMetricsEventName.PermissionsRequested,properties:{api_source:ie.MetaMetricsRequestedThrough.MultichainApi,method:ne.MESSAGE_TYPE.WALLET_CREATE_SESSION,chain_id_list:(0,K.getAllScopesFromCaip25CaveatValue)(e)}})})),i.push((0,Ve.createUnsupportedMethodMiddleware)(new Set([...X.UNSUPPORTED_RPC_METHODS,"eth_requestAccounts","eth_accounts"]))),r===E.SubjectType.Website&&i.push((0,Je.default)({location:t.url,registerOnboarding:this.onboardingController.registerOnboarding})),i.push((0,Ve.createMultichainMethodMiddleware)({subjectType:r,...this.setupCommonMiddlewareHooks(e)})),i.push(this.metamaskMiddleware),i.push(this.eip5792Middleware);try{const t=this.permissionController.getCaveat(e,K.Caip25EndowmentPermissionName,K.Caip25CaveatType),r=(0,K.getSessionScopes)(t.value,{getNonEvmSupportedMethods:this.getNonEvmSupportedMethods.bind(this)});Object.entries(r).forEach(([t,r])=>{r.notifications.includes("eth_subscription")&&r.methods.includes("eth_subscribe")&&this.addMultichainApiEthSubscriptionMiddleware({scope:t,origin:e,tabId:n})})}catch(e){}return this.multichainSubscriptionManager.on("notification",(t,r,o)=>{e===t&&n===r&&i.emit("notification",o)}),i.push(this.multichainMiddlewareManager.generateMultichainMiddlewareForOriginAndTabId(e,n)),i.push(async(e,t,r,n)=>{const{provider:i}=this.networkController.getNetworkClientById(e.networkClientId);return t.result=await i.request(e),n()}),i}setupPublicConfig(e){const t=(0,c.storeAsStream)(this.publicConfigStore);(0,i.pipeline)(t,e,e=>{var r;t.destroy(),!e||null!==(r=e.message)&&void 0!==r&&r.match("Premature close")||b.default.error(e)})}addConnection(e,{tabId:t,apiType:r,engine:n}){if(e===ne.ORIGIN_METAMASK)return null;this.connections[e]||(this.connections[e]={});const i=(0,k.nanoid)();return this.connections[e][i]={tabId:t,apiType:r,engine:n},i}removeConnection(e,t){const r=this.connections[e];r&&(delete r[t],0===Object.keys(r).length&&delete this.connections[e])}removeAllConnections(e){const t=this.connections[e];t&&Object.keys(t).forEach(t=>{this.removeConnection(e,t)})}notifyConnections(e,t,r){const n=this.connections[e];n&&Object.values(n).forEach(e=>{r&&e.apiType!==r||e.engine&&e.engine.emit("notification",t)})}notifyAllConnections(e,t){const r="function"==typeof e?t=>e(t):()=>e;Object.keys(this.connections).forEach(e=>{Object.values(this.connections[e]).forEach(async n=>{if(!t||n.apiType===t)try{this.notifyConnection(n,await r(e))}catch(e){console.error(e)}})})}notifyConnection(e,t){try{e.engine&&e.engine.emit("notification",t)}catch(e){console.error(e)}}_onUnlock(){this.unMarkPasswordForgotten(),this.emit("unlock")}_onLock(){this.emit("lock")}_onStateUpdate(e){this.isClientOpenAndUnlocked=e.isUnlocked&&this._isClientOpen,this._notifyChainChange()}_onAccountRemoved(e){this.removeAllAccountPermissions(e)}privateSendUpdate(){this.emit("update",this.getState())}isUnlocked(){return this.keyringController.state.isUnlocked}getExternalPendingTransactions(e){return this.smartTransactionsController.getTransactions({addressFrom:e,status:"pending"})}async initializeChainlist(){const e=`cachedFetch:${X.CHAIN_SPEC_URL}`,{cachedResponse:t}=await(0,oe.getStorageItem)(e)||{};t||await(0,oe.setStorageItem)(e,{cachedResponse:(0,C.rawChainData)(),cachedTime:0}),await(0,tt.initializeRpcProviderDomains)()}async getPendingNonce(e,t){const{nonceDetails:r,releaseLock:n}=await this.txController.getNonceLock(e,t),i=r.params.highestSuggested;return n(),i}async getNextNonce(e,t){const r=await this.txController.getNonceLock(e,t);return r.releaseLock(),r.nextNonce}throwTestError(e){setTimeout(()=>{const t=new Error(e);throw t.name="TestError",t})}captureTestError(e){setTimeout(()=>{const t=new Error(e);t.name="TestError",(0,J.captureException)(t)})}getTransactionMetricsRequest(){var e;const t={createEventFragment:this.controllerMessenger.call.bind(this.controllerMessenger,"MetaMetricsController:createEventFragment"),finalizeEventFragment:this.controllerMessenger.call.bind(this.controllerMessenger,"MetaMetricsController:finalizeEventFragment"),getEventFragmentById:this.controllerMessenger.call.bind(this.controllerMessenger,"MetaMetricsController:getEventFragmentById"),getParticipateInMetrics:()=>this.controllerMessenger.call("MetaMetricsController:getState").participateInMetaMetrics,trackEvent:this.controllerMessenger.call.bind(this.controllerMessenger,"MetaMetricsController:trackEvent"),updateEventFragment:this.controllerMessenger.call.bind(this.controllerMessenger,"MetaMetricsController:updateEventFragment"),getAccountBalance:(e,t)=>{var r;return null===(r=this.accountTrackerController.state.accountsByChainId)||void 0===r||null===(r=r[t])||void 0===r||null===(r=r[(0,_e.toChecksumHexAddress)(e)])||void 0===r?void 0:r.balance},getAccountType:this.getAccountType.bind(this),getDeviceModel:this.getDeviceModel.bind(this),getHardwareTypeForMetric:this.getHardwareTypeForMetric.bind(this),getEIP1559GasFeeEstimates:(...e)=>this.gasFeeController.fetchGasFeeEstimates(...e),getSelectedAddress:()=>this.accountsController.getSelectedAccount().address,getTokenStandardAndDetails:this.getTokenStandardAndDetails.bind(this),getTransaction:e=>this.txController.state.transactions.find(t=>t.id===e),getIsSmartTransaction:e=>(0,pe.getIsSmartTransaction)(this._getMetaMaskState(),e),getSmartTransactionByMinedTxHash:e=>this.smartTransactionsController.getSmartTransactionByMinedTxHash(e),getMethodData:e=>{if(!e)return null;const{knownMethodData:t,use4ByteResolution:r}=this.preferencesController.state,n=(0,tt.addHexPrefix)(e);return(0,tt.getMethodDataName)(t,r,n,this.preferencesController.addKnownMethodData.bind(this.preferencesController),this.provider)},getIsConfirmationAdvancedDetailsOpen:()=>this.preferencesController.state.preferences.showConfirmationAdvancedDetails,getHDEntropyIndex:this.getHDEntropyIndex.bind(this),getNetworkRpcUrl:e=>{try{var t;const n=this.networkController.findNetworkClientIdByChainId(e),i=this.networkController.getNetworkConfigurationByNetworkClientId(n);if(i.rpcUrl)return i.rpcUrl;if((null===(t=i.rpcEndpoints)||void 0===t?void 0:t.length)>0){var r;const e=i.defaultRpcEndpointIndex||0;return(null===(r=i.rpcEndpoints[e])||void 0===r?void 0:r.url)||i.rpcEndpoints[0].url}return"unknown"}catch(e){return console.error("Error getting RPC URL:",e),"unknown"}},getFeatureFlags:()=>{var e;return null===(e=this.remoteFeatureFlagController)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.remoteFeatureFlags},getPna25Acknowledged:()=>{var e;return null===(e=this.appStateController)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.pna25Acknowledged},getAddressSecurityAlertResponse:e=>{var t;return null===(t=this.appStateController)||void 0===t?void 0:t.getAddressSecurityAlertResponse(e)},getSecurityAlertsEnabled:()=>{var e;return null===(e=this.preferencesController)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.securityAlertsEnabled}},r=new T.Messenger({namespace:"SnapAndHardwareMessenger",parent:this.controllerMessenger});return this.controllerMessenger.delegate({messenger:r,actions:["KeyringController:getKeyringForAccount","KeyringController:getState","SnapController:get","AccountsController:getSelectedAccount"]}),{...t,snapAndHardwareMessenger:r,provider:null===(e=this.controllerMessenger.call("NetworkController:getSelectedNetworkClient"))||void 0===e?void 0:e.provider}}toggleExternalServices(e){this.preferencesController.toggleExternalServices(e),this.tokenListController.updatePreventPollingOnNetworkRestart(!e);const t=this.controllerMessenger.call("SubscriptionController:getState"),r=(0,Ne.getIsShieldSubscriptionActive)(t.subscriptions);e?(this.tokenDetectionController.enable(),this.gasFeeController.enableNonRPCGasFeeApis(),r&&this.shieldController.start()):(this.tokenDetectionController.disable(),this.gasFeeController.disableNonRPCGasFeeApis(),this.subscriptionController.stopAllPolling(),r&&this.shieldController.stop())}async setLedgerTransportPreference(e){const t=window.navigator.hid?Z.LedgerTransportTypes.webhid:Z.LedgerTransportTypes.u2f;return null!=e&&e.updateTransportMethod?e.updateTransportMethod(t).catch(e=>{throw e}):undefined}recordFirstTimeInfo(e){if(!("firstTimeInfo"in e)){const t="13.16.4";e.firstTimeInfo={version:t,date:Date.now()}}}set isClientOpen(e){this._isClientOpen=e;const{isUnlocked:t}=this.controllerMessenger.call("KeyringController:getState");t&&this.controllerMessenger.call("SnapController:setClientActive",e),e?this.controllerMessenger.call("BackendWebSocketService:connect"):this.controllerMessenger.call("BackendWebSocketService:disconnect")}onClientClosed(){try{this.gasFeeController.stopAllPolling(),this.currencyRateController.stopAllPolling(),this.tokenRatesController.stopAllPolling(),this.tokenDetectionController.stopAllPolling(),this.tokenListController.stopAllPolling(),this.tokenBalancesController.stopAllPolling(),this.appStateController.clearPollingTokens(),this.accountTrackerController.stopAllPolling(),this.deFiPositionsController.stopAllPolling(),this.subscriptionController.stopAllPolling()}catch(e){console.error(e)}}onEnvironmentTypeClosed(e){const t=ne.POLLING_TOKEN_ENVIRONMENT_TYPES[e];this.appStateController.state[t].forEach(e=>{this.gasFeeController.stopPollingByPollingToken(e),this.currencyRateController.stopPollingByPollingToken(e),this.tokenRatesController.stopPollingByPollingToken(e),this.tokenDetectionController.stopPollingByPollingToken(e),this.tokenListController.stopPollingByPollingToken(e),this.tokenBalancesController.stopPollingByPollingToken(e),this.accountTrackerController.stopPollingByPollingToken(e),this.appStateController.removePollingToken(e,t)}),this.subscriptionController.stopAllPolling()}safelistPhishingDomain(e){return(0,tt.getPlatform)()===ne.PLATFORM_FIREFOX||this.metaMetricsController.trackEvent({category:ie.MetaMetricsEventCategory.Phishing,event:ie.MetaMetricsEventName.ProceedAnywayClicked,properties:{url:e,referrer:{url:e}}},{excludeMetaMetricsId:!0}),this.phishingController.bypass(e)}async backToSafetyPhishingWarning(){this.metaMetricsController.trackEvent({category:ie.MetaMetricsEventCategory.Navigation,event:ie.MetaMetricsEventName.PortfolioLinkClicked,properties:{location:"phishing_page",text:"Back to safety"}}),await this.platform.switchToAnotherURL(undefined,"https://app.metamask.io/?metamaskEntry=phishing_page_portfolio_button")}async setLocked(e={skipSeedlessOperationLock:!1}){const{skipSeedlessOperationLock:t}=e,r=this.onboardingController.getIsSocialLoginFlow();let n;r&&!t&&(n=await this.seedlessOperationMutex.acquire());try{r&&await this.seedlessOnboardingController.setLocked(),await this.keyringController.setLocked(),this.subscriptionController.stopAllPolling()}catch(e){throw b.default.error("Error setting locked state",e),e}finally{n&&n()}}rejectAllPendingApprovals(){(0,bt.rejectAllApprovals)({approvalController:this.approvalController,deleteInterface:e=>this.controllerMessenger.call("SnapInterfaceController:deleteInterface",e)})}async getCode(e,t){const{provider:r}=this.networkController.getNetworkClientById(t);return await r.request({method:"eth_getCode",params:[e]})}async _onAccountChange(e){const t=(0,it.getPermittedAccountsByOrigin)(this.permissionController.state);for(const[r,n]of t.entries())n.includes(e)&&this._notifyAccountsChange(r,n)}_notifyAccountsChange(e,t){this.notifyConnections(e,{method:it.NOTIFICATION_NAMES.accountsChanged,params:t.length<2?t:this.getPermittedAccounts(e)},Wr),this.permissionLogController.updateAccountsHistory(e,t)}async _notifyAuthorizationChange(e,t){this.notifyConnections(e,{method:L.MultichainApiNotifications.sessionChanged,params:{sessionScopes:(0,K.getSessionScopes)(t,{getNonEvmSupportedMethods:this.getNonEvmSupportedMethods.bind(this)})}},zr)}_getSelectedMultichainAccountAddress(e,t){var r;if(!e)return undefined;const n=(0,K.getPermittedAccountsForScopes)(e,t),i=(0,d.uniq)(n.map(e=>(0,D.parseCaipAccountId)(e).address));return null===(r=this.sortMultichainAccountsByLastSelected(i))||void 0===r?void 0:r[0]}async _notifyMultichainAccountChange(e,t,r){this.notifyConnections(e,{method:L.MultichainApiNotifications.walletNotify,params:{scope:r,notification:{method:it.NOTIFICATION_NAMES.accountsChanged,params:t}}},zr)}async _notifyChainChange(){this.notifyAllConnections(async e=>({method:it.NOTIFICATION_NAMES.chainChanged,params:await this.getProviderNetworkState({origin:e})}),Wr)}async _notifyChainChangeForConnection(e,t){this.notifyConnection(e,{method:it.NOTIFICATION_NAMES.chainChanged,params:await this.getProviderNetworkState({origin:t})})}async _onFinishedTransaction(e){if(![O.TransactionStatus.confirmed,O.TransactionStatus.failed].includes(e.status))return;const t=performance.now(),r=(0,be.trace)({name:be.TraceName.OnFinishedTransaction,startTime:performance.timeOrigin});(0,be.trace)({name:be.TraceName.OnFinishedTransaction,startTime:performance.timeOrigin,parentContext:r,data:{transactionMeta:e}}),await this._createTransactionNotifcation(e),await this._updateNFTOwnership(e),this._trackTransactionFailure(e),await this.tokenBalancesController.updateBalances({chainIds:[e.chainId]}),(0,be.endTrace)({name:be.TraceName.OnFinishedTransaction,timestamp:performance.timeOrigin+t})}async _createTransactionNotifcation(e){const{chainId:t}=e;let r={};if(t){var n,i;const e=null===(n=this.networkController.state.networkConfigurationsByChainId)||void 0===n?void 0:n[t];r={blockExplorerUrl:null==e||null===(i=e.blockExplorerUrls)||void 0===i?void 0:i[null==e?void 0:e.defaultBlockExplorerUrlIndex]}}try{await this.platform.showTransactionNotification(e,r)}catch(e){b.default.error("Failed to create transaction notification",e)}}async _updateNFTOwnership(e){var t,r;const{type:n,txParams:i,chainId:o,txReceipt:s}=e,a=this.accountsController.getSelectedAccount().address,{allNfts:l}=this.nftController.state,c=null==s?void 0:s.logs,u=n===O.TransactionType.contractInteraction&&c,d=(n===O.TransactionType.tokenMethodTransferFrom||n===O.TransactionType.tokenMethodSafeTransferFrom)&&i!==undefined;if(!u&&!d)return;const h=null===(t=this.networkController)||void 0===t||null===(t=t.state)||void 0===t||null===(t=t.networkConfigurationsByChainId)||void 0===t||null===(t=t[o])||void 0===t||null===(t=t.rpcEndpoints[null===(r=this.networkController)||void 0===r||null===(r=r.state)||void 0===r||null===(r=r.networkConfigurationsByChainId)||void 0===r||null===(r=r[o])||void 0===r?void 0:r.defaultRpcEndpointIndex])||void 0===t?void 0:t.networkClientId;if(d){var p;const{data:e,to:t,from:r}=i,n=(0,le.parseStandardTokenTransactionData)(e),s=(0,se.getTokenIdParam)(n)??(0,ue.getTokenValueParam)(n),a=null==l||null===(p=l[r])||void 0===p||null===(p=p[o])||void 0===p?void 0:p.find(({address:e,tokenId:r})=>(0,ae.isEqualCaseInsensitive)(e,t)&&r===s);a&&this.nftController.checkAndUpdateSingleNftOwnershipStatus(a,!1,h,{userAddress:r})}else{const e=c.map(e=>{const t=e.topics&&e.topics[0]===fe.TRANSFER_SINFLE_LOG_TOPIC_HASH,r=e.topics&&e.topics[0]===fe.TOKEN_TRANSFER_LOG_TOPIC_HASH;let n;return t&&(n=e.topics&&e.topics[3]&&e.topics[3].match(null==a?void 0:a.slice(2))),r&&(n=e.topics&&e.topics[2]&&e.topics[2].match(null==a?void 0:a.slice(2))),{isERC1155NftTransfer:t,isERC721NftTransfer:r,isTransferToSelectedAddress:n,...e}});if(0!==e.length){const t=[];e.forEach(e=>{if(e.isTransferToSelectedAddress&&(e.isERC1155NftTransfer||e.isERC721NftTransfer)){let r;r=e.isERC1155NftTransfer?new R.Interface(j.abiERC1155):new R.Interface(j.abiERC721);try{const n=r.parseLog({data:e.data,topics:e.topics});t.push({contract:e.address,...n})}catch(e){}}});const r=[],n=[];t.forEach(e=>{var t;const i=(0,se.getTokenIdParam)(e),s=null==l||null===(t=l[a])||void 0===t||null===(t=t[o])||void 0===t?void 0:t.find(({address:t,tokenId:r})=>(0,ae.isEqualCaseInsensitive)(t,e.contract)&&r===i);s?r.push(s):n.push({tokenId:i,...e})});const i=r.map(async e=>this.nftController.checkAndUpdateSingleNftOwnershipStatus(e,!1,h,{selectedAddress:a}));await Promise.allSettled(i);const s=n.map(async e=>this.nftController.addNft(e.contract,e.tokenId,h));await Promise.allSettled(s)}}}_trackTransactionFailure(e){var t,r;const{txReceipt:n}=e,i=this.getState(),{allTokens:o}=this.tokensController.state,s=this.accountsController.getSelectedAccount(),a=(null==o||null===(t=o[e.chainId])||void 0===t?void 0:t[s.address])||[];n&&"0x0"===n.status&&this.metaMetricsController.trackEvent({event:"Tx Status Update: On-Chain Failure",category:ie.MetaMetricsEventCategory.Background,properties:{action:"Transactions",errorMessage:null===(r=e.simulationFails)||void 0===r?void 0:r.reason,numberOfTokens:a.length,numberOfAccounts:Object.keys(i.accounts).length}},{matomoEvent:!0})}_getMetaMaskState(){return{metamask:this.getState()}}async checkDelegationDisabled(t,r,n){const{encodeDisabledDelegationsCheck:i,decodeDisabledDelegationsResult:o}=await Promise.resolve().then(()=>function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=qr(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(e("../../shared/lib/delegation/delegation"))),s=i({delegationHash:r}),a=this.networkController.getNetworkClientById(n);return o(await a.provider.request({method:"eth_call",params:[{to:t,data:s},"latest"]}))}async upgradeAccount(e,t,r){const n=this.networkController.findNetworkClientIdByChainId((0,_.toHex)(r));return(0,z.createEIP7702UpgradeTransaction)({address:e,upgradeContractAddress:t,networkClientId:n},async(e,t)=>await(0,at.addTransaction)(this.getAddTransactionRequest({transactionParams:e,transactionOptions:{...t,origin:"metamask",requireApproval:!0},waitForSubmit:!0})))}async isEip7702Supported(e){const{address:t,chainId:r}=e,n=t,i=await this.txController.isAtomicBatchSupported({address:n,chainIds:[r]}),o=(0,W.findAtomicBatchSupportForChain)(i,r),{isSupported:s,upgradeContractAddress:a}=(0,W.checkEip7702Support)(o);return{isSupported:s,upgradeContractAddress:a}}}async function Yr(e,t){var r,n,i,o,s;const a=null===(r=this.opts.overrides)||void 0===r?void 0:r.keyrings;let l=null;switch(e.name){case Z.HardwareDeviceNames.trezor:l=(null==a||null===(n=a.trezor)||void 0===n?void 0:n.type)||v.TrezorKeyring.type;break;case Z.HardwareDeviceNames.oneKey:l=(null==a||null===(i=a.oneKey)||void 0===i?void 0:i.type)||(null===v.OneKeyKeyring||void 0===v.OneKeyKeyring?void 0:v.OneKeyKeyring.type);break;case Z.HardwareDeviceNames.ledger:l=(null==a||null===(o=a.ledger)||void 0===o?void 0:o.type)||y.LedgerKeyring.type;break;case Z.HardwareDeviceNames.qr:l=S.QrKeyring.type;break;case Z.HardwareDeviceNames.lattice:l=(null==a||null===(s=a.lattice)||void 0===s?void 0:s.type)||w.default.type;break;default:throw new Error("MetamaskController:#withKeyringForDevice - Unknown device")}return this.keyringController.withKeyring({type:l},async({keyring:r})=>{if(e.hdPath&&r.setHdPath&&r.setHdPath(e.hdPath),e.name===Z.HardwareDeviceNames.lattice&&(r.appName="MetaMask"),e.name===Z.HardwareDeviceNames.ledger&&await this.setLedgerTransportPreference(r),e.name===Z.HardwareDeviceNames.trezor||e.name===Z.HardwareDeviceNames.oneKey){const e=r.getModel();this.appStateController.setTrezorModel(e)}return r.network=(0,ge.getProviderConfig)({metamask:this.networkController.state}).type,await t(r)},{createIfMissing:!0})}function Xr(){const e=Gr(Qr,this,Zr).call(this);return this.networkController.getNetworkClientById(e).configuration.chainId}function Zr(){return this.networkController.state.selectedNetworkClientId}function en({existingControllers:e,initFunctions:t,initState:r}){var n;const i={currentMigrationVersion:this.opts.currentMigrationVersion,encryptor:this.opts.encryptor,extension:this.extension,platform:this.platform,getCronjobControllerStorageManager:()=>this.opts.cronjobControllerStorageManager,getFlatState:this.getState.bind(this),getPermittedAccounts:this.getPermittedAccounts.bind(this),getTransactionMetricsRequest:this.getTransactionMetricsRequest.bind(this),getUIState:this.getState.bind(this),infuraProjectId:this.opts.infuraProjectId,initLangCode:this.opts.initLangCode,keyringOverrides:null===(n=this.opts.overrides)||void 0===n?void 0:n.keyrings,offscreenPromise:this.offscreenPromise,preinstalledSnaps:this.opts.preinstalledSnaps,persistedState:r,removeAccount:this.removeAccount.bind(this),removeAllConnections:this.removeAllConnections.bind(this),setupUntrustedCommunicationEip1193:this.setupUntrustedCommunicationEip1193.bind(this),setLocked:this.setLocked.bind(this),showNotification:this.platform._showNotification,showUserConfirmation:this.opts.showUserConfirmation,getAccountType:this.getAccountType.bind(this),getDeviceModel:this.getDeviceModel.bind(this),getHardwareTypeForMetric:this.getHardwareTypeForMetric.bind(this),trace:be.trace};return(0,Tt.initControllers)({baseControllerMessenger:this.controllerMessenger,existingControllers:e,initFunctions:t,initRequest:i})}r.default=Jr}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/metamask-controller.js"}],[376,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:2,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=2;try{"etherscan"===t.data.config.provider.type&&(t.data.config.provider.type="rpc",t.data.config.provider.rpcTarget="https://rpc.metamask.io/")}catch(e){}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/002.js"}],[377,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:3,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=3;try{"https://rawtestrpc.metamask.io/"===t.data.config.provider.rpcTarget&&(t.data.config.provider.rpcTarget="https://testrpc.metamask.io/")}catch(e){}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/003.js"}],[378,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:4,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=4;try{if("rpc"!==t.data.config.provider.type)return Promise.resolve(t);switch(t.data.config.provider.rpcTarget){case"https://testrpc.metamask.io/":t.data.config.provider={type:"testnet"};break;case"https://rpc.metamask.io/":t.data.config.provider={type:"mainnet"}}}catch(e){}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/004.js"}],[379,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:5,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=5;try{const e=function(e){const{config:t}=e,r={...e,KeyringController:{vault:e.vault,selectedAccount:t.selectedAccount,walletNicknames:e.walletNicknames}};return delete r.vault,delete r.walletNicknames,delete r.config.selectedAccount,r}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #5${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/005.js"}],[38,{"../../controllers/decrypt-message":229},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DecryptMessageControllerInit=void 0;var n,i=(n=e("../../controllers/decrypt-message"))&&n.__esModule?n:{default:n};r.DecryptMessageControllerInit=({controllerMessenger:e,initMessenger:t,getController:r,getUIState:n})=>{const o=r("DecryptMessageManager");return{persistedStateKey:null,memStateKey:null,controller:new i.default({messenger:e,manager:o,getState:n,metricsEvent:t.call.bind(t,"MetaMetricsController:trackEvent")})}}}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/decrypt-message-controller-init.ts"}],[380,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:6,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=6;try{const e=function(e){const t=e.KeyringController,r={...e,PreferencesController:{selectedAddress:t.selectedAccount}};return delete r.KeyringController.selectedAccount,r}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #6${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/006.js"}],[381,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:7,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=7;try{const e=function(e){const t={...e,TransactionManager:{transactions:e.transactions||[],gasMultiplier:e.gasMultiplier||1}};return delete t.transactions,delete t.gasMultiplier,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #7${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/007.js"}],[382,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:8,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=8;try{const e=function(e){const t={...e,NoticeController:{noticesList:e.noticesList||[]}};return delete t.noticesList,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #8${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/008.js"}],[383,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:9,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=9;try{const e=function(e){const t=(0,n.merge)({},e,{CurrencyController:{currentCurrency:e.currentFiat||e.fiatCurrency||"USD",conversionRate:e.conversionRate,conversionDate:e.conversionDate}});return delete t.currentFiat,delete t.fiatCurrency,delete t.conversionRate,delete t.conversionDate,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #9${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/009.js"}],[384,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:10,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=10;try{const e=function(e){const t=(0,n.merge)({},e,{ShapeShiftController:{shapeShiftTxList:e.shapeShiftTxList||[]}});return delete t.shapeShiftTxList,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #10${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/010.js"}],[385,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:11,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=11;try{const e=function(e){const t=e;return delete t.TOSHash,delete t.isDisclaimerConfirmed,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #11${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/011.js"}],[386,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:12,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=12;try{const e=function(e){const t=e;return t.NoticeController.noticesList.forEach(e=>{e.read&&(e.body="")}),t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #12${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/012.js"}],[387,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:13,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=13;try{const e=function(e){const t=e,{config:r}=t;r&&r.provider&&"testnet"===r.provider.type&&(t.config.provider.type="ropsten");return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #13${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/013.js"}],[388,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:14,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=14;try{const e=function(e){const t=e;return t.NetworkController={},t.NetworkController.provider=t.config.provider,delete t.config.provider,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #14${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/014.js"}],[389,{"@metamask/transaction-controller":3095,lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),i=e("lodash");r.default={version:15,migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=15;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=r;t.TransactionController.transactions=e.map(e=>e.err?("Gave up submitting tx."===e.err.message&&(e.status=n.TransactionStatus.failed),e):e)}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #15${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/015.js"}],[39,{"@metamask/message-manager":2368},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DecryptMessageManagerInit=void 0;var n=e("@metamask/message-manager");r.DecryptMessageManagerInit=({controllerMessenger:e})=>({persistedStateKey:null,memStateKey:null,controller:new n.DecryptMessageManager({additionalFinishStatuses:["decrypted"],messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/decrypt-message-manager-init.ts"}],[390,{"@metamask/transaction-controller":3095,lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),i=e("lodash");r.default={version:16,migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=16;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(e=>e.err?("transaction with the same hash was already imported."===e.err&&(e.status=n.TransactionStatus.submitted,delete e.err),e):e)}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #16${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/016.js"}],[391,{"@metamask/transaction-controller":3095,lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),i=e("lodash");r.default={version:17,migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=17;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(e=>(!e.status===n.TransactionStatus.failed||e.retryCount>0&&e.retryCount<2&&(e.status=n.TransactionStatus.submitted,delete e.err),e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #17${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/017.js"}],[392,{"fast-json-patch":4451,lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("fast-json-patch"))&&n.__esModule?n:{default:n},o=e("lodash");r.default={version:18,migrate(e){const t=(0,o.cloneDeep)(e);t.meta.version=18;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(e=>{if(!e.history||0===e.history.length){const t=function(e){const t={...e};return delete t.history,(0,o.cloneDeep)(t)}(e);return e.history=[t],e}const t=(r=e.history,r.map((e,t)=>0===t?e:function(e,t,r){const n=i.default.compare(e,t);return n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now()),n}(r[t-1],e))).filter(e=>!Array.isArray(e)||e.length>0);var r;return e.history=t,e})}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #18${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/018.js"}],[3920,{"./cache":3921,"./compile":3925,"./compile/async":3922,"./compile/error_classes":3923,"./compile/formats":3924,"./compile/resolve":3926,"./compile/rules":3927,"./compile/schema_obj":3928,"./compile/util":3930,"./data":3931,"./keyword":3959,"./refs/data.json":3960,"./refs/json-schema-draft-07.json":3961,"fast-json-stable-stringify":4452},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./compile"),i=e("./compile/resolve"),o=e("./cache"),s=e("./compile/schema_obj"),a=e("fast-json-stable-stringify"),l=e("./compile/formats"),c=e("./compile/rules"),u=e("./data"),d=e("./compile/util");t.exports=b,b.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var i=r(t);!0!==r.$async&&(this.errors=r.errors);return i},b.prototype.compile=function(e,t){var r=this._addSchema(e,undefined,t);return r.validate||this._compile(r)},b.prototype.addSchema=function(e,t,r,n){if(Array.isArray(e)){for(var o=0;o<e.length;o++)this.addSchema(e[o],undefined,r,n);return this}var s=this._getId(e);if(s!==undefined&&"string"!=typeof s)throw new Error("schema id must be string");return k(this,t=i.normalizeId(t||s)),this._schemas[t]=this._addSchema(e,r,n,!0),this},b.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},b.prototype.validateSchema=function(e,t){var r=e.$schema;if(r!==undefined&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(f)?f:undefined,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,e);if(!n&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return n},b.prototype.getSchema=function(e){var t=v(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=i.schema.call(e,{schema:{}},t);if(r){var o=r.schema,a=r.root,l=r.baseId,c=n.call(e,o,a,undefined,l);return e._fragments[t]=new s({ref:t,fragment:!0,schema:o,root:a,baseId:l,validate:c}),c}}(this,e)}},b.prototype.removeSchema=function(e){if(e instanceof RegExp)return y(this,this._schemas,e),y(this,this._refs,e),this;switch(typeof e){case"undefined":return y(this,this._schemas),y(this,this._refs),this._cache.clear(),this;case"string":var t=v(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,n=r?r(e):e;this._cache.del(n);var o=this._getId(e);o&&(o=i.normalizeId(o),delete this._schemas[o],delete this._refs[o])}return this},b.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},b.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=(t=t||{}).separator===undefined?", ":t.separator,n=t.dataVar===undefined?"data":t.dataVar,i="",o=0;o<e.length;o++){var s=e[o];s&&(i+=n+s.dataPath+" "+s.message+r)}return i.slice(0,-r.length)},b.prototype._addSchema=function(e,t,r,n){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var o=this._opts.serialize,a=o?o(e):e,l=this._cache.get(a);if(l)return l;n=n||!1!==this._opts.addUsedSchema;var c=i.normalizeId(this._getId(e));c&&n&&k(this,c);var u,d=!1!==this._opts.validateSchema&&!t;d&&!(u=c&&c==i.normalizeId(e.$schema))&&this.validateSchema(e,!0);var h=i.ids.call(this,e),p=new s({id:c,schema:e,localRefs:h,cacheKey:a,meta:r});"#"!=c[0]&&n&&(this._refs[c]=p);this._cache.put(a,p),d&&u&&this.validateSchema(e,!0);return p},b.prototype._compile=function(e,t){if(e.compiling)return e.validate=o,o.schema=e.schema,o.errors=null,o.root=t||o,!0===e.schema.$async&&(o.$async=!0),o;var r,i;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{i=n.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=i,e.refs=i.refs,e.refVal=i.refVal,e.root=i.root,i;function o(){var t=e.validate,r=t.apply(this,arguments);return o.errors=t.errors,r}},b.prototype.compileAsync=e("./compile/async");var h=e("./keyword");b.prototype.addKeyword=h.add,b.prototype.getKeyword=h.get,b.prototype.removeKeyword=h.remove,b.prototype.validateKeyword=h.validate;var p=e("./compile/error_classes");b.ValidationError=p.Validation,b.MissingRefError=p.MissingRef,b.$dataMetaSchema=u;var f="http://json-schema.org/draft-07/schema",g=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],m=["/properties"];function b(t){if(!(this instanceof b))return new b(t);t=this._opts=d.copy(t)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:P,warn:P,error:P};else{if(t===undefined&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=l(t.format),this._cache=t.cache||new o,this._loadingSchemas={},this._compilations=[],this.RULES=c(),this._getId=function(e){switch(e.schemaId){case"auto":return S;case"id":return w;default:return C}}(t),t.loopRequired=t.loopRequired||Infinity,"property"==t.errorDataPath&&(t._errorDataPathProperty=!0),t.serialize===undefined&&(t.serialize=a),this._metaOpts=function(e){for(var t=d.copy(e._opts),r=0;r<g.length;r++)delete t[g[r]];return t}(this),t.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),t.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(t){var r;t._opts.$data&&(r=e("./refs/data.json"),t.addMetaSchema(r,r.$id,!0));if(!1===t._opts.meta)return;var n=e("./refs/json-schema-draft-07.json");t._opts.$data&&(n=u(n,m));t.addMetaSchema(n,f,!0),t._refs["http://json-schema.org/schema"]=f}(this),"object"==typeof t.meta&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function v(e,t){return t=i.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function y(e,t,r){for(var n in t){var i=t[n];i.meta||r&&!r.test(n)||(e._cache.del(i.cacheKey),delete t[n])}}function w(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function C(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function S(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function k(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function P(){}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/ajv.js"}],[3921,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=t.exports=function(){this._cache={}};n.prototype.put=function(e,t){this._cache[e]=t},n.prototype.get=function(e){return this._cache[e]},n.prototype.del=function(e){delete this._cache[e]},n.prototype.clear=function(){this._cache={}}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/cache.js"}],[3922,{"./error_classes":3923},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./error_classes").MissingRef;t.exports=function e(t,r,i){var o=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(i=r,r=undefined);var s=a(t).then(function(){var e=o._addSchema(t,undefined,r);return e.validate||l(e)});i&&s.then(function(e){i(null,e)},i);return s;function a(t){var r=t.$schema;return r&&!o.getSchema(r)?e.call(o,{$ref:r},!0):Promise.resolve()}function l(e){try{return o._compile(e)}catch(t){if(t instanceof n)return function(t){var n=t.missingSchema;if(c(n))throw new Error("Schema "+n+" is loaded but "+t.missingRef+" cannot be resolved");var i=o._loadingSchemas[n];i||(i=o._loadingSchemas[n]=o._opts.loadSchema(n)).then(s,s);return i.then(function(e){if(!c(n))return a(e).then(function(){c(n)||o.addSchema(e,n,undefined,r)})}).then(function(){return l(e)});function s(){delete o._loadingSchemas[n]}function c(e){return o._refs[e]||o._schemas[e]}}(t);throw t}}}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/async.js"}],[3923,{"./resolve":3926},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./resolve");function i(e,t,r){this.message=r||i.message(e,t),this.missingRef=n.url(e,t),this.missingSchema=n.normalizeId(n.fullPath(this.missingRef))}function o(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}t.exports={Validation:o(function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}),MissingRef:o(i)},i.message=function(e,t){return"can't resolve reference "+t+" from id "+e}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/error_classes.js"}],[3924,{"./util":3930},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./util"),i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31],s=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,a=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,l=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,c=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,u=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,d=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,h=/^(?:\/(?:[^~/]|~0|~1)*)*$/,p=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,f=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function g(e){return e="full"==e?"full":"fast",n.copy(g[e])}function m(e){var t=e.match(i);if(!t)return!1;var r=+t[1],n=+t[2],s=+t[3];return n>=1&&n<=12&&s>=1&&s<=(2==n&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:o[n])}function b(e,t){var r=e.match(s);if(!r)return!1;var n=r[1],i=r[2],o=r[3],a=r[5];return(n<=23&&i<=59&&o<=59||23==n&&59==i&&60==o)&&(!t||a)}t.exports=g,g.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":c,url:u,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:C,uuid:d,"json-pointer":h,"json-pointer-uri-fragment":p,"relative-json-pointer":f},g.full={date:m,time:b,"date-time":function(e){var t=e.split(v);return 2==t.length&&m(t[0])&&b(t[1],!0)},uri:function(e){return y.test(e)&&l.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":c,url:u,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:C,uuid:d,"json-pointer":h,"json-pointer-uri-fragment":p,"relative-json-pointer":f};var v=/t|\s/i;var y=/\/|:/;var w=/[^\\]\\Z/;function C(e){if(w.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/formats.js"}],[3925,{"../dotjs/validate":3958,"./error_classes":3923,"./resolve":3926,"./util":3930,"fast-deep-equal":4445,"fast-json-stable-stringify":4452},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./resolve"),i=e("./util"),o=e("./error_classes"),s=e("fast-json-stable-stringify"),a=e("../dotjs/validate"),l=i.ucs2length,c=e("fast-deep-equal"),u=o.Validation;function d(e,t,r){var n=p.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}function h(e,t,r){var n=p.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}function p(e,t,r){for(var n=0;n<this._compilations.length;n++){var i=this._compilations[n];if(i.schema==e&&i.root==t&&i.baseId==r)return n}return-1}function f(e,t){return"var pattern"+e+" = new RegExp("+i.toQuotedString(t[e])+");"}function g(e){return"var default"+e+" = defaults["+e+"];"}function m(e,t){return t[e]===undefined?"":"var refVal"+e+" = refVal["+e+"];"}function b(e){return"var customRule"+e+" = customRules["+e+"];"}function v(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}t.exports=function e(t,r,p,y){var w=this,C=this._opts,S=[undefined],k={},P=[],T={},E=[],A={},M=[];r=r||{schema:t,refVal:S,refs:k};var _=d.call(this,t,r,y),I=this._compilations[_.index];if(_.compiling)return I.callValidate=function e(){var t=I.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var N=this._formats,O=this.RULES;try{var R=F(t,r,p,y);I.validate=R;var j=I.callValidate;return j&&(j.schema=R.schema,j.errors=null,j.refs=R.refs,j.refVal=R.refVal,j.root=R.root,j.$async=R.$async,C.sourceCode&&(j.source=R.source)),R}finally{h.call(this,t,r,y)}function F(t,s,d,h){var p=!s||s&&s.schema==t;if(s.schema!=r.schema)return e.call(w,t,s,d,h);var y,T=!0===t.$async,A=a({isTop:!0,schema:t,isRoot:p,baseId:h,root:s,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:o.MissingRef,RULES:O,validate:a,util:i,resolve:n,resolveRef:D,usePattern:L,useDefault:U,useCustomRule:$,opts:C,formats:N,logger:w.logger,self:w});A=v(S,m)+v(P,f)+v(E,g)+v(M,b)+A,C.processCode&&(A=C.processCode(A,t));try{y=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",A)(w,O,N,r,S,E,M,c,l,u),S[0]=y}catch(e){throw w.logger.error("Error compiling schema, function code:",A),e}return y.schema=t,y.errors=null,y.refs=k,y.refVal=S,y.root=p?y:s,T&&(y.$async=!0),!0===C.sourceCode&&(y.source={code:A,patterns:P,defaults:E}),y}function D(t,i,o){i=n.url(t,i);var s,a,l=k[i];if(l!==undefined)return B(s=S[l],a="refVal["+l+"]");if(!o&&r.refs){var c=r.refs[i];if(c!==undefined)return B(s=r.refVal[c],a=x(i,s))}a=x(i);var u=n.call(w,F,r,i);if(u===undefined){var d=p&&p[i];d&&(u=n.inlineRef(d,C.inlineRefs)?d:e.call(w,d,r,p,t))}if(u!==undefined)return function(e,t){var r=k[e];S[r]=t}(i,u),B(u,a);!function(e){delete k[e]}(i)}function x(e,t){var r=S.length;return S[r]=t,k[e]=r,"refVal"+r}function B(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function L(e){var t=T[e];return t===undefined&&(t=T[e]=P.length,P[t]=e),"pattern"+t}function U(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return i.toQuotedString(e);case"object":if(null===e)return"null";var t=s(e),r=A[t];return r===undefined&&(r=A[t]=E.length,E[r]=e),"default"+r}}function $(e,t,r,n){if(!1!==w._opts.validateSchema){var i=e.definition.dependencies;if(i&&!i.every(function(e){return Object.prototype.hasOwnProperty.call(r,e)}))throw new Error("parent schema must have all required keywords: "+i.join(","));var o=e.definition.validateSchema;if(o)if(!o(t)){var s="keyword schema is invalid: "+w.errorsText(o.errors);if("log"!=w._opts.validateSchema)throw new Error(s);w.logger.error(s)}}var a,l=e.definition.compile,c=e.definition.inline,u=e.definition.macro;if(l)a=l.call(w,t,r,n);else if(u)a=u.call(w,t,r,n),!1!==C.validateSchema&&w.validateSchema(a,!0);else if(c)a=c.call(w,n,e.keyword,t,r);else if(!(a=e.definition.validate))return;if(a===undefined)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var d=M.length;return M[d]=a,{code:"customRule"+d,validate:a}}}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/index.js"}],[3926,{"./schema_obj":3928,"./util":3930,"fast-deep-equal":4445,"json-schema-traverse":3962,"uri-js":5770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("uri-js"),i=e("fast-deep-equal"),o=e("./util"),s=e("./schema_obj"),a=e("json-schema-traverse");function l(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return l.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof s)return f(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var i,o,a,u=c.call(this,t,r);return u&&(i=u.schema,t=u.root,a=u.baseId),i instanceof s?o=i.validate||e.call(this,i.schema,t,undefined,a):i!==undefined&&(o=f(i,this._opts.inlineRefs)?i:e.call(this,i,t,undefined,a)),o}function c(e,t){var r=n.parse(t),i=v(r),o=b(this._getId(e.schema));if(0===Object.keys(e.schema).length||i!==o){var a=w(i),l=this._refs[a];if("string"==typeof l)return u.call(this,e,l,r);if(l instanceof s)l.validate||this._compile(l),e=l;else{if(!((l=this._schemas[a])instanceof s))return;if(l.validate||this._compile(l),a==w(t))return{schema:l,root:e,baseId:o};e=l}if(!e.schema)return;o=b(this._getId(e.schema))}return h.call(this,r,o,e.schema,e)}function u(e,t,r){var n=c.call(this,e,t);if(n){var i=n.schema,o=n.baseId;e=n.root;var s=this._getId(i);return s&&(o=C(o,s)),h.call(this,r,o,i,e)}}t.exports=l,l.normalizeId=w,l.fullPath=b,l.url=C,l.ids=function(e){var t=w(this._getId(e)),r={"":t},s={"":b(t,!1)},l={},c=this;return a(e,{allKeys:!0},function(e,t,a,u,d,h,p){if(""!==t){var f=c._getId(e),g=r[u],m=s[u]+"/"+d;if(p!==undefined&&(m+="/"+("number"==typeof p?p:o.escapeFragment(p))),"string"==typeof f){f=g=w(g?n.resolve(g,f):f);var b=c._refs[f];if("string"==typeof b&&(b=c._refs[b]),b&&b.schema){if(!i(e,b.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=w(m))if("#"==f[0]){if(l[f]&&!i(e,l[f]))throw new Error('id "'+f+'" resolves to more than one schema');l[f]=e}else c._refs[f]=m}r[t]=g,s[t]=m}}),l},l.inlineRef=f,l.schema=c;var d=o.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function h(e,t,r,n){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var i=e.fragment.split("/"),s=1;s<i.length;s++){var a=i[s];if(a){if((r=r[a=o.unescapeFragment(a)])===undefined)break;var l;if(!d[a]&&((l=this._getId(r))&&(t=C(t,l)),r.$ref)){var u=C(t,r.$ref),h=c.call(this,n,u);h&&(r=h.schema,n=h.root,t=h.baseId)}}}return r!==undefined&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var p=o.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function f(e,t){return!1!==t&&(t===undefined||!0===t?g(e):t?m(e)<=t:void 0)}function g(e){var t;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(t=e[r])&&!g(t))return!1}else for(var n in e){if("$ref"==n)return!1;if("object"==typeof(t=e[n])&&!g(t))return!1}return!0}function m(e){var t,r=0;if(Array.isArray(e)){for(var n=0;n<e.length;n++)if("object"==typeof(t=e[n])&&(r+=m(t)),r==Infinity)return Infinity}else for(var i in e){if("$ref"==i)return Infinity;if(p[i])r++;else if("object"==typeof(t=e[i])&&(r+=m(t)+1),r==Infinity)return Infinity}return r}function b(e,t){return!1!==t&&(e=w(e)),v(n.parse(e))}function v(e){return n.serialize(e).split("#")[0]+"#"}var y=/#\/?$/;function w(e){return e?e.replace(y,""):""}function C(e,t){return t=w(t),n.resolve(e,t)}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/resolve.js"}],[3927,{"../dotjs":3947,"./util":3930},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../dotjs"),i=e("./util").toHash;t.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=i(t),e.types=i(["number","integer","string","array","object","boolean","null"]),e.forEach(function(r){r.rules=r.rules.map(function(r){var i;if("object"==typeof r){var o=Object.keys(r)[0];i=r[o],r=o,i.forEach(function(r){t.push(r),e.all[r]=!0})}return t.push(r),e.all[r]={keyword:r,code:n[r],implements:i}}),e.all.$comment={keyword:"$comment",code:n.$comment},r.type&&(e.types[r.type]=r)}),e.keywords=i(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/rules.js"}],[3928,{"./util":3930},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./util");t.exports=function(e){n.copy(e,this)}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/schema_obj.js"}],[3929,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){for(var t,r=0,n=e.length,i=0;i<n;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<n&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return r}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/ucs2length.js"}],[393,{"@metamask/transaction-controller":3095,lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),i=e("lodash");r.default={version:19,migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=19;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e,t,r)=>{if(e.status!==n.TransactionStatus.submitted)return e;const i=function(e){const t=e.map(e=>{const{nonce:t}=e.txParams;return parseInt(t||"0x0",16)});return Math.max.apply(null,t)}(r.filter(e=>e.status===n.TransactionStatus.confirmed).filter(t=>t.txParams.from===e.txParams.from).filter(t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from)),o=function(e,t){const r=e.map(e=>{const{nonce:t}=e.txParams;return parseInt(t,16)});let n=t;for(;r.includes(n);)n+=1;return n}(r.filter(e=>e.status===n.TransactionStatus.submitted).filter(t=>t.txParams.from===e.txParams.from).filter(t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from),i),s=Math.max(o,i);return parseInt(e.txParams.nonce,16)>s+1&&(e.status=n.TransactionStatus.failed,e.err={message:"nonce too high",note:"migration 019 custom error"}),e})}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #19${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/019.js"}],[3930,{"./ucs2length":3929,"fast-deep-equal":4445},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r,n){var i=n?" !== ":" === ",o=n?" || ":" && ",s=n?"!":"",a=n?"":"!";switch(e){case"null":return t+i+"null";case"array":return s+"Array.isArray("+t+")";case"object":return"("+s+t+o+"typeof "+t+i+'"object"'+o+a+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+i+'"number"'+o+a+"("+t+" % 1)"+o+t+i+t+(r?o+s+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+i+'"'+e+'"'+(r?o+s+"isFinite("+t+")":"")+")";default:return"typeof "+t+i+'"'+e+'"'}}t.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:n,checkDataTypes:function(e,t,r){if(1===e.length)return n(e[0],t,r,!0);var i="",s=o(e);for(var a in s.array&&s.object&&(i=s.null?"(":"(!"+t+" || ",i+="typeof "+t+' !== "object")',delete s.null,delete s.array,delete s.object),s.number&&delete s.integer,s)i+=(i?" && ":"")+n(a,t,r,!0);return i},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var o=t[n];(i[o]||"array"===e&&"array"===o)&&(r[r.length]=o)}if(r.length)return r}else{if(i[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:o,getProperty:l,escapeQuotes:c,equal:e("fast-deep-equal"),ucs2length:e("./ucs2length"),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:u,getPathExpr:function(e,t,r,n){return p(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var n=u(r?"/"+f(t):l(t));return p(e,n)},getData:function(e,t,r){var n,i,o,s;if(""===e)return"rootData";if("/"==e[0]){if(!d.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,o="rootData"}else{if(!(s=e.match(h)))throw new Error("Invalid JSON-pointer: "+e);if(n=+s[1],"#"==(i=s[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(o="data"+(t-n||""),!i)return o}for(var a=o,c=i.split("/"),u=0;u<c.length;u++){var p=c[u];p&&(a+=" && "+(o+=l(g(p))))}return a},unescapeFragment:function(e){return g(decodeURIComponent(e))},unescapeJsonPointer:g,escapeFragment:function(e){return encodeURIComponent(f(e))},escapeJsonPointer:f};var i=o(["string","number","integer","boolean","null"]);function o(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var s=/^[a-z$_][a-z$_0-9]*$/i,a=/'|\\/g;function l(e){return"number"==typeof e?"["+e+"]":s.test(e)?"."+e:"['"+c(e)+"']"}function c(e){return e.replace(a,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function u(e){return"'"+c(e)+"'"}var d=/^\/(?:[^~]|~0|~1)*$/,h=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function p(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function f(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function g(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/util.js"}],[3931,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];t.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var i,o=t[r].split("/"),s=e;for(i=1;i<o.length;i++)s=s[o[i]];for(i=0;i<n.length;i++){var a=n[i],l=s[a];l&&(s[a]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/data.js"}],[3932,{"./refs/json-schema-draft-07.json":3961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./refs/json-schema-draft-07.json");t.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:n.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:n.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/definition_schema.js"}],[3933,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h=e.opts.$data&&a&&a.$data;h?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a;var p="maximum"==t,f=p?"exclusiveMaximum":"exclusiveMinimum",g=e.schema[f],m=e.opts.$data&&g&&g.$data,b=p?"<":">",v=p?">":"<",y=undefined;if(!h&&"number"!=typeof a&&a!==undefined)throw new Error(t+" must be number");if(!m&&g!==undefined&&"number"!=typeof g&&"boolean"!=typeof g)throw new Error(f+" must be number or boolean");if(m){var w=e.util.getData(g.$data,s,e.dataPathArr),C="exclusive"+o,S="exclType"+o,k="exclIsNumber"+o,P="' + "+(A="op"+o)+" + '";i+=" var schemaExcl"+o+" = "+w+"; ",i+=" var "+C+"; var "+S+" = typeof "+(w="schemaExcl"+o)+"; if ("+S+" != 'boolean' && "+S+" != 'undefined' && "+S+" != 'number') { ";var T;y=f;(T=T||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(y||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var E=i;i=T.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+S+" == 'number' ? ( ("+C+" = "+n+" === undefined || "+w+" "+b+"= "+n+") ? "+d+" "+v+"= "+w+" : "+d+" "+v+" "+n+" ) : ( ("+C+" = "+w+" === true) ? "+d+" "+v+"= "+n+" : "+d+" "+v+" "+n+" ) || "+d+" !== "+d+") { var op"+o+" = "+C+" ? '"+b+"' : '"+b+"='; ",a===undefined&&(y=f,c=e.errSchemaPath+"/"+f,n=w,h=m)}else{P=b;if((k="number"==typeof g)&&h){var A="'"+P+"'";i+=" if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" ( "+n+" === undefined || "+g+" "+b+"= "+n+" ? "+d+" "+v+"= "+g+" : "+d+" "+v+" "+n+" ) || "+d+" !== "+d+") { "}else{k&&a===undefined?(C=!0,y=f,c=e.errSchemaPath+"/"+f,n=g,v+="="):(k&&(n=Math[p?"min":"max"](g,a)),g===(!k||n)?(C=!0,y=f,c=e.errSchemaPath+"/"+f,v+="="):(C=!1,P+="="));A="'"+P+"'";i+=" if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+d+" "+v+" "+n+" || "+d+" !== "+d+") { "}}y=y||t,(T=T||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(y||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+A+", limit: "+n+", exclusive: "+C+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+P+" ",i+=h?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+l:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";E=i;return i=T.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { "),i}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/_limit.js"}],[3934,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h=e.opts.$data&&a&&a.$data;if(h?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,!h&&"number"!=typeof a)throw new Error(t+" must be number");i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+d+".length "+("maxItems"==t?">":"<")+" "+n+") { ";var p=t,f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(p||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"fewer",i+=" than ",i+=h?"' + "+n+" + '":""+a,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+l:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var g=i;return i=f.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/_limitItems.js"}],[3935,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h=e.opts.$data&&a&&a.$data;if(h?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,!h&&"number"!=typeof a)throw new Error(t+" must be number");var p="maxLength"==t?">":"<";i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),!1===e.opts.unicode?i+=" "+d+".length ":i+=" ucs2length("+d+") ",i+=" "+p+" "+n+") { ";var f=t,g=g||[];g.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=h?"' + "+n+" + '":""+a,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+l:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var m=i;return i=g.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/_limitLength.js"}],[3936,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h=e.opts.$data&&a&&a.$data;if(h?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,!h&&"number"!=typeof a)throw new Error(t+" must be number");i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" Object.keys("+d+").length "+("maxProperties"==t?">":"<")+" "+n+") { ";var p=t,f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(p||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"fewer",i+=" than ",i+=h?"' + "+n+" + '":""+a,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+l:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var g=i;return i=f.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/_limitProperties.js"}],[3937,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",i=e.schema[t],o=e.schemaPath+e.util.getProperty(t),s=e.errSchemaPath+"/"+t,a=!e.opts.allErrors,l=e.util.copy(e),c="";l.level++;var u="valid"+l.level,d=l.baseId,h=!0,p=i;if(p)for(var f,g=-1,m=p.length-1;g<m;)f=p[g+=1],(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0||!1===f:e.util.schemaHasRules(f,e.RULES.all))&&(h=!1,l.schema=f,l.schemaPath=o+"["+g+"]",l.errSchemaPath=s+"/"+g,n+="  "+e.validate(l)+" ",l.baseId=d,a&&(n+=" if ("+u+") { ",c+="}"));return a&&(n+=h?" if (true) { ":" "+c.slice(0,-1)+" "),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/allOf.js"}],[3938,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),d="valid"+i,h="errs__"+i,p=e.util.copy(e),f="";p.level++;var g="valid"+p.level,m=s.every(function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)});if(m){var b=p.baseId;n+=" var "+h+" = errors; var "+d+" = false;  ";var v=e.compositeRule;e.compositeRule=p.compositeRule=!0;var y=s;if(y)for(var w,C=-1,S=y.length-1;C<S;)w=y[C+=1],p.schema=w,p.schemaPath=a+"["+C+"]",p.errSchemaPath=l+"/"+C,n+="  "+e.validate(p)+" ",p.baseId=b,n+=" "+d+" = "+d+" || "+g+"; if (!"+d+") { ",f+="}";e.compositeRule=p.compositeRule=v,n+=" "+f+" if (!"+d+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else c&&(n+=" if (true) { ");return n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/anyOf.js"}],[3939,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",i=e.schema[t],o=e.errSchemaPath+"/"+t,s=(e.opts.allErrors,e.util.toQuotedString(i));return!0===e.opts.$comment?n+=" console.log("+s+");":"function"==typeof e.opts.$comment&&(n+=" self._opts.$comment("+s+", "+e.util.toQuotedString(o)+", validate.root.schema);"),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/comment.js"}],[394,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:20,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=20;try{const e=function(e){const t=e;"metamask"in t&&!("firstTimeInfo"in t.metamask)&&(t.metamask.firstTimeInfo={version:"3.12.0",date:Date.now()});return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #20${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/020.js"}],[3940,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),d="valid"+i,h=e.opts.$data&&s&&s.$data;h&&(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; "),h||(n+=" var schema"+i+" = validate.schema"+a+";"),n+="var "+d+" = equal("+u+", schema"+i+"); if (!"+d+") {   ";var p=p||[];p.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValue: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var f=n;return n=p.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+f+"]); ":n+=" validate.errors = ["+f+"]; return false; ":n+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/const.js"}],[3941,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),d="valid"+i,h="errs__"+i,p=e.util.copy(e);p.level++;var f="valid"+p.level,g="i"+i,m=p.dataLevel=e.dataLevel+1,b="data"+m,v=e.baseId,y=e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all);if(n+="var "+h+" = errors;var "+d+";",y){var w=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=s,p.schemaPath=a,p.errSchemaPath=l,n+=" var "+f+" = false; for (var "+g+" = 0; "+g+" < "+u+".length; "+g+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);var C=u+"["+g+"]";p.dataPathArr[m]=g;var S=e.validate(p);p.baseId=v,e.util.varOccurences(S,b)<2?n+=" "+e.util.varReplace(S,b,C)+" ":n+=" var "+b+" = "+C+"; "+S+" ",n+=" if ("+f+") break; }  ",e.compositeRule=p.compositeRule=w,n+="  if (!"+f+") {"}else n+=" if ("+u+".length == 0) {";var k=k||[];k.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should contain a valid item' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var P=n;return n=k.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+P+"]); ":n+=" validate.errors = ["+P+"]; return false; ":n+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",y&&(n+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(n+=" } "),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/contains.js"}],[3942,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,i,o=" ",s=e.level,a=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,h="data"+(a||""),p="valid"+s,f="errs__"+s,g=e.opts.$data&&l&&l.$data;g?(o+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",i="schema"+s):i=l;var m,b,v,y,w,C=this,S="definition"+s,k=C.definition,P="";if(g&&k.$data){w="keywordValidate"+s;var T=k.validateSchema;o+=" var "+S+" = RULES.custom['"+t+"'].definition; var "+w+" = "+S+".validate;"}else{if(!(y=e.useCustomRule(C,l,e.schema,e)))return;i="validate.schema"+c,w=y.code,m=k.compile,b=k.inline,v=k.macro}var E=w+".errors",A="i"+s,M="ruleErr"+s,_=k.async;if(_&&!e.async)throw new Error("async keyword in sync schema");if(b||v||(o+=E+" = null;"),o+="var "+f+" = errors;var "+p+";",g&&k.$data&&(P+="}",o+=" if ("+i+" === undefined) { "+p+" = true; } else { ",T&&(P+="}",o+=" "+p+" = "+S+".validateSchema("+i+"); if ("+p+") { ")),b)k.statements?o+=" "+y.validate+" ":o+=" "+p+" = "+y.validate+"; ";else if(v){var I=e.util.copy(e);P="";I.level++;var N="valid"+I.level;I.schema=y.validate,I.schemaPath="";var O=e.compositeRule;e.compositeRule=I.compositeRule=!0;var R=e.validate(I).replace(/validate\.schema/g,w);e.compositeRule=I.compositeRule=O,o+=" "+R}else{(x=x||[]).push(o),o="",o+="  "+w+".call( ",e.opts.passContext?o+="this":o+="self",m||!1===k.schema?o+=" , "+h+" ":o+=" , "+i+" , "+h+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var j=a?"data"+(a-1||""):"parentData",F=a?e.dataPathArr[a]:"parentDataProperty",D=o+=" , "+j+" , "+F+" , rootData )  ";o=x.pop(),!1===k.errors?(o+=" "+p+" = ",_&&(o+="await "),o+=D+"; "):o+=_?" var "+(E="customErrors"+s)+" = null; try { "+p+" = await "+D+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+E+" = e.errors; else throw e; } ":" "+E+" = null; "+p+" = "+D+"; "}if(k.modifying&&(o+=" if ("+j+") "+h+" = "+j+"["+F+"];"),o+=""+P,k.valid)d&&(o+=" if (true) { ");else{var x;o+=" if ( ",k.valid===undefined?(o+=" !",o+=v?""+N:""+p):o+=" "+!k.valid+" ",o+=") { ",n=C.keyword,(x=x||[]).push(o),o="",(x=x||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+C.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+C.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ";var B=o;o=x.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+B+"]); ":o+=" validate.errors = ["+B+"]; return false; ":o+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var L=o;o=x.pop(),b?k.errors?"full"!=k.errors&&(o+="  for (var "+A+"="+f+"; "+A+"<errors; "+A+"++) { var "+M+" = vErrors["+A+"]; if ("+M+".dataPath === undefined) "+M+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+M+".schemaPath === undefined) { "+M+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(o+=" "+M+".schema = "+i+"; "+M+".data = "+h+"; "),o+=" } "):!1===k.errors?o+=" "+L+" ":(o+=" if ("+f+" == errors) { "+L+" } else {  for (var "+A+"="+f+"; "+A+"<errors; "+A+"++) { var "+M+" = vErrors["+A+"]; if ("+M+".dataPath === undefined) "+M+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+M+".schemaPath === undefined) { "+M+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(o+=" "+M+".schema = "+i+"; "+M+".data = "+h+"; "),o+=" } } "):v?(o+="   var err =   ",!1!==e.createErrors?(o+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+C.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+C.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===k.errors?o+=" "+L+" ":(o+=" if (Array.isArray("+E+")) { if (vErrors === null) vErrors = "+E+"; else vErrors = vErrors.concat("+E+"); errors = vErrors.length;  for (var "+A+"="+f+"; "+A+"<errors; "+A+"++) { var "+M+" = vErrors["+A+"]; if ("+M+".dataPath === undefined) "+M+".dataPath = (dataPath || '') + "+e.errorPath+";  "+M+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(o+=" "+M+".schema = "+i+"; "+M+".data = "+h+"; "),o+=" } } else { "+L+" } "),o+=" } ",d&&(o+=" else { ")}return o}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/custom.js"}],[3943,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),d="errs__"+i,h=e.util.copy(e),p="";h.level++;var f="valid"+h.level,g={},m={},b=e.opts.ownProperties;for(C in s)if("__proto__"!=C){var v=s[C],y=Array.isArray(v)?m:g;y[C]=v}n+="var "+d+" = errors;";var w=e.errorPath;for(var C in n+="var missing"+i+";",m)if((y=m[C]).length){if(n+=" if ( "+u+e.util.getProperty(C)+" !== undefined ",b&&(n+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(C)+"') "),c){n+=" && ( ";var S=y;if(S)for(var k=-1,P=S.length-1;k<P;){I=S[k+=1],k&&(n+=" || "),n+=" ( ( "+(j=u+(R=e.util.getProperty(I)))+" === undefined ",b&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(I)+"') "),n+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?I:R)+") ) "}n+=")) {  ";var T="missing"+i,E="' + "+T+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,T,!0):w+" + "+T);var A=A||[];A.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(C)+"', missingProperty: '"+E+"', depsCount: "+y.length+", deps: '"+e.util.escapeQuotes(1==y.length?y[0]:y.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==y.length?n+="property "+e.util.escapeQuotes(y[0]):n+="properties "+e.util.escapeQuotes(y.join(", ")),n+=" when property "+e.util.escapeQuotes(C)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var M=n;n=A.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+M+"]); ":n+=" validate.errors = ["+M+"]; return false; ":n+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var _=y;if(_)for(var I,N=-1,O=_.length-1;N<O;){I=_[N+=1];var R=e.util.getProperty(I),j=(E=e.util.escapeQuotes(I),u+R);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,I,e.opts.jsonPointers)),n+=" if ( "+j+" === undefined ",b&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(I)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(C)+"', missingProperty: '"+E+"', depsCount: "+y.length+", deps: '"+e.util.escapeQuotes(1==y.length?y[0]:y.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==y.length?n+="property "+e.util.escapeQuotes(y[0]):n+="properties "+e.util.escapeQuotes(y.join(", ")),n+=" when property "+e.util.escapeQuotes(C)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",c&&(p+="}",n+=" else { ")}e.errorPath=w;var F=h.baseId;for(var C in g){v=g[C];(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all))&&(n+=" "+f+" = true; if ( "+u+e.util.getProperty(C)+" !== undefined ",b&&(n+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(C)+"') "),n+=") { ",h.schema=v,h.schemaPath=a+e.util.getProperty(C),h.errSchemaPath=l+"/"+e.util.escapeFragment(C),n+="  "+e.validate(h)+" ",h.baseId=F,n+=" }  ",c&&(n+=" if ("+f+") { ",p+="}"))}return c&&(n+="   "+p+" if ("+d+" == errors) {"),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/dependencies.js"}],[3944,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),d="valid"+i,h=e.opts.$data&&s&&s.$data;h&&(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ");var p="i"+i,f="schema"+i;h||(n+=" var "+f+" = validate.schema"+a+";"),n+="var "+d+";",h&&(n+=" if (schema"+i+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+i+")) "+d+" = false; else {"),n+=d+" = false;for (var "+p+"=0; "+p+"<"+f+".length; "+p+"++) if (equal("+u+", "+f+"["+p+"])) { "+d+" = true; break; }",h&&(n+="  }  "),n+=" if (!"+d+") {   ";var g=g||[];g.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var m=n;return n=g.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/enum.js"}],[3945,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||"");if(!1===e.opts.format)return c&&(n+=" if (true) { "),n;var d,h=e.opts.$data&&s&&s.$data;h?(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",d="schema"+i):d=s;var p=e.opts.unknownFormats,f=Array.isArray(p);if(h){n+=" var "+(g="format"+i)+" = formats["+d+"]; var "+(m="isObject"+i)+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+(b="formatType"+i)+" = "+m+" && "+g+".type || 'string'; if ("+m+") { ",e.async&&(n+=" var async"+i+" = "+g+".async; "),n+=" "+g+" = "+g+".validate; } if (  ",h&&(n+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),n+=" (","ignore"!=p&&(n+=" ("+d+" && !"+g+" ",f&&(n+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),n+=") || "),n+=" ("+g+" && "+b+" == '"+r+"' && !(typeof "+g+" == 'function' ? ",e.async?n+=" (async"+i+" ? await "+g+"("+u+") : "+g+"("+u+")) ":n+=" "+g+"("+u+") ",n+=" : "+g+".test("+u+"))))) {"}else{var g;if(!(g=e.formats[s])){if("ignore"==p)return e.logger.warn('unknown format "'+s+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(n+=" if (true) { "),n;if(f&&p.indexOf(s)>=0)return c&&(n+=" if (true) { "),n;throw new Error('unknown format "'+s+'" is used in schema at path "'+e.errSchemaPath+'"')}var m,b=(m="object"==typeof g&&!(g instanceof RegExp)&&g.validate)&&g.type||"string";if(m){var v=!0===g.async;g=g.validate}if(b!=r)return c&&(n+=" if (true) { "),n;if(v){if(!e.async)throw new Error("async format in sync schema");n+=" if (!(await "+(y="formats"+e.util.getProperty(s)+".validate")+"("+u+"))) { "}else{n+=" if (! ";var y="formats"+e.util.getProperty(s);m&&(y+=".validate"),n+="function"==typeof g?" "+y+"("+u+") ":" "+y+".test("+u+") ",n+=") { "}}var w=w||[];w.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { format:  ",n+=h?""+d:""+e.util.toQuotedString(s),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match format \"",n+=h?"' + "+d+" + '":""+e.util.escapeQuotes(s),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+a:""+e.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var C=n;return n=w.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+C+"]); ":n+=" validate.errors = ["+C+"]; return false; ":n+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c&&(n+=" else { "),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/format.js"}],[3946,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),d="valid"+i,h="errs__"+i,p=e.util.copy(e);p.level++;var f="valid"+p.level,g=e.schema.then,m=e.schema.else,b=g!==undefined&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all)),v=m!==undefined&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all)),y=p.baseId;if(b||v){var w;p.createErrors=!1,p.schema=s,p.schemaPath=a,p.errSchemaPath=l,n+=" var "+h+" = errors; var "+d+" = true;  ";var C=e.compositeRule;e.compositeRule=p.compositeRule=!0,n+="  "+e.validate(p)+" ",p.baseId=y,p.createErrors=!0,n+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=C,b?(n+=" if ("+f+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",n+="  "+e.validate(p)+" ",p.baseId=y,n+=" "+d+" = "+f+"; ",b&&v?n+=" var "+(w="ifClause"+i)+" = 'then'; ":w="'then'",n+=" } ",v&&(n+=" else { ")):n+=" if (!"+f+") { ",v&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",n+="  "+e.validate(p)+" ",p.baseId=y,n+=" "+d+" = "+f+"; ",b&&v?n+=" var "+(w="ifClause"+i)+" = 'else'; ":w="'else'",n+=" } "),n+=" if (!"+d+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { failingKeyword: "+w+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match \"' + "+w+" + '\" schema' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" }   ",c&&(n+=" else { ")}else c&&(n+=" if (true) { ");return n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/if.js"}],[3947,{"./_limit":3933,"./_limitItems":3934,"./_limitLength":3935,"./_limitProperties":3936,"./allOf":3937,"./anyOf":3938,"./comment":3939,"./const":3940,"./contains":3941,"./dependencies":3943,"./enum":3944,"./format":3945,"./if":3946,"./items":3948,"./multipleOf":3949,"./not":3950,"./oneOf":3951,"./pattern":3952,"./properties":3953,"./propertyNames":3954,"./ref":3955,"./required":3956,"./uniqueItems":3957,"./validate":3958},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={$ref:e("./ref"),allOf:e("./allOf"),anyOf:e("./anyOf"),$comment:e("./comment"),const:e("./const"),contains:e("./contains"),dependencies:e("./dependencies"),enum:e("./enum"),format:e("./format"),if:e("./if"),items:e("./items"),maximum:e("./_limit"),minimum:e("./_limit"),maxItems:e("./_limitItems"),minItems:e("./_limitItems"),maxLength:e("./_limitLength"),minLength:e("./_limitLength"),maxProperties:e("./_limitProperties"),minProperties:e("./_limitProperties"),multipleOf:e("./multipleOf"),not:e("./not"),oneOf:e("./oneOf"),pattern:e("./pattern"),properties:e("./properties"),propertyNames:e("./propertyNames"),required:e("./required"),uniqueItems:e("./uniqueItems"),validate:e("./validate")}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/index.js"}],[3948,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),d="valid"+i,h="errs__"+i,p=e.util.copy(e),f="";p.level++;var g="valid"+p.level,m="i"+i,b=p.dataLevel=e.dataLevel+1,v="data"+b,y=e.baseId;if(n+="var "+h+" = errors;var "+d+";",Array.isArray(s)){var w=e.schema.additionalItems;if(!1===w){n+=" "+d+" = "+u+".length <= "+s.length+"; ";var C=l;l=e.errSchemaPath+"/additionalItems",n+="  if (!"+d+") {   ";var S=S||[];S.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+s.length+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have more than "+s.length+" items' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var k=n;n=S.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+k+"]); ":n+=" validate.errors = ["+k+"]; return false; ":n+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l=C,c&&(f+="}",n+=" else { ")}var P=s;if(P)for(var T,E=-1,A=P.length-1;E<A;)if(T=P[E+=1],e.opts.strictKeywords?"object"==typeof T&&Object.keys(T).length>0||!1===T:e.util.schemaHasRules(T,e.RULES.all)){n+=" "+g+" = true; if ("+u+".length > "+E+") { ";var M=u+"["+E+"]";p.schema=T,p.schemaPath=a+"["+E+"]",p.errSchemaPath=l+"/"+E,p.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0),p.dataPathArr[b]=E;var _=e.validate(p);p.baseId=y,e.util.varOccurences(_,v)<2?n+=" "+e.util.varReplace(_,v,M)+" ":n+=" var "+v+" = "+M+"; "+_+" ",n+=" }  ",c&&(n+=" if ("+g+") { ",f+="}")}if("object"==typeof w&&(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0||!1===w:e.util.schemaHasRules(w,e.RULES.all))){p.schema=w,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",n+=" "+g+" = true; if ("+u+".length > "+s.length+") {  for (var "+m+" = "+s.length+"; "+m+" < "+u+".length; "+m+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);M=u+"["+m+"]";p.dataPathArr[b]=m;_=e.validate(p);p.baseId=y,e.util.varOccurences(_,v)<2?n+=" "+e.util.varReplace(_,v,M)+" ":n+=" var "+v+" = "+M+"; "+_+" ",c&&(n+=" if (!"+g+") break; "),n+=" } }  ",c&&(n+=" if ("+g+") { ",f+="}")}}else if(e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){p.schema=s,p.schemaPath=a,p.errSchemaPath=l,n+="  for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);M=u+"["+m+"]";p.dataPathArr[b]=m;_=e.validate(p);p.baseId=y,e.util.varOccurences(_,v)<2?n+=" "+e.util.varReplace(_,v,M)+" ":n+=" var "+v+" = "+M+"; "+_+" ",c&&(n+=" if (!"+g+") break; "),n+=" }"}return c&&(n+=" "+f+" if ("+h+" == errors) {"),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/items.js"}],[3949,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h=e.opts.$data&&a&&a.$data;if(h?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,!h&&"number"!=typeof a)throw new Error(t+" must be number");i+="var division"+o+";if (",h&&(i+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),i+=" (division"+o+" = "+d+" / "+n+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+o+" !== parseInt(division"+o+") ",i+=" ) ",h&&(i+="  )  "),i+=" ) {   ";var p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=h?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+l:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var f=i;return i=p.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+f+"]); ":i+=" validate.errors = ["+f+"]; return false; ":i+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/multipleOf.js"}],[395,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:21,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=21;try{const e=function(e){const t=e;return delete t.BlacklistController,delete t.RecentBlocks,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #21${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/021.js"}],[3950,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),d="errs__"+i,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){h.schema=s,h.schemaPath=a,h.errSchemaPath=l,n+=" var "+d+" = errors;  ";var f,g=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(f=h.opts.allErrors,h.opts.allErrors=!1),n+=" "+e.validate(h)+" ",h.createErrors=!0,f&&(h.opts.allErrors=f),e.compositeRule=h.compositeRule=g,n+=" if ("+p+") {   ";var m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var b=n;n=m.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+b+"]); ":n+=" validate.errors = ["+b+"]; return false; ":n+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(n+=" if (false) { ");return n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/not.js"}],[3951,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),d="valid"+i,h="errs__"+i,p=e.util.copy(e),f="";p.level++;var g="valid"+p.level,m=p.baseId,b="prevValid"+i,v="passingSchemas"+i;n+="var "+h+" = errors , "+b+" = false , "+d+" = false , "+v+" = null; ";var y=e.compositeRule;e.compositeRule=p.compositeRule=!0;var w=s;if(w)for(var C,S=-1,k=w.length-1;S<k;)C=w[S+=1],(e.opts.strictKeywords?"object"==typeof C&&Object.keys(C).length>0||!1===C:e.util.schemaHasRules(C,e.RULES.all))?(p.schema=C,p.schemaPath=a+"["+S+"]",p.errSchemaPath=l+"/"+S,n+="  "+e.validate(p)+" ",p.baseId=m):n+=" var "+g+" = true; ",S&&(n+=" if ("+g+" && "+b+") { "+d+" = false; "+v+" = ["+v+", "+S+"]; } else { ",f+="}"),n+=" if ("+g+") { "+d+" = "+b+" = true; "+v+" = "+S+"; }";return e.compositeRule=p.compositeRule=y,n+=f+"if (!"+d+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { passingSchemas: "+v+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(n+=" } "),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/oneOf.js"}],[3952,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h=e.opts.$data&&a&&a.$data;h?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),i+=" !"+(h?"(new RegExp("+n+"))":e.usePattern(a))+".test("+d+") ) {   ";var p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",i+=h?""+n:""+e.util.toQuotedString(a),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=h?"' + "+n+" + '":""+e.util.escapeQuotes(a),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+l:""+e.util.toQuotedString(a),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var f=i;return i=p.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+f+"]); ":i+=" validate.errors = ["+f+"]; return false; ":i+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/pattern.js"}],[3953,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),d="errs__"+i,h=e.util.copy(e),p="";h.level++;var f="valid"+h.level,g="key"+i,m="idx"+i,b=h.dataLevel=e.dataLevel+1,v="data"+b,y="dataProperties"+i,w=Object.keys(s||{}).filter(R),C=e.schema.patternProperties||{},S=Object.keys(C).filter(R),k=e.schema.additionalProperties,P=w.length||S.length,T=!1===k,E="object"==typeof k&&Object.keys(k).length,A=e.opts.removeAdditional,M=T||E||A,_=e.opts.ownProperties,I=e.baseId,N=e.schema.required;if(N&&(!e.opts.$data||!N.$data)&&N.length<e.opts.loopRequired)var O=e.util.toHash(N);function R(e){return"__proto__"!==e}if(n+="var "+d+" = errors;var "+f+" = true;",_&&(n+=" var "+y+" = undefined;"),M){if(n+=_?" "+y+" = "+y+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+y+".length; "+m+"++) { var "+g+" = "+y+"["+m+"]; ":" for (var "+g+" in "+u+") { ",P){if(n+=" var isAdditional"+i+" = !(false ",w.length)if(w.length>8)n+=" || validate.schema"+a+".hasOwnProperty("+g+") ";else{var j=w;if(j)for(var F=-1,D=j.length-1;F<D;)Q=j[F+=1],n+=" || "+g+" == "+e.util.toQuotedString(Q)+" "}if(S.length){var x=S;if(x)for(var B=-1,L=x.length-1;B<L;)oe=x[B+=1],n+=" || "+e.usePattern(oe)+".test("+g+") "}n+=" ); if (isAdditional"+i+") { "}if("all"==A)n+=" delete "+u+"["+g+"]; ";else{var U=e.errorPath,$="' + "+g+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers)),T)if(A)n+=" delete "+u+"["+g+"]; ";else{n+=" "+f+" = false; ";var K=l;l=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { additionalProperty: '"+$+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is an invalid additional property":n+="should NOT have additional properties",n+="' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var q=n;n=re.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+q+"]); ":n+=" validate.errors = ["+q+"]; return false; ":n+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=K,c&&(n+=" break; ")}else if(E)if("failing"==A){n+=" var "+d+" = errors;  ";var H=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=k,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var V=u+"["+g+"]";h.dataPathArr[b]=g;var G=e.validate(h);h.baseId=I,e.util.varOccurences(G,v)<2?n+=" "+e.util.varReplace(G,v,V)+" ":n+=" var "+v+" = "+V+"; "+G+" ",n+=" if (!"+f+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+g+"]; }  ",e.compositeRule=h.compositeRule=H}else{h.schema=k,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);V=u+"["+g+"]";h.dataPathArr[b]=g;G=e.validate(h);h.baseId=I,e.util.varOccurences(G,v)<2?n+=" "+e.util.varReplace(G,v,V)+" ":n+=" var "+v+" = "+V+"; "+G+" ",c&&(n+=" if (!"+f+") break; ")}e.errorPath=U}P&&(n+=" } "),n+=" }  ",c&&(n+=" if ("+f+") { ",p+="}")}var W=e.opts.useDefaults&&!e.compositeRule;if(w.length){var z=w;if(z)for(var Q,J=-1,Y=z.length-1;J<Y;){var X=s[Q=z[J+=1]];if(e.opts.strictKeywords?"object"==typeof X&&Object.keys(X).length>0||!1===X:e.util.schemaHasRules(X,e.RULES.all)){var Z=e.util.getProperty(Q),ee=(V=u+Z,W&&X.default!==undefined);h.schema=X,h.schemaPath=a+Z,h.errSchemaPath=l+"/"+e.util.escapeFragment(Q),h.errorPath=e.util.getPath(e.errorPath,Q,e.opts.jsonPointers),h.dataPathArr[b]=e.util.toQuotedString(Q);G=e.validate(h);if(h.baseId=I,e.util.varOccurences(G,v)<2){G=e.util.varReplace(G,v,V);var te=V}else{te=v;n+=" var "+v+" = "+V+"; "}if(ee)n+=" "+G+" ";else{if(O&&O[Q]){n+=" if ( "+te+" === undefined ",_&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(Q)+"') "),n+=") { "+f+" = false; ";U=e.errorPath,K=l;var re,ne=e.util.escapeQuotes(Q);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(U,Q,e.opts.jsonPointers)),l=e.errSchemaPath+"/required",(re=re||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+ne+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+ne+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";q=n;n=re.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+q+"]); ":n+=" validate.errors = ["+q+"]; return false; ":n+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=K,e.errorPath=U,n+=" } else { "}else c?(n+=" if ( "+te+" === undefined ",_&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(Q)+"') "),n+=") { "+f+" = true; } else { "):(n+=" if ("+te+" !== undefined ",_&&(n+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(Q)+"') "),n+=" ) { ");n+=" "+G+" } "}}c&&(n+=" if ("+f+") { ",p+="}")}}if(S.length){var ie=S;if(ie)for(var oe,se=-1,ae=ie.length-1;se<ae;){X=C[oe=ie[se+=1]];if(e.opts.strictKeywords?"object"==typeof X&&Object.keys(X).length>0||!1===X:e.util.schemaHasRules(X,e.RULES.all)){h.schema=X,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(oe),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(oe),n+=_?" "+y+" = "+y+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+y+".length; "+m+"++) { var "+g+" = "+y+"["+m+"]; ":" for (var "+g+" in "+u+") { ",n+=" if ("+e.usePattern(oe)+".test("+g+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);V=u+"["+g+"]";h.dataPathArr[b]=g;G=e.validate(h);h.baseId=I,e.util.varOccurences(G,v)<2?n+=" "+e.util.varReplace(G,v,V)+" ":n+=" var "+v+" = "+V+"; "+G+" ",c&&(n+=" if (!"+f+") break; "),n+=" } ",c&&(n+=" else "+f+" = true; "),n+=" }  ",c&&(n+=" if ("+f+") { ",p+="}")}}}return c&&(n+=" "+p+" if ("+d+" == errors) {"),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/properties.js"}],[3954,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),d="errs__"+i,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(n+="var "+d+" = errors;",e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){h.schema=s,h.schemaPath=a,h.errSchemaPath=l;var f="key"+i,g="idx"+i,m="i"+i,b="' + "+f+" + '",v="data"+(h.dataLevel=e.dataLevel+1),y="dataProperties"+i,w=e.opts.ownProperties,C=e.baseId;w&&(n+=" var "+y+" = undefined; "),n+=w?" "+y+" = "+y+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+y+".length; "+g+"++) { var "+f+" = "+y+"["+g+"]; ":" for (var "+f+" in "+u+") { ",n+=" var startErrs"+i+" = errors; ";var S=f,k=e.compositeRule;e.compositeRule=h.compositeRule=!0;var P=e.validate(h);h.baseId=C,e.util.varOccurences(P,v)<2?n+=" "+e.util.varReplace(P,v,S)+" ":n+=" var "+v+" = "+S+"; "+P+" ",e.compositeRule=h.compositeRule=k,n+=" if (!"+p+") { for (var "+m+"=startErrs"+i+"; "+m+"<errors; "+m+"++) { vErrors["+m+"].propertyName = "+f+"; }   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { propertyName: '"+b+"' } ",!1!==e.opts.messages&&(n+=" , message: 'property name \\'"+b+"\\' is invalid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),c&&(n+=" break; "),n+=" } }"}return c&&(n+="  if ("+d+" == errors) {"),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/propertyNames.js"}],[3955,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,i,o=" ",s=e.level,a=e.dataLevel,l=e.schema[t],c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h="valid"+s;if("#"==l||"#/"==l)e.isRoot?(n=e.async,i="validate"):(n=!0===e.root.schema.$async,i="root.refVal[0]");else{var p=e.resolveRef(e.baseId,l,e.isRoot);if(p===undefined){var f=e.MissingRefError.message(e.baseId,l);if("fail"==e.opts.missingRefs){e.logger.error(f),(v=v||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",!1!==e.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var g=o;o=v.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+g+"]); ":o+=" validate.errors = ["+g+"]; return false; ":o+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(o+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,l,f);e.logger.warn(f),u&&(o+=" if (true) { ")}}else if(p.inline){var m=e.util.copy(e);m.level++;var b="valid"+m.level;m.schema=p.schema,m.schemaPath="",m.errSchemaPath=l,o+=" "+e.validate(m).replace(/validate\.schema/g,p.code)+" ",u&&(o+=" if ("+b+") { ")}else n=!0===p.$async||e.async&&!1!==p.$async,i=p.code}if(i){var v;(v=v||[]).push(o),o="",e.opts.passContext?o+=" "+i+".call(this, ":o+=" "+i+"( ",o+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var y=o+=" , "+(a?"data"+(a-1||""):"parentData")+" , "+(a?e.dataPathArr[a]:"parentDataProperty")+", rootData)  ";if(o=v.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(o+=" var "+h+"; "),o+=" try { await "+y+"; ",u&&(o+=" "+h+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(o+=" "+h+" = false; "),o+=" } ",u&&(o+=" if ("+h+") { ")}else o+=" if (!"+y+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",u&&(o+=" else { ")}return o}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/ref.js"}],[3956,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),d="valid"+i,h=e.opts.$data&&s&&s.$data;h&&(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ");var p="schema"+i;if(!h)if(s.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],g=s;if(g)for(var m,b=-1,v=g.length-1;b<v;){m=g[b+=1];var y=e.schema.properties[m];y&&(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0||!1===y:e.util.schemaHasRules(y,e.RULES.all))||(f[f.length]=m)}}else f=s;if(h||f.length){var w=e.errorPath,C=h||f.length>=e.opts.loopRequired,S=e.opts.ownProperties;if(c)if(n+=" var missing"+i+"; ",C){h||(n+=" var "+p+" = validate.schema"+a+"; ");var k="' + "+(_="schema"+i+"["+(E="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,_,e.opts.jsonPointers)),n+=" var "+d+" = true; ",h&&(n+=" if (schema"+i+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+i+")) "+d+" = false; else {"),n+=" for (var "+E+" = 0; "+E+" < "+p+".length; "+E+"++) { "+d+" = "+u+"["+p+"["+E+"]] !== undefined ",S&&(n+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+p+"["+E+"]) "),n+="; if (!"+d+") break; } ",h&&(n+="  }  "),n+="  if (!"+d+") {   ",(M=M||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var P=n;n=M.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+P+"]); ":n+=" validate.errors = ["+P+"]; return false; ":n+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var T=f;if(T)for(var E=-1,A=T.length-1;E<A;){N=T[E+=1],E&&(n+=" || "),n+=" ( ( "+(F=u+(j=e.util.getProperty(N)))+" === undefined ",S&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(N)+"') "),n+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?N:j)+") ) "}n+=") {  ";var M;k="' + "+(_="missing"+i)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,_,!0):w+" + "+_),(M=M||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";P=n;n=M.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+P+"]); ":n+=" validate.errors = ["+P+"]; return false; ":n+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(C){h||(n+=" var "+p+" = validate.schema"+a+"; ");var _;k="' + "+(_="schema"+i+"["+(E="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,_,e.opts.jsonPointers)),h&&(n+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),n+=" for (var "+E+" = 0; "+E+" < "+p+".length; "+E+"++) { if ("+u+"["+p+"["+E+"]] === undefined ",S&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+p+"["+E+"]) "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(n+="  }  ")}else{var I=f;if(I)for(var N,O=-1,R=I.length-1;O<R;){N=I[O+=1];var j=e.util.getProperty(N),F=(k=e.util.escapeQuotes(N),u+j);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,N,e.opts.jsonPointers)),n+=" if ( "+F+" === undefined ",S&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(N)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=w}else c&&(n+=" if (true) {");return n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/required.js"}],[3957,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h="valid"+o,p=e.opts.$data&&a&&a.$data;if(p?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,(a||p)&&!1!==e.opts.uniqueItems){p&&(i+=" var "+h+"; if ("+n+" === false || "+n+" === undefined) "+h+" = true; else if (typeof "+n+" != 'boolean') "+h+" = false; else { "),i+=" var i = "+d+".length , "+h+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,g=Array.isArray(f);if(!f||"object"==f||"array"==f||g&&(f.indexOf("object")>=0||f.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+h+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var m="checkDataType"+(g?"s":"");i+=" if ("+e.util[m](f,"item",e.opts.strictNumbers,!0)+") continue; ",g&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",p&&(i+="  }  "),i+=" if (!"+h+") {   ";var b=b||[];b.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+l:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var v=i;i=b.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+v+"]); ":i+=" validate.errors = ["+v+"]; return false; ":i+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { ")}else u&&(i+=" if (true) { ");return i}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/uniqueItems.js"}],[3958,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n="",i=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),s=e.self._getId(e.schema);if(e.opts.strictKeywords){var a=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(a){var l="unknown keyword: "+a;if("log"!==e.opts.strictKeywords)throw new Error(l);e.logger.warn(l)}}if(e.isTop&&(n+=" var validate = ",i&&(e.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",s&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" /*# sourceURL="+s+" */ ")),"boolean"==typeof e.schema||!o&&!e.schema.$ref){t="false schema";var c=e.level,u=e.dataLevel,d=e.schema[t],h=e.schemaPath+e.util.getProperty(t),p=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,g="data"+(u||""),m="valid"+c;if(!1===e.schema){e.isTop?f=!0:n+=" var "+m+" = false; ",(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),n+=" } "):n+=" {} ";var b=n;n=J.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+b+"]); ":n+=" validate.errors = ["+b+"]; return false; ":n+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n+=i?" return data; ":" validate.errors = null; return true; ":n+=" var "+m+" = true; ";return e.isTop&&(n+=" }; return validate; "),n}if(e.isTop){var v=e.isTop;c=e.level=0,u=e.dataLevel=0,g="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==undefined&&e.opts.useDefaults&&e.opts.strictDefaults){var y="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(y);e.logger.warn(y)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{c=e.level,g="data"+((u=e.dataLevel)||"");if(s&&(e.baseId=e.resolve.url(e.baseId,s)),i&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+c+" = errors;"}m="valid"+c,f=!e.opts.allErrors;var w="",C="",S=e.schema.type,k=Array.isArray(S);if(S&&e.opts.nullable&&!0===e.schema.nullable&&(k?-1==S.indexOf("null")&&(S=S.concat("null")):"null"!=S&&(S=[S,"null"],k=!0)),k&&1==S.length&&(S=S[0],k=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(n+=" "+e.RULES.all.$comment.code(e,"$comment")),S){if(e.opts.coerceTypes)var P=e.util.coerceToTypes(e.opts.coerceTypes,S);var T=e.RULES.types[S];if(P||k||!0===T||T&&!Y(T)){h=e.schemaPath+".type",p=e.errSchemaPath+"/type",h=e.schemaPath+".type",p=e.errSchemaPath+"/type";var E=k?"checkDataTypes":"checkDataType";if(n+=" if ("+e.util[E](S,g,e.opts.strictNumbers,!0)+") { ",P){var A="dataType"+c,M="coerced"+c;n+=" var "+A+" = typeof "+g+"; var "+M+" = undefined; ","array"==e.opts.coerceTypes&&(n+=" if ("+A+" == 'object' && Array.isArray("+g+") && "+g+".length == 1) { "+g+" = "+g+"[0]; "+A+" = typeof "+g+"; if ("+e.util.checkDataType(e.schema.type,g,e.opts.strictNumbers)+") "+M+" = "+g+"; } "),n+=" if ("+M+" !== undefined) ; ";var _=P;if(_)for(var I,N=-1,O=_.length-1;N<O;)"string"==(I=_[N+=1])?n+=" else if ("+A+" == 'number' || "+A+" == 'boolean') "+M+" = '' + "+g+"; else if ("+g+" === null) "+M+" = ''; ":"number"==I||"integer"==I?(n+=" else if ("+A+" == 'boolean' || "+g+" === null || ("+A+" == 'string' && "+g+" && "+g+" == +"+g+" ","integer"==I&&(n+=" && !("+g+" % 1)"),n+=")) "+M+" = +"+g+"; "):"boolean"==I?n+=" else if ("+g+" === 'false' || "+g+" === 0 || "+g+" === null) "+M+" = false; else if ("+g+" === 'true' || "+g+" === 1) "+M+" = true; ":"null"==I?n+=" else if ("+g+" === '' || "+g+" === 0 || "+g+" === false) "+M+" = null; ":"array"==e.opts.coerceTypes&&"array"==I&&(n+=" else if ("+A+" == 'string' || "+A+" == 'number' || "+A+" == 'boolean' || "+g+" == null) "+M+" = ["+g+"]; ");n+=" else {   ",(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",n+=k?""+S.join(","):""+S,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=k?""+S.join(","):""+S,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),n+=" } "):n+=" {} ";b=n;n=J.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+b+"]); ":n+=" validate.errors = ["+b+"]; return false; ":n+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } if ("+M+" !== undefined) {  ";var R=u?"data"+(u-1||""):"parentData";n+=" "+g+" = "+M+"; ",u||(n+="if ("+R+" !== undefined)"),n+=" "+R+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+M+"; } "}else{(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",n+=k?""+S.join(","):""+S,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=k?""+S.join(","):""+S,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),n+=" } "):n+=" {} ";b=n;n=J.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+b+"]); ":n+=" validate.errors = ["+b+"]; return false; ":n+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" } "}}if(e.schema.$ref&&!o)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",f&&(n+=" } if (errors === ",n+=v?"0":"errs_"+c,n+=") { ",C+="}");else{var j=e.RULES;if(j)for(var F=-1,D=j.length-1;F<D;)if(Y(T=j[F+=1])){if(T.type&&(n+=" if ("+e.util.checkDataType(T.type,g,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==T.type&&e.schema.properties){d=e.schema.properties;var x=Object.keys(d);if(x)for(var B,L=-1,U=x.length-1;L<U;){if((q=d[B=x[L+=1]]).default!==undefined){var $=g+e.util.getProperty(B);if(e.compositeRule){if(e.opts.strictDefaults){y="default is ignored for: "+$;if("log"!==e.opts.strictDefaults)throw new Error(y);e.logger.warn(y)}}else n+=" if ("+$+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+$+" === null || "+$+" === '' "),n+=" ) "+$+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(q.default)+" ":n+=" "+JSON.stringify(q.default)+" ",n+="; "}}}else if("array"==T.type&&Array.isArray(e.schema.items)){var K=e.schema.items;if(K){N=-1;for(var q,H=K.length-1;N<H;)if((q=K[N+=1]).default!==undefined){$=g+"["+N+"]";if(e.compositeRule){if(e.opts.strictDefaults){y="default is ignored for: "+$;if("log"!==e.opts.strictDefaults)throw new Error(y);e.logger.warn(y)}}else n+=" if ("+$+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+$+" === null || "+$+" === '' "),n+=" ) "+$+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(q.default)+" ":n+=" "+JSON.stringify(q.default)+" ",n+="; "}}}var V=T.rules;if(V)for(var G,W=-1,z=V.length-1;W<z;)if(X(G=V[W+=1])){var Q=G.code(e,G.keyword,T.type);Q&&(n+=" "+Q+" ",f&&(w+="}"))}if(f&&(n+=" "+w+" ",w=""),T.type&&(n+=" } ",S&&S===T.type&&!P)){n+=" else { ";var J;h=e.schemaPath+".type",p=e.errSchemaPath+"/type";(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",n+=k?""+S.join(","):""+S,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=k?""+S.join(","):""+S,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),n+=" } "):n+=" {} ";b=n;n=J.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+b+"]); ":n+=" validate.errors = ["+b+"]; return false; ":n+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}f&&(n+=" if (errors === ",n+=v?"0":"errs_"+c,n+=") { ",C+="}")}}function Y(e){for(var t=e.rules,r=0;r<t.length;r++)if(X(t[r]))return!0}function X(t){return e.schema[t.keyword]!==undefined||t.implements&&function(t){for(var r=t.implements,n=0;n<r.length;n++)if(e.schema[r[n]]!==undefined)return!0}(t)}return f&&(n+=" "+C+" "),v?(i?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+m+" = errors === errs_"+c+";",n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/validate.js"}],[3959,{"./definition_schema":3932,"./dotjs/custom":3942},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=/^[a-z_$][a-z0-9_$-]*$/i,i=e("./dotjs/custom"),o=e("./definition_schema");t.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!n.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var o=t.type;if(Array.isArray(o))for(var s=0;s<o.length;s++)l(e,o[s],t);else l(e,o,t);var a=t.metaSchema;a&&(t.$data&&this._opts.$data&&(a={anyOf:[a,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(a,!0))}function l(e,t,n){for(var o,s=0;s<r.length;s++){var a=r[s];if(a.type==t){o=a;break}}o||(o={type:t,rules:[]},r.push(o));var l={keyword:e,definition:n,custom:!0,code:i,implements:n.implements};o.rules.push(l),r.custom[e]=l}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,i=0;i<n.length;i++)if(n[i].keyword==e){n.splice(i,1);break}return this},validate:function e(t,r){e.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(o,!0);if(n(t))return!0;if(e.errors=n.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/keyword.js"}],[396,{"@metamask/transaction-controller":3095,lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),i=e("lodash");r.default={version:22,migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=22;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(e=>(e.status!==n.TransactionStatus.submitted||e.submittedTime||(e.submittedTime=(new Date).getTime()),e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #22${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/022.js"}],[3960,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/refs/data.json"}],[3961,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/refs/json-schema-draft-07.json"}],[3962,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=t.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),i(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function i(e,t,r,s,a,l,c,u,d,h){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var p in t(s,a,l,c,u,d,h),s){var f=s[p];if(Array.isArray(f)){if(p in n.arrayKeywords)for(var g=0;g<f.length;g++)i(e,t,r,f[g],a+"/"+p+"/"+g,l,a,p,s,g)}else if(p in n.propsKeywords){if(f&&"object"==typeof f)for(var m in f)i(e,t,r,f[m],a+"/"+p+"/"+o(m),l,a,p,s,m)}else(p in n.keywords||e.allKeys&&!(p in n.skipKeywords))&&i(e,t,r,f,a+"/"+p,l,a,p,s)}r(s,a,l,c,u,d,h)}}function o(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}}}},{package:"eslint>ajv>json-schema-traverse",file:"node_modules/ajv/node_modules/json-schema-traverse/index.js"}],[397,{"@metamask/transaction-controller":3095,lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("@metamask/transaction-controller");r.default={version:23,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=23;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;if(e.length<=40)return t;const r=e.reverse();let n=!0;for(;r.length>40&&n;){const e=r.findIndex(e=>e.status===i.TransactionStatus.failed||e.status===i.TransactionStatus.rejected||e.status===i.TransactionStatus.confirmed||e.status===i.TransactionStatus.dropped);e<0?n=!1:r.splice(e,1)}t.TransactionController.transactions=r.reverse()}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #23${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/023.js"}],[398,{"@metamask/transaction-controller":3095,lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("@metamask/transaction-controller");r.default={version:24,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=24;const r=function(e){const t=e;if(!t.TransactionController)return t;const{transactions:r}=t.TransactionController;return t.TransactionController.transactions=r.map((e,t)=>(e.status===i.TransactionStatus.unapproved&&e.txParams&&e.txParams.from&&(e.txParams.from=e.txParams.from.toLowerCase()),e)),t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/024.js"}],[399,{"../lib/util":374,"@metamask/transaction-controller":3095,lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("@metamask/transaction-controller"),o=e("../lib/util");r.default={version:25,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=25;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(e=>(e.status!==i.TransactionStatus.unapproved||(e.txParams=function(e){const t={from:e=>(0,o.addHexPrefix)(e).toLowerCase(),to:()=>(0,o.addHexPrefix)(e.to).toLowerCase(),nonce:e=>(0,o.addHexPrefix)(e),value:e=>(0,o.addHexPrefix)(e),data:e=>(0,o.addHexPrefix)(e),gas:e=>(0,o.addHexPrefix)(e),gasPrice:e=>(0,o.addHexPrefix)(e)},r={};return Object.keys(t).forEach(n=>{e[n]&&(r[n]=t[n](e[n]))}),r}(e.txParams)),e))}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/025.js"}],[40,{"../../controllers/encryption-public-key":230},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EncryptionPublicKeyControllerInit=void 0;var n,i=(n=e("../../controllers/encryption-public-key"))&&n.__esModule?n:{default:n};r.EncryptionPublicKeyControllerInit=({controllerMessenger:e,initMessenger:t,getController:r,getUIState:n})=>{const o=r("EncryptionPublicKeyManager"),s=r("KeyringController");return{persistedStateKey:null,memStateKey:null,controller:new i.default({messenger:e,manager:o,getState:n,getAccountKeyringType:e=>s.getAccountKeyringType(e),getEncryptionPublicKey:e=>t.call("KeyringController:getEncryptionPublicKey",e),metricsEvent:t.call.bind(t,"MetaMetricsController:trackEvent")})}}}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/encryption-public-key-controller-init.ts"}],[400,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:26,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=26;try{const e=t.data;t.data=function(e){if(!e.KeyringController||!e.PreferencesController)return e;if(!e.KeyringController.walletNicknames)return e;return e.PreferencesController.identities=Object.keys(e.KeyringController.walletNicknames).reduce((t,r)=>(t[r]={name:e.KeyringController.walletNicknames[r],address:r},t),{}),delete e.KeyringController.walletNicknames,e}(e)}catch(e){return console.warn(`MetaMask Migration #26${e.stack}`),Promise.reject(e)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/026.js"}],[401,{"@metamask/transaction-controller":3095,lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("@metamask/transaction-controller");r.default={version:27,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=27;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.filter(e=>e.status!==i.TransactionStatus.rejected)}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/027.js"}],[4012,{_process:5152,timers:4139},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e,t){(function(){class n{constructor(e){this.tasks=[],this.count=e}sched(){if(this.count>0&&this.tasks.length>0){this.count--;let e=this.tasks.shift();if(e===undefined)throw"Unexpected undefined value in tasks list";e()}}acquire(){return new Promise((r,n)=>{this.tasks.push(()=>{var e=!1;r(()=>{e||(e=!0,this.count++,this.sched())})}),e&&e.nextTick?e.nextTick(this.sched.bind(this)):t(this.sched.bind(this))})}use(e){return this.acquire().then(t=>e().then(e=>(t(),e)).catch(e=>{throw t(),e}))}}r.Semaphore=n;r.Mutex=class extends n{constructor(){super(1)}}}).call(this)}).call(this,e("_process"),e("timers").setImmediate)}}},{package:"await-semaphore",file:"node_modules/await-semaphore/index.js"}],[4013,{_process:5152,buffer:4137,timers:4139},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e,r,n){(function(){function i(e,t){return function(){return e.apply(t,arguments)}}const{toString:o}=Object.prototype,{getPrototypeOf:s}=Object,{iterator:a,toStringTag:l}=Symbol,c=(u=Object.create(null),e=>{const t=o.call(e);return u[t]||(u[t]=t.slice(8,-1).toLowerCase())});var u;const d=e=>(e=e.toLowerCase(),t=>c(t)===e),h=e=>t=>typeof t===e,{isArray:p}=Array,f=h("undefined");function g(e){return null!==e&&!f(e)&&null!==e.constructor&&!f(e.constructor)&&v(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const m=d("ArrayBuffer");const b=h("string"),v=h("function"),y=h("number"),w=e=>null!==e&&"object"==typeof e,C=e=>{if("object"!==c(e))return!1;const t=s(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||l in e||a in e)},S=d("Date"),k=d("File"),P=d("Blob"),T=d("FileList"),E=d("URLSearchParams"),[A,M,_,I]=["ReadableStream","Request","Response","Headers"].map(d);function N(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,i;if("object"!=typeof e&&(e=[e]),p(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{if(g(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let s;for(n=0;n<o;n++)s=i[n],t.call(null,e[s],s,e)}}function O(e,t){if(g(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,i=r.length;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}const R="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,j=e=>!f(e)&&e!==R;const F=(D="undefined"!=typeof Uint8Array&&s(Uint8Array),e=>D&&e instanceof D);var D;const x=d("HTMLFormElement"),B=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),L=d("RegExp"),U=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};N(r,(r,i)=>{let o;!1!==(o=t(r,i,e))&&(n[i]=o||r)}),Object.defineProperties(e,n)};const $=d("AsyncFunction"),K=(q="function"==typeof n,H=v(R.postMessage),q?n:H?(V=`axios@${Math.random()}`,G=[],R.addEventListener("message",({source:e,data:t})=>{e===R&&t===V&&G.length&&G.shift()()},!1),e=>{G.push(e),R.postMessage(V,"*")}):e=>setTimeout(e));var q,H,V,G;const W="undefined"!=typeof queueMicrotask?queueMicrotask.bind(R):void 0!==e&&e.nextTick||K;var z={isArray:p,isArrayBuffer:m,isBuffer:g,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||v(e.append)&&("formdata"===(t=c(e))||"object"===t&&v(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&m(e.buffer),t},isString:b,isNumber:y,isBoolean:e=>!0===e||!1===e,isObject:w,isPlainObject:C,isEmptyObject:e=>{if(!w(e)||g(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(e){return!1}},isReadableStream:A,isRequest:M,isResponse:_,isHeaders:I,isUndefined:f,isDate:S,isFile:k,isBlob:P,isRegExp:L,isFunction:v,isStream:e=>w(e)&&v(e.pipe),isURLSearchParams:E,isTypedArray:F,isFileList:T,forEach:N,merge:function e(){const{caseless:t,skipUndefined:r}=j(this)&&this||{},n={},i=(i,o)=>{if("__proto__"===o||"constructor"===o||"prototype"===o)return;const s=t&&O(n,o)||o;C(n[s])&&C(i)?n[s]=e(n[s],i):C(i)?n[s]=e({},i):p(i)?n[s]=i.slice():r&&f(i)||(n[s]=i)};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&N(arguments[e],i);return n},extend:(e,t,r,{allOwnKeys:n}={})=>(N(t,(t,n)=>{r&&v(t)?Object.defineProperty(e,n,{value:i(t,r),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,n,{value:t,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let i,o,a;const l={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],n&&!n(a,e,t)||l[a]||(t[a]=e[a],l[a]=!0);e=!1!==r&&s(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:c,kindOfTest:d,endsWith:(e,t,r)=>{e=String(e),(r===undefined||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(p(e))return e;let t=e.length;if(!y(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[a]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:x,hasOwnProperty:B,hasOwnProp:B,reduceDescriptors:U,freezeMethods:e=>{U(e,(t,r)=>{if(v(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];v(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return p(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:O,global:R,isContextDefined:j,isSpecCompliantForm:function(e){return!!(e&&v(e.append)&&"FormData"===e[l]&&e[a])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(w(e)){if(t.indexOf(e)>=0)return;if(g(e))return e;if(!("toJSON"in e)){t[n]=e;const i=p(e)?[]:{};return N(e,(e,t)=>{const o=r(e,n+1);!f(o)&&(i[t]=o)}),t[n]=undefined,i}}return e};return r(e,0)},isAsyncFn:$,isThenable:e=>e&&(w(e)||v(e))&&v(e.then)&&v(e.catch),setImmediate:K,asap:W,isIterable:e=>null!=e&&v(e[a])};class Q extends Error{static from(e,t,r,n,i,o){const s=new Q(e.message,t||e.code,r,n,i);return s.cause=e,s.name=e.name,o&&Object.assign(s,o),s}constructor(e,t,r,n,i){super(e),this.name="AxiosError",this.isAxiosError=!0,t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.status}}}Q.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE",Q.ERR_BAD_OPTION="ERR_BAD_OPTION",Q.ECONNABORTED="ECONNABORTED",Q.ETIMEDOUT="ETIMEDOUT",Q.ERR_NETWORK="ERR_NETWORK",Q.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS",Q.ERR_DEPRECATED="ERR_DEPRECATED",Q.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE",Q.ERR_BAD_REQUEST="ERR_BAD_REQUEST",Q.ERR_CANCELED="ERR_CANCELED",Q.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT",Q.ERR_INVALID_URL="ERR_INVALID_URL";var J=Q;function Y(e){return z.isPlainObject(e)||z.isArray(e)}function X(e){return z.endsWith(e,"[]")?e.slice(0,-2):e}function Z(e,t,r){return e?e.concat(t).map(function(e,t){return e=X(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const ee=z.toFlatObject(z,{},null,function(e){return/^is[A-Z]/.test(e)});function te(e,t,n){if(!z.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(n=z.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!z.isUndefined(t[e])})).metaTokens,o=n.visitor||u,s=n.dots,a=n.indexes,l=(n.Blob||"undefined"!=typeof Blob&&Blob)&&z.isSpecCompliantForm(t);if(!z.isFunction(o))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(z.isDate(e))return e.toISOString();if(z.isBoolean(e))return e.toString();if(!l&&z.isBlob(e))throw new J("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(e)||z.isTypedArray(e)?l&&"function"==typeof Blob?new Blob([e]):r.from(e):e}function u(e,r,n){let o=e;if(e&&!n&&"object"==typeof e)if(z.endsWith(r,"{}"))r=i?r:r.slice(0,-2),e=JSON.stringify(e);else if(z.isArray(e)&&function(e){return z.isArray(e)&&!e.some(Y)}(e)||(z.isFileList(e)||z.endsWith(r,"[]"))&&(o=z.toArray(e)))return r=X(r),o.forEach(function(e,n){!z.isUndefined(e)&&null!==e&&t.append(!0===a?Z([r],n,s):null===a?r:r+"[]",c(e))}),!1;return!!Y(e)||(t.append(Z(n,r,s),c(e)),!1)}const d=[],h=Object.assign(ee,{defaultVisitor:u,convertValue:c,isVisitable:Y});if(!z.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!z.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+n.join("."));d.push(r),z.forEach(r,function(r,i){!0===(!(z.isUndefined(r)||null===r)&&o.call(t,r,z.isString(i)?i.trim():i,n,h))&&e(r,n?n.concat(i):[i])}),d.pop()}}(e),t}function re(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function ne(e,t){this._pairs=[],e&&te(e,this,t)}const ie=ne.prototype;function oe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function se(e,t,r){if(!t)return e;const n=r&&r.encode||oe,i=z.isFunction(r)?{serialize:r}:r,o=i&&i.serialize;let s;if(s=o?o(t,i):z.isURLSearchParams(t)?t.toString():new ne(t,i).toString(n),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}ie.append=function(e,t){this._pairs.push([e,t])},ie.toString=function(e){const t=e?function(t){return e.call(this,t,re)}:re;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};var ae=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){z.forEach(this.handlers,function(t){null!==t&&e(t)})}},le={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},ce={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:ne,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const ue="undefined"!=typeof window&&"undefined"!=typeof document,de="object"==typeof navigator&&navigator||undefined,he=ue&&(!de||["ReactNative","NativeScript","NS"].indexOf(de.product)<0),pe="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,fe=ue&&window.location.href||"http://localhost";var ge={...Object.freeze({__proto__:null,hasBrowserEnv:ue,hasStandardBrowserWebWorkerEnv:pe,hasStandardBrowserEnv:he,navigator:de,origin:fe}),...ce};function me(e){function t(e,r,n,i){let o=e[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=e.length;if(o=!o&&z.isArray(n)?n.length:o,a)return z.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!s;n[o]&&z.isObject(n[o])||(n[o]=[]);return t(e,r,n[o],i)&&z.isArray(n[o])&&(n[o]=function(e){const t={},r=Object.keys(e);let n;const i=r.length;let o;for(n=0;n<i;n++)o=r[n],t[o]=e[o];return t}(n[o])),!s}if(z.isFormData(e)&&z.isFunction(e.entries)){const r={};return z.forEachEntry(e,(e,n)=>{t(function(e){return z.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null}const be={transitional:le,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,i=z.isObject(e);i&&z.isHTMLForm(e)&&(e=new FormData(e));if(z.isFormData(e))return n?JSON.stringify(me(e)):e;if(z.isArrayBuffer(e)||z.isBuffer(e)||z.isStream(e)||z.isFile(e)||z.isBlob(e)||z.isReadableStream(e))return e;if(z.isArrayBufferView(e))return e.buffer;if(z.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return te(e,new ge.classes.URLSearchParams,{visitor:function(e,t,r,n){return ge.isNode&&z.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((o=z.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return te(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),function(e,t,r){if(z.isString(e))try{return(t||JSON.parse)(e),z.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||be.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(z.isResponse(e)||z.isReadableStream(e))return e;if(e&&z.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(e){if(r){if("SyntaxError"===e.name)throw J.from(e,J.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ge.classes.FormData,Blob:ge.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":undefined}}};z.forEach(["delete","get","head","post","put","patch"],e=>{be.headers[e]={}});var ve=be;const ye=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const we=Symbol("internals");function Ce(e){return e&&String(e).trim().toLowerCase()}function Se(e){return!1===e||null==e?e:z.isArray(e)?e.map(Se):String(e)}function ke(e,t,r,n,i){return z.isFunction(n)?n.call(this,t,r):(i&&(t=r),z.isString(t)?z.isString(n)?-1!==t.indexOf(n):z.isRegExp(n)?n.test(t):void 0:void 0)}class Pe{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function i(e,t,r){const i=Ce(t);if(!i)throw new Error("header name must be a non-empty string");const o=z.findKey(n,i);(!o||n[o]===undefined||!0===r||r===undefined&&!1!==n[o])&&(n[o||t]=Se(e))}const o=(e,t)=>z.forEach(e,(e,r)=>i(e,r,t));if(z.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(z.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let r,n,i;return e&&e.split("\n").forEach(function(e){i=e.indexOf(":"),r=e.substring(0,i).trim().toLowerCase(),n=e.substring(i+1).trim(),!r||t[r]&&ye[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(z.isObject(e)&&z.isIterable(e)){let r,n,i={};for(const t of e){if(!z.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[n=t[0]]=(r=i[n])?z.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}o(i,t)}else null!=e&&i(t,e,r);return this}get(e,t){if(e=Ce(e)){const r=z.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(z.isFunction(t))return t.call(this,e,r);if(z.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ce(e)){const r=z.findKey(this,e);return!(!r||this[r]===undefined||t&&!ke(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function i(e){if(e=Ce(e)){const i=z.findKey(r,e);!i||t&&!ke(0,r[i],i,t)||(delete r[i],n=!0)}}return z.isArray(e)?e.forEach(i):i(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const i=t[r];e&&!ke(0,this[i],i,e,!0)||(delete this[i],n=!0)}return n}normalize(e){const t=this,r={};return z.forEach(this,(n,i)=>{const o=z.findKey(r,i);if(o)return t[o]=Se(n),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(i):String(i).trim();s!==i&&delete t[i],t[s]=Se(n),r[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return z.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&z.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){const t=(this[we]=this[we]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=Ce(e);t[n]||(!function(e,t){const r=z.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,i){return this[n].call(this,t,e,r,i)},configurable:!0})})}(r,e),t[n]=!0)}return z.isArray(e)?e.forEach(n):n(e),this}}Pe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),z.reduceDescriptors(Pe.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),z.freezeMethods(Pe);var Te=Pe;function Ee(e,t){const r=this||ve,n=t||r,i=Te.from(n.headers);let o=n.data;return z.forEach(e,function(e){o=e.call(r,o,i.normalize(),t?t.status:undefined)}),i.normalize(),o}function Ae(e){return!(!e||!e.__CANCEL__)}var Me=class extends J{constructor(e,t,r){super(null==e?"canceled":e,J.ERR_CANCELED,t,r),this.name="CanceledError",this.__CANCEL__=!0}};function _e(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new J("Request failed with status code "+r.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const Ie=(e,t,r=3)=>{let n=0;const i=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i,o=0,s=0;return t=t!==undefined?t:1e3,function(a){const l=Date.now(),c=n[s];i||(i=l),r[o]=a,n[o]=l;let u=s,d=0;for(;u!==o;)d+=r[u++],u%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):undefined}}(50,250);return function(e,t){let r,n,i=0,o=1e3/t;const s=(t,o=Date.now())=>{i=o,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{const t=Date.now(),a=t-i;a>=o?s(e,t):(r=e,n||(n=setTimeout(()=>{n=null,s(r)},o-a)))},()=>r&&s(r)]}(r=>{const o=r.loaded,s=r.lengthComputable?r.total:undefined,a=o-n,l=i(a);n=o;const c={loaded:o,total:s,progress:s?o/s:undefined,bytes:a,rate:l||undefined,estimated:l&&s&&o<=s?(s-o)/l:undefined,event:r,lengthComputable:null!=s,[t?"download":"upload"]:!0};e(c)},r)},Ne=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Oe=e=>(...t)=>z.asap(()=>e(...t));var Re=ge.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,ge.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(ge.origin),ge.navigator&&/(msie|trident)/i.test(ge.navigator.userAgent)):()=>!0,je=ge.hasStandardBrowserEnv?{write(e,t,r,n,i,o,s){if("undefined"==typeof document)return;const a=[`${e}=${encodeURIComponent(t)}`];z.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),z.isString(n)&&a.push(`path=${n}`),z.isString(i)&&a.push(`domain=${i}`),!0===o&&a.push("secure"),z.isString(s)&&a.push(`SameSite=${s}`),document.cookie=a.join("; ")},read(e){if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function Fe(e,t,r){let n=!("string"==typeof(i=t)&&/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i));var i;return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const De=e=>e instanceof Te?{...e}:e;function xe(e,t){t=t||{};const r={};function n(e,t,r,n){return z.isPlainObject(e)&&z.isPlainObject(t)?z.merge.call({caseless:n},e,t):z.isPlainObject(t)?z.merge({},t):z.isArray(t)?t.slice():t}function i(e,t,r,i){return z.isUndefined(t)?z.isUndefined(e)?void 0:n(undefined,e,0,i):n(e,t,0,i)}function o(e,t){if(!z.isUndefined(t))return n(undefined,t)}function s(e,t){return z.isUndefined(t)?z.isUndefined(e)?void 0:n(undefined,e):n(undefined,t)}function a(r,i,o){return o in t?n(r,i):o in e?n(undefined,r):void 0}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,r)=>i(De(e),De(t),0,!0)};return z.forEach(Object.keys({...e,...t}),function(n){if("__proto__"===n||"constructor"===n||"prototype"===n)return;const o=z.hasOwnProp(l,n)?l[n]:i,s=o(e[n],t[n],n);z.isUndefined(s)&&o!==a||(r[n]=s)}),r}var Be=e=>{const t=xe({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:o,headers:s,auth:a}=t;if(t.headers=s=Te.from(s),t.url=se(Fe(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),z.isFormData(r))if(ge.hasStandardBrowserEnv||ge.hasStandardBrowserWebWorkerEnv)s.setContentType(undefined);else if(z.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&s.set(e,r)})}if(ge.hasStandardBrowserEnv&&(n&&z.isFunction(n)&&(n=n(t)),n||!1!==n&&Re(t.url))){const e=i&&o&&je.read(o);e&&s.set(i,e)}return t};var Le="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=Be(e);let i=n.data;const o=Te.from(n.headers).normalize();let s,a,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=n;function f(){c&&c(),u&&u(),n.cancelToken&&n.cancelToken.unsubscribe(s),n.signal&&n.signal.removeEventListener("abort",s)}let g=new XMLHttpRequest;function m(){if(!g)return;const n=Te.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());_e(function(e){t(e),f()},function(e){r(e),f()},{data:d&&"text"!==d&&"json"!==d?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:n,config:e,request:g}),g=null}g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(m)},g.onabort=function(){g&&(r(new J("Request aborted",J.ECONNABORTED,e,g)),g=null)},g.onerror=function(t){const n=t&&t.message?t.message:"Network Error",i=new J(n,J.ERR_NETWORK,e,g);i.event=t||null,r(i),g=null},g.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const i=n.transitional||le;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new J(t,i.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,e,g)),g=null},i===undefined&&o.setContentType(null),"setRequestHeader"in g&&z.forEach(o.toJSON(),function(e,t){g.setRequestHeader(t,e)}),z.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),d&&"json"!==d&&(g.responseType=n.responseType),p&&([l,u]=Ie(p,!0),g.addEventListener("progress",l)),h&&g.upload&&([a,c]=Ie(h),g.upload.addEventListener("progress",a),g.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(s=t=>{g&&(r(!t||t.type?new Me(null,e,g):t),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(s),n.signal&&(n.signal.aborted?s():n.signal.addEventListener("abort",s)));const b=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);b&&-1===ge.protocols.indexOf(b)?r(new J("Unsupported protocol "+b+":",J.ERR_BAD_REQUEST,e)):g.send(i||null)})};var Ue=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const i=function(e){if(!r){r=!0,s();const t=e instanceof Error?e:this.reason;n.abort(t instanceof J?t:new Me(t instanceof Error?t.message:t))}};let o=t&&setTimeout(()=>{o=null,i(new J(`timeout of ${t}ms exceeded`,J.ETIMEDOUT))},t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));const{signal:a}=n;return a.unsubscribe=()=>z.asap(s),a}};const $e=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,i=0;for(;i<r;)n=i+t,yield e.slice(i,n),i=n},Ke=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},qe=(e,t,r,n)=>{const i=async function*(e,t){for await(const r of Ke(e))yield*$e(r,t)}(e,t);let o,s=0,a=e=>{o||(o=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await i.next();if(t)return a(),void e.close();let o=n.byteLength;if(r){let e=s+=o;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw a(e),e}},cancel:e=>(a(e),i.return())},{highWaterMark:2})},{isFunction:He}=z,Ve=(({Request:e,Response:t})=>({Request:e,Response:t}))(z.global),{ReadableStream:Ge,TextEncoder:We}=z.global,ze=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},Qe=e=>{e=z.merge.call({skipUndefined:!0},Ve,e);const{fetch:t,Request:r,Response:n}=e,i=t?He(t):"function"==typeof fetch,o=He(r),s=He(n);if(!i)return!1;const a=i&&He(Ge),l=i&&("function"==typeof We?(c=new We,e=>c.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var c;const u=o&&a&&ze(()=>{let e=!1;const t=new r(ge.origin,{body:new Ge,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),d=s&&a&&ze(()=>z.isReadableStream(new n("").body)),h={stream:d&&(e=>e.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!h[e]&&(h[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new J(`Response type '${e}' is not supported`,J.ERR_NOT_SUPPORT,r)})});const p=async(e,t)=>{const n=z.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(z.isBlob(e))return e.size;if(z.isSpecCompliantForm(e)){const t=new r(ge.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return z.isArrayBufferView(e)||z.isArrayBuffer(e)?e.byteLength:(z.isURLSearchParams(e)&&(e+=""),z.isString(e)?(await l(e)).byteLength:void 0)})(t):n};return async e=>{let{url:i,method:s,data:a,signal:l,cancelToken:c,timeout:f,onDownloadProgress:g,onUploadProgress:m,responseType:b,headers:v,withCredentials:y="same-origin",fetchOptions:w}=Be(e),C=t||fetch;b=b?(b+"").toLowerCase():"text";let S=Ue([l,c&&c.toAbortSignal()],f),k=null;const P=S&&S.unsubscribe&&(()=>{S.unsubscribe()});let T;try{if(m&&u&&"get"!==s&&"head"!==s&&0!==(T=await p(v,a))){let e,t=new r(i,{method:"POST",body:a,duplex:"half"});if(z.isFormData(a)&&(e=t.headers.get("content-type"))&&v.setContentType(e),t.body){const[e,r]=Ne(T,Ie(Oe(m)));a=qe(t.body,65536,e,r)}}z.isString(y)||(y=y?"include":"omit");const t=o&&"credentials"in r.prototype,l={...w,signal:S,method:s.toUpperCase(),headers:v.normalize().toJSON(),body:a,duplex:"half",credentials:t?y:undefined};k=o&&new r(i,l);let c=await(o?C(k,w):C(i,l));const f=d&&("stream"===b||"response"===b);if(d&&(g||f&&P)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=z.toFiniteNumber(c.headers.get("content-length")),[r,i]=g&&Ne(t,Ie(Oe(g),!0))||[];c=new n(qe(c.body,65536,r,()=>{i&&i(),P&&P()}),e)}b=b||"text";let E=await h[z.findKey(h,b)||"text"](c,e);return!f&&P&&P(),await new Promise((t,r)=>{_e(t,r,{data:E,headers:Te.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:k})})}catch(t){if(P&&P(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new J("Network Error",J.ERR_NETWORK,e,k,t&&t.response),{cause:t.cause||t});throw J.from(t,t&&t.code,e,k,t&&t.response)}}},Je=new Map,Ye=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:i}=t,o=[n,i,r];let s,a,l=o.length,c=Je;for(;l--;)s=o[l],a=c.get(s),a===undefined&&c.set(s,a=l?new Map:Qe(t)),c=a;return a};Ye();const Xe={http:null,xhr:Le,fetch:{get:Ye}};z.forEach(Xe,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});const Ze=e=>`- ${e}`,et=e=>z.isFunction(e)||null===e||!1===e;var tt={getAdapter:function(e,t){e=z.isArray(e)?e:[e];const{length:r}=e;let n,i;const o={};for(let s=0;s<r;s++){let r;if(n=e[s],i=n,!et(n)&&(i=Xe[(r=String(n)).toLowerCase()],i===undefined))throw new J(`Unknown adapter '${r}'`);if(i&&(z.isFunction(i)||(i=i.get(t))))break;o[r||"#"+s]=i}if(!i){const e=Object.entries(o).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));let t=r?e.length>1?"since :\n"+e.map(Ze).join("\n"):" "+Ze(e[0]):"as no adapter specified";throw new J("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return i},adapters:Xe};function rt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Me(null,e)}function nt(e){rt(e),e.headers=Te.from(e.headers),e.data=Ee.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return tt.getAdapter(e.adapter||ve.adapter,e)(e).then(function(t){return rt(e),t.data=Ee.call(e,e.transformResponse,t),t.headers=Te.from(t.headers),t},function(t){return Ae(t)||(rt(e),t&&t.response&&(t.response.data=Ee.call(e,e.transformResponse,t.response),t.response.headers=Te.from(t.response.headers))),Promise.reject(t)})}const it="1.13.5",ot={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ot[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const st={};ot.transitional=function(e,t,r){function n(e,t){return"[Axios v"+it+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,i,o)=>{if(!1===e)throw new J(n(i," has been removed"+(t?" in "+t:"")),J.ERR_DEPRECATED);return t&&!st[i]&&(st[i]=!0,console.warn(n(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,i,o)}},ot.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};var at={assertOptions:function(e,t,r){if("object"!=typeof e)throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const o=n[i],s=t[o];if(s){const t=e[o],r=t===undefined||s(t,o,e);if(!0!==r)throw new J("option "+o+" must be "+r,J.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new J("Unknown option "+o,J.ERR_BAD_OPTION)}},validators:ot};const lt=at.validators;class ct{constructor(e){this.defaults=e||{},this.interceptors={request:new ae,response:new ae}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=xe(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:i}=t;r!==undefined&&at.assertOptions(r,{silentJSONParsing:lt.transitional(lt.boolean),forcedJSONParsing:lt.transitional(lt.boolean),clarifyTimeoutError:lt.transitional(lt.boolean),legacyInterceptorReqResOrdering:lt.transitional(lt.boolean)},!1),null!=n&&(z.isFunction(n)?t.paramsSerializer={serialize:n}:at.assertOptions(n,{encode:lt.function,serialize:lt.function},!0)),t.allowAbsoluteUrls!==undefined||(this.defaults.allowAbsoluteUrls!==undefined?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),at.assertOptions(t,{baseUrl:lt.spelling("baseURL"),withXsrfToken:lt.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&z.merge(i.common,i[t.method]);i&&z.forEach(["delete","get","head","post","put","patch","common"],e=>{delete i[e]}),t.headers=Te.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach(function(e){if("function"==typeof e.runWhen&&!1===e.runWhen(t))return;a=a&&e.synchronous;const r=t.transitional||le;r&&r.legacyInterceptorReqResOrdering?s.unshift(e.fulfilled,e.rejected):s.push(e.fulfilled,e.rejected)});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!a){const e=[nt.bind(this),undefined];for(e.unshift(...s),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=s.length;let h=t;for(;d<u;){const e=s[d++],t=s[d++];try{h=e(h)}catch(e){t.call(this,e);break}}try{c=nt.call(this,h)}catch(e){return Promise.reject(e)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return se(Fe((e=xe(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}z.forEach(["delete","get","head","options"],function(e){ct.prototype[e]=function(t,r){return this.request(xe(r||{},{method:e,url:t,data:(r||{}).data}))}}),z.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,i){return this.request(xe(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}ct.prototype[e]=t(),ct.prototype[e+"Form"]=t(!0)});var ut=ct;class dt{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,i){r.reason||(r.reason=new Me(e,n,i),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new dt(function(t){e=t}),cancel:e}}}var ht=dt;const pt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(pt).forEach(([e,t])=>{pt[t]=e});var ft=pt;const gt=function e(t){const r=new ut(t),n=i(ut.prototype.request,r);return z.extend(n,ut.prototype,r,{allOwnKeys:!0}),z.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(xe(t,r))},n}(ve);gt.Axios=ut,gt.CanceledError=Me,gt.CancelToken=ht,gt.isCancel=Ae,gt.VERSION=it,gt.toFormData=te,gt.AxiosError=J,gt.Cancel=gt.CanceledError,gt.all=function(e){return Promise.all(e)},gt.spread=function(e){return function(t){return e.apply(null,t)}},gt.isAxiosError=function(e){return z.isObject(e)&&!0===e.isAxiosError},gt.mergeConfig=xe,gt.AxiosHeaders=Te,gt.formToJSON=e=>me(z.isHTMLForm(e)?new FormData(e):e),gt.getAdapter=tt.getAdapter,gt.HttpStatusCode=ft,gt.default=gt,t.exports=gt}).call(this)}).call(this,e("_process"),e("buffer").Buffer,e("timers").setImmediate)}}},{package:"axios",file:"node_modules/axios/dist/browser/axios.cjs"}],[4014,{"./lib/ascii":4015,"./lib/base64":4016,"./lib/hex":4017,"./lib/utf16le":4018,"./lib/utf8":4019},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./lib/ascii"),i=e("./lib/base64"),o=e("./lib/hex"),s=e("./lib/utf8"),a=e("./lib/utf16le"),l=255===new Uint8Array(Uint16Array.of(255).buffer)[0];function c(e){switch(e){case"ascii":return n;case"base64":return i;case"hex":return o;case"utf8":case"utf-8":case undefined:return s;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a;default:throw new Error(`Unknown encoding: ${e}`)}}function u(e){return e instanceof Uint8Array}function d(e,t,r){return"string"==typeof e?function(e,t){const r=c(t),n=new Uint8Array(r.byteLength(e));return r.write(n,e,0,n.byteLength),n}(e,t):Array.isArray(e)?function(e){const t=new Uint8Array(e.length);return t.set(e),t}(e):ArrayBuffer.isView(e)?function(e){const t=new Uint8Array(e.byteLength);return t.set(e),t}(e):function(e,t,r){return new Uint8Array(e,t,r)}(e,t,r)}function h(e,t,r,n,i){if(0===e.byteLength)return-1;if("string"==typeof r?(n=r,r=0):r===undefined?r=i?0:e.length-1:r<0&&(r+=e.byteLength),r>=e.byteLength){if(i)return-1;r=e.byteLength-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t)t=d(t,n);else if("number"==typeof t)return t&=255,i?e.indexOf(t,r):e.lastIndexOf(t,r);if(0===t.byteLength)return-1;if(i){let n=-1;for(let i=r;i<e.byteLength;i++)if(e[i]===t[-1===n?0:i-n]){if(-1===n&&(n=i),i-n+1===t.byteLength)return n}else-1!==n&&(i-=i-n),n=-1}else{r+t.byteLength>e.byteLength&&(r=e.byteLength-t.byteLength);for(let n=r;n>=0;n--){let r=!0;for(let i=0;i<t.byteLength;i++)if(e[n+i]!==t[i]){r=!1;break}if(r)return n}}return-1}function p(e,t,r,n){return h(e,t,r,n,!0)}function f(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}t.exports=r={isBuffer:u,isEncoding:function(e){try{return c(e),!0}catch{return!1}},alloc:function(e,t,n){const i=new Uint8Array(e);return t!==undefined&&r.fill(i,t,0,i.byteLength,n),i},allocUnsafe:function(e){return new Uint8Array(e)},allocUnsafeSlow:function(e){return new Uint8Array(e)},byteLength:function(e,t){return c(t).byteLength(e)},compare:function(e,t){if(e===t)return 0;const r=Math.min(e.byteLength,t.byteLength);e=new DataView(e.buffer,e.byteOffset,e.byteLength),t=new DataView(t.buffer,t.byteOffset,t.byteLength);let n=0;for(let i=r-r%4;n<i;n+=4){if(e.getUint32(n,l)!==t.getUint32(n,l))break}for(;n<r;n++){const r=e.getUint8(n),i=t.getUint8(n);if(r<i)return-1;if(r>i)return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0},concat:function(e,t){t===undefined&&(t=e.reduce((e,t)=>e+t.byteLength,0));const r=new Uint8Array(t);let n=0;for(const t of e){if(n+t.byteLength>r.byteLength){const e=t.subarray(0,r.byteLength-n);return r.set(e,n),r}r.set(t,n),n+=t.byteLength}return r},copy:function(e,t,r=0,n=0,i=e.byteLength){if(i>0&&i<n)return 0;if(i===n)return 0;if(0===e.byteLength||0===t.byteLength)return 0;if(r<0)throw new RangeError("targetStart is out of range");if(n<0||n>=e.byteLength)throw new RangeError("sourceStart is out of range");if(i<0)throw new RangeError("sourceEnd is out of range");r>=t.byteLength&&(r=t.byteLength),i>e.byteLength&&(i=e.byteLength),t.byteLength-r<i-n&&(i=t.length-r+n);const o=i-n;return e===t?t.copyWithin(r,n,i):t.set(e.subarray(n,i),r),o},equals:function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=e.byteLength;e=new DataView(e.buffer,e.byteOffset,e.byteLength),t=new DataView(t.buffer,t.byteOffset,t.byteLength);let n=0;for(let i=r-r%4;n<i;n+=4)if(e.getUint32(n,l)!==t.getUint32(n,l))return!1;for(;n<r;n++)if(e.getUint8(n)!==t.getUint8(n))return!1;return!0},fill:function(e,t,r,n,i){if("string"==typeof t?"string"==typeof r?(i=r,r=0,n=e.byteLength):"string"==typeof n&&(i=n,n=e.byteLength):"number"==typeof t?t&=255:"boolean"==typeof t&&(t=+t),r<0||e.byteLength<r||e.byteLength<n)throw new RangeError("Out of range index");if(r===undefined&&(r=0),n===undefined&&(n=e.byteLength),n<=r)return e;if(t||(t=0),"number"==typeof t)for(let i=r;i<n;++i)e[i]=t;else{const o=(t=u(t)?t:d(t,i)).byteLength;for(let i=0;i<n-r;++i)e[i+r]=t[i%o]}return e},from:d,includes:function(e,t,r,n){return-1!==p(e,t,r,n)},indexOf:p,lastIndexOf:function(e,t,r,n){return h(e,t,r,n,!1)},swap16:function(e){const t=e.byteLength;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<t;r+=2)f(e,r,r+1);return e},swap32:function(e){const t=e.byteLength;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<t;r+=4)f(e,r,r+3),f(e,r+1,r+2);return e},swap64:function(e){const t=e.byteLength;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<t;r+=8)f(e,r,r+7),f(e,r+1,r+6),f(e,r+2,r+5),f(e,r+3,r+4);return e},toBuffer:function(e){return e},toString:function(e,t,r=0,n=e.byteLength){const i=e.byteLength;return r>=i||n<=r?"":(r<0&&(r=0),n>i&&(n=i),(0!==r||n<i)&&(e=e.subarray(r,n)),c(t).toString(e))},write:function(e,t,r,n,i){return r===undefined?i="utf8":n===undefined&&"string"==typeof r?(i=r,r=undefined):i===undefined&&"string"==typeof n&&(i=n,n=undefined),c(i).write(e,t,r,n)},writeDoubleLE:function(e,t,r){return r===undefined&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(r,t,!0),r+8},writeFloatLE:function(e,t,r){return r===undefined&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(r,t,!0),r+4},writeUInt32LE:function(e,t,r){return r===undefined&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setUint32(r,t,!0),r+4},writeInt32LE:function(e,t,r){return r===undefined&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setInt32(r,t,!0),r+4},readDoubleLE:function(e,t){return t===undefined&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},readFloatLE:function(e,t){return t===undefined&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},readUInt32LE:function(e,t){return t===undefined&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(t,!0)},readInt32LE:function(e,t){return t===undefined&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getInt32(t,!0)}}}}},{package:"@metamask/snaps-controllers>tar-stream>b4a",file:"node_modules/b4a/browser.js"}],[4015,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e.length}t.exports={byteLength:n,toString:function(e){const t=e.byteLength;let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r},write:function(e,t,r=0,i=n(t)){const o=Math.min(i,e.byteLength-r);for(let n=0;n<o;n++)e[r+n]=t.charCodeAt(n);return o}}}}},{package:"@metamask/snaps-controllers>tar-stream>b4a",file:"node_modules/b4a/lib/ascii.js"}],[4016,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(256);for(let e=0;e<64;e++)i[n.charCodeAt(e)]=e;function o(e){let t=e.length;return 61===e.charCodeAt(t-1)&&t--,t>1&&61===e.charCodeAt(t-1)&&t--,3*t>>>2}i[45]=62,i[95]=63,t.exports={byteLength:o,toString:function(e){const t=e.byteLength;let r="";for(let i=0;i<t;i+=3)r+=n[e[i]>>2]+n[(3&e[i])<<4|e[i+1]>>4]+n[(15&e[i+1])<<2|e[i+2]>>6]+n[63&e[i+2]];return t%3==2?r=r.substring(0,r.length-1)+"=":t%3==1&&(r=r.substring(0,r.length-2)+"=="),r},write:function(e,t,r=0,n=o(t)){const s=Math.min(n,e.byteLength-r);for(let r=0,n=0;n<s;r+=4){const o=i[t.charCodeAt(r)],s=i[t.charCodeAt(r+1)],a=i[t.charCodeAt(r+2)],l=i[t.charCodeAt(r+3)];e[n++]=o<<2|s>>4,e[n++]=(15&s)<<4|a>>2,e[n++]=(3&a)<<6|63&l}return s}}}}},{package:"@metamask/snaps-controllers>tar-stream>b4a",file:"node_modules/b4a/lib/base64.js"}],[4017,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e.length>>>1}function i(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:void 0}t.exports={byteLength:n,toString:function(e){const t=e.byteLength;e=new DataView(e.buffer,e.byteOffset,t);let r="",n=0;for(let i=t-t%4;n<i;n+=4)r+=e.getUint32(n).toString(16).padStart(8,"0");for(;n<t;n++)r+=e.getUint8(n).toString(16).padStart(2,"0");return r},write:function(e,t,r=0,o=n(t)){const s=Math.min(o,e.byteLength-r);for(let n=0;n<s;n++){const o=i(t.charCodeAt(2*n)),s=i(t.charCodeAt(2*n+1));if(o===undefined||s===undefined)return e.subarray(0,n);e[r+n]=o<<4|s}return s}}}}},{package:"@metamask/snaps-controllers>tar-stream>b4a",file:"node_modules/b4a/lib/hex.js"}],[4018,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return 2*e.length}t.exports={byteLength:n,toString:function(e){const t=e.byteLength;let r="";for(let n=0;n<t-1;n+=2)r+=String.fromCharCode(e[n]+256*e[n+1]);return r},write:function(e,t,r=0,i=n(t)){const o=Math.min(i,e.byteLength-r);let s=o;for(let n=0;n<t.length&&!((s-=2)<0);++n){const i=t.charCodeAt(n),o=i>>8,s=i%256;e[r+2*n]=s,e[r+2*n+1]=o}return o}}}}},{package:"@metamask/snaps-controllers>tar-stream>b4a",file:"node_modules/b4a/lib/utf16le.js"}],[4019,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){let t=0;for(let r=0,n=e.length;r<n;r++){const i=e.charCodeAt(r);if(i>=55296&&i<=56319&&r+1<n){const n=e.charCodeAt(r+1);if(n>=56320&&n<=57343){t+=4,r++;continue}}t+=i<=127?1:i<=2047?2:3}return t}let i,o;if("undefined"!=typeof TextDecoder){const e=new TextDecoder;i=function(t){return e.decode(t)}}else i=function(e){const t=e.byteLength;let r="",n=0;for(;n<t;){let i=e[n];if(i<=127){r+=String.fromCharCode(i),n++;continue}let o=0,s=0;if(i<=223?(o=1,s=31&i):i<=239?(o=2,s=15&i):i<=244&&(o=3,s=7&i),t-n-o>0){let t=0;for(;t<o;)i=e[n+t+1],s=s<<6|63&i,t+=1}else s=65533,o=t-n;r+=String.fromCodePoint(s),n+=o+1}return r};if("undefined"!=typeof TextEncoder){const e=new TextEncoder;o=function(t,r,i=0,o=n(r)){const s=Math.min(o,t.byteLength-i);return e.encodeInto(r,t.subarray(i,i+s)),s}}else o=function(e,t,r=0,i=n(t)){const o=Math.min(i,e.byteLength-r);e=e.subarray(r,r+o);let s=0,a=0;for(;s<t.length;){const r=t.codePointAt(s);if(r<=127){e[a++]=r,s++;continue}let n=0,i=0;for(r<=2047?(n=6,i=192):r<=65535?(n=12,i=224):r<=2097151&&(n=18,i=240),e[a++]=i|r>>n,n-=6;n>=0;)e[a++]=128|r>>n&63,n-=6;s+=r>=65536?2:1}return o};t.exports={byteLength:n,toString:i,write:o}}}},{package:"@metamask/snaps-controllers>tar-stream>b4a",file:"node_modules/b4a/lib/utf8.js"}],[402,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:28,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=28;const r=function(e){const t=e;if(t.PreferencesController&&t.PreferencesController.tokens&&t.PreferencesController.identities){const{identities:e,tokens:r}=t.PreferencesController;t.PreferencesController.accountTokens={},Object.keys(e).forEach(e=>{t.PreferencesController.accountTokens[e]={mainnet:r}}),t.PreferencesController.tokens=[]}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/028.js"}],[4022,{"to-data-view":5740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("to-data-view");t.exports=function(e,t,r){var i,o;switch(r=r||{},t){case"RFC3548":case"RFC4648":i="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",o=!0;break;case"RFC4648-HEX":i="0123456789ABCDEFGHIJKLMNOPQRSTUV",o=!0;break;case"Crockford":i="0123456789ABCDEFGHJKMNPQRSTVWXYZ",o=!1;break;default:throw new Error("Unknown base32 variant: "+t)}for(var s=r.padding!==undefined?r.padding:o,a=n(e),l=0,c=0,u="",d=0;d<a.byteLength;d++)for(c=c<<8|a.getUint8(d),l+=8;l>=5;)u+=i[c>>>l-5&31],l-=5;if(l>0&&(u+=i[c<<5-l&31]),s)for(;u.length%8!=0;)u+="=";return u}}}},{package:"base32-encode",file:"node_modules/base32-encode/index.js"}],[4024,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bech32m=r.bech32=void 0;const n="qpzry9x8gf2tvdw0s3jn54khce6mua7l",i={};for(let e=0;e<32;e++){const t=n.charAt(e);i[t]=e}function o(e){const t=e>>25;return(33554431&e)<<5^996825010&-(1&t)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function s(e){let t=1;for(let r=0;r<e.length;++r){const n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=o(t)^n>>5}t=o(t);for(let r=0;r<e.length;++r){const n=e.charCodeAt(r);t=o(t)^31&n}return t}function a(e,t,r,n){let i=0,o=0;const s=(1<<r)-1,a=[];for(let n=0;n<e.length;++n)for(i=i<<t|e[n],o+=t;o>=r;)o-=r,a.push(i>>o&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=t)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}function l(e){return a(e,8,5,!0)}function c(e){const t=a(e,5,8,!1);if(Array.isArray(t))return t}function u(e){const t=a(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}function d(e){let t;function r(e,r){if(r=r||90,e.length<8)return e+" too short";if(e.length>r)return"Exceeds length limit";const n=e.toLowerCase(),a=e.toUpperCase();if(e!==n&&e!==a)return"Mixed-case string "+e;const l=(e=n).lastIndexOf("1");if(-1===l)return"No separator character for "+e;if(0===l)return"Missing prefix for "+e;const c=e.slice(0,l),u=e.slice(l+1);if(u.length<6)return"Data too short";let d=s(c);if("string"==typeof d)return d;const h=[];for(let e=0;e<u.length;++e){const t=u.charAt(e),r=i[t];if(r===undefined)return"Unknown character "+t;d=o(d)^r,e+6>=u.length||h.push(r)}return d!==t?"Invalid checksum for "+e:{prefix:c,words:h}}return t="bech32"===e?1:734539939,{decodeUnsafe:function(e,t){const n=r(e,t);if("object"==typeof n)return n},decode:function(e,t){const n=r(e,t);if("object"==typeof n)return n;throw new Error(n)},encode:function(e,r,i){if(i=i||90,e.length+7+r.length>i)throw new TypeError("Exceeds length limit");let a=s(e=e.toLowerCase());if("string"==typeof a)throw new Error(a);let l=e+"1";for(let e=0;e<r.length;++e){const t=r[e];if(t>>5)throw new Error("Non 5-bit word");a=o(a)^t,l+=n.charAt(t)}for(let e=0;e<6;++e)a=o(a);a^=t;for(let e=0;e<6;++e){l+=n.charAt(a>>5*(5-e)&31)}return l},toWords:l,fromWordsUnsafe:c,fromWords:u}}r.bech32=d("bech32"),r.bech32m=d("bech32m")}}},{package:"bitcoin-address-validation>bech32",file:"node_modules/bech32/dist/index.js"}],[4027,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]&t[n];return r}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/and.js"}],[4028,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=[];if(t>e.length)throw new Error("shift amount cant be larger than bits array length");for(var n=0;n<e.length;n++)r[(e.length+n-t)%e.length]=e[n];return r}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/circular-shift-left.js"}],[4029,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=[];if(t>e.length)throw new Error("shift amount cant be larger than bits array length");for(var n=0;n<e.length;n++)r[(n+t)%e.length]=e[n];return r}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/circular-shift-right.js"}],[403,{"./fail-tx":595,"@metamask/transaction-controller":3095},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=e("@metamask/transaction-controller"),o=(n=e("./fail-tx"))&&n.__esModule?n:{default:n};r.default={version:29,migrate:(0,o.default)(29,"Stuck in approved state for too long.",e=>{const t=e.status===i.TransactionStatus.approved,r=e.submittedTime,n=Date.now();return t&&n-r>432e5})}}}},{package:"$root$",file:"app/scripts/migrations/029.js"}],[4030,{"./and":4027,"./circular-shift-left":4028,"./circular-shift-right":4029,"./nand":4031,"./nor":4032,"./not":4033,"./or":4034,"./reduce-and":4035,"./reduce-nand":4036,"./reduce-nor":4037,"./reduce-or":4038,"./reduce-xnor":4039,"./reduce-xor":4040,"./to-boolean":4041,"./to-string":4042,"./xnor":4043,"./xor":4044},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.xor=r.xnor=r.toString=r.toBoolean=r.reduceXor=r.reduceXnor=r.reduceOr=r.reduceNor=r.reduceNand=r.reduceAnd=r.or=r.not=r.nor=r.nand=r.circularShiftRight=r.circularShiftLeft=r.and=void 0;var n=e("./and");r.and=n.default;var i=e("./circular-shift-left");r.circularShiftLeft=i.default;var o=e("./circular-shift-right");r.circularShiftRight=o.default;var s=e("./nand");r.nand=s.default;var a=e("./nor");r.nor=a.default;var l=e("./not");r.not=l.default;var c=e("./or");r.or=c.default;var u=e("./reduce-and");r.reduceAnd=u.default;var d=e("./reduce-nand");r.reduceNand=d.default;var h=e("./reduce-nor");r.reduceNor=h.default;var p=e("./reduce-or");r.reduceOr=p.default;var f=e("./reduce-xnor");r.reduceXnor=f.default;var g=e("./reduce-xor");r.reduceXor=g.default;var m=e("./to-boolean");r.toBoolean=m.default;var b=e("./to-string");r.toString=b.default;var v=e("./xnor");r.xnor=v.default;var y=e("./xor");r.xor=y.default,r.default={and:n.default,circularShiftLeft:i.default,circularShiftRight:o.default,nand:s.default,nor:a.default,not:l.default,or:c.default,reduceAnd:u.default,reduceNand:d.default,reduceNor:h.default,reduceOr:p.default,reduceXnor:f.default,reduceXor:g.default,toBoolean:m.default,toString:b.default,xnor:v.default,xor:y.default}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/index.js"}],[4031,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]&t[n]^1;return r}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/nand.js"}],[4032,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=1^(e[n]|t[n]);return r}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/nor.js"}],[4033,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=1^e[r];return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/not.js"}],[4034,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]|t[n];return r}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/or.js"}],[4035,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e.length<2)throw new RangeError("Not enough bits.");for(var t=e[0],r=1;r<e.length;r++)t&=e[r];return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/reduce-and.js"}],[4036,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e.length<2)throw new RangeError("Not enough bits.");for(var t=e[0],r=1;r<e.length;r++)t=t&e[r]^1;return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/reduce-nand.js"}],[4037,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e.length<2)throw new RangeError("Not enough bits.");for(var t=e[0],r=1;r<e.length;r++)t=1^(t|e[r]);return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/reduce-nor.js"}],[4038,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e.length<2)throw new RangeError("Not enough bits.");for(var t=e[0],r=1;r<e.length;r++)t|=e[r];return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/reduce-or.js"}],[4039,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e.length<2)throw new RangeError("Not enough bits.");for(var t=e[0],r=1;r<e.length;r++)t^=1^e[r];return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/reduce-xnor.js"}],[404,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:30,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=30;const r=function(e){const t=e;if(e.PreferencesController){const{frequentRpcListDetail:e}=t.PreferencesController;e&&(e.forEach((t,r)=>{Boolean(t.chainId)&&Number.isNaN(parseInt(t.chainId))&&delete e[r].chainId}),t.PreferencesController.frequentRpcListDetail=e)}e.NetworkController&&(t.NetworkController.network&&Number.isNaN(parseInt(t.NetworkController.network))&&delete t.NetworkController.network,t.NetworkController.provider&&t.NetworkController.provider.chainId&&Number.isNaN(parseInt(t.NetworkController.provider.chainId))&&delete t.NetworkController.provider.chainId);return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/030.js"}],[4040,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e.length<2)throw new RangeError("Not enough bits.");for(var t=e[0],r=1;r<e.length;r++)t^=e[r];return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/reduce-xor.js"}],[4041,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=1===e[r];return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/to-boolean.js"}],[4042,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=" "),!t)return e.join("");for(var n="",i=0;i<e.length;i++)n+=""+e[i],i%t===t-1&&i!==e.length-1&&(n+=r);return n}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/to-string.js"}],[4043,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]^t[n]^1;return r}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/xnor.js"}],[4044,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/xor.js"}],[4045,{buffer:4137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,r,n){void 0===n&&(n=!1);for(var i=n?r.length:t.length,o=e.alloc(i),s=0;s<i;s++){var a=n?s%t.length:s;o[s]=t[a]&r[s]}return o}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/and.js"}],[4046,{"../byte/write":4060,buffer:4137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../byte/write");r.default=function(e){for(var r=[0,0,0,0,0,0,0,0],i=t.alloc(Math.ceil(e.length/8)),o=0;o<i.length;o++){for(var s=0;s<8;s++)e[8*o+s]?r[s]=e[8*o+s]:r[s]=0;i[o]=n.default(r)}return i}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/create.js"}],[4047,{"./and":4045,"./create":4046,"./modify":4048,"./nand":4049,"./nor":4050,"./not":4051,"./or":4052,"./read":4055,"./read-int":4053,"./read-u-int":4054,"./xnor":4056,"./xor":4057},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.xor=r.xnor=r.readUInt=r.readInt=r.read=r.or=r.not=r.nor=r.nand=r.modify=r.create=r.and=void 0;var n=e("./and");r.and=n.default;var i=e("./create");r.create=i.default;var o=e("./modify");r.modify=o.default;var s=e("./nand");r.nand=s.default;var a=e("./nor");r.nor=a.default;var l=e("./not");r.not=l.default;var c=e("./or");r.or=c.default;var u=e("./read");r.read=u.default;var d=e("./read-int");r.readInt=d.default;var h=e("./read-u-int");r.readUInt=h.default;var p=e("./xnor");r.xnor=p.default;var f=e("./xor");r.xor=f.default,r.default={and:n.default,create:i.default,modify:o.default,nand:s.default,nor:a.default,not:l.default,or:c.default,read:u.default,readInt:d.default,readUInt:h.default,xnor:p.default,xor:f.default}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/index.js"}],[4048,{"../byte/write":4060,"./read":4055},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../byte/write"),i=e("./read");r.default=function(e,t,r){void 0===r&&(r=0);for(var o=Math.floor(r/8),s=Math.ceil((r+t.length)/8),a=e.slice(o,s),l=i.default(a),c=r%8,u=0;u<t.length;u++)l[c++]=t[u];for(var d=s-o,h=0;h<d;h++)a[h]=n.default(l.slice(8*h,8*(h+1)))}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/modify.js"}],[4049,{buffer:4137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,r,n){void 0===n&&(n=!1);for(var i=n?r.length:t.length,o=e.alloc(i),s=0;s<i;s++){var a=n?s%t.length:s;o[s]=~(t[a]&r[s])}return o}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/nand.js"}],[405,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:31,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=31;const r=function(e){const{KeyringController:t,PreferencesController:r}=e;if(t&&r){const{vault:e}=t;r.completedOnboarding=Boolean(e)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/031.js"}],[4050,{buffer:4137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,r,n){void 0===n&&(n=!1);for(var i=n?r.length:t.length,o=e.alloc(i),s=0;s<i;s++){var a=n?s%t.length:s;o[s]=~(t[a]|r[s])}return o}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/nor.js"}],[4051,{buffer:4137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){for(var r=e.alloc(t.length),n=0;n<t.length;n++)r[n]=~t[n];return r}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/not.js"}],[4052,{buffer:4137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,r,n){void 0===n&&(n=!1);for(var i=n?r.length:t.length,o=e.alloc(i),s=0;s<i;s++){var a=n?s%t.length:s;o[s]=t[a]|r[s]}return o}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/or.js"}],[4053,{"../bits/not":4033,"../utilities":4071,"./read":4055},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../utilities"),i=e("../bits/not"),o=e("./read");r.default=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=8);var s=o.default(e,t,r);if(0===s[0]){for(var a=0,l=0;l<r;l++)s[l]&&(a+=n.p2[r-l-1]);return a}a=-1;var c=i.default(s);for(l=0;l<r;l++)c[l]&&(a-=n.p2[r-l-1]);return a}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/read-int.js"}],[4054,{"../utilities":4071,"./read":4055},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../utilities"),i=e("./read");r.default=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=8);for(var o=i.default(e,t,r),s=0,a=0;a<r;a++)s+=o[a]*n.p2[r-a-1];return s}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/read-u-int.js"}],[4055,{"../byte/read":4059},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../byte/read");r.default=function(e,t,r){void 0===t&&(t=0),r||(r=8*e.length-t);var i=Math.floor(t/8),o=Math.floor(r/8)+2,s=[];s.length=8*o;for(var a=0;a<o;a++){if(e[i+a]!==undefined){var l=n.default(e[i+a]);s[8*a]=l[0],s[8*a+1]=l[1],s[8*a+2]=l[2],s[8*a+3]=l[3],s[8*a+4]=l[4],s[8*a+5]=l[5],s[8*a+6]=l[6],s[8*a+7]=l[7]}}var c=t%8;return s.slice(c,c+r)}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/read.js"}],[4056,{buffer:4137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,r,n){void 0===n&&(n=!1);for(var i=n?r.length:t.length,o=e.alloc(i),s=0;s<i;s++){var a=n?s%t.length:s;o[s]=t[a]^~r[s]}return o}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/xnor.js"}],[4057,{buffer:4137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,r,n){void 0===n&&(n=!1);for(var i=n?r.length:t.length,o=e.alloc(i),s=0;s<i;s++){var a=n?s%t.length:s;o[s]=t[a]^r[s]}return o}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/xor.js"}],[4058,{"./read":4059,"./write":4060},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.write=r.read=void 0;var n=e("./read");r.read=n.default;var i=e("./write");r.write=i.default,r.default={read:n.default,write:i.default}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/byte/index.js"}],[4059,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e>255||e<0||~~e!==e)throw new RangeError("invalid byte");for(var t=[0,0,0,0,0,0,0,0],r=0;r<8;r++)t[7-r]=e>>r&1;return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/byte/read.js"}],[406,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:32,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=32;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const{betaUI:e}=t.featureFlags||{};t.completedUiMigration=e}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/032.js"}],[4060,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(!Array.isArray(e)||8!==e.length)throw new RangeError("invalid array length");for(var t=0,r=0;r<8;r++)e[7-r]&&(t|=1<<r);return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/byte/write.js"}],[4061,{"./bits":4030,"./buffer":4047,"./byte":4058,"./integer":4063,"./nibble":4066,"./string":4069},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.string=r.nibble=r.integer=r.byte=r.buffer=r.bits=void 0;var n=e("./bits");r.bits=n.default;var i=e("./buffer");r.buffer=i.default;var o=e("./byte");r.byte=o.default;var s=e("./integer");r.integer=s.default;var a=e("./nibble");r.nibble=a.default;var l=e("./string");r.string=l.default;var c={bits:n.default,buffer:i.default,byte:o.default,integer:s.default,nibble:a.default,string:l.default};r.default=c}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/index.js"}],[4062,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return e>>t&1}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/integer/get-bit.js"}],[4063,{"./get-bit":4062,"./set-bit":4064,"./toggle-bit":4065},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toggleBit=r.setBit=r.getBit=void 0;var n=e("./get-bit");r.getBit=n.default;var i=e("./set-bit");r.setBit=i.default;var o=e("./toggle-bit");r.toggleBit=o.default,r.default={getBit:n.default,setBit:i.default,toggleBit:o.default}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/integer/index.js"}],[4064,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r){return 1===r?e|1<<t:e&~(1<<t)}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/integer/set-bit.js"}],[4065,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return e^1<<t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/integer/toggle-bit.js"}],[4066,{"./read":4067,"./write":4068},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.write=r.read=void 0;var n=e("./read");r.read=n.default;var i=e("./write");r.write=i.default,r.default={read:n.default,write:i.default}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/nibble/index.js"}],[4067,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e<16&&e>=0&&Math.floor(e)===e){for(var t=[0,0,0,0],r=0;r<4;r++)t[3-r]=e>>r&1;return t}throw new RangeError("invalid array length")}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/nibble/read.js"}],[4068,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(!Array.isArray(e)||4!==e.length)throw new RangeError("invalid array length");for(var t=0,r=0;r<4;r++)e[3-r]&&(t|=1<<r);return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/nibble/write.js"}],[4069,{"./to-bits":4070},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toBits=void 0;var n=e("./to-bits");r.toBits=n.default,r.default={toBits:n.default}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/string/index.js"}],[407,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:33,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=33;const r=function(e){const t=e;e.NoticeController&&delete t.NoticeController;return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/033.js"}],[4070,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){for(var t=[],r=0;r<e.length;r++)"1"===e[r]?t.push(1):"0"===e[r]&&t.push(0);return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/string/to-bits.js"}],[4071,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.p2=void 0,r.p2=[];for(var n=0;n<32;n++)r.p2[n]=Math.pow(2,n)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/utilities.js"}],[4077,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){!function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,o=Math.floor,s="[BigNumber Error] ",a=s+"Number primitive has more than 15 significant digits: ",l=1e14,c=14,u=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,p=1e9;function f(e){var t=0|e;return e>0||e===t?t:t-1}function g(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(t=e[n++]+"",r=c-t.length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function m(e,t){var r,n,i=e.c,o=t.c,s=e.s,a=t.s,l=e.e,c=t.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=l==c,!i||!o)return n?0:!i^r?1:-1;if(!n)return l>c^r?1:-1;for(a=(l=i.length)<(c=o.length)?l:c,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return l==c?0:l>c^r?1:-1}function b(e,t,r,n){if(e<t||e>r||e!==o(e))throw Error(s+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function v(e){var t=e.c.length-1;return f(e.e/c)==t&&e.c[t]%2!=0}function y(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function w(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var r,C,S,k,P,T,E,A,M,_,I=H.prototype={constructor:H,toString:null,valueOf:null},N=new H(1),O=20,R=4,j=-7,F=21,D=-1e7,x=1e7,B=!1,L=1,U=0,$={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},K="0123456789abcdefghijklmnopqrstuvwxyz",q=!0;function H(e,t){var r,i,s,l,d,h,p,f,g=this;if(!(g instanceof H))return new H(e,t);if(null==t){if(e&&!0===e._isBigNumber)return g.s=e.s,void(!e.c||e.e>x?g.c=g.e=null:e.e<D?g.c=[g.e=0]:(g.e=e.e,g.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(g.s=1/e<0?(e=-e,-1):1,e===~~e){for(l=0,d=e;d>=10;d/=10,l++);return void(l>x?g.c=g.e=null:(g.e=l,g.c=[e]))}f=String(e)}else{if(!n.test(f=String(e)))return S(g,f,h);g.s=45==f.charCodeAt(0)?(f=f.slice(1),-1):1}(l=f.indexOf("."))>-1&&(f=f.replace(".","")),(d=f.search(/e/i))>0?(l<0&&(l=d),l+=+f.slice(d+1),f=f.substring(0,d)):l<0&&(l=f.length)}else{if(b(t,2,K.length,"Base"),10==t&&q)return z(g=new H(e),O+g.e+1,R);if(f=String(e),h="number"==typeof e){if(0*e!=0)return S(g,f,h,t);if(g.s=1/e<0?(f=f.slice(1),-1):1,H.DEBUG&&f.replace(/^0\.0*|\./,"").length>15)throw Error(a+e)}else g.s=45===f.charCodeAt(0)?(f=f.slice(1),-1):1;for(r=K.slice(0,t),l=d=0,p=f.length;d<p;d++)if(r.indexOf(i=f.charAt(d))<0){if("."==i){if(d>l){l=p;continue}}else if(!s&&(f==f.toUpperCase()&&(f=f.toLowerCase())||f==f.toLowerCase()&&(f=f.toUpperCase()))){s=!0,d=-1,l=0;continue}return S(g,String(e),h,t)}h=!1,(l=(f=C(f,t,10,g.s)).indexOf("."))>-1?f=f.replace(".",""):l=f.length}for(d=0;48===f.charCodeAt(d);d++);for(p=f.length;48===f.charCodeAt(--p););if(f=f.slice(d,++p)){if(p-=d,h&&H.DEBUG&&p>15&&(e>u||e!==o(e)))throw Error(a+g.s*e);if((l=l-d-1)>x)g.c=g.e=null;else if(l<D)g.c=[g.e=0];else{if(g.e=l,g.c=[],d=(l+1)%c,l<0&&(d+=c),d<p){for(d&&g.c.push(+f.slice(0,d)),p-=c;d<p;)g.c.push(+f.slice(d,d+=c));d=c-(f=f.slice(d)).length}else d-=p;for(;d--;f+="0");g.c.push(+f)}}else g.c=[g.e=0]}function V(e,t,r,n){var i,o,s,a,l;if(null==r?r=R:b(r,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)l=g(e.c),l=1==n||2==n&&(s<=j||s>=F)?y(l,s):w(l,s,"0");else if(o=(e=z(new H(e),t,r)).e,a=(l=g(e.c)).length,1==n||2==n&&(t<=o||o<=j)){for(;a<t;l+="0",a++);l=y(l,o)}else if(t-=s,l=w(l,o,"0"),o+1>a){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=o-a)>0)for(o+1==a&&(l+=".");t--;l+="0");return e.s<0&&i?"-"+l:l}function G(e,t){for(var r,n,i=1,o=new H(e[0]);i<e.length;i++)(!(n=new H(e[i])).s||(r=m(o,n))===t||0===r&&o.s===t)&&(o=n);return o}function W(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*c-1)>x?e.c=e.e=null:r<D?e.c=[e.e=0]:(e.e=r,e.c=t),e}function z(e,t,r,n){var s,a,u,h,p,f,g,m=e.c,b=d;if(m){e:{for(s=1,h=m[0];h>=10;h/=10,s++);if((a=t-s)<0)a+=c,u=t,p=m[f=0],g=o(p/b[s-u-1]%10);else if((f=i((a+1)/c))>=m.length){if(!n)break e;for(;m.length<=f;m.push(0));p=g=0,s=1,u=(a%=c)-c+1}else{for(p=h=m[f],s=1;h>=10;h/=10,s++);g=(u=(a%=c)-c+s)<0?0:o(p/b[s-u-1]%10)}if(n=n||t<0||null!=m[f+1]||(u<0?p:p%b[s-u-1]),n=r<4?(g||n)&&(0==r||r==(e.s<0?3:2)):g>5||5==g&&(4==r||n||6==r&&(a>0?u>0?p/b[s-u]:0:m[f-1])%10&1||r==(e.s<0?8:7)),t<1||!m[0])return m.length=0,n?(t-=e.e+1,m[0]=b[(c-t%c)%c],e.e=-t||0):m[0]=e.e=0,e;if(0==a?(m.length=f,h=1,f--):(m.length=f+1,h=b[c-a],m[f]=u>0?o(p/b[s-u]%b[u])*h:0),n)for(;;){if(0==f){for(a=1,u=m[0];u>=10;u/=10,a++);for(u=m[0]+=h,h=1;u>=10;u/=10,h++);a!=h&&(e.e++,m[0]==l&&(m[0]=1));break}if(m[f]+=h,m[f]!=l)break;m[f--]=0,h=1}for(a=m.length;0===m[--a];m.pop());}e.e>x?e.c=e.e=null:e.e<D&&(e.c=[e.e=0])}return e}function Q(e){var t,r=e.e;return null===r?e.toString():(t=g(e.c),t=r<=j||r>=F?y(t,r):w(t,r,"0"),e.s<0?"-"+t:t)}return H.clone=e,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(s+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(b(r=e[t],0,p,t),O=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(b(r=e[t],0,8,t),R=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(b(r[0],-p,0,t),b(r[1],0,p,t),j=r[0],F=r[1]):(b(r,-p,p,t),j=-(F=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)b(r[0],-p,-1,t),b(r[1],1,p,t),D=r[0],x=r[1];else{if(b(r,-p,p,t),!r)throw Error(s+t+" cannot be zero: "+r);D=-(x=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(s+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw B=!r,Error(s+"crypto unavailable");B=r}else B=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(b(r=e[t],0,9,t),L=r),e.hasOwnProperty(t="POW_PRECISION")&&(b(r=e[t],0,p,t),U=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(s+t+" not an object: "+r);$=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(s+t+" invalid: "+r);q="0123456789"==r.slice(0,10),K=r}}return{DECIMAL_PLACES:O,ROUNDING_MODE:R,EXPONENTIAL_AT:[j,F],RANGE:[D,x],CRYPTO:B,MODULO_MODE:L,POW_PRECISION:U,FORMAT:$,ALPHABET:K}},H.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!H.DEBUG)return!0;var t,r,n=e.c,i=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===a||-1===a)&&i>=-p&&i<=p&&i===o(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%c)<1&&(t+=c),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=l||r!==o(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===a||1===a||-1===a))return!0;throw Error(s+"Invalid BigNumber: "+e)},H.maximum=H.max=function(){return G(arguments,-1)},H.minimum=H.min=function(){return G(arguments,1)},H.random=(k=9007199254740992,P=Math.random()*k&2097151?function(){return o(Math.random()*k)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,a,l,u=0,h=[],f=new H(N);if(null==e?e=O:b(e,0,p),a=i(e/c),B)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));u<a;)(l=131072*t[u]+(t[u+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[u]=r[0],t[u+1]=r[1]):(h.push(l%1e14),u+=2);u=a/2}else{if(!crypto.randomBytes)throw B=!1,Error(s+"crypto unavailable");for(t=crypto.randomBytes(a*=7);u<a;)(l=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(h.push(l%1e14),u+=7);u=a/7}if(!B)for(;u<a;)(l=P())<9e15&&(h[u++]=l%1e14);for(a=h[--u],e%=c,a&&e&&(l=d[c-e],h[u]=o(a/l)*l);0===h[u];h.pop(),u--);if(u<0)h=[n=0];else{for(n=-1;0===h[0];h.splice(0,1),n-=c);for(u=1,l=h[0];l>=10;l/=10,u++);u<c&&(n-=c-u)}return f.e=n,f.c=h,f}),H.sum=function(){for(var e=1,t=arguments,r=new H(t[0]);e<t.length;)r=r.plus(t[e++]);return r},C=function(){var e="0123456789";function t(e,t,r,n){for(var i,o,s=[0],a=0,l=e.length;a<l;){for(o=s.length;o--;s[o]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(n,i,o,s,a){var l,c,u,d,h,p,f,m,b=n.indexOf("."),v=O,y=R;for(b>=0&&(d=U,U=0,n=n.replace(".",""),p=(m=new H(i)).pow(n.length-b),U=d,m.c=t(w(g(p.c),p.e,"0"),10,o,e),m.e=m.c.length),u=d=(f=t(n,i,o,a?(l=K,e):(l=e,K))).length;0==f[--d];f.pop());if(!f[0])return l.charAt(0);if(b<0?--u:(p.c=f,p.e=u,p.s=s,f=(p=r(p,m,v,y,o)).c,h=p.r,u=p.e),b=f[c=u+v+1],d=o/2,h=h||c<0||null!=f[c+1],h=y<4?(null!=b||h)&&(0==y||y==(p.s<0?3:2)):b>d||b==d&&(4==y||h||6==y&&1&f[c-1]||y==(p.s<0?8:7)),c<1||!f[0])n=h?w(l.charAt(1),-v,l.charAt(0)):l.charAt(0);else{if(f.length=c,h)for(--o;++f[--c]>o;)f[c]=0,c||(++u,f=[1].concat(f));for(d=f.length;!f[--d];);for(b=0,n="";b<=d;n+=l.charAt(f[b++]));n=w(n,u,l.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,o,s,a=0,l=e.length,c=t%h,u=t/h|0;for(e=e.slice();l--;)a=((i=c*(o=e[l]%h)+(n=u*o+(s=e[l]/h|0)*c)%h*h+a)/r|0)+(n/h|0)+u*s,e[l]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,s,a,u){var d,h,p,g,m,b,v,y,w,C,S,k,P,T,E,A,M,_=n.s==i.s?1:-1,I=n.c,N=i.c;if(!(I&&I[0]&&N&&N[0]))return new H(n.s&&i.s&&(I?!N||I[0]!=N[0]:N)?I&&0==I[0]||!N?0*_:_/0:NaN);for(w=(y=new H(_)).c=[],_=s+(h=n.e-i.e)+1,u||(u=l,h=f(n.e/c)-f(i.e/c),_=_/c|0),p=0;N[p]==(I[p]||0);p++);if(N[p]>(I[p]||0)&&h--,_<0)w.push(1),g=!0;else{for(T=I.length,A=N.length,p=0,_+=2,(m=o(u/(N[0]+1)))>1&&(N=e(N,m,u),I=e(I,m,u),A=N.length,T=I.length),P=A,S=(C=I.slice(0,A)).length;S<A;C[S++]=0);M=N.slice(),M=[0].concat(M),E=N[0],N[1]>=u/2&&E++;do{if(m=0,(d=t(N,C,A,S))<0){if(k=C[0],A!=S&&(k=k*u+(C[1]||0)),(m=o(k/E))>1)for(m>=u&&(m=u-1),v=(b=e(N,m,u)).length,S=C.length;1==t(b,C,v,S);)m--,r(b,A<v?M:N,v,u),v=b.length,d=1;else 0==m&&(d=m=1),v=(b=N.slice()).length;if(v<S&&(b=[0].concat(b)),r(C,b,S,u),S=C.length,-1==d)for(;t(N,C,A,S)<1;)m++,r(C,A<S?M:N,S,u),S=C.length}else 0===d&&(m++,C=[0]);w[p++]=m,C[0]?C[S++]=I[P]||0:(C=[I[P]],S=1)}while((P++<T||null!=C[0])&&_--);g=null!=C[0],w[0]||w.splice(0,1)}if(u==l){for(p=1,_=w[0];_>=10;_/=10,p++);z(y,s+(y.e=p+h*c-1)+1,a,g)}else y.e=h,y.r=+g;return y}}(),T=/^(-?)0([xbo])(?=\w[\w.]*$)/i,E=/^([^.]+)\.$/,A=/^\.([^.]+)$/,M=/^-?(Infinity|NaN)$/,_=/^\s*\+(?=[\w.])|^\s+|\s+$/g,S=function(e,t,r,n){var i,o=r?t:t.replace(_,"");if(M.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!r&&(o=o.replace(T,function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t}),n&&(i=n,o=o.replace(E,"$1").replace(A,"0.$1")),t!=o))return new H(o,i);if(H.DEBUG)throw Error(s+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},I.absoluteValue=I.abs=function(){var e=new H(this);return e.s<0&&(e.s=1),e},I.comparedTo=function(e,t){return m(this,new H(e,t))},I.decimalPlaces=I.dp=function(e,t){var r,n,i,o=this;if(null!=e)return b(e,0,p),null==t?t=R:b(t,0,8),z(new H(o),e+o.e+1,t);if(!(r=o.c))return null;if(n=((i=r.length-1)-f(this.e/c))*c,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},I.dividedBy=I.div=function(e,t){return r(this,new H(e,t),O,R)},I.dividedToIntegerBy=I.idiv=function(e,t){return r(this,new H(e,t),0,1)},I.exponentiatedBy=I.pow=function(e,t){var r,n,a,l,u,d,h,p,f=this;if((e=new H(e)).c&&!e.isInteger())throw Error(s+"Exponent not an integer: "+Q(e));if(null!=t&&(t=new H(t)),u=e.e>14,!f.c||!f.c[0]||1==f.c[0]&&!f.e&&1==f.c.length||!e.c||!e.c[0])return p=new H(Math.pow(+Q(f),u?e.s*(2-v(e)):+Q(e))),t?p.mod(t):p;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new H(NaN);(n=!d&&f.isInteger()&&t.isInteger())&&(f=f.mod(t))}else{if(e.e>9&&(f.e>0||f.e<-1||(0==f.e?f.c[0]>1||u&&f.c[1]>=24e7:f.c[0]<8e13||u&&f.c[0]<=9999975e7)))return l=f.s<0&&v(e)?-0:0,f.e>-1&&(l=1/l),new H(d?1/l:l);U&&(l=i(U/c+2))}for(u?(r=new H(.5),d&&(e.s=1),h=v(e)):h=(a=Math.abs(+Q(e)))%2,p=new H(N);;){if(h){if(!(p=p.times(f)).c)break;l?p.c.length>l&&(p.c.length=l):n&&(p=p.mod(t))}if(a){if(0===(a=o(a/2)))break;h=a%2}else if(z(e=e.times(r),e.e+1,1),e.e>14)h=v(e);else{if(0===(a=+Q(e)))break;h=a%2}f=f.times(f),l?f.c&&f.c.length>l&&(f.c.length=l):n&&(f=f.mod(t))}return n?p:(d&&(p=N.div(p)),t?p.mod(t):l?z(p,U,R,undefined):p)},I.integerValue=function(e){var t=new H(this);return null==e?e=R:b(e,0,8),z(t,t.e+1,e)},I.isEqualTo=I.eq=function(e,t){return 0===m(this,new H(e,t))},I.isFinite=function(){return!!this.c},I.isGreaterThan=I.gt=function(e,t){return m(this,new H(e,t))>0},I.isGreaterThanOrEqualTo=I.gte=function(e,t){return 1===(t=m(this,new H(e,t)))||0===t},I.isInteger=function(){return!!this.c&&f(this.e/c)>this.c.length-2},I.isLessThan=I.lt=function(e,t){return m(this,new H(e,t))<0},I.isLessThanOrEqualTo=I.lte=function(e,t){return-1===(t=m(this,new H(e,t)))||0===t},I.isNaN=function(){return!this.s},I.isNegative=function(){return this.s<0},I.isPositive=function(){return this.s>0},I.isZero=function(){return!!this.c&&0==this.c[0]},I.minus=function(e,t){var r,n,i,o,s=this,a=s.s;if(t=(e=new H(e,t)).s,!a||!t)return new H(NaN);if(a!=t)return e.s=-t,s.plus(e);var u=s.e/c,d=e.e/c,h=s.c,p=e.c;if(!u||!d){if(!h||!p)return h?(e.s=-t,e):new H(p?s:NaN);if(!h[0]||!p[0])return p[0]?(e.s=-t,e):new H(h[0]?s:3==R?-0:0)}if(u=f(u),d=f(d),h=h.slice(),a=u-d){for((o=a<0)?(a=-a,i=h):(d=u,i=p),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(o=(a=h.length)<(t=p.length))?a:t,a=t=0;t<n;t++)if(h[t]!=p[t]){o=h[t]<p[t];break}if(o&&(i=h,h=p,p=i,e.s=-e.s),(t=(n=p.length)-(r=h.length))>0)for(;t--;h[r++]=0);for(t=l-1;n>a;){if(h[--n]<p[n]){for(r=n;r&&!h[--r];h[r]=t);--h[r],h[n]+=l}h[n]-=p[n]}for(;0==h[0];h.splice(0,1),--d);return h[0]?W(e,h,d):(e.s=3==R?-1:1,e.c=[e.e=0],e)},I.modulo=I.mod=function(e,t){var n,i,o=this;return e=new H(e,t),!o.c||!e.s||e.c&&!e.c[0]?new H(NaN):!e.c||o.c&&!o.c[0]?new H(o):(9==L?(i=e.s,e.s=1,n=r(o,e,0,3),e.s=i,n.s*=i):n=r(o,e,0,L),(e=o.minus(n.times(e))).c[0]||1!=L||(e.s=o.s),e)},I.multipliedBy=I.times=function(e,t){var r,n,i,o,s,a,u,d,p,g,m,b,v,y,w,C=this,S=C.c,k=(e=new H(e,t)).c;if(!(S&&k&&S[0]&&k[0]))return!C.s||!e.s||S&&!S[0]&&!k||k&&!k[0]&&!S?e.c=e.e=e.s=null:(e.s*=C.s,S&&k?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=f(C.e/c)+f(e.e/c),e.s*=C.s,(u=S.length)<(g=k.length)&&(v=S,S=k,k=v,i=u,u=g,g=i),i=u+g,v=[];i--;v.push(0));for(y=l,w=h,i=g;--i>=0;){for(r=0,m=k[i]%w,b=k[i]/w|0,o=i+(s=u);o>i;)r=((d=m*(d=S[--s]%w)+(a=b*d+(p=S[s]/w|0)*m)%w*w+v[o]+r)/y|0)+(a/w|0)+b*p,v[o--]=d%y;v[o]=r}return r?++n:v.splice(0,1),W(e,v,n)},I.negated=function(){var e=new H(this);return e.s=-e.s||null,e},I.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new H(e,t)).s,!i||!t)return new H(NaN);if(i!=t)return e.s=-t,n.minus(e);var o=n.e/c,s=e.e/c,a=n.c,u=e.c;if(!o||!s){if(!a||!u)return new H(i/0);if(!a[0]||!u[0])return u[0]?e:new H(a[0]?n:0*i)}if(o=f(o),s=f(s),a=a.slice(),i=o-s){for(i>0?(s=o,r=u):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=u.length)<0&&(r=u,u=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+u[t]+i)/l|0,a[t]=l===a[t]?0:a[t]%l;return i&&(a=[i].concat(a),++s),W(e,a,s)},I.precision=I.sd=function(e,t){var r,n,i,o=this;if(null!=e&&e!==!!e)return b(e,1,p),null==t?t=R:b(t,0,8),z(new H(o),e,t);if(!(r=o.c))return null;if(n=(i=r.length-1)*c+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&o.e+1>n&&(n=o.e+1),n},I.shiftedBy=function(e){return b(e,-9007199254740991,u),this.times("1e"+e)},I.squareRoot=I.sqrt=function(){var e,t,n,i,o,s=this,a=s.c,l=s.s,c=s.e,u=O+4,d=new H("0.5");if(1!==l||!a||!a[0])return new H(!l||l<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(l=Math.sqrt(+Q(s)))||l==1/0?(((t=g(a)).length+c)%2==0&&(t+="0"),l=Math.sqrt(+t),c=f((c+1)/2)-(c<0||c%2),n=new H(t=l==1/0?"5e"+c:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+c)):n=new H(l+""),n.c[0])for((l=(c=n.e)+u)<3&&(l=0);;)if(o=n,n=d.times(o.plus(r(s,o,u,1))),g(o.c).slice(0,l)===(t=g(n.c)).slice(0,l)){if(n.e<c&&--l,"9999"!=(t=t.slice(l-3,l+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(z(n,n.e+O+2,1),e=!n.times(n).eq(s));break}if(!i&&(z(o,o.e+O+2,0),o.times(o).eq(s))){n=o;break}u+=4,l+=4,i=1}return z(n,n.e+O+1,R,e)},I.toExponential=function(e,t){return null!=e&&(b(e,0,p),e++),V(this,e,t,1)},I.toFixed=function(e,t){return null!=e&&(b(e,0,p),e=e+this.e+1),V(this,e,t)},I.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=$;else if("object"!=typeof r)throw Error(s+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var o,a=n.split("."),l=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",d=a[0],h=a[1],p=i.s<0,f=p?d.slice(1):d,g=f.length;if(c&&(o=l,l=c,c=o,g-=o),l>0&&g>0){for(o=g%l||l,d=f.substr(0,o);o<g;o+=l)d+=u+f.substr(o,l);c>0&&(d+=u+f.slice(o)),p&&(d="-"+d)}n=h?d+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):d}return(r.prefix||"")+n+(r.suffix||"")},I.toFraction=function(e){var t,n,i,o,a,l,u,h,p,f,m,b,v=this,y=v.c;if(null!=e&&(!(u=new H(e)).isInteger()&&(u.c||1!==u.s)||u.lt(N)))throw Error(s+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+Q(u));if(!y)return new H(v);for(t=new H(N),p=n=new H(N),i=h=new H(N),b=g(y),a=t.e=b.length-v.e-1,t.c[0]=d[(l=a%c)<0?c+l:l],e=!e||u.comparedTo(t)>0?a>0?t:p:u,l=x,x=1/0,u=new H(b),h.c[0]=0;f=r(u,t,0,1),1!=(o=n.plus(f.times(i))).comparedTo(e);)n=i,i=o,p=h.plus(f.times(o=p)),h=o,t=u.minus(f.times(o=t)),u=o;return o=r(e.minus(n),i,0,1),h=h.plus(o.times(p)),n=n.plus(o.times(i)),h.s=p.s=v.s,m=r(p,i,a*=2,R).minus(v).abs().comparedTo(r(h,n,a,R).minus(v).abs())<1?[p,i]:[h,n],x=l,m},I.toNumber=function(){return+Q(this)},I.toPrecision=function(e,t){return null!=e&&b(e,1,p),V(this,e,t,2)},I.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=j||i>=F?y(g(r.c),i):w(g(r.c),i,"0"):10===e&&q?t=w(g((r=z(new H(r),O+i+1,R)).c),r.e,"0"):(b(e,2,K.length,"Base"),t=C(w(g(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},I.valueOf=I.toJSON=function(){return Q(this)},I._isBigNumber=!0,null!=t&&H.set(t),H}(),r.default=r.BigNumber=r,"function"==typeof define&&define.amd?define(function(){return r}):void 0!==t&&t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(this)}}},{package:"eth-lattice-keyring>gridplus-sdk>borc>bignumber.js",file:"node_modules/borc/node_modules/bignumber.js/bignumber.js"}],[4078,{"bignumber.js":4077},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("bignumber.js").BigNumber;r.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},r.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},r.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},r.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},r.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},r.SHIFT32=Math.pow(2,32),r.SHIFT16=Math.pow(2,16),r.MAX_SAFE_HIGH=2097151,r.NEG_ONE=new n(-1),r.TEN=new n(10),r.TWO=new n(2),r.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5}}}},{package:"eth-lattice-keyring>gridplus-sdk>borc",file:"node_modules/borc/src/constants.js"}],[4079,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=new e.Uint8Array(r),i=t.pushInt,o=t.pushInt32,s=t.pushInt32Neg,a=t.pushInt64,l=t.pushInt64Neg,c=t.pushFloat,u=t.pushFloatSingle,d=t.pushFloatDouble,h=t.pushTrue,p=t.pushFalse,f=t.pushUndefined,g=t.pushNull,m=t.pushInfinity,b=t.pushInfinityNeg,v=t.pushNaN,y=t.pushNaNNeg,w=t.pushArrayStart,C=t.pushArrayStartFixed,S=t.pushArrayStartFixed32,k=t.pushArrayStartFixed64,P=t.pushObjectStart,T=t.pushObjectStartFixed,E=t.pushObjectStartFixed32,A=t.pushObjectStartFixed64,M=t.pushByteString,_=t.pushByteStringStart,I=t.pushUtf8String,N=t.pushUtf8StringStart,O=t.pushSimpleUnassigned,R=t.pushTagStart,j=t.pushTagStart4,F=t.pushTagStart8,D=(t.pushTagUnassigned,t.pushBreak),x=e.Math.pow,B=0,L=0,U=0;function $(e){return((0|B)+(0|(e|=0))|0)<(0|L)?0:1}function K(e){return n[0|(e|=0)]<<8|n[e+1|0]}function q(e){return n[0|(e|=0)]<<24|n[e+1|0]<<16|n[e+2|0]<<8|n[e+3|0]}function H(e){return i(0|(e|=0)),B=B+1|0,0}function V(e){return i(-1-((e|=0)-32|0)|0),B=B+1|0,0}function G(e){var t,r;return 0|$(0|(r=(e|=0)-64|0))?1:(M(0|(B+1|0),0|(t=(B+1|0)+(0|r)|0)),B=0|t,0)}function W(e){var t,r;return 0|$(0|(r=(e|=0)-96|0))?1:(I(0|(B+1|0),0|(t=(B+1|0)+(0|r)|0)),B=0|t,0)}function z(e){return C((e|=0)-128|0),B=B+1|0,0}function Q(e){var t;return 0|$(0|(t=(e|=0)-160|0))?1:(T(0|t),B=B+1|0,0)}function J(e){return R((e|=0)-192|0),B=B+1|0,0}function Y(e){return R((e|=0)-192|0),B=B+1|0,0}function X(e){return O((0|(e|=0))-224|0),B=B+1|0,0}function Z(e){return 1}var ee=[H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,function(e){return 0|$(1)?1:(i(0|n[B+1|0]),B=B+2|0,0)},function(e){return 0|$(2)?1:(i(0|K(B+1|0)),B=B+3|0,0)},function(e){return 0|$(4)?1:(o(0|K(B+1|0),0|K(B+3|0)),B=B+5|0,0)},function(e){return 0|$(8)?1:(a(0|K(B+1|0),0|K(B+3|0),0|K(B+5|0),0|K(B+7|0)),B=B+9|0,0)},Z,Z,Z,Z,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,function(e){return 0|$(1)?1:(i(-1-(0|n[B+1|0])|0),B=B+2|0,0)},function(e){var t;return 0|$(2)?1:(t=0|K(B+1|0),i(-1-(0|t)|0),B=B+3|0,0)},function(e){return 0|$(4)?1:(s(0|K(B+1|0),0|K(B+3|0)),B=B+5|0,0)},function(e){return 0|$(8)?1:(l(0|K(B+1|0),0|K(B+3|0),0|K(B+5|0),0|K(B+7|0)),B=B+9|0,0)},Z,Z,Z,Z,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,function(e){var t,r,i;return 0|$(1)?1:(i=0|n[B+1|0],t=B+2|0,r=(B+2|0)+(0|i)|0,0|$(i+1|0)?1:(M(0|t,0|r),B=0|r,0))},function(e){var t,r,n;return 0|$(2)?1:(n=0|K(B+1|0),t=B+3|0,r=(B+3|0)+(0|n)|0,0|$(n+2|0)?1:(M(0|t,0|r),B=0|r,0))},function(e){var t,r,n;return 0|$(4)?1:(n=0|q(B+1|0),t=B+5|0,r=(B+5|0)+(0|n)|0,0|$(n+4|0)?1:(M(0|t,0|r),B=0|r,0))},function(e){return 1},Z,Z,Z,function(e){return _(),B=B+1|0,0},W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,function(e){var t,r,i;return 0|$(1)?1:(i=0|n[B+1|0],t=B+2|0,r=(B+2|0)+(0|i)|0,0|$(i+1|0)?1:(I(0|t,0|r),B=0|r,0))},function(e){var t,r,n;return 0|$(2)?1:(n=0|K(B+1|0),t=B+3|0,r=(B+3|0)+(0|n)|0,0|$(n+2|0)?1:(I(0|t,0|r),B=0|r,0))},function(e){var t,r,n;return 0|$(4)?1:(n=0|q(B+1|0),t=B+5|0,r=(B+5|0)+(0|n)|0,0|$(n+4|0)?1:(I(0|t,0|r),B=0|r,0))},function(e){return 1},Z,Z,Z,function(e){return N(),B=B+1|0,0},z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,function(e){return 0|$(1)?1:(C(0|n[B+1|0]),B=B+2|0,0)},function(e){return 0|$(2)?1:(C(0|K(B+1|0)),B=B+3|0,0)},function(e){return 0|$(4)?1:(S(0|K(B+1|0),0|K(B+3|0)),B=B+5|0,0)},function(e){return 0|$(8)?1:(k(0|K(B+1|0),0|K(B+3|0),0|K(B+5|0),0|K(B+7|0)),B=B+9|0,0)},Z,Z,Z,function(e){return w(),B=B+1|0,0},Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,function(e){return 0|$(1)?1:(T(0|n[B+1|0]),B=B+2|0,0)},function(e){return 0|$(2)?1:(T(0|K(B+1|0)),B=B+3|0,0)},function(e){return 0|$(4)?1:(E(0|K(B+1|0),0|K(B+3|0)),B=B+5|0,0)},function(e){return 0|$(8)?1:(A(0|K(B+1|0),0|K(B+3|0),0|K(B+5|0),0|K(B+7|0)),B=B+9|0,0)},Z,Z,Z,function(e){return P(),B=B+1|0,0},J,J,J,J,J,J,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,function(e){return 0|$(1)?1:(R(0|n[B+1|0]),B=B+2|0,0)},function(e){return 0|$(2)?1:(R(0|K(B+1|0)),B=B+3|0,0)},function(e){return 0|$(4)?1:(j(0|K(B+1|0),0|K(B+3|0)),B=B+5|0,0)},function(e){return 0|$(8)?1:(F(0|K(B+1|0),0|K(B+3|0),0|K(B+5|0),0|K(B+7|0)),B=B+9|0,0)},Z,Z,Z,Z,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,function(e){return p(),B=B+1|0,0},function(e){return h(),B=B+1|0,0},function(e){return g(),B=B+1|0,0},function(e){return f(),B=B+1|0,0},function(e){return 0|$(1)?1:(O(0|n[B+1|0]),B=B+2|0,0)},function(e){var t,r,i,o=1;return 0|$(2)?1:(128&(t=0|n[B+1|0])&&(o=-1),i=+((3&t)<<8|(0|n[B+2|0])),0==+(r=+((124&t)>>2))?c(5.960464477539063e-8*+o*+i):31==+r?1==+o?+i>0?v():m():+i>0?y():b():c(+ +o*x(2,+(+r-25))*+(1024+i)),B=B+3|0,0)},function(e){return 0|$(4)?1:(u(0|n[B+1|0],0|n[B+2|0],0|n[B+3|0],0|n[B+4|0]),B=B+5|0,0)},function(e){return 0|$(8)?1:(d(0|n[B+1|0],0|n[B+2|0],0|n[B+3|0],0|n[B+4|0],0|n[B+5|0],0|n[B+6|0],0|n[B+7|0],0|n[B+8|0]),B=B+9|0,0)},Z,Z,Z,function(e){return D(),B=B+1|0,0}];return{parse:function(e){for(B=0,L=e|=0;(0|B)<(0|L)&&!((0|(U=0|ee[255&n[B]](0|n[B])))>0););return 0|U}}}}}},{package:"eth-lattice-keyring>gridplus-sdk>borc",file:"node_modules/borc/src/decoder.asm.js"}],[408,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:34,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=34;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};e.privacyMode||void 0!==t.migratedPrivacyMode||(t.migratedPrivacyMode=!0,e.privacyMode=!0)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/034.js"}],[4080,{"./constants":4078,"./decoder.asm":4079,"./simple":4084,"./tagged":4085,"./utils":4086,"bignumber.js":4077,buffer:4137,ieee754:4675,"iso-url":4708},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{Buffer:n}=e("buffer"),i=e("ieee754"),o=e("bignumber.js").BigNumber,s=e("./decoder.asm"),a=e("./utils"),l=e("./constants"),c=e("./simple"),u=e("./tagged"),{URL:d}=e("iso-url");class h{constructor(e){!(e=e||{}).size||e.size<65536?e.size=65536:e.size=a.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=n.from(this._heap),this._reset(),this._knownTags=Object.assign({0:e=>new Date(e),1:e=>new Date(1e3*e),2:e=>a.arrayBufferToBignumber(e),3:e=>l.NEG_ONE.minus(a.arrayBufferToBignumber(e)),4:e=>l.TEN.pow(e[0]).times(e[1]),5:e=>l.TWO.pow(e[0]).times(e[1]),32:e=>new d(e),35:e=>new RegExp(e)},e.tags),this.parser=s(global,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case l.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case l.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case l.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case l.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case l.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case l.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length))}this._currentParent&&this._currentParent.type===l.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,0===e.length&&this._closeParent())}_push(e,t){const r=this._currentParent;switch(r.values++,r.type){case l.PARENT.ARRAY:case l.PARENT.BYTE_STRING:case l.PARENT.UTF8_STRING:r.length>-1?this._ref[this._ref.length-r.length]=e:this._ref.push(e),this._dec();break;case l.PARENT.OBJECT:null!=r.tmpKey?(this._ref[r.tmpKey]=e,r.tmpKey=null,this._dec()):(r.tmpKey=e,"string"!=typeof r.tmpKey&&(r.type=l.PARENT.MAP,r.ref=a.buildMap(r.ref)));break;case l.PARENT.MAP:null!=r.tmpKey?(this._ref.set(r.tmpKey,e),r.tmpKey=null,this._dec()):r.tmpKey=e;break;case l.PARENT.TAG:this._ref.push(e),t||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,t,r){this._parents[this._depth]={type:t,length:r,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:l.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,t){const r=this._knownTags[e];return r?r(t):new u(e,t)}createMap(e,t){return e}createObject(e,t){return e}createArray(e,t){return e}createByteString(e,t){return n.concat(e)}createByteStringFromHeap(e,t){return e===t?n.alloc(0):n.from(this._heap.slice(e,t))}createInt(e){return e}createInt32(e,t){return a.buildInt32(e,t)}createInt64(e,t,r,n){return a.buildInt64(e,t,r,n)}createFloat(e){return e}createFloatSingle(e,t,r,n){return i.read([e,t,r,n],0,!1,23,4)}createFloatDouble(e,t,r,n,o,s,a,l){return i.read([e,t,r,n,o,s,a,l],0,!1,52,8)}createInt32Neg(e,t){return-1-a.buildInt32(e,t)}createInt64Neg(e,t,r,n){const i=a.buildInt32(e,t),s=a.buildInt32(r,n);return i>l.MAX_SAFE_HIGH?l.NEG_ONE.minus(new o(i).times(l.SHIFT32).plus(s)):-1-(i*l.SHIFT32+s)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){return undefined}createInfinity(){return Infinity}createInfinityNeg(){return-Infinity}createNaN(){return NaN}createNaNNeg(){return-NaN}createUtf8String(e,t){return e.join("")}createUtf8StringFromHeap(e,t){return e===t?"":this._buffer.toString("utf8",e,t)}createSimpleUnassigned(e){return new c(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,t){this._push(this.createInt32(e,t))}pushInt64(e,t,r,n){this._push(this.createInt64(e,t,r,n))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,t,r,n){this._push(this.createFloatSingle(e,t,r,n))}pushFloatDouble(e,t,r,n,i,o,s,a){this._push(this.createFloatDouble(e,t,r,n,i,o,s,a))}pushInt32Neg(e,t){this._push(this.createInt32Neg(e,t))}pushInt64Neg(e,t,r,n){this._push(this.createInt64Neg(e,t,r,n))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],l.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,t){const r=a.buildInt32(e,t);this._createArrayStartFixed(r)}pushArrayStartFixed64(e,t,r,n){const i=a.buildInt64(e,t,r,n);this._createArrayStartFixed(i)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,t){const r=a.buildInt32(e,t);this._createObjectStartFixed(r)}pushObjectStartFixed64(e,t,r,n){const i=a.buildInt64(e,t,r,n);this._createObjectStartFixed(i)}pushByteStringStart(){this._parents[this._depth]={type:l.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,t){this._push(this.createByteStringFromHeap(e,t))}pushUtf8StringStart(){this._parents[this._depth]={type:l.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,t){this._push(this.createUtf8StringFromHeap(e,t))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:l.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,t){this.pushTagStart(a.buildInt32(e,t))}pushTagStart8(e,t,r,n){this.pushTagStart(a.buildInt64(e,t,r,n))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){0!==e?this._createParent({},l.PARENT.OBJECT,e):this._push(this.createObject({}))}_createArrayStartFixed(e){0!==e?this._createParent(new Array(e),l.PARENT.ARRAY,e):this._push(this.createArray([]))}_decode(e){if(0===e.byteLength)throw new Error("Input too short");this._reset(),this._heap8.set(e);const t=this.parser.parse(e.byteLength);if(this._depth>1){for(;0===this._currentParent.length;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(t>0)throw new Error("Failed to parse");if(0===this._res.length)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,t){"string"==typeof e&&(e=n.from(e,t||"hex"));return new h({size:e.length}).decodeFirst(e)}static decodeAll(e,t){"string"==typeof e&&(e=n.from(e,t||"hex"));return new h({size:e.length}).decodeAll(e)}}h.decodeFirst=h.decode,t.exports=h}}},{package:"eth-lattice-keyring>gridplus-sdk>borc",file:"node_modules/borc/src/decoder.js"}],[4081,{"./decoder":4080,"./utils":4086,buffer:4137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{Buffer:n}=e("buffer"),i=e("./decoder"),o=e("./utils");class s extends i{createTag(e,t){return`${e}(${t})`}createInt(e){return super.createInt(e).toString()}createInt32(e,t){return super.createInt32(e,t).toString()}createInt64(e,t,r,n){return super.createInt64(e,t,r,n).toString()}createInt32Neg(e,t){return super.createInt32Neg(e,t).toString()}createInt64Neg(e,t,r,n){return super.createInt64Neg(e,t,r,n).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const t=super.createFloat(e);return o.isNegativeZero(e)?"-0_1":`${t}_1`}createFloatSingle(e,t,r,n){return`${super.createFloatSingle(e,t,r,n)}_2`}createFloatDouble(e,t,r,n,i,o,s,a){return`${super.createFloatDouble(e,t,r,n,i,o,s,a)}_3`}createByteString(e,t){const r=e.join(", ");return-1===t?`(_ ${r})`:`h'${r}`}createByteStringFromHeap(e,t){return`h'${n.from(super.createByteStringFromHeap(e,t)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,t){const r=super.createArray(e,t);return-1===t?`[_ ${r.join(", ")}]`:`[${r.join(", ")}]`}createMap(e,t){const r=super.createMap(e),n=Array.from(r.keys()).reduce(a(r),"");return-1===t?`{_ ${n}}`:`{${n}}`}createObject(e,t){const r=super.createObject(e),n=Object.keys(r).reduce(a(r),"");return-1===t?`{_ ${n}}`:`{${n}}`}createUtf8String(e,t){const r=e.join(", ");return-1===t?`(_ ${r})`:`"${r}"`}createUtf8StringFromHeap(e,t){return`"${n.from(super.createUtf8StringFromHeap(e,t)).toString("utf8")}"`}static diagnose(e,t){"string"==typeof e&&(e=n.from(e,t||"hex"));return(new s).decodeFirst(e)}}function a(e){return(t,r)=>t?`${t}, ${r}: ${e[r]}`:`${r}: ${e[r]}`}t.exports=s}}},{package:"eth-lattice-keyring>gridplus-sdk>borc",file:"node_modules/borc/src/diagnose.js"}],[4082,{"./constants":4078,"./utils":4086,"bignumber.js":4077,buffer:4137,"iso-url":4708},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{Buffer:n}=e("buffer"),{URL:i}=e("iso-url"),o=e("bignumber.js").BigNumber,s=e("./utils"),a=e("./constants"),l=a.MT,c=a.NUMBYTES,u=a.SHIFT32,d=a.SYMS,h=a.TAG,p=a.MT.SIMPLE_FLOAT<<5|a.NUMBYTES.TWO,f=a.MT.SIMPLE_FLOAT<<5|a.NUMBYTES.FOUR,g=a.MT.SIMPLE_FLOAT<<5|a.NUMBYTES.EIGHT,m=a.MT.SIMPLE_FLOAT<<5|a.SIMPLE.TRUE,b=a.MT.SIMPLE_FLOAT<<5|a.SIMPLE.FALSE,v=a.MT.SIMPLE_FLOAT<<5|a.SIMPLE.UNDEFINED,y=a.MT.SIMPLE_FLOAT<<5|a.SIMPLE.NULL,w=new o("0x20000000000000"),C=n.from("f97e00","hex"),S=n.from("f9fc00","hex"),k=n.from("f97c00","hex");class P{constructor(e){e=e||{},this.streaming="function"==typeof e.stream,this.onData=e.stream,this.semanticTypes=[[i,this._pushUrl],[o,this._pushBigNumber]];const t=e.genTypes||[],r=t.length;for(let e=0;e<r;e++)this.addSemanticType(t[e][0],t[e][1]);this._reset()}addSemanticType(e,t){const r=this.semanticTypes.length;for(let n=0;n<r;n++){if(this.semanticTypes[n][0]===e){const e=this.semanticTypes[n][1];return this.semanticTypes[n][1]=t,e}}return this.semanticTypes.push([e,t]),null}push(e){return!e||(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize()),!0)}pushWrite(e,t,r){return this.result[this.offset]=e,this.resultMethod[this.offset]=t,this.resultLength[this.offset]=r,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(C)}_pushInfinity(e){const t=e<0?S:k;return this.push(t)}_pushFloat(e){const t=n.allocUnsafe(2);if(s.writeHalf(t,e)&&s.parseHalf(t)===e)return this._pushUInt8(p)&&this.push(t);const r=n.allocUnsafe(4);return r.writeFloatBE(e,0),r.readFloatBE(0)===e?this._pushUInt8(f)&&this.push(r):this._pushUInt8(g)&&this._pushDoubleBE(e)}_pushInt(e,t,r){const n=t<<5;return e<24?this._pushUInt8(n|e):e<=255?this._pushUInt8(n|c.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(n|c.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(n|c.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(n|c.EIGHT)&&this._pushUInt32BE(Math.floor(e/u))&&this._pushUInt32BE(e%u):t===l.NEG_INT?this._pushFloat(r):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,l.NEG_INT,e):this._pushInt(e,l.POS_INT)}_pushNumber(e){switch(!1){case e==e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!=0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const t=n.byteLength(e,"utf8");return this._pushInt(t,l.UTF8_STRING)&&this.pushWrite(e,5,t)}_pushBoolean(e){return this._pushUInt8(e?m:b)}_pushUndefined(e){return this._pushUInt8(v)}_pushArray(e,t){const r=t.length;if(!e._pushInt(r,l.ARRAY))return!1;for(let n=0;n<r;n++)if(!e.pushAny(t[n]))return!1;return!0}_pushTag(e){return this._pushInt(e,l.TAG)}_pushDate(e,t){return e._pushTag(h.DATE_EPOCH)&&e.pushAny(Math.round(t/1e3))}_pushBuffer(e,t){return e._pushInt(t.length,l.BYTE_STRING)&&e.push(t)}_pushNoFilter(e,t){return e._pushBuffer(e,t.slice())}_pushRegexp(e,t){return e._pushTag(h.REGEXP)&&e.pushAny(t.source)}_pushSet(e,t){if(!e._pushInt(t.size,l.ARRAY))return!1;for(const r of t)if(!e.pushAny(r))return!1;return!0}_pushUrl(e,t){return e._pushTag(h.URI)&&e.pushAny(t.format())}_pushBigint(e){let t=h.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),t=h.NEG_BIGINT);let r=e.toString(16);r.length%2&&(r="0"+r);const i=n.from(r,"hex");return this._pushTag(t)&&this._pushBuffer(this,i)}_pushBigNumber(e,t){if(t.isNaN())return e._pushNaN();if(!t.isFinite())return e._pushInfinity(t.isNegative()?-Infinity:Infinity);if(t.isInteger())return e._pushBigint(t);if(!e._pushTag(h.DECIMAL_FRAC)||!e._pushInt(2,l.ARRAY))return!1;const r=t.decimalPlaces(),n=t.multipliedBy(new o(10).pow(r));return!!e._pushIntNum(-r)&&(n.abs().isLessThan(w)?e._pushIntNum(n.toNumber()):e._pushBigint(n))}_pushMap(e,t){return!!e._pushInt(t.size,l.MAP)&&this._pushRawMap(t.size,Array.from(t))}_pushObject(e){if(!e)return this._pushUInt8(y);for(var t=this.semanticTypes.length,r=0;r<t;r++)if(e instanceof this.semanticTypes[r][0])return this.semanticTypes[r][1].call(e,this,e);var n=e.encodeCBOR;if("function"==typeof n)return n.call(e,this);var i=Object.keys(e),o=i.length;return!!this._pushInt(o,l.MAP)&&this._pushRawMap(o,i.map(t=>[t,e[t]]))}_pushRawMap(e,t){t=t.map(function(e){return e[0]=P.encode(e[0]),e}).sort(s.keySorter);for(var r=0;r<e;r++){if(!this.push(t[r][0]))return!1;if(!this.pushAny(t[r][1]))return!1}return!0}write(e){return this.pushAny(e)}pushAny(e){var t=function(e){return{}.toString.call(e).slice(8,-1)}(e);switch(t){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,n.isBuffer(e)?e:n.from(e));case"Null":return this._pushUInt8(y);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case d.NULL:return this._pushObject(null);case d.UNDEFINED:return this._pushUndefined(undefined);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(0===this.offset)return null;for(var e=this.result,t=this.resultLength,r=this.resultMethod,i=this.offset,o=0,s=0;s<i;s++)o+=t[s];var a=n.allocUnsafe(o),l=0,c=0;for(s=0;s<i;s++){switch(c=t[s],r[s]){case 0:e[s].copy(a,l);break;case 1:a.writeUInt8(e[s],l,!0);break;case 2:a.writeUInt16BE(e[s],l,!0);break;case 3:a.writeUInt32BE(e[s],l,!0);break;case 4:a.writeDoubleBE(e[s],l,!0);break;case 5:a.write(e[s],l,c,"utf8");break;default:throw new Error("unkown method")}l+=c}var u=a;return this._reset(),u}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const t=new P;if(!t.pushAny(e))throw new Error("Failed to encode input");return t.finalize()}}t.exports=P}}},{package:"eth-lattice-keyring>gridplus-sdk>borc",file:"node_modules/borc/src/encoder.js"}],[4083,{"./decoder":4080,"./diagnose":4081,"./encoder":4082,"./simple":4084,"./tagged":4085},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.Diagnose=e("./diagnose"),r.Decoder=e("./decoder"),r.Encoder=e("./encoder"),r.Simple=e("./simple"),r.Tagged=e("./tagged"),r.decodeAll=r.Decoder.decodeAll,r.decodeFirst=r.Decoder.decodeFirst,r.diagnose=r.Diagnose.diagnose,r.encode=r.Encoder.encode,r.decode=r.Decoder.decode,r.leveldb={decode:r.Decoder.decodeAll,encode:r.Encoder.encode,buffer:!0,name:"cbor"}}}},{package:"eth-lattice-keyring>gridplus-sdk>borc",file:"node_modules/borc/src/index.js"}],[4084,{"./constants":4078},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./constants"),i=n.MT,o=n.SIMPLE,s=n.SYMS;class a{constructor(e){if("number"!=typeof e)throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(0|e)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,i.SIMPLE_FLOAT)}static isSimple(e){return e instanceof a}static decode(e,t){switch(null==t&&(t=!0),e){case o.FALSE:return!1;case o.TRUE:return!0;case o.NULL:return t?null:s.NULL;case o.UNDEFINED:return t?undefined:s.UNDEFINED;case-1:if(!t)throw new Error("Invalid BREAK");return s.BREAK;default:return new a(e)}}}t.exports=a}}},{package:"eth-lattice-keyring>gridplus-sdk>borc",file:"node_modules/borc/src/simple.js"}],[4085,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){class n{constructor(e,t,r){if(this.tag=e,this.value=t,this.err=r,"number"!=typeof this.tag)throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(0|this.tag)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var t,r;if("function"!=typeof(r=null!=e?e[this.tag]:undefined)&&"function"!=typeof(r=n["_tag"+this.tag]))return this;try{return r.call(n,this.value)}catch(e){return t=e,this.err=t,this}}}t.exports=n}}},{package:"eth-lattice-keyring>gridplus-sdk>borc",file:"node_modules/borc/src/tagged.js"}],[4086,{"./constants":4078,"bignumber.js":4077,buffer:4137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{Buffer:n}=e("buffer"),i=e("bignumber.js").BigNumber,o=e("./constants"),s=o.SHIFT32,a=o.SHIFT16;function l(e){return e<16?"0"+e.toString(16):e.toString(16)}r.parseHalf=function(e){var t,r,n;return n=128&e[0]?-1:1,t=(124&e[0])>>2,r=(3&e[0])<<8|e[1],t?31===t?n*(r?0/0:Infinity):n*Math.pow(2,t-25)*(1024+r):5.960464477539063e-8*n*r},r.arrayBufferToBignumber=function(e){const t=e.byteLength;let r="";for(let n=0;n<t;n++)r+=l(e[n]);return new i(r,16)},r.buildMap=e=>{const t=new Map,r=Object.keys(e),n=r.length;for(let i=0;i<n;i++)t.set(r[i],e[r[i]]);return t},r.buildInt32=(e,t)=>e*a+t,r.buildInt64=(e,t,n,o)=>{const a=r.buildInt32(e,t),l=r.buildInt32(n,o);return a>2097151?new i(a).times(s).plus(l):a*s+l},r.writeHalf=function(e,t){const r=n.allocUnsafe(4);r.writeFloatBE(t,0);const i=r.readUInt32BE(0);if(8191&i)return!1;var o=i>>16&32768;const s=i>>23&255,a=8388607&i;if(s>=113&&s<=142)o+=(s-112<<10)+(a>>13);else{if(!(s>=103&&s<113))return!1;if(a&(1<<126-s)-1)return!1;o+=a+8388608>>126-s}return e.writeUInt16BE(o,0),!0},r.keySorter=function(e,t){var r=e[0].byteLength,n=t[0].byteLength;return r>n?1:n>r?-1:e[0].compare(t[0])},r.isNegativeZero=e=>0===e&&1/e<0,r.nextPowerOf2=e=>{let t=0;if(e&&!(e&e-1))return e;for(;0!==e;)e>>=1,t+=1;return 1<<t}}}},{package:"eth-lattice-keyring>gridplus-sdk>borc",file:"node_modules/borc/src/utils.js"}],[409,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:35,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=35,t.data=function(e){e.PreferencesController&&e.PreferencesController.seedWords!==undefined&&delete e.PreferencesController.seedWords;return e}(t.data),t}}}}},{package:"$root$",file:"app/scripts/migrations/035.js"}],[41,{"@metamask/message-manager":2368},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EncryptionPublicKeyManagerInit=void 0;var n=e("@metamask/message-manager");r.EncryptionPublicKeyManagerInit=({controllerMessenger:e})=>({persistedStateKey:null,memStateKey:null,controller:new n.EncryptionPublicKeyManager({additionalFinishStatuses:["received"],messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/encryption-public-key-message-manager-init.ts"}],[410,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:36,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=36;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};void 0!==e.privacyMode&&delete e.privacyMode}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/036.js"}],[411,{"@metamask/controller-utils":1494,lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("@metamask/controller-utils");r.default={version:37,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=37;const r=t.data;return t.data=function(e){if(e.AddressBookController){const t=e.AddressBookController.addressBook,r=new Set,n={};Object.values(t).forEach(e=>{r.add(e.chainId)});for(const e of r.values()){n[e]={};for(const r in t)t[r].chainId===e&&(t[r].isEns=!1,(0,i.normalizeEnsName)(t[r].name)&&(t[r].isEns=!0),n[e][r]=t[r])}e.AddressBookController.addressBook=n}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/037.js"}],[412,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:38,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=38;const r=t.data;return t.data=function(e){const{ABTestController:t={}}=e,{abTests:r={}}=t;if(r.fullScreenVsPopup)return e;return{...e,ABTestController:{...t,abTests:{...r,fullScreenVsPopup:"control"}}}}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/038.js"}],[413,{"../../../shared/modules/hexstring-utils":5984,lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/modules/hexstring-utils");const o="SAI";function s(e={}){return e&&"object"==typeof e&&"DAI"===e.symbol&&"0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359"===(0,i.toChecksumHexAddress)(e.address)}r.default={version:39,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=39;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.tokens||[];if(Array.isArray(e))for(const t of e)s(t)&&(t.symbol=o);const r=t.accountTokens||{};if(r&&"object"==typeof r)for(const e of Object.keys(r)){const t=r[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=t[e];if(Array.isArray(r))for(const e of r)s(e)&&(e.symbol=o)}}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/039.js"}],[414,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:40,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=40;const r=t.data;return t.data=function(e){return delete e.ProviderApprovalController,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/040.js"}],[4143,{buffer:4137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){var r=Object.prototype.toString,n=void 0!==e&&"function"==typeof e.alloc&&"function"==typeof e.allocUnsafe&&"function"==typeof e.from;t.exports=function(t,i,o){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return s=t,"ArrayBuffer"===r.call(s).slice(8,-1)?function(t,r,i){r>>>=0;var o=t.byteLength-r;if(o<0)throw new RangeError("'offset' is out of bounds");if(i===undefined)i=o;else if((i>>>=0)>o)throw new RangeError("'length' is out of bounds");return n?e.from(t.slice(r,r+i)):new e(new Uint8Array(t.slice(r,r+i)))}(t,i,o):"string"==typeof t?function(t,r){if("string"==typeof r&&""!==r||(r="utf8"),!e.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');return n?e.from(t,r):new e(t,r)}(t,i):n?e.from(t):new e(t);var s}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"terser>source-map-support>buffer-from",file:"node_modules/buffer-from/index.js"}],[415,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:41,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=41;const r=t.data;return t.data=function(e){e.PreferencesController&&e.PreferencesController.preferences&&(e.PreferencesController.preferences.autoLockTimeLimit=e.PreferencesController.preferences.autoLogoutTimeLimit,delete e.PreferencesController.preferences.autoLogoutTimeLimit);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/041.js"}],[416,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:42,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=42;const r=t.data;return t.data=function(e){e.AppStateController?e.AppStateController.connectedStatusPopoverHasBeenShown=!1:e.AppStateController={connectedStatusPopoverHasBeenShown:!1};return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/042.js"}],[4164,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/cids/node_modules/uint8arrays/concat.js"}],[4165,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/cids/node_modules/uint8arrays/equals.js"}],[4166,{multibase:5054},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{encoding:n}=e("multibase"),i=new TextDecoder("utf8");t.exports=function(e,t="utf8"){return"utf8"===t||"utf-8"===t?i.decode(e):"ascii"===t?function(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}(e):n(t).encode(e)}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/cids/node_modules/uint8arrays/to-string.js"}],[4167,{multihashes:5099},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("multihashes"),i={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!(e.multihash instanceof Uint8Array))return"multihash must be a Uint8Array";try{n.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}};t.exports=i}}},{package:"@ensdomains/content-hash>cids",file:"node_modules/cids/src/cid-util.js"}],[4168,{"./cid-util":4167,multibase:5054,multicodec:5064,multihashes:5099,"uint8arrays/concat":4164,"uint8arrays/equals":4165,"uint8arrays/to-string":4166},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("multihashes"),i=e("multibase"),o=e("multicodec"),s=e("./cid-util"),a=e("uint8arrays/concat"),l=e("uint8arrays/to-string"),c=e("uint8arrays/equals"),u=o.nameToCode,d=Object.keys(u).reduce((e,t)=>(e[u[t]]=t,e),{}),h=Symbol.for("@ipld/js-cid/CID");class p{constructor(e,t,r,s){if(this.version,this.codec,this.multihash,Object.defineProperty(this,h,{value:!0}),p.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=t.multihash,void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=i.isEncoded(e);if(t){const r=i.decode(e);this.version=parseInt(r[0].toString(),16),this.codec=o.getCodec(r.slice(1)),this.multihash=o.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=n.fromB58String(e),this.multibaseName="base58btc";return p.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(e instanceof Uint8Array){const t=parseInt(e[0].toString(),16);if(1===t){const r=e;this.version=t,this.codec=o.getCodec(r.slice(1)),this.multihash=o.rmPrefix(r.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";return void p.validateCID(this)}this.version=e,"number"==typeof t&&(t=d[t]),this.codec=t,this.multihash=r,this.multibaseName=s||(0===e?"base58btc":"base32"),p.validateCID(this)}get bytes(){let e=this._bytes;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");{const t=o.getCodeVarint(this.codec);e=a([[1],t,this.multihash],1+t.byteLength+this.multihash.byteLength)}}Object.defineProperty(this,"_bytes",{value:e})}return e}get prefix(){const e=o.getCodeVarint(this.codec),t=n.prefix(this.multihash);return a([[this.version],e,t],1+e.byteLength+t.byteLength)}get code(){return u[this.codec]}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=n.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new p(0,this.codec,this.multihash)}toV1(){return new p(1,this.codec,this.multihash,this.multibaseName)}toBaseEncodedString(e=this.multibaseName){if(this.string&&0!==this.string.length&&e===this.multibaseName)return this.string;let t;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=n.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=l(i.encode(e,this.bytes))}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&c(this.multihash,e.multihash)}static validateCID(e){const t=s.checkCIDComponents(e);if(t)throw new Error(t)}static isCID(e){return e instanceof p||Boolean(e&&e[h])}}p.codecs=u,t.exports=p}}},{package:"@ensdomains/content-hash>cids",file:"node_modules/cids/src/index.js"}],[417,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:43,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=43;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.PreferencesController)&&void 0!==t&&t.currentAccountTab&&delete e.PreferencesController.currentAccountTab;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/043.js"}],[418,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:44,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=44;const r=t.data;return t.data=function(e){var t;void 0!==(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.mkrMigrationReminderTimestamp)&&delete e.AppStateController.mkrMigrationReminderTimestamp;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/044.js"}],[419,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:45,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=45;const r=t.data;return t.data=function(e){var t;i.includes(null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.ipfsGateway)&&(e.PreferencesController.ipfsGateway="dweb.link");return e}(r),t}};const i=["ipfs.io","ipfs.dweb.link"]}}},{package:"$root$",file:"app/scripts/migrations/045.js"}],[42,{"@metamask/ens-controller":1899},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EnsControllerInit=void 0;var n=e("@metamask/ens-controller");r.EnsControllerInit=({controllerMessenger:e,initMessenger:t})=>({persistedStateKey:null,controller:new n.EnsController({messenger:e,onNetworkDidChange:e=>t.subscribe("NetworkController:networkDidChange",e)})})}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/ens-controller-init.ts"}],[420,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:46,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=46;const r=t.data;return t.data=function(e){void 0!==(null==e?void 0:e.ABTestController)&&delete e.ABTestController;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/046.js"}],[4207,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;n=function(e){e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),r=0;256!=r;++r)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=r)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[r]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}();e.table=t,e.bstr=function(e,r){for(var n=-1^r,i=e.length-1,o=0;o<i;)n=(n=n>>>8^t[255&(n^e.charCodeAt(o++))])>>>8^t[255&(n^e.charCodeAt(o++))];return o===i&&(n=n>>>8^t[255&(n^e.charCodeAt(o))]),-1^n},e.buf=function(e,r){if(e.length>1e4)return function(e,r){for(var n=-1^r,i=e.length-7,o=0;o<i;)n=(n=(n=(n=(n=(n=(n=(n=n>>>8^t[255&(n^e[o++])])>>>8^t[255&(n^e[o++])])>>>8^t[255&(n^e[o++])])>>>8^t[255&(n^e[o++])])>>>8^t[255&(n^e[o++])])>>>8^t[255&(n^e[o++])])>>>8^t[255&(n^e[o++])])>>>8^t[255&(n^e[o++])];for(;o<i+7;)n=n>>>8^t[255&(n^e[o++])];return-1^n}(e,r);for(var n=-1^r,i=e.length-3,o=0;o<i;)n=(n=(n=(n=n>>>8^t[255&(n^e[o++])])>>>8^t[255&(n^e[o++])])>>>8^t[255&(n^e[o++])])>>>8^t[255&(n^e[o++])];for(;o<i+3;)n=n>>>8^t[255&(n^e[o++])];return-1^n},e.str=function(e,r){for(var n,i,o=-1^r,s=0,a=e.length;s<a;)(n=e.charCodeAt(s++))<128?o=o>>>8^t[255&(o^n)]:n<2048?o=(o=o>>>8^t[255&(o^(192|n>>6&31))])>>>8^t[255&(o^(128|63&n))]:n>=55296&&n<57344?(n=64+(1023&n),i=1023&e.charCodeAt(s++),o=(o=(o=(o=o>>>8^t[255&(o^(240|n>>8&7))])>>>8^t[255&(o^(128|n>>2&63))])>>>8^t[255&(o^(128|i>>6&15|(3&n)<<4))])>>>8^t[255&(o^(128|63&i))]):o=(o=(o=o>>>8^t[255&(o^(224|n>>12&15))])>>>8^t[255&(o^(128|n>>6&63))])>>>8^t[255&(o^(128|63&n))];return-1^o}},"undefined"==typeof DO_NOT_EXPORT_CRC?"object"==typeof r?n(r):"function"==typeof define&&define.amd?define(function(){var e={};return n(e),e}):n({}):n({})}}},{package:"eth-lattice-keyring>gridplus-sdk>crc-32",file:"node_modules/crc-32/crc32.js"}],[421,{lodash:4901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:47,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=47;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;Array.isArray(r)&&r.forEach(e=>{"number"==typeof e.metamaskNetworkId&&(e.metamaskNetworkId=e.metamaskNetworkId.toString())});return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/047.js"}]],[],{});